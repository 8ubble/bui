define("bui/menu",["bui/common","bui/menu/menu","bui/menu/menuitem","bui/memu/contextmenu","bui/menu/popmenu","bui/menu/sidemenu"],function(require){var e=require("bui/common"),n=e.namespace("Menu");return e.mix(n,{Menu:require("bui/menu/menu"),MenuItem:require("bui/menu/menuitem"),ContextMenu:require("bui/memu/contextmenu"),PopMenu:require("bui/menu/popmenu"),SideMenu:require("bui/menu/sidemenu")}),n.ContextMenuItem=n.ContextMenu.Item,n}),define("bui/menu/menuitem",["bui/common"],function(require){var e=require("bui/common"),n=e.Component,t=n.UIBase,u=(e.prefix,"x-caret"),i="data-id",a=n.View.extend([t.ListItemView,t.CollapsableView],{_uiSetOpen:function(e){var n=this,t=n.getStatusCls("open");e?n.get("el").addClass(t):n.get("el").removeClass(t)}},{ATTRS:{}},{xclass:"menu-item-view"}),l=n.Controller.extend([t.ListItem,t.Collapsable],{renderUI:function(){var n=this,t=n.get("el"),u=n.get("id");u||(u=e.guid("menu-item"),n.set("id",u)),t.attr(i,u)},handleMouseEnter:function(e){this.get("subMenu")&&this.get("openable")&&this.set("open",!0),l.superclass.handleMouseEnter.call(this,e)},handleMouseLeave:function(e){if(this.get("openable")){var n=this,t=n.get("subMenu"),u=e.toElement||e.relatedTarget;u&&t&&t.containsElement(u)?n.set("open",!0):n.set("open",!1)}l.superclass.handleMouseLeave.call(this,e)},containsElement:function(e){var n,t=this,u=l.superclass.containsElement.call(t,e);return u||(n=t.get("subMenu"),u=n&&n.containsElement(e)),u},_uiSetOpen:function(e){if(this.get("openable")){var n=this,t=n.get("subMenu"),u=n.get("subMenuAlign");if(t)if(e)u.node=n.get("el"),t.set("align",u),t.show();else{var i=t.get("align");i&&i.node!=n.get("el")||t.hide()}}},_uiSetSubMenu:function(e){if(e){var n=this,t=n.get("el"),u=n.get("parent");e.get("parentMenu")||(e.set("parentMenu",u),u.get("autoHide")&&("click"==u.get("autoHideType")?e.set("autoHide",!1):e.set("autoHideType","leave"))),$(n.get("arrowTpl")).appendTo(t)}},destructor:function(){var e=this,n=e.get("subMenu");n&&n.destroy()}},{ATTRS:{elTagName:{value:"li"},xview:{value:a},open:{view:!0,value:!1},openable:{value:!0},subMenu:{view:!0},subMenuAlign:{valueFn:function(){return{points:["tr","tl"],offset:[-5,0]}}},arrowTpl:{value:'<span class="'+u+" "+u+'-left"></span>'},events:{value:{afterOpenChange:!0}},subMenuType:{value:"pop-menu"}},PARSER:{subMenu:function(n){var t,u=n.find("ul"),i=this.get("subMenuType");return u&&u.length&&(t=e.Component.create({srcNode:u,xclass:i}),"pop-menu"==i?(u.appendTo("body"),t.setInternal({autoHide:!0,autoHideType:"leave"})):this.get("children").push(t)),t}}},{xclass:"menu-item",priority:0}),s=l.extend({},{ATTRS:{focusable:{value:!1},selectable:{value:!1},handleMouseEvents:{value:!1}}},{xclass:"menu-item-sparator"});return l.View=a,l.Separator=s,l}),define("bui/menu/menu",["bui/common"],function(require){var e=require("bui/common"),n=e.Component,t=n.UIBase,u=n.Controller.extend([t.ChildList],{bindUI:function(){var n=this;n.on("click",function(e){var t=e.target,u=n.get("multipleSelect");n!=t&&(u||!n.get("clickHide")||t.get("subMenu")||n.getTopAutoHideMenu().hide())}),n.on("afterOpenChange",function(t){var u=t.target,i=t.newVal,a=n.get("children");i&&e.each(a,function(e){e!==u&&e.get("open")&&e.set("open",!1)})}),n.on("afterVisibleChange",function(e){e.newVal,n.get("parentMenu");n._clearOpen()})},getTopAutoHideMenu:function(){var e=this,n=e.get("parentMenu");return n&&n.get("autoHide")?n.getTopAutoHideMenu():e.get("autoHide")?e:null},_clearOpen:function(){var n=this,t=n.get("children");e.each(t,function(e){e.set&&e.set("open",!1)})},findItemById:function(e){return this.findItemByField("id",e)},_uiSetSelectedItem:function(e){e&&_self.setSelected(e)}},{ATTRS:{elTagName:{view:!0,value:"ul"},idField:{value:"id"},isDecorateChild:{value:!0},defaultChildClass:{value:"menu-item"},selectedItem:{},parentMenu:{}}},{xclass:"menu",priority:0});return u}),define("bui/menu/popmenu",["bui/common","bui/menu/menu"],function(require){var e=require("bui/common"),n=e.Component.UIBase,t=require("bui/menu/menu"),u=e.Component.View.extend([n.PositionView],{}),i=t.extend([n.Position,n.Align,n.AutoShow,n.AutoHide],{},{ATTRS:{clickHide:{value:!0},align:{value:{points:["bl","tl"],offset:[0,0]}},visibleMode:{value:"visibility"},autoHide:{value:!0},visible:{value:!1},xview:{value:u}}},{xclass:"pop-menu"});return i}),define("bui/memu/contextmenu",["bui/common","bui/menu/menuitem","bui/menu/popmenu"],function(require){var e=require("bui/common"),n=require("bui/menu/menuitem"),t=require("bui/menu/popmenu"),u=e.prefix,i=u+"menu-item-link",a=u+"menu-item-icon",l=e.Component,s=(l.UIBase,n.extend({bindUI:function(){var e=this;e.get("el").delegate("."+i,"click",function(e){e.preventDefault()})},_uiSetIconCls:function(e,n){var t=this,u=n.prevVal,i=t.get("el").find("."+a);i.removeClass(u),i.addClass(e)}},{ATTRS:{text:{veiw:!0,value:""},iconCls:{sync:!1,value:""},tpl:{value:'<a class="'+i+'" href="#">        <span class="'+a+' {iconCls}"></span><span class="'+u+'menu-item-text">{text}</span></a>'}}},{xclass:"context-menu-item"})),o=t.extend({},{ATTRS:{defaultChildClass:{value:"context-menu-item"},align:{value:null}}},{xclass:"context-menu"});return o.Item=s,o}),define("bui/menu/sidemenu",["bui/common","bui/menu/menu"],function(require){var e=require("bui/common"),n=require("bui/menu/menu"),t=(e.Component,e.prefix+"menu-title"),u="menu-leaf",i=n.extend({initializer:function(){var n=this,t=n.get("items"),u=n.get("children");e.each(t,function(e){var t=n._initMenuCfg(e);u.push(t)})},bindUI:function(){var n=this,t=n.get("children");e.each(t,function(e){var n=e.get("children")[0];n&&n.publish("click",{bubbles:1})}),n.get("el").delegate("a","click",function(e){e.preventDefault()}),n.on("itemclick",function(e){var t=e.item,i=$(e.domTarget).closest("."+n.get("collapsedCls"));if(i.length){var a=t.get("collapsed");t.set("collapsed",!a)}else t.get("el").hasClass(u)&&(n.fire("menuclick",{item:t}),n.clearSelection(),n.setSelected(t))})},getItems:function(){var n=this,t=[],u=n.get("children");return e.each(u,function(e){var n=e.get("children")[0];t=t.concat(n.get("children"))}),t},_initMenuCfg:function(n){var t=this,u=n.items,i=[],a={selectable:!1,children:[{xclass:"menu",children:i}]};return e.mix(a,{xclass:"menu-item",elCls:"menu-second"},n),e.each(u,function(e){var n=t._initSubMenuCfg(e);i.push(n)}),a},_initSubMenuCfg:function(n){var t=this,u={xclass:"menu-item",elCls:"menu-leaf",tpl:t.get("subMenuItemTpl")};return e.mix(u,n)}},{ATTRS:{defaultChildCfg:{value:{subMenuType:"menu",openable:!1,arrowTpl:""}},autoInitItems:{value:!1},itemTpl:{value:'<div class="'+t+'"><s></s><span class="'+t+'-text">{text}</span></div>'},subMenuItemTpl:{value:'<a href="{href}"><em>{text}</em></a>'},collapsedCls:{value:t},events:{value:{menuclick:!1}}}},{xclass:"side-menu"});return i});