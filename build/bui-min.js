!function(e,t){function n(e){return function(t){return{}.toString.call(t)=="[object "+e+"]"}}function i(){return w++}function r(e){return e.match(E)[0]}function o(e){for(e=e.replace(U,"/");e.match(A);)e=e.replace(A,"/");return e=e.replace(R,"$1/")}function a(e){var t=e.length-1,n=e.charAt(t);return"#"===n?e.substring(0,t):".js"===e.substring(t-2)||e.indexOf("?")>0||".css"===e.substring(t-3)||"/"===n?e:e+".js"}function s(e){var t=I.alias;return t&&T(t[e])?t[e]:e}function u(e){var t,n=I.paths;return n&&(t=e.match(D))&&T(n[t[1]])&&(e=n[t[1]]+t[2]),e}function l(e){var t=I.vars;return t&&e.indexOf("{")>-1&&(e=e.replace(j,function(e,n){return T(t[n])?t[n]:e})),e}function c(e){var t=I.map,n=e;if(t)for(var i=0,r=t.length;r>i;i++){var o=t[i];if(n=S(o)?o(e)||e:e.replace(o[0],o[1]),n!==e)break}return n}function d(e,t){var n,i=e.charAt(0);if(F.test(e))n=e;else if("."===i)n=o((t?r(t):I.cwd)+e);else if("/"===i){var a=I.cwd.match(V);n=a?a[0]+e.substring(1):e}else n=I.base+e;return 0===n.indexOf("//")&&(n=location.protocol+n),n}function f(e,t){if(!e)return"";e=s(e),e=u(e),e=l(e),e=a(e);var n=d(e,t);return n=c(n)}function m(e){return e.hasAttribute?e.src:e.getAttribute("src",4)}function g(e,t,n){var i=X.test(e),r=M.createElement(i?"link":"script");if(n){var o=S(n)?n(e):n;o&&(r.charset=o)}h(r,t,i,e),i?(r.rel="stylesheet",r.href=e):(r.async=!0,r.src=e),O=r,z?W.insertBefore(r,z):W.appendChild(r),O=null}function h(e,t,n,i){function r(){e.onload=e.onerror=e.onreadystatechange=null,n||I.debug||W.removeChild(e),e=null,t()}var o="onload"in e;return!n||!Y&&o?void(o?(e.onload=r,e.onerror=function(){B("error",{uri:i,node:e}),r()}):e.onreadystatechange=function(){/loaded|complete/.test(e.readyState)&&r()}):void setTimeout(function(){v(e,t)},1)}function v(e,t){var n,i=e.sheet;if(Y)i&&(n=!0);else if(i)try{i.cssRules&&(n=!0)}catch(r){"NS_ERROR_DOM_SECURITY_ERR"===r.name&&(n=!0)}setTimeout(function(){n?t():v(e,t)},20)}function p(){if(O)return O;if(H&&"interactive"===H.readyState)return H;for(var e=W.getElementsByTagName("script"),t=e.length-1;t>=0;t--){var n=e[t];if("interactive"===n.readyState)return H=n}}function b(e){var t=[];return e.replace(G,"").replace(J,function(e,n,i){i&&t.push(i)}),t}function y(e,t){this.uri=e,this.dependencies=t||[],this.exports=null,this.status=0,this._waitings={},this._remain=0}if(!e.seajs){var x=e.seajs={version:"2.2.1"},I=x.data={},C=n("Object"),T=n("String"),_=Array.isArray||n("Array"),S=n("Function"),w=0,k=I.events={};x.on=function(e,t){var n=k[e]||(k[e]=[]);return n.push(t),x},x.off=function(e,t){if(!e&&!t)return k=I.events={},x;var n=k[e];if(n)if(t)for(var i=n.length-1;i>=0;i--)n[i]===t&&n.splice(i,1);else delete k[e];return x};var B=x.emit=function(e,t){var n,i=k[e];if(i)for(i=i.slice();n=i.shift();)n(t);return x},E=/[^?#]*\//,U=/\/\.\//g,A=/\/[^/]+\/\.\.\//,R=/([^:/])\/\//g,D=/^([^/:]+)(\/.+)$/,j=/{([^{]+)}/g,F=/^\/\/.|:\//,V=/^.*?\/\/.*?\//,M=document,P=r(M.URL),N=M.scripts,q=M.getElementById("seajsnode")||N[N.length-1],L=r(m(q)||P);x.resolve=f;var O,H,W=M.head||M.getElementsByTagName("head")[0]||M.documentElement,z=W.getElementsByTagName("base")[0],X=/\.css(?:\?|$)/i,Y=+navigator.userAgent.replace(/.*(?:AppleWebKit|AndroidWebKit)\/(\d+).*/,"$1")<536;x.request=g;var K,J=/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|\/\*[\S\s]*?\*\/|\/(?:\\\/|[^\/\r\n])+\/(?=[^\/])|\/\/.*|\.\s*require|(?:^|[^$])\brequire\s*\(\s*(["'])(.+?)\1\s*\)/g,G=/\\\\/g,$=x.cache={},Z={},Q={},et={},tt=y.STATUS={FETCHING:1,SAVED:2,LOADING:3,LOADED:4,EXECUTING:5,EXECUTED:6};y.prototype.resolve=function(){for(var e=this,t=e.dependencies,n=[],i=0,r=t.length;r>i;i++)n[i]=y.resolve(t[i],e.uri);return n},y.prototype.load=function(){var e=this;if(!(e.status>=tt.LOADING)){e.status=tt.LOADING;var t=e.resolve();B("load",t);for(var n,i=e._remain=t.length,r=0;i>r;r++)n=y.get(t[r]),n.status<tt.LOADED?n._waitings[e.uri]=(n._waitings[e.uri]||0)+1:e._remain--;if(0===e._remain)return void e.onload();var o={};for(r=0;i>r;r++)n=$[t[r]],n.status<tt.FETCHING?n.fetch(o):n.status===tt.SAVED&&n.load();for(var a in o)o.hasOwnProperty(a)&&o[a]()}},y.prototype.onload=function(){var e=this;e.status=tt.LOADED,e.callback&&e.callback();var t,n,i=e._waitings;for(t in i)i.hasOwnProperty(t)&&(n=$[t],n._remain-=i[t],0===n._remain&&n.onload());delete e._waitings,delete e._remain},y.prototype.fetch=function(e){function t(){x.request(o.requestUri,o.onRequest,o.charset)}function n(){delete Z[a],Q[a]=!0,K&&(y.save(r,K),K=null);var e,t=et[a];for(delete et[a];e=t.shift();)e.load()}var i=this,r=i.uri;i.status=tt.FETCHING;var o={uri:r};B("fetch",o);var a=o.requestUri||r;return!a||Q[a]?void i.load():Z[a]?void et[a].push(i):(Z[a]=!0,et[a]=[i],B("request",o={uri:r,requestUri:a,onRequest:n,charset:I.charset}),void(o.requested||(e?e[o.requestUri]=t:t())))},y.prototype.exec=function(){function e(t){return y.get(e.resolve(t)).exec()}var n=this;if(n.status>=tt.EXECUTING)return n.exports;n.status=tt.EXECUTING;var r=n.uri;e.resolve=function(e){return y.resolve(e,r)},e.async=function(t,n){return y.use(t,n,r+"_async_"+i()),e};var o=n.factory,a=S(o)?o(e,n.exports={},n):o;return a===t&&(a=n.exports),delete n.factory,n.exports=a,n.status=tt.EXECUTED,B("exec",n),a},y.resolve=function(e,t){var n={id:e,refUri:t};return B("resolve",n),n.uri||x.resolve(n.id,t)},y.define=function(e,n,i){var r=arguments.length;1===r?(i=e,e=t):2===r&&(i=n,_(e)?(n=e,e=t):n=t),!_(n)&&S(i)&&(n=b(i.toString()));var o={id:e,uri:y.resolve(e),deps:n,factory:i};if(!o.uri&&M.attachEvent){var a=p();a&&(o.uri=a.src)}B("define",o),o.uri?y.save(o.uri,o):K=o},y.save=function(e,t){var n=y.get(e);n.status<tt.SAVED&&(n.id=t.id||e,n.dependencies=t.deps||[],n.factory=t.factory,n.status=tt.SAVED)},y.get=function(e,t){return $[e]||($[e]=new y(e,t))},y.use=function(t,n,i){var r=y.get(i,_(t)?t:[t]);r.callback=function(){for(var t=[],i=r.resolve(),o=0,a=i.length;a>o;o++)t[o]=$[i[o]].exec();n&&n.apply(e,t),delete r.callback},r.load()},y.preload=function(e){var t=I.preload,n=t.length;n?y.use(t,function(){t.splice(0,n),y.preload(e)},I.cwd+"_preload_"+i()):e()},x.use=function(e,t){return y.preload(function(){y.use(e,t,I.cwd+"_use_"+i())}),x},y.define.cmd={},e.define=y.define,x.Module=y,I.fetchedList=Q,I.cid=i,x.require=function(e){var t=y.get(y.resolve(e));return t.status<tt.EXECUTING&&(t.onload(),t.exec()),t.exports};var nt=/^(.+?\/)(\?\?)?(seajs\/)+/;I.base=(L.match(nt)||["",L])[1],I.dir=L,I.cwd=P,I.charset="utf-8",I.preload=function(){var e=[],t=location.search.replace(/(seajs-\w+)(&|$)/g,"$1=1$2");return t+=" "+M.cookie,t.replace(/(seajs-\w+)=1/g,function(t,n){e.push(n)}),e}(),x.config=function(e){for(var t in e){var n=e[t],i=I[t];if(i&&C(i))for(var r in n)i[r]=n[r];else _(i)?n=i.concat(n):"base"===t&&("/"!==n.slice(-1)&&(n+="/"),n=d(n)),I[t]=n}return B("config",e),x}}}(this),function(){var e,t;!function(n,i){function r(e){return function(t){return{}.toString.call(t)=="[object "+e+"]"}}function o(){}var a=r("Function"),s={};o.prototype.exec=function(){function e(e){return o.get(e).exec()}var t=this;if(this.execed)return t.exports;this.execed=!0;var n=t.factory,r=a(n)?n(e,t.exports={},t):n;return r===i&&(r=t.exports),delete t.factory,t.exports=r,r},e=function(e,t,n){var i={id:e,deps:t,factory:n};o.save(i)},o.save=function(e){var t=o.get(e.id);t.id=e.id,t.dependencies=e.deps,t.factory=e.factory},o.get=function(e){return s[e]||(s[e]=new o)},t=function(e){var t=o.get(e);return t.execed||t.exec(),t.exports}}(this),e("bui/config",[],function(){function e(e){return e.hasAttribute?e.src:e.getAttribute("src",4)}var t=window.BUI=window.BUI||{};t.use=seajs.use,t.config=seajs.config;var n=document.getElementsByTagName("script"),i=n[n.length-1],r=e(i),o=r.substring(0,r.lastIndexOf("/")),a="true"===i.getAttribute("data")?!0:!1;t.loaderScript=i,seajs.config({paths:{bui:o}}),t.setDebug=function(e){if(t.debug=e,!e){var n=new RegExp("^("+o+"\\S*).js$");seajs.config({map:[[n,"$1-min.js"]]})}},t.setDebug(a),window.jQuery&&window.define("jquery",[],function(){return window.jQuery})}),t("bui/config")}(),define("bui/common",["bui/common/util","bui/common/ua","bui/common/json","bui/common/date","bui/common/array","bui/common/keycode","bui/common/observable","bui/common/base","bui/common/component/component","jquery","bui/common/component/manage","bui/common/component/uibase/uibase","bui/common/component/view","bui/common/component/controller","bui/common/component/uibase/base","bui/common/component/uibase/align","bui/common/component/uibase/autoshow","bui/common/component/uibase/autohide","bui/common/component/uibase/close","bui/common/component/uibase/collapsable","bui/common/component/uibase/drag","bui/common/component/uibase/keynav","bui/common/component/uibase/list","bui/common/component/uibase/listitem","bui/common/component/uibase/mask","bui/common/component/uibase/position","bui/common/component/uibase/selection","bui/common/component/uibase/stdmod","bui/common/component/uibase/decorate","bui/common/component/uibase/tpl","bui/common/component/uibase/childcfg","bui/common/component/uibase/bindable","bui/common/component/uibase/depends","bui/common/component/loader"],function(e,t,n){var i=e("bui/common/util");i.mix(i,{UA:e("bui/common/ua"),JSON:e("bui/common/json"),Date:e("bui/common/date"),Array:e("bui/common/array"),KeyCode:e("bui/common/keycode"),Observable:e("bui/common/observable"),Base:e("bui/common/base"),Component:e("bui/common/component/component")}),n.exports=i}),define("bui/common/util",["jquery"],function(e,t,n){function i(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=e[n]||{},r(e[n],t[n]))}function r(e,t){for(var n in t)t.hasOwnProperty(n)&&("value"==n?BUI.isObject(t[n])?(e[n]=e[n]||{},BUI.mix(e[n],t[n])):BUI.isArray(t[n])?(e[n]=e[n]||[],e[n]=e[n].concat(t[n])):e[n]=t[n]:e[n]=t[n])}var o=e("jquery");!function(e){e.fn&&(e.fn.on=e.fn.on||e.fn.bind,e.fn.off=e.fn.off||e.fn.unbind)}(o);var a=window,s=document,u=Object.prototype,l=u.toString,c="body",d="documentElement",f="scroll",m=f+"Width",g=f+"Height",h="ATTRS",v="PARSER",p="guid";window.BUI=window.BUI||{},o.extend(BUI,{version:"1.1.0",isFunction:function(e){return"function"==typeof e},isArray:"isArray"in Array?Array.isArray:function(e){return"[object Array]"===l.call(e)},isDate:function(e){return"[object Date]"===l.call(e)},isObject:"[object Object]"===l.call(null)?function(e){return null!==e&&void 0!==e&&"[object Object]"===l.call(e)&&void 0===e.ownerDocument}:function(e){return"[object Object]"===l.call(e)},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},augment:function(e){if(!BUI.isFunction(e))return e;for(var t=1;t<arguments.length;t++)BUI.mix(e.prototype,arguments[t].prototype||arguments[t]);return e},cloneObject:function(e){var t=BUI.isArray(e)?[]:{};return BUI.mix(!0,t,e)},error:function(e){if(BUI.debug)throw e},extend:function(e,t,n,i){BUI.isFunction(t)||(n=t,t=e,e=function(){});var r=Object.create?function(e,t){return Object.create(e,{constructor:{value:t}})}:function(e,t){function n(){}n.prototype=e;var i=new n;return i.constructor=t,i},o=r(t.prototype,e);return e.prototype=BUI.mix(o,e.prototype),e.superclass=r(t.prototype,t),BUI.mix(o,n),BUI.mix(e,i),e},guid:function(){var e={};return function(t){return t=t||BUI.prefix+p,e[t]?e[t]+=1:e[t]=1,t+e[t]}}(),isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isBoolean:function(e){return"boolean"==typeof e},log:function(e){BUI.debug&&a.console&&a.console.log&&a.console.log(e)},merge:function(){var e=o.makeArray(arguments),t=e[0];return BUI.isBoolean(t)?(e.shift(),e.unshift({}),e.unshift(t)):e.unshift({}),BUI.mix.apply(null,e)},mix:function(){return o.extend.apply(null,arguments)},app:function(e){return window[e]||(window[e]={namespace:function(t){return BUI.namespace(t,window[e])}}),window[e]},mixAttrs:i,mixAttr:r,mixin:function(e,t,n){n=n||[h,v];var r=t;if(r){e.mixins=r;var o={},a=r.concat(e);BUI.each(a,function(e){e&&BUI.each(n,function(t){e[t]&&(o[t]=o[t]||{},"ATTRS"==t?i(o[t],e[t]):BUI.mix(o[t],e[t]))})}),BUI.each(o,function(t,n){e[n]=t});var s={};BUI.each(a,function(e){if(e){var t=e.prototype;for(var n in t)t.hasOwnProperty(n)&&(s[n]=t[n])}}),BUI.each(s,function(t,n){e.prototype[n]=t})}return e},namespace:function(e,t){if(t=t||BUI,!e)return t;for(var n=e.split("."),i=t,r=0;r<n.length;r++){var o=n[r];i[o]||(i[o]={}),i=i[o]}return i},prefix:"bui-",substitute:function(e,t,n){return BUI.isString(e)&&(BUI.isObject(t)||BUI.isArray(t))?e.replace(n||/\\?\{([^{}]+)\}/g,function(e,n){return"\\"===e.charAt(0)?e.slice(1):void 0===t[n]?"":t[n]}):e},unparam:function(e){if("string"!=typeof e||!(e=o.trim(decodeURIComponent(e))))return{};for(var t,n=e.split("&"),i={},r=n.length-1;r>=0;r--)t=n[r].split("="),i[t[0]]=t[1];return i},ucfirst:function(e){return e+="",e.charAt(0).toUpperCase()+e.substring(1)},isInView:function(e){var t=e.left,n=e.top,i=BUI.viewportWidth(),r=BUI.viewportHeight(),o=BUI.scrollTop(),a=BUI.scrollLeft();return a>t||t>a+i?!1:o>n||n>o+r?!1:!0},isInVerticalView:function(e){var t=BUI.viewportHeight(),n=BUI.scrollTop();return n>e||e>n+t?!1:!0},isInHorizontalView:function(e){var t=BUI.viewportWidth(),n=BUI.scrollLeft();return n>e||e>n+t?!1:!0},viewportWidth:function(){return o(window).width()},viewportHeight:function(){return o(window).height()},scrollLeft:function(){return o(window).scrollLeft()},scrollTop:function(){return o(window).scrollTop()},docWidth:function(){return Math.max(this.viewportWidth(),s[d][m],s[c][m])},docHeight:function(){return Math.max(this.viewportHeight(),s[d][g],s[c][g])},each:function(e,t){e&&o.each(e,function(e,n){return t(n,e)})},wrapBehavior:function(e,t){return e["__bui_wrap_"+t]=function(n){e.get("disabled")||e[t](n)}},getWrapBehavior:function(e,t){return e["__bui_wrap_"+t]},getControl:function(e){return BUI.Component.Manager.getComponent(e)}});var b={serializeToObject:function(e){var t=o(e).serializeArray(),n={};return BUI.each(t,function(e){var t=e.name;n[t]?(BUI.isArray(n[t])||(n[t]=[n[t]]),n[t].push(e.value)):n[t]=e.value}),n},setFields:function(e,t){for(var n in t)t.hasOwnProperty(n)&&BUI.FormHelper.setField(e,n,t[n])},clear:function(e){var t=o.makeArray(e.elements);BUI.each(t,function(e){"checkbox"===e.type||"radio"===e.type?o(e).attr("checked",!1):o(e).val(""),o(e).change()})},setField:function(e,t,n){var i=e.elements[t];i&&i.type?formHelper._setFieldValue(i,n):(BUI.isArray(i)||i&&i.length)&&BUI.each(i,function(e){formHelper._setFieldValue(e,n)})},_setFieldValue:function(e,t){"checkbox"===e.type?e.value==""+t||BUI.isArray(t)&&-1!==BUI.Array.indexOf(e.value,t)?o(e).attr("checked",!0):o(e).attr("checked",!1):"radio"===e.type?e.value==""+t?o(e).attr("checked",!0):o(e).attr("checked",!1):o(e).val(t)},getField:function(e,t){return BUI.FormHelper.serializeToObject(e)[t]}};BUI.FormHelper=b,n.exports=BUI}),define("bui/common/ua",["jquery"],function(e,t,n){function i(e){var t=0;return parseFloat(e.replace(/\./g,function(){return 0===t++?".":""}))}function r(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[],n={browser:t[1]||"",version:t[2]||"0"},i={};return n.browser&&(i[n.browser]=!0,i.version=n.version),i.chrome?i.webkit=!0:i.webkit&&(i.safari=!0),i}var o=e("jquery"),a=o.UA||function(){var e=o.browser||r(navigator.userAgent),t=i(e.version),n={ie:e.msie&&t,webkit:e.webkit&&t,opera:e.opera&&t,mozilla:e.mozilla&&t};return n}();n.exports=a}),define("bui/common/json",["jquery","bui/common/ua"],function(e,t,n){function i(e){return 10>e?"0"+e:e}function r(e){return g.lastIndex=0,g.test(e)?'"'+e.replace(g,function(e){var t=h[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function o(e,t){var n,i,a,s,u,l=d,c=t[e];switch(c&&"object"==typeof c&&"function"==typeof c.toJSON&&(c=c.toJSON(e)),"function"==typeof m&&(c=m.call(t,e,c)),typeof c){case"string":return r(c);case"number":return isFinite(c)?String(c):"null";case"boolean":case"null":return String(c);case"object":if(!c)return"null";if(d+=f,u=[],"[object Array]"===Object.prototype.toString.apply(c)){for(s=c.length,n=0;s>n;n+=1)u[n]=o(n,c)||"null";return a=0===u.length?"[]":d?"[\n"+d+u.join(",\n"+d)+"\n"+l+"]":"["+u.join(",")+"]",d=l,a}if(m&&"object"==typeof m)for(s=m.length,n=0;s>n;n+=1)i=m[n],"string"==typeof i&&(a=o(i,c),a&&u.push(r(i)+(d?": ":":")+a));else for(i in c)Object.hasOwnProperty.call(c,i)&&(a=o(i,c),a&&u.push(r(i)+(d?": ":":")+a));return a=0===u.length?"{}":d?"{\n"+d+u.join(",\n"+d)+"\n"+l+"}":"{"+u.join(",")+"}",d=l,a}}function a(e){try{return new Function("return "+e+";")()}catch(t){throw"Json parse error!"}}var s=e("jquery"),u=e("bui/common/ua"),l=window,c=l.JSON;(!c||u.ie<9)&&(c=l.JSON={}),"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+i(this.getUTCMonth()+1)+"-"+i(this.getUTCDate())+"T"+i(this.getUTCHours())+":"+i(this.getUTCMinutes())+":"+i(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var d,f,m,g=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,h={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};"function"!=typeof c.stringify&&(c.stringify=function(e,t,n){var i;if(d="",f="","number"==typeof n)for(i=0;n>i;i+=1)f+=" ";else"string"==typeof n&&(f=n);if(m=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return o("",{"":e})});var c={parse:s.parseJSON,looseParse:a,stringify:c.stringify};n.exports=c}),define("bui/common/date",[],function(e,t,n){function i(e,t){if(e instanceof Date)return e;if("undefined"==typeof t||null==t||""==t){for(var n=new Array("y-m-d","yyyy-mm-dd","yyyy-mm-dd HH:MM:ss","H:M:s"),r=0;r<n.length;r++){var o=i(e,n[r]);if(null!=o)return o}return null}e+="";var a,s,u=0,l=0,c="",d="",f=new Date,m=f.getYear(),g=f.getMonth()+1,h=1,v=0,p=0,b=0;for(this.isInteger=function(e){return/^\d*$/.test(e)},this.getInt=function(e,t,n,i){for(var r=i;r>=n;r--){var o=e.substring(t,t+r);if(o.length<n)return null;if(this.isInteger(o))return o}return null};l<t.length;){for(c=t.charAt(l),d="";t.charAt(l)==c&&l<t.length;)d+=t.charAt(l++);if("yyyy"==d||"yy"==d||"y"==d){if("yyyy"==d&&(a=4,s=4),"yy"==d&&(a=2,s=2),"y"==d&&(a=2,s=4),m=this.getInt(e,u,a,s),null==m)return null;u+=m.length,2==m.length&&(m=m>70?1900+(m-0):2e3+(m-0))}else if("mm"==d||"m"==d){if(g=this.getInt(e,u,d.length,2),null==g||1>g||g>12)return null;u+=g.length}else if("dd"==d||"d"==d){if(h=this.getInt(e,u,d.length,2),null==h||1>h||h>31)return null;u+=h.length}else if("hh"==d||"h"==d){if(v=this.getInt(e,u,d.length,2),null==v||1>v||v>12)return null;u+=v.length}else if("HH"==d||"H"==d){if(v=this.getInt(e,u,d.length,2),null==v||0>v||v>23)return null;u+=v.length}else if("MM"==d||"M"==d){if(p=this.getInt(e,u,d.length,2),null==p||0>p||p>59)return null;u+=p.length}else if("ss"==d||"s"==d){if(b=this.getInt(e,u,d.length,2),null==b||0>b||b>59)return null;u+=b.length}else{if(e.substring(u,u+d.length)!=d)return null;u+=d.length}}if(u!=e.length)return null;if(2==g)if(m%4==0&&m%100!=0||m%400==0){if(h>29)return null}else if(h>28)return null;return(4==g||6==g||9==g||11==g)&&h>30?null:new Date(m,g-1,h,v,p,b)}function r(e,t,n){var i=new Date(n);switch(isNaN(i)&&(i=new Date),t=parseInt(t,10),e){case"s":i=new Date(i.getTime()+1e3*t);break;case"n":i=new Date(i.getTime()+6e4*t);break;case"h":i=new Date(i.getTime()+36e5*t);break;case"d":i=new Date(i.getTime()+864e5*t);break;case"w":i=new Date(i.getTime()+6048e5*t);break;case"m":i=new Date(i.getFullYear(),i.getMonth()+t,i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds());break;case"y":i=new Date(i.getFullYear()+t,i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds())}return i}var o=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]?)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/,a=function(){var e=/w{1}|d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,t=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,n=/[^-+\dA-Z]/g,i=function(e,t){for(e=String(e),t=t||2;e.length<t;)e="0"+e;return e},r={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUTCDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",localShortDate:"yy\u5e74mm\u6708dd\u65e5",localShortDateTime:"yy\u5e74mm\u6708dd\u65e5 hh:MM:ss TT",localLongDate:"yyyy\u5e74mm\u6708dd\u65e5",localLongDateTime:"yyyy\u5e74mm\u6708dd\u65e5 hh:MM:ss TT",localFullDate:"yyyy\u5e74mm\u6708dd\u65e5 w",localFullDateTime:"yyyy\u5e74mm\u6708dd\u65e5 w hh:MM:ss TT"},o={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","\u661f\u671f\u65e5","\u661f\u671f\u4e00","\u661f\u671f\u4e8c","\u661f\u671f\u4e09","\u661f\u671f\u56db","\u661f\u671f\u4e94","\u661f\u671f\u516d"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]};return function(a,s,u){if(1!==arguments.length||"[object String]"!==Object.prototype.toString.call(a)||/\d/.test(a)||(s=a,a=void 0),a=a?new Date(a):new Date,isNaN(a))throw SyntaxError("invalid date");s=String(r[s]||s||r["default"]),"UTC:"===s.slice(0,4)&&(s=s.slice(4),u=!0);var l=u?"getUTC":"get",c=a[l+"Date"](),d=a[l+"Day"](),f=a[l+"Month"](),m=a[l+"FullYear"](),g=a[l+"Hours"](),h=a[l+"Minutes"](),v=a[l+"Seconds"](),p=a[l+"Milliseconds"](),b=u?0:a.getTimezoneOffset(),y={d:c,dd:i(c,void 0),ddd:o.dayNames[d],dddd:o.dayNames[d+7],w:o.dayNames[d+14],m:f+1,mm:i(f+1,void 0),mmm:o.monthNames[f],mmmm:o.monthNames[f+12],yy:String(m).slice(2),yyyy:m,h:g%12||12,hh:i(g%12||12,void 0),H:g,HH:i(g,void 0),M:h,MM:i(h,void 0),s:v,ss:i(v,void 0),l:i(p,3),L:i(p>99?Math.round(p/10):p,void 0),t:12>g?"a":"p",tt:12>g?"am":"pm",T:12>g?"A":"P",TT:12>g?"AM":"PM",Z:u?"UTC":(String(a).match(t)||[""]).pop().replace(n,""),o:(b>0?"-":"+")+i(100*Math.floor(Math.abs(b)/60)+Math.abs(b)%60,4),S:["th","st","nd","rd"][c%10>3?0:(c%100-c%10!==10)*c%10]};return s.replace(e,function(e){return e in y?y[e]:e.slice(1,e.length-1)})}}(),s={add:function(e,t,n){return r(e,t,n)},addHour:function(e,t){return r("h",e,t)},addMinute:function(e,t){return r("n",e,t)},addSecond:function(e,t){return r("s",e,t)},addDay:function(e,t){return r("d",e,t)},addWeek:function(e,t){return r("w",e,t)},addMonths:function(e,t){return r("m",e,t)},addYear:function(e,t){return r("y",e,t)},isDateEquals:function(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()},isEquals:function(e,t){return e==t?!0:e&&t&&e.getTime&&t.getTime?e.getTime()==t.getTime():!1},isDateString:function(e){return o.test(e)},format:function(e,t,n){return a(e,t,n)},parse:function(e,t){return BUI.isString(e)&&(e=e.replace("/","-")),i(e,t)},today:function(){var e=new Date;return new Date(e.getFullYear(),e.getMonth(),e.getDate())},getDate:function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())}};n.exports=s}),define("bui/common/array",["bui/common/util","jquery"],function(e,t,n){var i=e("bui/common/util"),r={peek:function(e){return e[e.length-1]},indexOf:function(e,t,n){for(var i=null==n?0:0>n?Math.max(0,t.length+n):n,r=i;r<t.length;r++)if(r in t&&t[r]===e)return r;return-1},contains:function(e,t){return r.indexOf(e,t)>=0},each:i.each,equals:function(e,t){if(e==t)return!0;if(!e||!t)return!1;if(e.length!=t.length)return!1;for(var n=!0,i=0;i<e.length;i++)if(e[i]!==t[i]){n=!1;break}return n},filter:function(e,t){var n=[];return r.each(e,function(e,i){t(e,i)&&n.push(e)}),n},map:function(e,t){var n=[];return r.each(e,function(e,i){n.push(t(e,i))}),n},find:function(e,t){var n=r.findIndex(e,t);return 0>n?null:e[n]},findIndex:function(e,t){var n=-1;return r.each(e,function(e,i){return t(e,i)?(n=i,!1):void 0}),n},isEmpty:function(e){return 0==e.length},add:function(e,t){e.push(t)},addAt:function(e,t,n){r.splice(e,n,0,t)},empty:function(e){if(!(e instanceof Array))for(var t=e.length-1;t>=0;t--)delete e[t];e.length=0},remove:function(e,t){var n,i=r.indexOf(t,e);return(n=i>=0)&&r.removeAt(e,i),n},removeAt:function(e,t){return 1==r.splice(e,t,1).length},slice:function(e,t,n){return arguments.length<=2?Array.prototype.slice.call(e,t):Array.prototype.slice.call(e,t,n)},splice:function(e){return Array.prototype.splice.apply(e,r.slice(arguments,1))}};n.exports=r}),define("bui/common/keycode",[],function(e,t,n){var i={BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,RETURN:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123};n.exports=i}),define("bui/common/observable",["jquery","bui/common/util","bui/common/array"],function(e,t,n){function i(){return new s}var r=e("jquery"),o=e("bui/common/util"),a=e("bui/common/array"),s=function(){this._init()};o.augment(s,{_functions:null,_init:function(){var e=this;e._functions=[]},add:function(e){this._functions.push(e)},remove:function(e){var t=this._functions;index=a.indexOf(e,t),index>=0&&t.splice(index,1)},empty:function(){var e=this._functions.length;this._functions.splice(0,e)},pause:function(){this._paused=!0},resume:function(){this._paused=!1},fireWith:function(e,t){var n,i=this;if(!i._paused)return o.each(i._functions,function(i){return n=i.apply(e,t),n===!1?!1:void 0}),n}});var u=function(e){this._events=[],this._eventMap={},this._bubblesEvents=[],this._initEvents(e)};o.augment(u,{_events:[],_eventMap:{},_bubblesEvents:[],_bubbleTarget:null,_getCallbacks:function(e){var t=this,n=t._eventMap;return n[e]},_initEvents:function(e){var t=this,n=null;if(e&&(n=e.listeners||{},e.handler&&(n.click=e.handler),n))for(var i in n)n.hasOwnProperty(i)&&t.on(i,n[i])},_isBubbles:function(e){return a.indexOf(e,this._bubblesEvents)>=0},addTarget:function(e){this._bubbleTarget=e},addEvents:function(e){function t(e){-1===a.indexOf(e,r)&&(s[e]=i(),r.push(e))}var n=this,r=n._events,s=n._eventMap;o.isArray(e)?o.each(e,function(e){t(e)}):t(e)},clearListeners:function(){var e=this,t=e._eventMap;for(var n in t)t.hasOwnProperty(n)&&t[n].empty()},fire:function(e,t){var n,i=this,o=i._getCallbacks(e),a=r.makeArray(arguments);if(t||(t={},a.push(t)),t.target||(t.target=i),o&&(n=o.fireWith(i,Array.prototype.slice.call(a,1))),i._isBubbles(e)){var s=i._bubbleTarget;s&&s.fire&&s.fire(e,t)}return n},pauseEvent:function(e){var t=this,n=t._getCallbacks(e);n&&n.pause()},resumeEvent:function(e){var t=this,n=t._getCallbacks(e);n&&n.resume()},on:function(e,t){var n=e.split(" "),i=this,r=null;return n.length>1?o.each(n,function(e){i.on(e,t)}):(r=i._getCallbacks(e),r?r.add(t):(i.addEvents(e),i.on(e,t))),i},off:function(e,t){if(!e&&!t)return this.clearListeners(),this;var n=this,i=n._getCallbacks(e);return i&&(t?i.remove(t):i.empty()),n},publish:function(e,t){var n=this,i=n._bubblesEvents;if(t.bubbles)-1===o.Array.indexOf(e,i)&&i.push(e);else{var r=o.Array.indexOf(e,i);-1!==r&&i.splice(r,1)}}}),n.exports=u}),define("bui/common/base",["jquery","bui/common/observable","bui/common/util","bui/common/array"],function(e,t,n){function i(e,t,n){var i=e[t]||{};return n&&(e[t]=i),i}function r(e,t){return BUI.isString(t)?e[t]:t}function o(e,t,n,i,r){var o=n;return e.fire(t+BUI.ucfirst(n)+"Change",{attrName:o,prevVal:i,newVal:r})}function a(e,t,n,i){i=i||{};var r,a;return a=e.get(t),u.isPlainObject(n)||BUI.isArray(n)||a!==n?i.silent||!1!==o(e,"before",t,a,n)?(r=e._set(t,n,i),r===!1?r:(i.silent||(n=e.__attrVals[t],o(e,"after",t,a,n)),e)):!1:void 0}function s(e){if(!e._attrs&&e!=d){var t=e.superclass.constructor;t&&!t._attrs&&s(t),e._attrs={},BUI.mixAttrs(e._attrs,t._attrs),BUI.mixAttrs(e._attrs,e.ATTRS)}}var u=e("jquery"),l={},c=e("bui/common/observable"),d=function(e){var t=this,n=t.constructor,i=[];for(this.__attrs={},this.__attrVals={},c.apply(this,arguments);n;)i.push(n),n.extensions&&(BUI.mixin(n,n.extensions),delete n.extensions),n=n.superclass?n.superclass.constructor:null;var r=t.constructor;s(r),t._initStaticAttrs(r._attrs),t._initAttrs(e)};d.INVALID=l,BUI.extend(d,c),BUI.augment(d,{_initStaticAttrs:function(e){var t,n=this;t=n.__attrs={};for(var i in e)if(e.hasOwnProperty(i)){var r=e[i];r.shared===!1||r.valueFn?(t[i]={},BUI.mixAttr(t[i],e[i])):t[i]=e[i]}},addAttr:function(e,t){var n=this,i=n.__attrs,r=i[e];r||(r=i[e]={});for(var o in t)t.hasOwnProperty(o)&&("value"==o?BUI.isObject(t[o])?(r[o]=r[o]||{},BUI.mix(r[o],t[o])):BUI.isArray(t[o])?(r[o]=r[o]||[],BUI.mix(r[o],t[o])):r[o]=t[o]:r[o]=t[o]);return n},addAttrs:function(e,t,n){var i=this;return e?("boolean"==typeof t&&(n=t,t=null),BUI.each(e,function(e,t){i.addAttr(t,e,n)}),t&&i.set(t),i):i},hasAttr:function(e){return e&&this.__attrs.hasOwnProperty(e)},getAttrs:function(){return this.__attrs},getAttrVals:function(){return this.__attrVals},get:function(e){var t,n,o,a=this,s=a.__attrVals;return t=i(a.__attrs,e),n=t.getter,o=e in s?s[e]:a._getDefAttrVal(e),n&&(n=r(a,n))&&(o=n.call(a,o,e)),o},clearAttrVals:function(){this.__attrVals={}},removeAttr:function(e){var t=this;return t.hasAttr(e)&&(delete t.__attrs[e],delete t.__attrVals[e]),t},set:function(e,t,n){var i=this;if(u.isPlainObject(e)){n=t;var r=Object(e);for(e in r)r.hasOwnProperty(e)&&a(i,e,r[e],n);return i}return a(i,e,t,n)},setInternal:function(e,t,n){return this._set(e,t,n)},_getDefAttrVal:function(e){var t,n=this,o=n.__attrs,a=i(o,e),s=a.valueFn;return s&&(s=r(n,s))&&(t=s.call(n),void 0!==t&&(a.value=t),delete a.valueFn,o[e]=a),a.value},_set:function(e,t){var n,o=this,a=i(o.__attrs,e,!0),s=a.setter;return s&&(s=r(o,s))&&(n=s.call(o,t,e)),n===l?!1:(void 0!==n&&(t=n),o.__attrVals[e]=t,o)},_initAttrs:function(e){var t=this;if(e)for(var n in e)e.hasOwnProperty(n)&&t._set(n,e[n])}}),n.exports=d}),define("bui/common/component/component",["bui/common/component/manage","bui/common/component/uibase/uibase","bui/common/component/view","bui/common/component/controller","jquery","bui/common/component/uibase/base","bui/common/component/uibase/align","bui/common/component/uibase/autoshow","bui/common/component/uibase/autohide","bui/common/component/uibase/close","bui/common/component/uibase/collapsable","bui/common/component/uibase/drag","bui/common/component/uibase/keynav","bui/common/component/uibase/list","bui/common/component/uibase/listitem","bui/common/component/uibase/mask","bui/common/component/uibase/position","bui/common/component/uibase/selection","bui/common/component/uibase/stdmod","bui/common/component/uibase/decorate","bui/common/component/uibase/tpl","bui/common/component/uibase/childcfg","bui/common/component/uibase/bindable","bui/common/component/uibase/depends","bui/common/base","bui/common/observable","bui/common/util","bui/common/array","bui/common/ua","bui/common/keycode","bui/common/json","bui/common/component/loader"],function(e,t,n){function i(e,t){var n,i;return e&&(i=e.xclass)&&(t&&!e.prefixCls&&(e.prefixCls=t.get("prefixCls")),n=r.Manager.getConstructorByXClass(i),n||BUI.error("can not find class by xclass desc : "+i),e=new n(e)),e
}var r={};BUI.mix(r,{Manager:e("bui/common/component/manage"),UIBase:e("bui/common/component/uibase/uibase"),View:e("bui/common/component/view"),Controller:e("bui/common/component/controller")}),r.create=i,n.exports=r}),define("bui/common/component/manage",["jquery"],function(e,t,n){function i(e){for(var t,n=e.split(/\s+/),i=-1,r=null,o=0;o<n.length;o++){var a=u[n[o]];a&&(t=a.priority)>i&&(i=t,r=a.constructor)}return r}function r(e){for(var t in u){var n=u[t];if(n.constructor==e)return t}return 0}function o(e,t){BUI.isFunction(t)?u[e]={constructor:t,priority:0}:(t.priority=t.priority||0,u[e]=t)}function a(e){for(var t=s.trim(e).split(/\s+/),n=0;n<t.length;n++)t[n]&&(t[n]=this.get("prefixCls")+t[n]);return t.join(" ")}var s=e("jquery"),u={},l={},c={__instances:l,addComponent:function(e,t){l[e]=t},removeComponent:function(e){delete l[e]},eachComponent:function(e){BUI.each(l,e)},getComponent:function(e){return l[e]},getCssClassWithPrefix:a,getXClassByConstructor:r,getConstructorByXClass:i,setConstructorByXClass:o};n.exports=c}),define("bui/common/component/uibase/uibase",["bui/common/component/uibase/base","bui/common/component/uibase/align","bui/common/component/uibase/autoshow","bui/common/component/uibase/autohide","bui/common/component/uibase/close","bui/common/component/uibase/collapsable","bui/common/component/uibase/drag","bui/common/component/uibase/keynav","bui/common/component/uibase/list","bui/common/component/uibase/listitem","bui/common/component/uibase/mask","bui/common/component/uibase/position","bui/common/component/uibase/selection","bui/common/component/uibase/stdmod","bui/common/component/uibase/decorate","bui/common/component/uibase/tpl","bui/common/component/uibase/childcfg","bui/common/component/uibase/bindable","bui/common/component/uibase/depends","jquery","bui/common/component/manage","bui/common/base","bui/common/observable","bui/common/util","bui/common/array","bui/common/ua","bui/common/keycode","bui/common/json"],function(e,t,n){var i=e("bui/common/component/uibase/base");BUI.mix(i,{Align:e("bui/common/component/uibase/align"),AutoShow:e("bui/common/component/uibase/autoshow"),AutoHide:e("bui/common/component/uibase/autohide"),Close:e("bui/common/component/uibase/close"),Collapsable:e("bui/common/component/uibase/collapsable"),Drag:e("bui/common/component/uibase/drag"),KeyNav:e("bui/common/component/uibase/keynav"),List:e("bui/common/component/uibase/list"),ListItem:e("bui/common/component/uibase/listitem"),Mask:e("bui/common/component/uibase/mask"),Position:e("bui/common/component/uibase/position"),Selection:e("bui/common/component/uibase/selection"),StdMod:e("bui/common/component/uibase/stdmod"),Decorate:e("bui/common/component/uibase/decorate"),Tpl:e("bui/common/component/uibase/tpl"),ChildCfg:e("bui/common/component/uibase/childcfg"),Bindable:e("bui/common/component/uibase/bindable"),Depends:e("bui/common/component/uibase/depends")}),BUI.mix(i,{CloseView:i.Close.View,CollapsableView:i.Collapsable.View,ChildList:i.List.ChildList,ListItemView:i.ListItem.View,MaskView:i.Mask.View,PositionView:i.Position.View,StdModView:i.StdMod.View,TplView:i.Tpl.View}),n.exports=i}),define("bui/common/component/view",["jquery","bui/common/component/manage","bui/common/component/uibase/uibase","bui/common/component/uibase/base","bui/common/component/uibase/align","bui/common/component/uibase/autoshow","bui/common/component/uibase/autohide","bui/common/component/uibase/close","bui/common/component/uibase/collapsable","bui/common/component/uibase/drag","bui/common/component/uibase/keynav","bui/common/component/uibase/list","bui/common/component/uibase/listitem","bui/common/component/uibase/mask","bui/common/component/uibase/position","bui/common/component/uibase/selection","bui/common/component/uibase/stdmod","bui/common/component/uibase/decorate","bui/common/component/uibase/tpl","bui/common/component/uibase/childcfg","bui/common/component/uibase/bindable","bui/common/component/uibase/depends","bui/common/base","bui/common/observable","bui/common/util","bui/common/array","bui/common/ua","bui/common/keycode","bui/common/json"],function(e,t,n){var i=e("jquery"),r=e("bui/common/component/manage"),o=e("bui/common/component/uibase/uibase"),a=document,s=o.extend([o.TplView],{getComponentCssClassWithState:function(e){var t=this,n=t.get("ksComponentCss");return e=e||"",t.getCssClassWithPrefix(n.split(/\s+/).join(e+" ")+e)},getCssClassWithPrefix:r.getCssClassWithPrefix,getKeyEventTarget:function(){return this.get("el")},getContentElement:function(){return this.get("contentEl")||this.get("el")},getStatusCls:function(e){var t=this,n=t.get("statusCls"),i=n[e];return i||(i=t.getComponentCssClassWithState("-"+e)),i},renderUI:function(){var e=this;if(!e.get("srcNode")){var t=e.get("render"),n=e.get("el"),i=e.get("elBefore");i?n.insertBefore(i,void 0):t?n.appendTo(t,void 0):n.appendTo(a.body,void 0)}},createDom:function(){var e=this,t=e.get("contentEl"),n=e.get("el");e.get("srcNode")||(n=i("<"+e.get("elTagName")+">"),t&&n.append(t),e.setInternal("el",n)),n.addClass(e.getComponentCssClassWithState()),t||e.setInternal("contentEl",n)},_uiSetHighlighted:function(e){var t=this,n=t.getStatusCls("hover"),i=t.get("el");i[e?"addClass":"removeClass"](n)},_uiSetDisabled:function(e){var t=this,n=t.getStatusCls("disabled"),i=t.get("el");i[e?"addClass":"removeClass"](n).attr("aria-disabled",e),e&&t.get("highlighted")&&t.set("highlighted",!1),t.get("focusable")&&t.getKeyEventTarget().attr("tabIndex",e?-1:0)},_uiSetActive:function(e){var t=this,n=t.getStatusCls("active");t.get("el")[e?"addClass":"removeClass"](n).attr("aria-pressed",!!e)},_uiSetFocused:function(e){var t=this,n=t.get("el"),i=t.getStatusCls("focused");n[e?"addClass":"removeClass"](i)},_uiSetElAttrs:function(e){this.get("el").attr(e)},_uiSetElCls:function(e){this.get("el").addClass(e)},_uiSetElStyle:function(e){this.get("el").css(e)},_uiSetRole:function(e){e&&this.get("el").attr("role",e)},_uiSetWidth:function(e){this.get("el").width(e)},_uiSetHeight:function(e){var t=this;t.get("el").height(e)},_uiSetContent:function(e){var t,n=this;n.get("srcNode")&&!n.get("rendered")||(t=n.get("contentEl"),"string"==typeof e?t.html(e):e&&t.empty().append(e))},_uiSetVisible:function(e){var t=this,n=t.get("el"),i=t.get("visibleMode");"visibility"===i?n.css("visibility",e?"visible":"hidden"):n.css("display",e?"":"none")},set:function(e,t){var n,r,o,a=this,u=a.__attrs[e];if(!u||!a.get("binded"))return s.superclass.set.call(this,e,t),a;var l=s.superclass.get.call(this,e);return i.isPlainObject(t)||BUI.isArray(t)||l!==t?(s.superclass.set.call(this,e,t),t=a.__attrVals[e],n={attrName:e,prevVal:l,newVal:t},r=BUI.ucfirst(e),o="_uiSet"+r,a[o]&&a[o](t,n),a):a},destructor:function(){var e=this.get("el");e&&e.remove()}},{xclass:"view",priority:0});s.ATTRS={el:{setter:function(e){return i(e)}},elCls:{},elStyle:{},role:{},width:{},height:{},statusCls:{value:{}},elTagName:{value:"div"},elAttrs:{},content:{},elBefore:{},render:{},visible:{value:!0},visibleMode:{value:"display"},cachePosition:{},contentEl:{valueFn:function(){return this.get("el")}},prefixCls:{value:BUI.prefix},focusable:{value:!0},focused:{},active:{},disabled:{},highlighted:{}},n.exports=s}),define("bui/common/component/controller",["jquery","bui/common/component/uibase/uibase","bui/common/component/manage","bui/common/component/view","bui/common/component/loader","bui/common/component/uibase/base","bui/common/component/uibase/align","bui/common/component/uibase/autoshow","bui/common/component/uibase/autohide","bui/common/component/uibase/close","bui/common/component/uibase/collapsable","bui/common/component/uibase/drag","bui/common/component/uibase/keynav","bui/common/component/uibase/list","bui/common/component/uibase/listitem","bui/common/component/uibase/mask","bui/common/component/uibase/position","bui/common/component/uibase/selection","bui/common/component/uibase/stdmod","bui/common/component/uibase/decorate","bui/common/component/uibase/tpl","bui/common/component/uibase/childcfg","bui/common/component/uibase/bindable","bui/common/component/uibase/depends","bui/common/base","bui/common/observable","bui/common/util","bui/common/array","bui/common/ua","bui/common/keycode","bui/common/json"],function(e,t,n){"use strict";function i(e,t,n){e.create();var i=e.getContentElement(),r=e.get("defaultChildClass");return t.xclass||t instanceof g||(t.xclass=t.xtype?r+"-"+t.xtype:r),t=BUI.Component.create(t,e),t.setInternal("parent",e),t.set("render",i),t.set("elBefore",n),t.create(void 0),t}function r(e){var t,n,i,r,a={},s=e.get("xview");t=e.getAttrs();for(i in t)t.hasOwnProperty(i)&&(n=t[i],n.view&&void 0!==(r=e.get(i))&&(a[i]=r));return delete a.autoRender,a.ksComponentCss=o(e),new s(a)}function o(e){for(var t,n=e.constructor,i=[];n&&n!==g;)t=l.getXClassByConstructor(n),t&&i.push(t),n=n.superclass&&n.superclass.constructor;return i.join(" ")}function a(e,t){var n=e.relatedTarget;return n&&(n===t[0]||s.contains(t,n))}var s=e("jquery"),u=e("bui/common/component/uibase/uibase"),l=e("bui/common/component/manage"),c=e("bui/common/component/view"),d=e("bui/common/component/loader"),f=BUI.wrapBehavior,m=BUI.getWrapBehavior,g=u.extend([u.Decorate,u.Tpl,u.ChildCfg,u.KeyNav,u.Depends],{isController:!0,getCssClassWithPrefix:l.getCssClassWithPrefix,initializer:function(){var e=this;e.get("id")||e.set("id",e.getNextUniqueId()),l.addComponent(e.get("id"),e);var t=r(e);e.setInternal("view",t),e.__view=t},getNextUniqueId:function(){var e=this,t=l.getXClassByConstructor(e.constructor);return BUI.guid(t)},createDom:function(){var e=this,t=e.get("view");t.create(void 0)},renderUI:function(){var e=this,t=e.get("loader");e.get("view").render(),e._initChildren(),t&&e.setInternal("loader",t)},_initChildren:function(e){var t,e,n,i=this;for(e=e||i.get("children").concat(),i.get("children").length=0,t=0;t<e.length;t++)n=i.addChild(e[t]),n.render()},bindUI:function(){var e=this,t=e.get("events");this.on("afterVisibleChange",function(e){this.fire(e.newVal?"show":"hide")}),BUI.each(t,function(t,n){e.publish(n,{bubbles:t})})},containsElement:function(e){var t=this,n=t.get("el"),i=t.get("children"),r=!1;return t.get("rendered")?(s.contains(n[0],e)||n[0]===e?r=!0:BUI.each(i,function(t){return t.containsElement(e)?(r=!0,!1):void 0}),r):!1},isChildrenElement:function(e){var t=this,n=t.get("children"),i=!1;return BUI.each(n,function(t){return t.containsElement(e)?(i=!0,!1):void 0}),i},show:function(){var e=this;return e.render(),e.set("visible",!0),e},hide:function(){var e=this;return e.set("visible",!1),e},toggle:function(){return this.set("visible",!this.get("visible")),this},_uiSetFocusable:function(e){var t,n=this,i=n.getKeyEventTarget();e?i.attr("tabIndex",0).attr("hideFocus",!0).on("focus",f(n,"handleFocus")).on("blur",f(n,"handleBlur")).on("keydown",f(n,"handleKeydown")).on("keyup",f(n,"handleKeyUp")):(i.removeAttr("tabIndex"),(t=m(n,"handleFocus"))&&i.off("focus",t),(t=m(n,"handleBlur"))&&i.off("blur",t),(t=m(n,"handleKeydown"))&&i.off("keydown",t),(t=m(n,"handleKeyUp"))&&i.off("keyup",t))},_uiSetHandleMouseEvents:function(e){var t,n=this,i=n.get("el");e?i.on("mouseenter",f(n,"handleMouseEnter")).on("mouseleave",f(n,"handleMouseLeave")).on("contextmenu",f(n,"handleContextMenu")).on("mousedown",f(n,"handleMouseDown")).on("mouseup",f(n,"handleMouseUp")).on("dblclick",f(n,"handleDblClick")):(t=m(n,"handleMouseEnter")&&i.off("mouseenter",t),t=m(n,"handleMouseLeave")&&i.off("mouseleave",t),t=m(n,"handleContextMenu")&&i.off("contextmenu",t),t=m(n,"handleMouseDown")&&i.off("mousedown",t),t=m(n,"handleMouseUp")&&i.off("mouseup",t),t=m(n,"handleDblClick")&&i.off("dblclick",t))},_uiSetFocused:function(e){e&&this.getKeyEventTarget()[0].focus()},_uiSetVisible:function(e){var t=this,n=(t.get("el"),t.get("visibleMode"));if("visibility"===n){if(e){var i=t.get("cachePosition");i&&t.set("xy",i)}if(!e){var i=[t.get("x"),t.get("y")];t.set("cachePosition",i),t.set("xy",[-999,-999])}}},_uiSetChildren:function(e){var t=this,n=BUI.cloneObject(e);t._initChildren(n)},enable:function(){return this.set("disabled",!1),this},disable:function(){return this.set("disabled",!0),this},focus:function(){this.get("focusable")&&this.set("focused",!0)},getContentElement:function(){return this.get("view").getContentElement()},getKeyEventTarget:function(){return this.get("view").getKeyEventTarget()},addChild:function(e,t){var n,r=this,o=r.get("children");return void 0===t&&(t=o.length),r.fire("beforeAddChild",{child:e,index:t}),n=o[t]&&o[t].get("el")||null,e=i(r,e,n),o.splice(t,0,e),r.get("rendered")&&e.render(),r.fire("afterAddChild",{child:e,index:t}),e},remove:function(e){var t=this,n=t.get("parent");return n?n.removeChild(t,e):e&&t.destroy(),t},removeChild:function(e,t){var n=this,i=n.get("children"),r=BUI.Array.indexOf(e,i);if(-1!==r)return n.fire("beforeRemoveChild",{child:e,destroy:t}),-1!==r&&i.splice(r,1),t&&e.destroy&&e.destroy(),n.fire("afterRemoveChild",{child:e,destroy:t}),e},removeChildren:function(e){var t,n=this,i=[].concat(n.get("children"));for(t=0;t<i.length;t++)n.removeChild(i[t],e)},getChildAt:function(e){var t=this.get("children");return t[e]||null},getChild:function(e,t){return this.getChildBy(function(t){return t.get("id")===e},t)},getChildBy:function(e,t){return this.getChildrenBy(e,t)[0]||null},getAppendHeight:function(){var e=this.get("el");return e.outerHeight()-e.height()},getAppendWidth:function(){var e=this.get("el");return e.outerWidth()-e.width()},getChildrenBy:function(e,t){var n=this,i=[];return e?(n.eachChild(function(n){e(n)?i.push(n):t&&(i=i.concat(n.getChildrenBy(e,t)))}),i):i},eachChild:function(e){BUI.each(this.get("children"),e)},handleDblClick:function(e){this.performActionInternal(e),this.isChildrenElement(e.target)||this.fire("dblclick",{domTarget:e.target,domEvent:e})},handleMouseOver:function(e){var t=this,n=t.get("el");a(e,n)||t.handleMouseEnter(e)},handleMouseOut:function(e){var t=this,n=t.get("el");a(e,n)||t.handleMouseLeave(e)},handleMouseEnter:function(e){var t=this;this.set("highlighted",!!e),t.fire("mouseenter",{domTarget:e.target,domEvent:e})},handleMouseLeave:function(e){var t=this;t.set("active",!1),t.set("highlighted",!e),t.fire("mouseleave",{domTarget:e.target,domEvent:e})},handleMouseDown:function(e){var t,n,i=this,r=(s(e.target),1===e.which);r&&(n=i.getKeyEventTarget(),i.get("activeable")&&i.set("active",!0),i.get("focusable")&&i.setInternal("focused",!0),i.get("allowTextSelection")||(t=e.target.nodeName,t=t&&t.toLowerCase(),"input"!==t&&"textarea"!==t&&e.preventDefault()),i.isChildrenElement(e.target)||i.fire("mousedown",{domTarget:e.target,domEvent:e}))},handleMouseUp:function(e){var t=this,n=t.isChildrenElement(e.target);t.get("active")&&1===e.which&&(t.performActionInternal(e),t.set("active",!1),n||t.fire("click",{domTarget:e.target,domEvent:e})),n||t.fire("mouseup",{domTarget:e.target,domEvent:e})},handleContextMenu:function(){},handleFocus:function(e){this.set("focused",!!e),this.fire("focus",{domEvent:e,domTarget:e.target})},handleBlur:function(e){this.set("focused",!e),this.fire("blur",{domEvent:e,domTarget:e.target})},handleKeyEventInternal:function(e){var t=this,n=t.isChildrenElement(e.target);return 13===e.which?(n||t.fire("click",{domTarget:e.target,domEvent:e}),this.performActionInternal(e)):void(n||t.fire("keydown",{domTarget:e.target,domEvent:e}))},handleKeydown:function(e){var t=this;return t.handleKeyEventInternal(e)?(e.halt(),!0):void 0},handleKeyUp:function(e){var t=this;t.isChildrenElement(e.target)||t.fire("keyup",{domTarget:e.target,domEvent:e})},performActionInternal:function(){},destructor:function(){var e,t,n=this,i=n.get("children");for(e=n.get("id"),t=0;t<i.length;t++)i[t].destroy&&i[t].destroy();n.get("view").destroy(),l.removeComponent(e)},set:function(e,t,n){var i,r,o,a=this,u=a.__view,l=a.__attrs[e];if(BUI.isObject(e)&&(n=t,BUI.each(e,function(e,t){a.set(t,e,n)})),!u||!l||n&&n.silent)return g.superclass.set.call(this,e,t,n),a;var c=g.superclass.get.call(this,e);return s.isPlainObject(t)||BUI.isArray(t)||c!==t?(i=BUI.ucfirst(e),o="_uiSet"+i,a.fire("before"+i+"Change",{attrName:e,prevVal:c,newVal:t}),a.setInternal(e,t),t=a.__attrVals[e],u&&l.view&&u.set(e,t),r={attrName:e,prevVal:c,newVal:t},a.fire("after"+i+"Change",r),a.get("binded")&&a[o]&&a[o](t,r),a):a},get:function(e){var t=this,n=t.__view,i=t.__attrs[e],r=g.superclass.get.call(this,e);return void 0!==r?r:n&&i&&i.view?n.get(e):r}},{ATTRS:{content:{view:1},elTagName:{view:!0,value:"div"},defaultChildClass:{},xtype:{},id:{view:!0},width:{view:1},height:{view:1},elCls:{view:1},elStyle:{view:1},elAttrs:{view:1},elBefore:{view:1},el:{view:1},events:{value:{click:!0,dblclick:!0,mouseenter:!0,mouseleave:!0,keydown:!0,keyup:!0,focus:!1,blur:!1,mousedown:!0,mouseup:!0,show:!1,hide:!1}},render:{view:1},role:{view:1},statusCls:{view:!0,value:{}},visibleMode:{view:1,value:"display"},visible:{value:!0,view:1},handleMouseEvents:{value:!0},focusable:{value:!1,view:1},defaultLoaderCfg:{value:{property:"content",autoLoad:!0}},loader:{getter:function(e){var t,n=this;return e&&!e.isLoader&&(e.target=n,t=n.get("defaultLoaderCfg"),e=new d(BUI.merge(t,e)),n.setInternal("loader",e)),e}},allowTextSelection:{value:!0},activeable:{value:!0},focused:{view:1},active:{view:1},highlighted:{view:1},children:{sync:!1,shared:!1,value:[]},prefixCls:{value:BUI.prefix,view:1},parent:{setter:function(e){this.addTarget(e)}},disabled:{view:1,value:!1},xview:{value:c}},PARSER:{visible:function(e){var t=this,n=e.css("display"),i=e.css("visibility"),r=t.get("visibleMode");return"none"==n&&"display"==r||"hidden"==i&&"visibility"==r?!1:!0}}},{xclass:"controller",priority:0});n.exports=g}),define("bui/common/component/uibase/base",["jquery","bui/common/component/manage","bui/common/base","bui/common/observable","bui/common/util","bui/common/array"],function(e,t,n){function i(e){r(e,"initializer","constructor")}function r(e,t,n){for(var i,r,o,a,s=e.constructor,u=[];s;){if(a=[],o=s.mixins)for(var l=0;l<o.length;l++)i=o[l],i&&("constructor"!=n&&(i=i.prototype.hasOwnProperty(n)?i.prototype[n]:null),i&&a.push(i));s.prototype.hasOwnProperty(t)&&(r=s.prototype[t])&&a.push(r),a.length&&u.push.apply(u,a.reverse()),s=s.superclass&&s.superclass.constructor}for(l=u.length-1;l>=0;l--)u[l]&&u[l].call(e)}function o(e){for(var t,n,i,r=e.constructor;r;){if(r.prototype.hasOwnProperty("destructor")&&r.prototype.destructor.apply(e),t=r.mixins)for(i=t.length-1;i>=0;i--)n=t[i]&&t[i].prototype.__destructor,n&&n.apply(e);r=r.superclass&&r.superclass.constructor}}function a(e){e&&BUI.each(e,function(t,n){BUI.isFunction(t)&&(e[n]=new t)})}function s(e,t,n){t&&BUI.each(t,function(t){t[n]&&t[n](e)})}function u(){}function l(e){var t,n,i=e.getAttrs();for(var r in i)if(i.hasOwnProperty(r)){var o=m+g(r);(n=e[o])&&i[r].sync!==!1&&void 0!==(t=e.get(r))&&n.call(e,t)}}function c(e){for(var t=[];e.base;)t.push(e),e=e.base;for(var n=t.length-1;n>=0;n--){var i=t[n];BUI.mix(i.prototype,i.px),BUI.mix(i,i.sx),i.base=null,i.px=null,i.sx=null}}var d=e("jquery"),f=e("bui/common/component/manage"),m="_uiSet",g=BUI.ucfirst,h=d.noop,v=e("bui/common/base"),p=function(e){var t=this;v.apply(t,arguments),t.setInternal("userConfig",e),i(t,e);var n=t.get("plugins");a(n);var r=t.get("xclass");r&&(t.__xclass=r),s(t,n,"initializer"),e&&e.autoRender&&t.render()};p.ATTRS={userConfig:{},autoRender:{value:!1},listeners:{value:{}},plugins:{},rendered:{value:!1},xclass:{valueFn:function(){return f.getXClassByConstructor(this.constructor)}}},BUI.extend(p,v),BUI.augment(p,{create:function(){var e=this;return e.get("created")||(e.fire("beforeCreateDom"),r(e,"createDom","__createDom"),e._set("created",!0),e.fire("afterCreateDom"),s(e,e.get("plugins"),"createDom")),e},render:function(){var e=this;if(!e.get("rendered")){var t=e.get("plugins");e.create(void 0),e.set("created",!0),e.fire("beforeRenderUI"),r(e,"renderUI","__renderUI"),e.fire("afterRenderUI"),s(e,t,"renderUI"),e.fire("beforeBindUI"),u(e),r(e,"bindUI","__bindUI"),e.set("binded",!0),e.fire("afterBindUI"),s(e,t,"bindUI"),e.fire("beforeSyncUI"),l(e),r(e,"syncUI","__syncUI"),e.fire("afterSyncUI"),s(e,t,"syncUI"),e._set("rendered",!0)}return e},createDom:h,renderUI:h,bindUI:h,syncUI:h,destroy:function(){var e=this;return e.destroyed?e:(e.fire("beforeDestroy"),s(e,e.get("plugins"),"destructor"),o(e),e.fire("afterDestroy"),e.off(),e.clearAttrVals(),e.destroyed=!0,e)}}),BUI.mix(p,{define:function(e,t,n,i){function r(){var e=this.constructor;e.base&&c(e),p.apply(this,arguments)}return d.isPlainObject(t)&&(i=n,n=t,t=[]),BUI.extend(r,e),r.base=e,r.px=n,r.sx=i,t.length&&(r.extensions=t),r},extend:function b(){var e,t=d.makeArray(arguments),n=t[t.length-1];if(t.unshift(this),n.xclass&&(t.pop(),t.push(n.xclass)),e=p.define.apply(p,t),n.xclass){var i=n.priority||(this.priority?this.priority+1:1);f.setConstructorByXClass(n.xclass,{constructor:e,priority:i}),e.__xclass=n.xclass,e.priority=i,e.toString=function(){return n.xclass}}return e.extend=b,e}}),n.exports=p}),define("bui/common/component/uibase/align",["jquery","bui/common/ua"],function(e,t,n){function i(e){var t,n=e.ownerDocument,i=n.body,r=h(e).css("position"),o="fixed"==r||"absolute"==r;if(!o)return"html"==e.nodeName.toLowerCase()?null:e.parentNode;for(t=e.parentNode;t&&t!=i;t=t.parentNode)if(r=h(t).css("position"),"static"!=r)return t;return null}function r(e){var t,n,r,o,a={left:0,right:1/0,top:0,bottom:1/0},s=e.ownerDocument,u=s.body,l=s.documentElement;for(t=e;t=i(t);)if((!v.ie||0!=t.clientWidth)&&t!=u&&t!=l&&"visible"!=h(t).css("overflow")){var c=h(t).offset();c.left+=t.clientLeft,c.top+=t.clientTop,a.top=Math.max(a.top,c.top),a.right=Math.min(a.right,c.left+t.clientWidth),a.bottom=Math.min(a.bottom,c.top+t.clientHeight),a.left=Math.max(a.left,c.left)}return n=h(b).scrollLeft(),r=h(b).scrollTop(),a.left=Math.max(a.left,n),a.top=Math.max(a.top,r),o={width:BUI.viewportWidth(),height:BUI.viewportHeight()},a.right=Math.min(a.right,n+o.width),a.bottom=Math.min(a.bottom,r+o.height),a.top>=0&&a.left>=0&&a.bottom>a.top&&a.right>a.left?a:null}function o(e,t,n,i){var r,o,a,s;return r={left:e.left,top:e.top},a=m(t,n[0]),s=m(e,n[1]),o=[s.left-a.left,s.top-a.top],{left:r.left-o[0]+ +i[0],top:r.top-o[1]+ +i[1]}}function a(e,t,n){return e.left<n.left||e.left+t.width>n.right}function s(e,t,n){return e.top<n.top||e.top+t.height>n.bottom}function u(e,t,n,i){var r=BUI.cloneObject(e),o={width:t.width,height:t.height};return i.adjustX&&r.left<n.left&&(r.left=n.left),i.resizeWidth&&r.left>=n.left&&r.left+o.width>n.right&&(o.width-=r.left+o.width-n.right),i.adjustX&&r.left+o.width>n.right&&(r.left=Math.max(n.right-o.width,n.left)),i.adjustY&&r.top<n.top&&(r.top=n.top),i.resizeHeight&&r.top>=n.top&&r.top+o.height>n.bottom&&(o.height-=r.top+o.height-n.bottom),i.adjustY&&r.top+o.height>n.bottom&&(r.top=Math.max(n.bottom-o.height,n.top)),BUI.mix(r,o)}function l(e,t,n){var i=[];return h.each(e,function(e,r){i.push(r.replace(t,function(e){return n[e]}))}),i}function c(e,t){return e[t]=-e[t],e}function d(){}function f(e){var t,n,i;return e.length&&!h.isWindow(e[0])?(t=e.offset(),n=e.outerWidth(),i=e.outerHeight()):(t={left:BUI.scrollLeft(),top:BUI.scrollTop()},n=BUI.viewportWidth(),i=BUI.viewportHeight()),t.width=n,t.height=i,t}function m(e,t){var n,i,r=t.charAt(0),o=t.charAt(1),a=e.width,s=e.height;return n=e.left,i=e.top,"c"===r?i+=s/2:"b"===r&&(i+=s),"c"===o?n+=a/2:"r"===o&&(n+=a),{left:n,top:i}}function g(e){var t=e.attr("class"),n=new RegExp("s?"+p+"[a-z]{2}-[a-z]{2}","ig"),i=n.exec(t);i&&e.removeClass(i.join(" "))}var h=e("jquery"),v=e("bui/common/ua"),p="x-align-",b=window;d.__getOffsetParent=i,d.__getVisibleRectForElement=r,d.ATTRS={align:{shared:!1,value:{}}},d.prototype={_uiSetAlign:function(e){var t,n,i="";e&&e.points&&(this.align(e.node,e.points,e.offset,e.overflow),this.set("cachePosition",null),t=this.get("el"),g(t),n=e.points.join("-"),i=p+n,t.addClass(i))},__bindUI:function(){var e=this,t=BUI.wrapBehavior(e,"handleWindowResize");e.on("show",function(){h(window).on("resize",t)}),e.on("hide",function(){h(window).off("resize",t)})},handleWindowResize:function(){var e=this,t=e.get("align");e.set("align",t)},align:function(e,t,n,i){e=h(e||b),n=n&&[].concat(n)||[0,0],i=i||{};var d=this,m=d.get("el"),g=0,v=r(m[0]),p=f(m),y=f(e),x=o(p,y,t,n),I=BUI.merge(p,x);if(v&&(i.adjustX||i.adjustY)){a(x,p,v)&&(g=1,t=l(t,/[lr]/gi,{l:"r",r:"l"}),n=c(n,0)),s(x,p,v)&&(g=1,t=l(t,/[tb]/gi,{t:"b",b:"t"}),n=c(n,1)),g&&(x=o(p,y,t,n),BUI.mix(I,x));var C={};C.adjustX=i.adjustX&&a(x,p,v),C.adjustY=i.adjustY&&s(x,p,v),(C.adjustX||C.adjustY)&&(I=u(x,p,v,C))}return I.left!=p.left&&(d.setInternal("x",null),d.get("view").setInternal("x",null),d.set("x",I.left)),I.top!=p.top&&(d.setInternal("y",null),d.get("view").setInternal("y",null),d.set("y",I.top)),I.width!=p.width&&m.width(m.width()+I.width-p.width),I.height!=p.height&&m.height(m.height()+I.height-p.height),d},center:function(e){var t=this;return t.set("align",{node:e,points:["cc","cc"],offset:[0,0]}),t}},n.exports=d}),define("bui/common/component/uibase/autoshow",["jquery"],function(e,t,n){function i(){}var r=e("jquery");i.ATTRS={trigger:{},delegateTigger:{getter:function(){this.get("delegateTrigger")},setter:function(e){this.set("delegateTrigger",e)}},delegateTrigger:{value:!1},autoAlign:{value:!0},autoFocused:{value:!0},triggerActiveCls:{},curTrigger:{},triggerCallback:{},triggerEvent:{value:"click"},triggerHideEvent:{},events:{value:{triggerchange:!1}}},i.prototype={__createDom:function(){this._setTrigger()},__bindUI:function(){var e=this,t=e.get("triggerActiveCls");t&&e.on("hide",function(){var n=e.get("curTrigger");n&&n.removeClass(t)})},_setTrigger:function(){function e(e){if(!n.get("disabled")){var t=n.get("curTrigger"),i=r(l?e.currentTarget:this),o=n.get("align");t&&t[0]==i[0]||(t&&t.removeClass(s),n.set("curTrigger",i),n.fire("triggerchange",{prevTrigger:t,curTrigger:i})),i.addClass(s),n.get("autoAlign")&&(o.node=i),n.set("align",o),n.show(),a&&a(e)}}function t(e){var t=e.toElement||e.relatedTarget;t&&n.containsElement(t)||n.hide()}var n=this,i=n.get("triggerEvent"),o=n.get("triggerHideEvent"),a=n.get("triggerCallback"),s=n.get("triggerActiveCls")||"",u=n.get("trigger"),l=n.get("delegateTrigger"),c=r(u);i&&(l&&BUI.isString(u)?r(document).delegate(u,i,e):c.on(i,e)),o&&(l&&BUI.isString(u)?r(document).delegate(u,o,t):c.on(o,t))},__renderUI:function(){var e=this,t=e.get("align");t&&!t.node&&(t.node=e.get("render")||e.get("trigger"))}},n.exports=i}),define("bui/common/component/uibase/autohide",["jquery"],function(e,t,n){function i(e,t){var n=e.get("hideExceptNode");return n&&n.length?o.contains(n[0],t):!1}function r(){}var o=e("jquery"),a=BUI.wrapBehavior,s=BUI.getWrapBehavior;r.ATTRS={autoHideType:{value:"click"},autoHide:{value:!1},hideExceptNode:{},events:{value:{autohide:!1}}},r.prototype={__bindUI:function(){var e=this;e.on("afterVisibleChange",function(t){var n=t.newVal;e.get("autoHide")&&(n?e._bindHideEvent():e._clearHideEvent())})},handleMoveOuter:function(e){var t=this,n=e.toElement||e.relatedTarget;t.containsElement(n)||i(t,n)||t.fire("autohide")!==!1&&t.hide()},handleDocumentClick:function(e){var t=this,n=e.target;t.containsElement(n)||i(t,n)||t.fire("autohide")!==!1&&t.hide()},_bindHideEvent:function(){var e=this,t=e.get("curTrigger"),n=e.get("autoHideType");"click"===n?o(document).on("mousedown",a(e,"handleDocumentClick")):(e.get("el").on("mouseleave",a(e,"handleMoveOuter")),t&&o(t).on("mouseleave",a(e,"handleMoveOuter")))},_clearHideEvent:function(){var e=this,t=e.get("curTrigger"),n=e.get("autoHideType");"click"===n?o(document).off("mousedown",s(e,"handleDocumentClick")):(e.get("el").off("mouseleave",s(e,"handleMoveOuter")),t&&o(t).off("mouseleave",s(e,"handleMoveOuter")))}},n.exports=r}),define("bui/common/component/uibase/close",["jquery"],function(e,t,n){function i(e){return a(e.get("closeTpl"))}function r(){}function o(){}var a=e("jquery"),s=BUI.prefix+"ext-";r.ATTRS={closeTpl:{value:'<a tabindex="0" href=\'javascript:void("\u5173\u95ed")\' role="button" class="'+s+'close"><span class="'+s+'close-x">\u5173\u95ed</span></a>'},closeable:{value:!0},closeBtn:{}},r.prototype={_uiSetCloseable:function(e){var t=this,n=t.get("closeBtn");e?(n||t.setInternal("closeBtn",n=i(t)),n.appendTo(t.get("el"),void 0)):n&&n.remove()}};var u="hide";o.ATTRS={closeTpl:{view:!0},closeable:{view:1},closeBtn:{view:1},closeAction:{value:u}};var l={hide:u,destroy:"destroy",remove:"remove"};o.prototype={_uiSetCloseable:function(e){var t=this;e&&!t.__bindCloseEvent&&(t.__bindCloseEvent=1,t.get("closeBtn").on("click",function(e){t.fire("closeclick",{domTarget:e.target})!==!1&&t.close(),e.preventDefault()}))},__destructor:function(){var e=this.get("closeBtn");e&&e.detach()},close:function(){var e=this,t=l[e.get("closeAction")||u];e.fire("closing",{action:t})!==!1&&(e.fire("beforeclosed",{action:t}),"remove"==t?e[t](!0):e[t](),e.fire("closed",{action:t}))}},o.View=r,n.exports=o}),define("bui/common/component/uibase/collapsable",[],function(e,t,n){var i=function(){};i.ATTRS={collapsed:{}},i.prototype={_uiSetCollapsed:function(e){var t=this,n=t.getStatusCls("collapsed"),i=t.get("el");e?i.addClass(n):i.removeClass(n)}};var r=function(){};r.ATTRS={collapsable:{value:!1},collapsed:{view:!0,value:!1},events:{value:{expanded:!0,collapsed:!0}}},r.prototype={_uiSetCollapsed:function(e){var t=this;t.fire(e?"collapsed":"expanded")}},r.View=i,n.exports=r}),define("bui/common/component/uibase/drag",["jquery"],function(e,t,n){function i(){var e=r(s).css("opacity",0).prependTo("body");return e}var r=e("jquery"),o=BUI.guid("drag"),a=function(){};a.ATTRS={dragNode:{},draging:{setter:function(e){return e===!0?{}:void 0},value:null},constraint:{},dragBackEl:{getter:function(){return r("#"+o)}}};var s='<div id="'+o+'" style="background-color: red; position: fixed; left: 0px; width: 100%; height: 100%; top: 0px; cursor: move; z-index: 999999; display: none; "></div>';a.prototype={__bindUI:function(){function e(e){var t=o.get("draging");t&&(e.preventDefault(),o._dragMoveTo(e.pageX,e.pageY,t,a))}function t(e){if(1==e.which){o.set("draging",!1);var t=o.get("dragBackEl");t&&t.hide(),i()}}function n(){r(document).on("mousemove",e),r(document).on("mouseup",t)}function i(){r(document).off("mousemove",e),r(document).off("mouseup",t)}var o=this,a=o.get("constraint"),s=o.get("dragNode");s&&s.on("mousedown",function(e){1==e.which&&(e.preventDefault(),o.set("draging",{elX:o.get("x"),elY:o.get("y"),startX:e.pageX,startY:e.pageY}),n())})},_dragMoveTo:function(e,t,n,r){var o=this,a=o.get("dragBackEl"),n=n||o.get("draging"),s=n.startX-e,u=n.startY-t;a.length||(a=i()),a.css({cursor:"move",display:"block"}),o.set("xy",[o._getConstrainX(n.elX-s,r),o._getConstrainY(n.elY-u,r)])},_getConstrainX:function(e,t){var n=this,i=n.get("el").outerWidth(),r=e+i,o=n.get("x");if(t){var a=t.offset();return a.left>=e?a.left:a.left+t.width()<r?a.left+t.width()-i:e}return BUI.isInHorizontalView(e)&&BUI.isInHorizontalView(r)?e:o},_getConstrainY:function(e,t){var n=this,i=n.get("el").outerHeight(),r=e+i,o=n.get("y");if(t){var a=t.offset();return a.top>e?a.top:a.top+t.height()<r?a.top+t.height()-i:e}return BUI.isInVerticalView(e)&&BUI.isInVerticalView(r)?e:o}},n.exports=a}),define("bui/common/component/uibase/keynav",["jquery","bui/common/keycode"],function(e,t,n){var i=e("jquery"),r=e("bui/common/keycode"),o=BUI.wrapBehavior,a=BUI.getWrapBehavior,s=function(){};s.ATTRS={allowKeyNav:{value:!0},navEvent:{value:"keydown"},ignoreInputFields:{value:!0}},s.prototype={__bindUI:function(){},_uiSetAllowKeyNav:function(e){var t=this,n=t.get("navEvent"),i=t.get("el");e?i.on(n,o(t,"_handleKeyDown")):i.off(n,a(t,"_handleKeyDown"))},_handleKeyDown:function(e){var t=this,n=t.get("ignoreInputFields"),o=e.which;if(!n||!i(e.target).is("input,select,textarea"))switch(o){case r.UP:e.preventDefault(),t.handleNavUp(e);break;case r.DOWN:e.preventDefault(),t.handleNavDown(e);break;case r.RIGHT:e.preventDefault(),t.handleNavRight(e);break;case r.LEFT:e.preventDefault(),t.handleNavLeft(e);break;case r.ENTER:t.handleNavEnter(e);
break;case r.ESC:t.handleNavEsc(e);break;case r.TAB:t.handleNavTab(e)}},handleNavUp:function(){},handleNavDown:function(){},handleNavLeft:function(){},handleNavRight:function(){},handleNavEnter:function(){},handleNavEsc:function(){},handleNavTab:function(){}},n.exports=s}),define("bui/common/component/uibase/list",["jquery","bui/common/component/uibase/selection"],function(e,t,n){function i(e,t){var n=t.isController?t.getAttrVals():t,i=e.get("itemTpl"),o=e.get("itemStatusCls"),a=e.get("itemTplRender");if(i&&!n.tpl&&r(t,"tpl",i),a&&!n.tplRender&&r(t,"tplRender",a),o){var s=n.statusCls||t.isController?t.get("statusCls"):{};BUI.each(o,function(e,t){e&&!s[t]&&(s[t]=e)}),r(t,"statusCls",s)}}function r(e,t,n){e.isController?e.set(t,n):e[t]=n}var o=e("jquery"),a=e("bui/common/component/uibase/selection"),s=function(){};s.ATTRS={items:{shared:!1,view:!0},idField:{value:"id"},itemTpl:{view:!0},itemTplRender:{view:!0},itemStatusCls:{view:!0,value:{}},events:{value:{itemclick:!0}}},s.prototype={getItemCount:function(){return this.getItems().length},getValueByField:function(){},getItems:function(){},getFirstItem:function(){return this.getItemAt(0)},getLastItem:function(){return this.getItemAt(this.getItemCount()-1)},getItemAt:function(e){return this.getItems()[e]||null},getItem:function(e){var t=this.get("idField");return this.findItemByField(t,e)},indexOfItem:function(e){return BUI.Array.indexOf(e,this.getItems())},addItems:function(e){var t=this;BUI.each(e,function(e){t.addItem(e)})},addItemsAt:function(e,t){var n=this;BUI.each(e,function(e,i){n.addItemAt(e,t+i)})},updateItem:function(){},addItem:function(e){return this.addItemAt(e,this.getItemCount())},addItemAt:function(){},findItemByField:function(){},getItemText:function(){},clearItems:function(){var e=this,t=e.getItems();t.splice(0),e.clearControl()},removeItem:function(){},removeItems:function(e){var t=this;BUI.each(e,function(e){t.removeItem(e)})},removeItemAt:function(e){this.removeItem(this.getItemAt(e))},clearControl:function(){}};var u=function(){this.__init()};u.ATTRS=BUI.merge(!0,s.ATTRS,a.ATTRS,{items:{sync:!1},autoInitItems:{value:!0},isDecorateChild:{value:!0},defaultLoaderCfg:{value:{property:"children",dataType:"json"}}}),BUI.augment(u,s,a,{__init:function(){var e=this,t=e.get("items");t&&e.get("autoInitItems")&&e.addItems(t),e.on("beforeRenderUI",function(){e._beforeRenderUI()})},_uiSetItems:function(e){var t=this;t.clearControl(),t.addItems(e)},_beforeRenderUI:function(){{var e=this,t=e.get("children");e.get("items")}BUI.each(t,function(t){i(e,t)})},__bindUI:function(){var e=this,t=e.get("selectedEvent");e.on(t,function(t){var n=t.target;n.get("selectable")&&(n.get("selected")?e.get("multipleSelect")&&e.clearSelected(n):e.setSelected(n))}),e.on("click",function(t){t.target!==e&&e.fire("itemclick",{item:t.target,domTarget:t.domTarget,domEvent:t})}),e.on("beforeAddChild",function(t){i(e,t.child)}),e.on("beforeRemoveChild",function(t){var n=t.child,i=n.get("selected");i&&(e.get("multipleSelect")?e.clearSelected(n):e.setSelected(null)),n.set("selected",!1)})},clearControl:function(){this.removeChildren(!0)},getItems:function(){return this.get("children")},updateItem:function(e){var t=this,n=t.get("idField"),i=t.findItemByField(n,e[n]);return i&&i.setTplContent(),i},removeItem:function(e){var t=this,n=t.get("idField");e instanceof BUI.Component.Controller||(e=t.findItemByField(n,e[n])),this.removeChild(e,!0)},addItemAt:function(e,t){return this.addChild(e,t)},findItemByField:function(e,t,n){n=n||this;var i=this,r=n.get("children"),a=null;return o(r).each(function(n,r){return r.get(e)==t?a=r:r.get("children").length&&(a=i.findItemByField(e,t,r)),a?!1:void 0}),a},getItemText:function(e){return e.get("el").text()},getValueByField:function(e,t){return e&&e.get(t)},setItemSelectedStatus:function(e,t){var n=this,i=null;e&&(e.set("selected",t),i=e.get("el")),n.afterSelected(e,t,i)},isItemSelected:function(e){return e?e.get("selected"):!1},setAllSelection:function(){var e=this,t=e.getItems();e.setSelection(t)},getSelection:function(){var e=this,t=e.getItems(),n=[];return BUI.each(t,function(t){e.isItemSelected(t)&&n.push(t)}),n}}),s.ChildList=u,n.exports=s}),define("bui/common/component/uibase/listitem",[],function(e,t,n){function i(){}function r(){}i.ATTRS={selected:{}},i.prototype={_uiSetSelected:function(e){var t=this,n=t.getStatusCls("selected"),i=t.get("el");e?i.addClass(n):i.removeClass(n)}},r.ATTRS={selectable:{value:!0},selected:{view:!0,sync:!1,value:!1}},r.prototype={},r.View=i,n.exports=r}),define("bui/common/component/uibase/mask",["jquery","bui/common/ua"],function(e,t,n){function i(e){return e.get("prefixCls")+"ext-mask"}function r(){return f?BUI.docWidth()+"px":"100%"}function o(){return f?BUI.docHeight()+"px":"100%"}function a(e){var t=l('<div  style="width:'+r()+";left:0;top:0;height:"+o()+";position:"+(f?"absolute":"fixed")+';" class="'+e+'">'+(f?'<iframe style="position:absolute;left:0;top:0;background:white;width: expression(this.parentNode.offsetWidth);height: expression(this.parentNode.offsetHeight);filter:alpha(opacity=0);z-index:-1;"></iframe>':"")+"</div>").prependTo("body");return t.on("mousedown",function(e){e.preventDefault()}),t}function s(){}function u(){}var l=e("jquery"),c=e("bui/common/ua"),d={},f=6==c.ie;s.ATTRS={maskShared:{value:!0}},s.prototype={_maskExtShow:function(){var e,t=this,n=i(t),r=d[n],o=t.get("maskShared"),s=t.get("maskNode");s||(o?r?s=r.node:(s=a(n),r=d[n]={num:0,node:s}):s=a(n),t.setInternal("maskNode",s)),(e=t.get("zIndex"))&&s.css("z-index",e-1),o&&r.num++,o&&1!=r.num||s.show(),l("body").addClass("x-masked-relative")},_maskExtHide:function(){var e=this,t=i(e),n=d[t],r=e.get("maskShared"),o=e.get("maskNode");r&&n?(n.num=Math.max(n.num-1,0),0==n.num&&o.hide()):o&&o.hide(),l("body").removeClass("x-masked-relative")},__destructor:function(){var e=this,t=e.get("maskShared"),n=e.get("maskNode");e.get("maskNode")&&(t?e.get("visible")&&e._maskExtHide():n.remove())}},u.ATTRS={mask:{value:!1},maskNode:{view:1},maskShared:{view:1}},u.prototype={__bindUI:function(){{var e=this,t=e.get("view");t._maskExtShow,t._maskExtHide}e.get("mask")&&(e.on("show",function(){t._maskExtShow()}),e.on("hide",function(){t._maskExtHide()}))}},u=u,u.View=s,n.exports=u}),define("bui/common/component/uibase/position",["jquery"],function(e,t,n){function i(){}function r(){}var o=e("jquery");i.ATTRS={x:{valueFn:function(){var e=this;return e.get("el")&&e.get("el").offset().left}},y:{valueFn:function(){var e=this;return e.get("el")&&e.get("el").offset().top}},zIndex:{},visibleMode:{value:"visibility"}},i.prototype={__createDom:function(){this.get("el").addClass(BUI.prefix+"ext-position")},_uiSetZIndex:function(e){this.get("el").css("z-index",e)},_uiSetX:function(e){null!=e&&this.get("el").offset({left:e})},_uiSetY:function(e){null!=e&&this.get("el").offset({top:e})},_uiSetLeft:function(e){null!=e&&this.get("el").css({left:e})},_uiSetTop:function(e){null!=e&&this.get("el").css({top:e})}},r.ATTRS={x:{view:1},y:{view:1},left:{view:1},top:{view:1},xy:{setter:function(e){var t=this,n=o.makeArray(e);return n.length&&(n[0]&&t.set("x",n[0]),n[1]&&t.set("y",n[1])),e},getter:function(){return[this.get("x"),this.get("y")]}},zIndex:{view:1},visible:{view:!0,value:!0}},r.prototype={move:function(e,t){var n=this;return BUI.isArray(e)&&(t=e[1],e=e[0]),n.set("xy",[e,t]),n},_uiSetX:function(e){if(null!=e){var t=this,n=t.get("el");t.setInternal("left",n.position().left),-999!=e&&this.set("cachePosition",null)}},_uiSetY:function(e){if(null!=e){var t=this,n=t.get("el");t.setInternal("top",n.position().top),-999!=e&&this.set("cachePosition",null)}},_uiSetLeft:function(e){var t=this,n=t.get("el");null!=e&&t.setInternal("x",n.offset().left)},_uiSetTop:function(e){var t=this,n=t.get("el");null!=e&&t.setInternal("y",n.offset().top)}},r.View=i,n.exports=r}),define("bui/common/component/uibase/selection",["jquery"],function(e,t,n){var i=e("jquery"),r=function(){};r.ATTRS={selectedEvent:{value:"click"},events:{value:{selectedchange:!1,beforeselectedchange:!1,itemselected:!1,itemunselected:!1}},idField:{value:"id"},multipleSelect:{value:!1}},r.prototype={clearSelection:function(){var e=this,t=e.getSelection();BUI.each(t,function(t){e.clearSelected(t)})},getSelection:function(){},getSelected:function(){return this.getSelection()[0]},getSelectedValue:function(){var e=this,t=e.get("idField"),n=e.getSelected();return e.getValueByField(n,t)},getSelectionValues:function(){var e=this,t=e.get("idField"),n=e.getSelection();return i.map(n,function(n){return e.getValueByField(n,t)})},getSelectionText:function(){var e=this,t=e.getSelection();return i.map(t,function(t){return e.getItemText(t)})},clearSelected:function(e){var t=this;e=e||t.getSelected(),e&&t.setItemSelected(e,!1)},getSelectedText:function(){var e=this,t=e.getSelected();return e.getItemText(t)},setSelection:function(e){var t=this;e=BUI.isArray(e)?e:[e],BUI.each(e,function(e){t.setSelected(e)})},setSelected:function(e){var t=this,n=t.get("multipleSelect");if(t.isItemSelectable(e)){if(!n){var i=t.getSelected();e!=i&&t.clearSelected(i)}t.setItemSelected(e,!0)}},isItemSelected:function(){},isItemSelectable:function(){return!0},setItemSelected:function(e,t){var n,i=this;e&&(n=i.isItemSelected(e),n==t)||i.fire("beforeselectedchange",{item:e,selected:t})!==!1&&i.setItemSelectedStatus(e,t)},setItemSelectedStatus:function(){},setAllSelection:function(){},setSelectedByField:function(e,t){t||(t=e,e=this.get("idField"));var n=this,i=n.findItemByField(e,t);n.setSelected(i)},setSelectionByField:function(e,t){t||(t=e,e=this.get("idField"));var n=this;BUI.each(t,function(t){n.setSelectedByField(e,t)})},afterSelected:function(e,t,n){var i=this;t?(i.fire("itemselected",{item:e,domTarget:n}),i.fire("selectedchange",{item:e,domTarget:n,selected:t})):(i.fire("itemunselected",{item:e,domTarget:n}),i.get("multipleSelect")&&i.fire("selectedchange",{item:e,domTarget:n,selected:t}))}},n.exports=r}),define("bui/common/component/uibase/stdmod",["jquery"],function(e,t,n){function i(){}function r(e,t){var n=e.get("contentEl"),i=e.get(t);i||(i=s('<div class="'+u+t+'"  ></div>'),i.appendTo(n),e.setInternal(t,i))}function o(e,t,n){t=e.get(t),BUI.isString(n)?t.html(n):t.html("").append(n)}function a(){}var s=e("jquery"),u=BUI.prefix+"stdmod-";i.ATTRS={header:{},body:{},footer:{},bodyStyle:{},footerStyle:{},headerStyle:{},headerContent:{},bodyContent:{},footerContent:{}},i.PARSER={header:function(e){return e.one("."+u+"header")},body:function(e){return e.one("."+u+"body")},footer:function(e){return e.one("."+u+"footer")}},i.prototype={__renderUI:function(){r(this,"header"),r(this,"body"),r(this,"footer")},_uiSetBodyStyle:function(e){this.get("body").css(e)},_uiSetHeaderStyle:function(e){this.get("header").css(e)},_uiSetFooterStyle:function(e){this.get("footer").css(e)},_uiSetBodyContent:function(e){o(this,"body",e)},_uiSetHeaderContent:function(e){o(this,"header",e)},_uiSetFooterContent:function(e){o(this,"footer",e)}},a.ATTRS={header:{view:1},body:{view:1},footer:{view:1},bodyStyle:{view:1},footerStyle:{view:1},headerStyle:{view:1},headerContent:{view:1},bodyContent:{view:1},footerContent:{view:1}},a.View=i,n.exports=a}),define("bui/common/component/uibase/decorate",["jquery","bui/common/array","bui/common/json","bui/common/component/manage","bui/common/util","bui/common/ua"],function(e,t,n){function i(e,t){if(t[e])return!0;var n=new RegExp("^"+h);return e!==v&&n.test(e)?!0:!1}function r(e){for(var t=[],n=e.constructor;n;)t.push(n),n=n.superclass&&n.superclass.constructor;return t}function o(e){return e.toLowerCase().replace(y,function(e,t){return(t+"").toUpperCase()})}function a(e){if(e=f.trim(e),"false"===e.toLowerCase())e=!1;else if("true"===e.toLowerCase())e=!0;else if(x.test(e))e=m.looseParse(e);else if(/\d/.test(e)&&/[^a-z]/i.test(e)){var t=parseFloat(e);t+""===e&&(e=t)}return e}function s(e,t){var n=e.userConfig||{};for(var i in t)i in n||e.setInternal(i,t[i])}function u(e,t){var n,i,r=this,o=r.userConfig||{};for(n in t)n in o||(i=t[n],BUI.isFunction(i)?r.setInternal(n,i.call(r,e)):"string"==typeof i?r.setInternal(n,e.find(i)):BUI.isArray(i)&&i[0]&&r.setInternal(n,e.find(i[0])))}function l(e,t){var n,i,o,a=e.constructor;for(o=r(e),n=o.length-1;n>=0;n--)a=o[n],(i=a[p])&&u.call(e,t,i)}function c(e){var t,n,i=e,r=i.get("srcNode");r&&(r=f(r),i.setInternal("el",r),i.setInternal("srcNode",r),t=i.get("userConfig"),n=i.getDecorateConfig(r),s(e,n),i.get("isDecorateChild")&&i.decorateInternal&&i.decorateInternal(r),l(e,r))}function d(){c(this)}var f=e("jquery"),m=(e("bui/common/array"),e("bui/common/json")),g=BUI.prefix,h="data-",v=h+"cfg",p="PARSER",b=e("bui/common/component/manage"),y=/-([a-z])/g,x=/^[\{\[]/;d.ATTRS={srcNode:{view:!0},isDecorateChild:{value:!1},decorateCfgFields:{value:{id:!0,name:!0,value:!0,title:!0}}},d.prototype={getDecorateConfig:function(e){if(!e.length)return null;var t=this,n=e[0],r=n.attributes,s=t.get("decorateCfgFields"),u={},l=t._getStautsCfg(e);return BUI.each(r,function(e){var t=e.nodeName;try{if(t===v){var n=a(e.nodeValue);BUI.mix(u,n)}else if(i(t,s)){var r=e.nodeValue;-1!==t.indexOf(h)&&(t=t.replace(h,""),t=o(t),r=a(r)),u[t]&&BUI.isObject(r)?BUI.mix(u[t],r):u[t]=r}}catch(l){BUI.log("parse field error,the attribute is:"+t)}}),BUI.mix(u,l)},_getStautsCfg:function(e){var t=this,n={},i=t.get("statusCls");return BUI.each(i,function(t,i){e.hasClass(t)&&(n[i]=!0)}),n},getDecorateElments:function(){var e=this,t=e.get("el"),n=e.get("childContainer");return n?t.find(n).children():t.children()},decorateInternal:function(e){var t=this;t.decorateChildren(e)},findXClassByNode:function(e,t){var n=this,i=e.attr("class")||"",r=n.get("defaultChildClass");i=i.replace(new RegExp("\\b"+g,"ig"),"");var o=b.getConstructorByXClass(i)||b.getConstructorByXClass(r);return o||t||(BUI.log(e),BUI.error("can not find ui "+i+" from this markup")),b.getXClassByConstructor(o)},decorateChildrenInternal:function(e,t){var n=this,i=n.get("children");i.push({xclass:e,srcNode:t})},decorateChildren:function(){var e=this,t=e.getDecorateElments();BUI.each(t,function(t){var n=e.findXClassByNode(f(t));e.decorateChildrenInternal(n,f(t))})}},n.exports=d}),define("bui/common/component/uibase/tpl",["jquery"],function(e,t,n){function i(){}function r(){}e("jquery");i.ATTRS={tpl:{},tplEl:{}},i.prototype={__renderUI:function(){var e,t=this,n=t.get("childContainer");n&&(e=t.get("el").find(n),e.length&&t.set("contentEl",e))},getTpl:function(e){var t=this,n=t.get("tpl"),i=t.get("tplRender");return e=e||t.getAttrVals(),i?i(e):n?BUI.substitute(n,e):""},setTplContent:function(e){var t=this,n=t.get("el"),i=t.get("content"),r=(t.get("tplEl"),t.getTpl(e));!i&&r&&(n.empty(),n.html(r))}},r.ATTRS={tpl:{view:!0,sync:!1},tplRender:{view:!0,value:null},childContainer:{view:!0}},r.prototype={__renderUI:function(){this.get("srcNode")||this.setTplContent()},updateContent:function(){this.setTplContent()},setTplContent:function(){var e=this,t=e.getAttrVals();e.get("view").setTplContent(t)},_uiSetTpl:function(){this.setTplContent()}},r.View=i,n.exports=r}),define("bui/common/component/uibase/childcfg",["jquery"],function(e,t,n){var i=e("jquery"),r=function(){this._init()};r.ATTRS={defaultChildCfg:{}},r.prototype={_init:function(){var e=this,t=e.get("defaultChildCfg");t&&e.on("beforeAddChild",function(e){var n=e.child;i.isPlainObject(n)&&BUI.each(t,function(e,t){null==n[t]&&(n[t]=e)})})}},n.exports=r}),define("bui/common/component/uibase/bindable",[],function(e,t,n){function i(){}i.ATTRS={store:{},loadMask:{value:!1}},BUI.augment(i,{__bindUI:function(){var e=this,t=e.get("store"),n=e.get("loadMask");t&&(t.on("beforeload",function(t){e.onBeforeLoad(t),n&&n.show&&n.show()}),t.on("load",function(t){e.onLoad(t),n&&n.hide&&n.hide()}),t.on("exception",function(t){e.onException(t),n&&n.hide&&n.hide()}),t.on("add",function(t){e.onAdd(t)}),t.on("remove",function(t){e.onRemove(t)}),t.on("update",function(t){e.onUpdate(t)}),t.on("localsort",function(t){e.onLocalSort(t)}),t.on("filtered",function(t){e.onFiltered(t)}))},__syncUI:function(){var e=this,t=e.get("store");t&&t.hasData()&&e.onLoad()},onBeforeLoad:function(){},onLoad:function(){},onException:function(){},onAdd:function(){},onRemove:function(){},onUpdate:function(){},onLocalSort:function(){},onFiltered:function(){}}),n.exports=i}),define("bui/common/component/uibase/depends",["jquery","bui/common/component/manage"],function(e,t,n){function i(e){var t=l.exec(e),n=t[1],i=t[2],r=a(n);return{source:r,eventType:i}}function r(e,t,n){var r,o=i(t),a=o.source,s=o.eventType;return a&&n&&s&&(BUI.isFunction(n)?r=n:BUI.isArray(n)&&(r=function(){BUI.each(n,function(t){e[t]&&e[t]()})})),r?(o.callbak=r,a.on(s,r),o):null}function o(e){var t=e.source,n=e.eventType,i=e.callbak;t.off(n,i)}function a(e){var t=c.getComponent(e);return t||(t=u("#"+e),t.length||(t=null)),t}function s(){}var u=e("jquery"),l=/^#(.*):(.*)$/,c=e("bui/common/component/manage");s.ATTRS={depends:{},dependencesMap:{shared:!1,value:{}}},s.prototype={__syncUI:function(){this.initDependences()},initDependences:function(){var e=this,t=e.get("depends");BUI.each(t,function(t,n){e.addDependence(n,t)})},addDependence:function(e,t){var n,i=this,o=i.get("dependencesMap");i.removeDependence(e),n=r(i,e,t),n&&(o[e]=n)},removeDependence:function(e){var t=this,n=t.get("dependencesMap"),i=n[e];i&&(o(i),delete n[e])},clearDependences:function(){var e=this,t=e.get("dependencesMap");BUI.each(t,function(e){o(e)}),e.set("dependencesMap",{})},__destructor:function(){this.clearDependences()}},n.exports=s}),define("bui/common/component/loader",["jquery","bui/common/util","bui/common/base","bui/common/observable","bui/common/array"],function(e,t,n){"use strict";var i=e("jquery"),r=e("bui/common/util"),o=e("bui/common/base"),a=function(e){a.superclass.constructor.call(this,e),this._init()};a.ATTRS={url:{},target:{},hasLoad:{value:!1},autoLoad:{},lazyLoad:{},property:{},renderer:{value:function(e){return e}},loadMask:{value:!1},dataType:{value:"text"},ajaxOptions:{value:{type:"get",cache:!1}},params:{},appendParams:{},lastParams:{shared:!1,value:{}},callback:{},failure:{}},r.extend(a,o),r.augment(a,{isLoader:!0,_init:function(){var e=this,t=e.get("autoLoad"),n=e.get("params");e._initMask(),t?e.load(n):(e._initParams(),e._initLazyLoad())},_initLazyLoad:function(){var e=this,t=e.get("target"),n=e.get("lazyLoad");t&&n&&n.event&&t.on(n.event,function(){(!e.get("hasLoad")||n.repeat)&&e.load()})},_initMask:function(){var t=this,n=t.get("target"),o=t.get("loadMask");n&&o&&e.async("bui/mask",function(e){var a=i.isPlainObject(o)?o:{};o=new e.LoadMask(r.mix({el:n.get("el")},a)),t.set("loadMask",o)})},_initParams:function(){var e=this,t=e.get("lastParams"),n=e.get("params");r.mix(t,n)},load:function(e){var t=this,n=t.get("url"),o=t.get("ajaxOptions"),a=t.get("lastParams"),s=t.get("appendParams");e=e||a,e=r.merge(s,e),t.set("lastParams",e),n&&(t.onBeforeLoad(),t.set("hasLoad",!0),i.ajax(r.mix({dataType:t.get("dataType"),data:e,url:n,success:function(n){t.onload(n,e)},error:function(n,i,r){t.onException({jqXHR:n,textStatus:i,errorThrown:r},e)}},o)))},onBeforeLoad:function(){var e=this,t=e.get("loadMask");t&&t.show&&t.show()},onload:function(e,t){var n=this,i=n.get("loadMask"),o=n.get("property"),a=n.get("callback"),s=n.get("renderer"),u=n.get("target");r.isString(e)&&u.set(o,""),u.set(o,s.call(n,e)),i&&i.hide&&i.hide(),a&&a.call(this,e,t)},onException:function(e,t){var n=this,i=n.get("failure");i&&i.call(this,e,t)}}),n.exports=a}),define("bui/data",["jquery","bui/common","bui/data/sortable","bui/data/proxy","bui/data/abstractstore","bui/data/store","bui/data/node","bui/data/treestore"],function(e,t,n){var i=e("bui/common"),r=i.namespace("Data");i.mix(r,{Sortable:e("bui/data/sortable"),Proxy:e("bui/data/proxy"),AbstractStore:e("bui/data/abstractstore"),Store:e("bui/data/store"),Node:e("bui/data/node"),TreeStore:e("bui/data/treestore")}),n.exports=r}),define("bui/data/sortable",[],function(e,t,n){var i="ASC",r=function(){};r.ATTRS={compareFunction:{value:function(e,t){return void 0===e&&(e=""),void 0===t&&(t=""),BUI.isString(e)?e.localeCompare(t):e>t?1:e===t?0:-1}},sortField:{},sortDirection:{value:"ASC"},sortInfo:{getter:function(){var e=this,t=e.get("sortField");return{field:t,direction:e.get("sortDirection")}},setter:function(e){var t=this;t.set("sortField",e.field),t.set("sortDirection",e.direction)}}},BUI.augment(r,{compare:function(e,t,n,r){var o,a=this;return n=n||a.get("sortField"),r=r||a.get("sortDirection"),n&&r?(o=r===i?1:-1,a.get("compareFunction")(e[n],t[n])*o):1},getSortData:function(){},sortData:function(e,t,n){var i=this,n=n||i.getSortData();return BUI.isArray(e)&&(n=e,e=null),e=e||i.get("sortField"),t=t||i.get("sortDirection"),i.set("sortField",e),i.set("sortDirection",t),e&&t?(n.sort(function(n,r){return i.compare(n,r,e,t)}),n):n}}),n.exports=r}),define("bui/data/proxy",["jquery","bui/data/sortable"],function(e,t,n){var i=e("jquery"),r=e("bui/data/sortable"),o=function(e){o.superclass.constructor.call(this,e)};o.ATTRS={},BUI.extend(o,BUI.Base),BUI.augment(o,{_read:function(){},read:function(e,t,n){var i=this;n=n||i,i._read(e,function(e){t.call(n,e)})},_save:function(){},save:function(e,t,n,i){var r=this;i=i||r,r._save(e,t,function(e){n.call(i,e)})}});var a={READ:"read",ADD:"add",UPDATE:"update",REMOVE:"remove",SAVE_ALL:"all"},s=function(e){s.superclass.constructor.call(this,e)};s.ATTRS=BUI.mix(!0,o.ATTRS,{limitParam:{value:"limit"},startParam:{value:"start"},pageIndexParam:{value:"pageIndex"},saveTypeParam:{value:"saveType"},saveDataParam:{},pageStart:{value:0},dataType:{value:"json"},method:{value:"GET"},ajaxOptions:{value:{}},cache:{value:!1},save:{},url:{}}),BUI.extend(s,o),BUI.augment(s,{_processParams:function(e){var t=this,n=t.get("pageStart"),i=["start","limit","pageIndex"];null!=e.pageIndex&&(e.pageIndex=e.pageIndex+n),BUI.each(i,function(n){var i=t.get(n+"Param");i!==n&&(e[i]=e[n],delete e[n])})},_getUrl:function(e){var t,n=this,i=n.get("save");return e===a.READ?n.get("url"):i?BUI.isString(i)?i:(t=i[e+"Url"],t||(t=n.get("url")),t):n.get("url")},_getAppendParams:function(e){var t,n,i=this,r=null;return e==a.READ?r:(t=i.get("save"),n=i.get("saveTypeParam"),t&&!t[e+"Url"]&&(r={},r[n]=e),r)},_read:function(e,t){var n,i=this;e=BUI.cloneObject(e),i._processParams(e),n=i._getAjaxOptions(a.READ,e),i._ajax(n,t)},_getAjaxOptions:function(e,t){var n,i=this,r=i.get("ajaxOptions"),o=i._getUrl(e);return BUI.mix(t,i._getAppendParams(e)),n=BUI.merge({url:o,type:i.get("method"),dataType:i.get("dataType"),data:t,cache:i.get("cache")},r)},_ajax:function(e,t){var n=e.success,r=e.error;e.success=function(e){n&&n(e),t(e)},e.error=function(e,n,i){r&&r(e,n,i);var o={exception:{status:n,errorThrown:i,jqXHR:e}};t(o)},i.ajax(e)},_save:function(e,t,n){var i,r=this;i=r._getAjaxOptions(e,t),r._ajax(i,n)}});var u=function(e){u.superclass.constructor.call(this,e)};u.ATTRS={matchFields:{value:[]}},BUI.extend(u,o),BUI.mixin(u,[r]),BUI.augment(u,{_read:function(e,t){var n=this,i=(e.pageable,e.start),r=e.sortField,o=e.sortDirection,a=e.limit,s=n.get("data"),u=[];s=n._getMatches(e),n.sortData(r,o),a?(u=s.slice(i,i+a),t({rows:u,results:s.length})):(u=s.slice(i),t(u))},_getMatchFn:function(e,t){return function(n){var i=!0;return BUI.each(t,function(t){return null!=e[t]&&e[t]!==n[t]?(i=!1,!1):void 0}),i}},_getMatches:function(e){var t,n=this,i=n.get("matchFields"),r=n.get("data")||[];return e&&i.length&&(t=n._getMatchFn(e,i),r=BUI.Array.filter(r,t)),r},_save:function(e,t){var n=this,i=n.get("data");e==a.ADD?i.push(t):e==a.REMOVE?BUI.Array.remove(i,t):e==a.SAVE_ALL&&(BUI.each(t.add,function(e){i.push(e)}),BUI.each(t.remove,function(e){BUI.Array.remove(i,e)}))}}),o.Ajax=s,o.Memery=u,n.exports=o}),define("bui/data/abstractstore",["jquery","bui/common","bui/data/proxy","bui/data/sortable"],function(e,t,n){function i(e){i.superclass.constructor.call(this,e),this._init()}var r=e("bui/common"),o=e("bui/data/proxy");i.ATTRS={autoLoad:{value:!1},remoteFilter:{value:!1},lastParams:{shared:!1,value:{}},params:{},proxy:{shared:!1,value:{}},url:{},events:{value:["acceptchanges","load","beforeload","beforeprocessload","add","exception","remove","update","localsort","filtered"]},data:{setter:function(e){var t=this,n=t.get("proxy");n.set?n.set("data",e):n.data=e,t.set("autoLoad",!0)}}},r.extend(i,r.Base),r.augment(i,{isStore:!0,_init:function(){var e=this;e.beforeInit(),e._initParams(),e._initProxy(),e._initData()},beforeInit:function(){},_initData:function(){var e=this,t=e.get("autoLoad");t&&e.load()},_initParams:function(){var e=this,t=e.get("lastParams"),n=e.get("params");r.mix(t,n)},_initProxy:function(){var e=this,t=e.get("url"),n=e.get("proxy");n instanceof o||(t&&(n.url=t),n="ajax"===n.type||n.url?new o.Ajax(n):new o.Memery(n),e.set("proxy",n))},load:function(e,t){var n=this,i=n.get("proxy"),o=n.get("lastParams");r.mix(o,n.getAppendParams(),e),n.fire("beforeload",{params:o}),e=r.cloneObject(o),i.read(o,function(i){n.onLoad(i,e),t&&t(i,e)},n)},onFiltered:function(e,t){var n=this;n.fire("filtered",{data:e,filter:t})},onLoad:function(e,t){var n=this,i=n.processLoad(e,t);i&&n.afterProcessLoad(e,t)},getResult:function(){},filter:function(e){var t,n=this,i=n.get("remoteFilter");e=e||n.get("filter"),i?n.load({filter:e}):e&&(n.set("filter",e),n.getResult().length>0&&(t=n._filterLocal(e),n.onFiltered(t,e)))},_filterLocal:function(){},getFilterResult:function(){var e=this.get("filter");return e?this._filterLocal(e):this.getResult()},_clearLocalFilter:function(){this.set("filter",null)},clearFilter:function(){var e,t=this,n=t.get("remoteFilter");n?t.load({filter:""}):(t._clearLocalFilter(),e=t.getFilterResult(),t.onFiltered(e,null))},processLoad:function(e){var t=this,n=t.get("hasErrorProperty");return t.fire("beforeprocessload",{data:e}),t.fire("beforeProcessLoad",e),e[n]||e.exception?(t.onException(e),!1):!0},afterProcessLoad:function(){},onException:function(e){var t=this,n=t.get("errorProperty"),i={};e.exception?(i.type="exception",i[n]=e.exception):(i.type="error",i[n]=e[n]),t.fire("exception",i)},hasData:function(){},getAppendParams:function(){return{}}}),n.exports=i}),define("bui/data/store",["jquery","bui/data/proxy","bui/data/abstractstore","bui/data/sortable","bui/common"],function(e,t,n){function i(e,t){if(!(0>e)){var n=t,i=n[e];return n.splice(e,1),i}}function r(e,t){var n=BUI.Array.indexOf(e,t);n>=0&&i(n,t)}function o(e,t){return-1!==BUI.Array.indexOf(e,t)}var a=e("jquery"),s=e("bui/data/proxy"),u=e("bui/data/abstractstore"),l=e("bui/data/sortable"),c=function(e){c.superclass.constructor.call(this,e)};c.ATTRS={autoSync:{value:!1},currentPage:{value:0},deletedRecords:{shared:!1,value:[]},errorProperty:{value:"error"},hasErrorProperty:{value:"hasError"},matchFunction:{value:function(e,t){return e==t}},modifiedRecords:{shared:!1,value:[]},newRecords:{shared:!1,value:[]},remoteSort:{value:!1},resultMap:{shared:!1,value:{}},root:{value:"rows"},rowCount:{value:0},totalProperty:{value:"results"},start:{value:0},pageSize:{}},BUI.extend(c,u),BUI.mixin(c,[l]),BUI.augment(c,{add:function(e,t,n){var i=this,r=i.getCount();i.addAt(e,r,t,n)},addAt:function(e,t,n,i){var o=this;i=i||o._getDefaultMatch(),BUI.isArray(e)||(e=[e]),a.each(e,function(e,a){n&&o.contains(a,i)||(o._addRecord(a,e+t),o.get("newRecords").push(a),r(a,o.get("deletedRecords")),r(a,o.get("modifiedRecords")))})},contains:function(e,t){return-1!==this.findIndexBy(e,t)},find:function(e,t){var n=this,i=null,r=n.getResult();return a.each(r,function(n,r){return r[e]===t?(i=r,!1):void 0}),i},findAll:function(e,t){var n=this,i=[],r=n.getResult();return a.each(r,function(n,r){r[e]===t&&i.push(r)}),i},findByIndex:function(e){return this.getResult()[e]},findIndexBy:function(e,t){var n=this,i=-1,r=n.getResult();return t=t||n._getDefaultMatch(),null===e||void 0===e?-1:(a.each(r,function(n,r){return t(e,r)?(i=n,!1):void 0}),i)},findNextRecord:function(e){var t=this,n=t.findIndexBy(e);return n>=0?t.findByIndex(n+1):void 0},getCount:function(){return this.getResult().length},getTotalCount:function(){var e=this,t=e.get("resultMap"),n=e.get("totalProperty");return parseInt(t[n],10)||0},getResult:function(){var e=this,t=e.get("resultMap"),n=e.get("root");return t[n]},hasData:function(){return 0!==this.getCount()},setResult:function(e){var t=this,n=t.get("proxy");n instanceof s.Memery?(t.set("data",e),t.load({start:0})):(t._setResult(e),t.get("filter")&&t.filter())},remove:function(e,t){var n=this;t=t||n._getDefaultMatch(),BUI.isArray(e)||(e=[e]),a.each(e,function(e,a){var e=n.findIndexBy(a,t),s=i(e,n.getResult());o(s,n.get("newRecords"))||o(s,n.get("deletedRecords"))||n.get("deletedRecords").push(s),r(s,n.get("newRecords")),r(s,n.get("modifiedRecords")),n.fire("remove",{record:s})})},save:function(e,t,n){var i=this,r=i.get("proxy");BUI.isFunction(e)&&(n=e,e=void 0),BUI.isObject(e)&&(n=t,t=e,e=void 0),e||(e=i._getSaveType(t)),"all"!=e||t||(t=i._getDirtyData()),i.fire("beforesave",{type:e,saveData:t}),r.save(e,t,function(r){i.onSave(e,t,r),n&&n(r,t)},i)},_getSaveType:function(e){var t=this;return e?BUI.Array.contains(e,t.get("newRecords"))?"add":BUI.Array.contains(e,t.get("modifiedRecords"))?"update":BUI.Array.contains(e,t.get("deletedRecords"))?"remove":"custom":"all"},_getDirtyData:function(){var e=this,t=e.get("proxy");return t.get("url")?{add:BUI.JSON.stringify(e.get("newRecords")),update:BUI.JSON.stringify(e.get("modifiedRecords")),remove:BUI.JSON.stringify(e.get("deletedRecords"))}:{add:e.get("newRecords"),update:e.get("modifiedRecords"),remove:e.get("deletedRecords")}},onSave:function(e,t,n){var i=this,r=i.get("hasErrorProperty");return n[r]||n.exception?void i.onException(n):(i._clearDirty(e,t),i.fire("saved",{type:e,saveData:t,data:n}),void(i.get("autoSync")&&i.load()))},_clearDirty:function(e,t){function n(e,t){BUI.Array.remove(i.get(t),e)}var i=this;switch(e){case"all":i._clearChanges();break;case"add":n(t,"newRecords");break;case"update":n(t,"modifiedRecords");break;case"remove":n(t,"deletedRecords")}},sort:function(e,t){var n=this,i=n.get("remoteSort");i?(n.set("sortField",e),n.set("sortDirection",t),n.load(n.get("sortInfo"))):n._localSort(e,t)},sum:function(e,t){var n=this,i=t||n.getResult(),r=0;return BUI.each(i,function(t){var n=t[e];isNaN(n)||(r+=parseFloat(n))}),r},setValue:function(e,t,n){var i=e,r=this;i[t]=n,o(i,r.get("newRecords"))||o(i,r.get("modifiedRecords"))||r.get("modifiedRecords").push(i),r.fire("update",{record:i,field:t,value:n})},update:function(e,t,n){var i=e,r=this,n=null,a=null;t&&(n=n||r._getDefaultMatch(),a=r.findIndexBy(e,n),a>=0&&(i=r.getResult()[a])),i=BUI.mix(i,e),o(i,r.get("newRecords"))||o(i,r.get("modifiedRecords"))||r.get("modifiedRecords").push(i),r.fire("update",{record:i})},_addRecord:function(e,t){var n=this.getResult();void 0==t&&(t=n.length),n.splice(t,0,e),this.fire("add",{record:e,index:t})},_clearChanges:function(){var e=this;BUI.Array.empty(e.get("newRecords")),BUI.Array.empty(e.get("modifiedRecords")),BUI.Array.empty(e.get("deletedRecords"))},_filterLocal:function(e,t){var n=this,i=[];return t=t||n.getResult(),e?(BUI.each(t,function(t){e(t)&&i.push(t)}),i):t},_getDefaultMatch:function(){return this.get("matchFunction")},_getPageParams:function(){var e=this,t=e.get("sortInfo"),n=e.get("start"),i=e.get("pageSize"),r=e.get("pageIndex")||(i?n/i:0);return params={start:n,limit:i,pageIndex:r},e.get("remoteSort")&&BUI.mix(params,t),params},getAppendParams:function(){return this._getPageParams()},beforeInit:function(){this._setResult([])},_localSort:function(e,t){var n=this;n._sortData(e,t),n.fire("localsort",{field:e,direction:t})},_sortData:function(e,t,n){var i=this;n=n||i.getResult(),i.sortData(e,t,n)},afterProcessLoad:function(e,t){var n=this,i=n.get("root"),r=t.start,o=t.limit,a=n.get("totalProperty");BUI.isArray(e)?n._setResult(e):n._setResult(e[i],e[a]),n.set("start",r),o&&n.set("pageIndex",r/o),n.get("remoteSort")||n._sortData(),n.fire("load",{params:t}),!n.get("remoteFilter")&&n.get("filter")&&n.filter(n.get("filter"))},_setResult:function(e,t){var n=this,i=n.get("resultMap");
t=t||e.length,i[n.get("root")]=e,i[n.get("totalProperty")]=t,n._clearChanges()}}),n.exports=c}),define("bui/data/node",["jquery","bui/common"],function(e,t,n){function i(e,t){var n={};return t?(o.each(e,function(e,i){var r=t[i]||i;n[r]=e}),n.record=e):n=e,n}function r(e,t){e=i(e,t),o.mix(this,e)}var o=e("bui/common");o.augment(r,{root:!1,leaf:null,text:"",id:null,loaded:!1,path:null,parent:null,level:0,record:null,children:null,isNode:!0}),n.exports=r}),define("bui/data/treestore",["jquery","bui/common","bui/data/node","bui/data/proxy","bui/data/abstractstore","bui/data/sortable"],function(e,t,n){function i(e){i.superclass.constructor.call(this,e)}var r=e("bui/common"),o=e("bui/data/node"),a=e("bui/data/proxy"),s=e("bui/data/abstractstore");i.ATTRS={root:{},map:{},pidField:{},dataProperty:{value:"nodes"},events:{value:["add","update","remove","load"]}},r.extend(i,s),r.augment(i,{beforeInit:function(){this.initRoot()},_initData:function(){var e=this,t=e.get("autoLoad"),n=e.get("pidField"),i=e.get("proxy"),r=e.get("root");!i.get("url")&&n&&i.get("matchFields").push(n),t&&!r.children&&e.loadNode(r)},initRoot:function(){var e=this,t=e.get("map"),n=e.get("root");n||(n={}),n.isNode||(n=new o(n,t)),n.path=[n.id],n.level=0,n.children&&e.setChildren(n,n.children),e.set("root",n)},add:function(e,t,n){var i=this;return e=i._add(e,t,n),i.fire("add",{node:e,record:e,index:n}),e},_add:function(e,t,n){t=t||this.get("root");var i,a=this,s=a.get("map"),u=t.children;return e.isNode||(e=new o(e,s)),i=e.children||[],0==i.length&&null==e.leaf&&(e.leaf=!0),t&&(t.leaf=!1),e.parent=t,e.level=t.level+1,e.path=t.path.concat(e.id),n=null==n?t.children.length:n,r.Array.addAt(u,e,n),a.setChildren(e,i),e},remove:function(e){var t=e.parent||_self.get("root"),n=r.Array.indexOf(e,t.children);return r.Array.remove(t.children,e),0===t.children.length&&(t.leaf=!0),this.fire("remove",{node:e,record:e,index:n}),e.parent=null,e},setValue:function(e,t,n){var i=this;e[t]=n,i.fire("update",{node:e,record:e,field:t,value:n})},update:function(e){this.fire("update",{node:e,record:e})},getResult:function(){return this.get("root").children},setResult:function(e){var t=this,n=t.get("proxy"),i=t.get("root");n instanceof a.Memery?(t.set("data",e),t.load({id:i.id})):t.setChildren(i,e)},setChildren:function(e,t){var n=this;e.children=[],t.length&&r.each(t,function(t){n._add(t,e)})},findNode:function(e,t,n){return this.findNodeBy(function(t){return t.id===e},t,n)},findNodeBy:function(e,t,n){var i=this;if(n=null==n?!0:n,!t){var o=i.get("root");return e(o)?o:i.findNodeBy(e,o)}var a=t.children,s=null;return r.each(a,function(t){return e(t)?s=t:n&&(s=i.findNodeBy(e,t)),s?!1:void 0}),s},findNodesBy:function(e,t){var n=this,i=[];return t||(t=n.get("root")),r.each(t.children,function(t){e(t)&&i.push(t),i=i.concat(n.findNodesBy(e,t))}),i},findNodeByPath:function(e){if(!e)return null;var t,n,i=this,r=i.get("root"),o=e.split(","),a=o[0];if(!a)return null;if(t=r.id==a?r:i.findNode(a,r,!1)){for(n=1;n<o.length;n+=1){var a=o[n];if(t=i.findNode(a,t,!1),!t)break}return t}},contains:function(e,t){var n=this,i=n.findNode(e.id,t);return!!i},afterProcessLoad:function(e,t){var n=this,i=n.get("pidField"),o=t.id||t[i],a=n.get("dataProperty"),s=n.findNode(o)||n.get("root");r.isArray(e)?n.setChildren(s,e):n.setChildren(s,e[a]),s.loaded=!0,n.fire("load",{node:s,params:t})},hasData:function(){return this.get("root").children&&0!==this.get("root").children.length},isLoaded:function(e){var t=this.get("root");return e!=t||t.children?this.get("url")||this.get("pidField")?e.loaded||e.leaf||!(!e.children||!e.children.length):!0:!1},loadNode:function(e,t){var n,i=this,r=i.get("pidField");(t||!i.isLoaded(e))&&(n={id:e.id},r&&(n[r]=e.id),i.load(n))},reloadNode:function(e){var t=this;e=e||t.get("root"),e.loaded=!1,t.loadNode(e,!0)},loadPath:function(e){var t=this,n=e.split(","),i=n[0];t.findNodeByPath(e)||t.load({id:i,path:e})}}),n.exports=i}),define("bui/list",["jquery","bui/common","bui/list/list","bui/list/listitem","bui/list/simplelist","bui/list/listbox","bui/list/domlist","bui/list/keynav","bui/list/sortable","bui/data"],function(e,t,n){var i=e("bui/common"),r=i.namespace("List");i.mix(r,{List:e("bui/list/list"),ListItem:e("bui/list/listitem"),SimpleList:e("bui/list/simplelist"),Listbox:e("bui/list/listbox")}),i.mix(r,{ListItemView:r.ListItem.View,SimpleListView:r.SimpleList.View}),n.exports=r}),define("bui/list/list",["jquery","bui/common"],function(e,t,n){var i=(e("jquery"),e("bui/common")),r=i.Component,o=r.UIBase,a=r.Controller.extend([o.ChildList],{},{ATTRS:{elTagName:{view:!0,value:"ul"},idField:{value:"id"},defaultChildClass:{value:"list-item"}}},{xclass:"list"});n.exports=a}),define("bui/list/listitem",["jquery","bui/common"],function(e,t,n){var i=(e("jquery"),e("bui/common")),r=i.Component,o=r.UIBase,a=r.View.extend([o.ListItemView],{}),s=r.Controller.extend([o.ListItem],{},{ATTRS:{elTagName:{view:!0,value:"li"},xview:{value:a},tpl:{view:!0,value:"<span>{text}</span>"}}},{xclass:"list-item"});s.View=a,n.exports=s}),define("bui/list/simplelist",["jquery","bui/common","bui/list/domlist","bui/list/keynav","bui/list/sortable","bui/data"],function(e,t,n){var i=e("jquery"),r=e("bui/common"),o=r.Component.UIBase,a=r.UA,s=e("bui/list/domlist"),u=e("bui/list/keynav"),l=e("bui/list/sortable"),c=r.prefix+"list-item",d=r.Component.View.extend([s.View],{setElementHover:function(e,t){var n=this;n.setItemStatusCls("hover",e,t)}},{ATTRS:{itemContainer:{valueFn:function(){return this.get("el").find(this.get("listSelector"))}}}},{xclass:"simple-list-view"}),f=r.Component.Controller.extend([s,o.Bindable,u,l],{bindUI:function(){var e=this,t=e.get("itemCls"),n=e.get("view").getItemContainer();n.delegate("."+t,"mouseover",function(t){if(!e.get("disabled")){var n=t.currentTarget,i=e.getItemByElement(n);e.isItemDisabled(t.item,t.currentTarget)||(a.ie&&a.ie<8||!e.get("focusable")||"hover"!==e.get("highlightedStatus")?e.setItemStatus(i,"hover",!0,n):e.setHighlighted(i,n))}}).delegate("."+t,"mouseout",function(t){if(!e.get("disabled")){var n=i(t.currentTarget);e.get("view").setElementHover(n,!1)}})},onAdd:function(e){var t=this,n=t.get("store"),i=e.record;0==t.getCount()?t.setItems(n.getResult()):t.addItemToView(i,e.index)},onRemove:function(e){var t=this,n=e.record;t.removeItem(n)},onUpdate:function(e){this.updateItem(e.record)},onLocalSort:function(e){this.get("frontSortable")?this.sort(e.field,e.direction):this.onLoad(e)},onLoad:function(){var e=this,t=e.get("store"),n=t.getResult();e.set("items",n)},onFiltered:function(e){var t=this,n=e.data;t.set("items",n)}},{ATTRS:{frontSortable:{value:!1},focusable:{value:!1},items:{view:!0,value:[]},itemCls:{view:!0,value:c},idField:{value:"value"},listSelector:{view:!0,value:"ul"},itemTpl:{view:!0,value:'<li role="option" class="'+c+'">{text}</li>'},tpl:{value:"<ul></ul>"},xview:{value:d}}},{xclass:"simple-list",prority:0});f.View=d,n.exports=f}),define("bui/list/listbox",["jquery","bui/list/simplelist","bui/common","bui/list/domlist","bui/list/keynav","bui/list/sortable","bui/data"],function(e,t,n){var i=e("jquery"),r=e("bui/list/simplelist"),o=r.extend({bindUI:function(){var e=this;e.on("selectedchange",function(e){var t=e.item,n=i(e.domTarget),r=n.find("input");t&&r.attr("checked",e.selected)})}},{ATTRS:{itemTpl:{value:'<li><span class="x-checkbox"></span>{text}</li>'},multipleSelect:{value:!0}}},{xclass:"listbox"});n.exports=o}),define("bui/list/domlist",["jquery","bui/common"],function(e,t,n){"use strict";function i(e,t){var n=t,i=n.get("itemCls"),r=n.get("itemStatusCls");return r&&r[e]?r[e]:i+"-"+e}function r(e,t){var n=e.attributes,r=t.get("itemStatusFields"),s={};return a.each(n,function(e){var t=e.nodeName;-1!==t.indexOf(u)&&(t=t.replace(u,""),s[t]=e.nodeValue)}),s.text=o(e).text(),a.each(r,function(n,r){var a=i(r,t);o(e).hasClass(a)&&(s[n]=!0)}),s}var o=e("jquery"),a=e("bui/common"),s=a.Component.UIBase.Selection,u="data-",l=a.Component.UIBase.List,c=function(){};c.ATTRS={items:{}},c.prototype={clearControl:function(){var e=this,t=e.getItemContainer(),n=e.get("itemCls");t.find("."+n).remove()},addItem:function(e,t){return this._createItem(e,t)},getItems:function(){var e=this,t=e.getAllElements(),n=[];return a.each(t,function(t){n.push(e.getItemByElement(t))}),n},updateItem:function(e){var t,n=this,i=n.getItems(),r=a.Array.indexOf(e,i),s=null;return r>=0&&(s=n.findElement(e),t=n.getItemTpl(e,r),s&&o(s).html(o(t).html())),s},removeItem:function(e,t){t=t||this.findElement(e),o(t).remove()},getItemContainer:function(){var e=this.get("itemContainer");return e.length?e:this.get("el")},getItemTpl:function(e,t){var n=this,i=n.get("itemTplRender"),r=n.get("itemTpl");return i?i(e,t):a.substitute(r,e)},_createItem:function(e,t){var n=this,i=n.getItemContainer(),r=n.get("itemCls"),a=n.get("dataField"),s=n.getItemTpl(e,t),u=o(s);if(void 0!==t){var l=i.find("."+r)[t];l?u.insertBefore(l):u.appendTo(i)}else u.appendTo(i);return u.addClass(r),u.data(a,e),u},getItemStatusCls:function(e){return i(e,this)},setItemStatusCls:function(e,t,n){var i=this,r=i.getItemStatusCls(e),a=n?"addClass":"removeClass";t&&o(t)[a](r)},hasStatus:function(e,t){var n=this,i=n.getItemStatusCls(e);return o(t).hasClass(i)},setItemSelected:function(e,t,n){var i=this;n=n||i.findElement(e),i.setItemStatusCls("selected",n,t)},getAllElements:function(){var e=this,t=e.get("itemCls"),n=e.get("el");return n.find("."+t)},getItemByElement:function(e){var t=this,n=t.get("dataField");return o(e).data(n)},getFirstElementByStatus:function(e){var t=this,n=t.getItemStatusCls(e),i=t.get("el");return i.find("."+n)[0]},getElementsByStatus:function(e){var t=this,n=t.getItemStatusCls(e),i=t.get("el");return i.find("."+n)},getSelectedElements:function(){var e=this,t=e.getItemStatusCls("selected"),n=e.get("el");return n.find("."+t)},findElement:function(e){var t=this,n=t.getAllElements(),i=null;return a.each(n,function(n){return t.getItemByElement(n)==e?(i=n,!1):void 0}),i},isElementSelected:function(e){var t=this,n=t.getItemStatusCls("selected");return e&&o(e).hasClass(n)}};var d=function(){};d.ATTRS=a.merge(!0,l.ATTRS,s.ATTRS,{dataField:{view:!0,value:"data-item"},itemContainer:{view:!0},itemStatusFields:{value:{}},itemCls:{view:!0},cancelSelected:{value:!1},textGetter:{},defaultLoaderCfg:{value:{property:"items",dataType:"json"}},events:{value:{itemrendered:!0,itemremoved:!0,itemupdated:!0,itemsshow:!1,beforeitemsshow:!1,itemsclear:!1,itemdblclick:!1,beforeitemsclear:!1}}}),d.PARSER={items:function(e){var t=this,n=[],i=t.get("itemCls"),s=t.get("dataField"),u=e.find("."+i);return u.length||(u=e.children(),u.addClass(i)),a.each(u,function(e){var i=r(e,t);n.push(i),o(e).data(s,i)}),n}},a.augment(d,l,s,{_uiSetItems:function(e){var t=this;(!t.get("srcNode")||t.get("rendered"))&&this.setItems(e)},__bindUI:function(){function e(e,n){var i,r=t.get("multipleSelect");i=t.isItemSelected(e,n),i?r?t.setItemSelected(e,!1,n):t.get("cancelSelected")&&t.setSelected(null):(r||t.clearSelected(),t.setItemSelected(e,!0,n))}var t=this,n=t.get("selectedEvent"),i=t.get("itemCls"),r=t.get("view").getItemContainer();r.delegate("."+i,"click",function(i){if(!t.get("disabled")){var r=o(i.currentTarget),a=t.getItemByElement(r);if(!t.isItemDisabled(a,r)){var s=t.fire("itemclick",{item:a,element:r[0],domTarget:i.target,domEvent:i});s!==!1&&"click"==n&&t.isItemSelectable(a)&&e(a,r)}}}),"click"!==n&&r.delegate("."+i,n,function(n){if(!t.get("disabled")){var i=o(n.currentTarget),r=t.getItemByElement(i);t.isItemDisabled(r,i)||t.isItemSelectable(r)&&e(r,i)}}),r.delegate("."+i,"dblclick",function(e){if(!t.get("disabled")){var n=o(e.currentTarget),i=t.getItemByElement(n);t.isItemDisabled(i,n)||t.fire("itemdblclick",{item:i,element:n[0],domTarget:e.target})}}),t.on("itemrendered itemupdated",function(e){var n=e.item,i=e.element;t._syncItemStatus(n,i)})},getValueByField:function(e,t){return e&&e[t]},_syncItemStatus:function(e,t){var n=this,i=n.get("itemStatusFields");a.each(i,function(i,r){null!=e[i]&&n.get("view").setItemStatusCls(r,t,e[i])})},getStatusValue:function(e,t){var n=this,i=n.get("itemStatusFields"),r=i[t];return e[r]},getCount:function(){var e=this.getItems();return e?e.length:0},getStatusField:function(e){var t=this,n=t.get("itemStatusFields");return n[e]},setStatusValue:function(e,t,n){var i=this,r=i.get("itemStatusFields"),o=r[t];o&&(e[o]=n)},getItemText:function(e){var t=this,n=t.get("textGetter");return e?n?n(e):o(t.findElement(e)).text():""},removeItem:function(e){var t,n=this,i=n.get("items"),r=n.findElement(e);t=a.Array.indexOf(e,i),-1!==t&&i.splice(t,1),n.get("view").removeItem(e,r),n.fire("itemremoved",{item:e,domTarget:o(r)[0],element:r})},addItemAt:function(e,t){var n=this,i=n.get("items");return void 0===t&&(t=i.length),i.splice(t,0,e),n.addItemToView(e,t),e},addItemToView:function(e,t){var n=this,i=n.get("view").addItem(e,t);return n.fire("itemrendered",{item:e,domTarget:o(i)[0],element:i}),i},updateItem:function(e){var t=this,n=t.get("view").updateItem(e);t.fire("itemupdated",{item:e,domTarget:o(n)[0],element:n})},setItems:function(e){var t=this;e!=t.getItems()&&t.setInternal("items",e),t.clearControl(),t.fire("beforeitemsshow"),a.each(e,function(e,n){t.addItemToView(e,n)}),t.fire("itemsshow")},getItems:function(){return this.get("items")},getItemByElement:function(e){return this.get("view").getItemByElement(e)},getSelected:function(){var e=this,t=e.get("view").getFirstElementByStatus("selected");return e.getItemByElement(t)||null},getItemsByStatus:function(e){var t=this,n=t.get("view").getElementsByStatus(e),i=[];return a.each(n,function(e){i.push(t.getItemByElement(e))}),i},findElement:function(e){var t=this;return a.isString(e)&&(e=t.getItem(e)),this.get("view").findElement(e)},findItemByField:function(e,t){var n=this,i=n.get("items"),r=null;return a.each(i,function(n){return null!=n[e]&&n[e]==t?(r=n,!1):void 0}),r},setItemSelectedStatus:function(e,t,n){var i=this;n=n||i.findElement(e),i.setItemStatus(e,"selected",t,n)},setAllSelection:function(){var e=this,t=e.getItems();e.setSelection(t)},isItemSelected:function(e,t){var n=this;return t=t||n.findElement(e),n.get("view").isElementSelected(t)},isItemDisabled:function(e,t){return this.hasStatus(e,"disabled",t)},setItemDisabled:function(e,t){var n=this;n.setItemStatus(e,"disabled",t)},getSelection:function(){var e=this,t=e.get("view").getSelectedElements(),n=[];return a.each(t,function(t){n.push(e.getItemByElement(t))}),n},clearControl:function(){this.fire("beforeitemsclear"),this.get("view").clearControl(),this.fire("itemsclear")},hasStatus:function(e,t,n){if(!e)return!1;{var i=this;i.getStatusField(t)}return n=n||i.findElement(e),i.get("view").hasStatus(t,n)},setItemStatus:function(e,t,n,i){var r=this;e&&(i=i||r.findElement(e)),r.isItemDisabled(e,i)&&"disabled"!==t||(e&&("disabled"===t&&n&&r.clearItemStatus(e),r.setStatusValue(e,t,n),r.get("view").setItemStatusCls(t,i,n),r.fire("itemstatuschange",{item:e,status:t,value:n,element:i})),"selected"===t&&r.afterSelected(e,n,i))},clearItemStatus:function(e,t,n){var i=this,r=i.get("itemStatusFields");n=n||i.findElement(e),t?i.setItemStatus(e,t,!1,n):(a.each(r,function(t,r){i.setItemStatus(e,r,!1,n)}),r.selected||i.setItemSelected(e,!1),i.setItemStatus(e,"hover",!1))}}),d.View=c,n.exports=d}),define("bui/list/keynav",["jquery","bui/common"],function(e,t,n){"use strict";var i=e("jquery"),r=e("bui/common"),o=function(){};o.ATTRS={highlightedStatus:{value:"hover"}},r.augment(o,{setHighlighted:function(e,t){if(!this.hasStatus(e,"hover",t)){var n=this,i=n.get("highlightedStatus"),r=n._getHighLightedElement(),o=r?n.getItemByElement(r):null;o!==e&&(o&&this.setItemStatus(o,i,!1,r),this.setItemStatus(e,i,!0,t),n._scrollToItem(e,t))}},_getHighLightedElement:function(){var e=this,t=e.get("highlightedStatus"),n=e.get("view").getFirstElementByStatus(t);return n},getHighlighted:function(){var e=this,t=e.get("highlightedStatus"),n=e.get("view").getFirstElementByStatus(t);return e.getItemByElement(n)||null},getColumnCount:function(){var e=this,t=e.getFirstItem(),n=e.findElement(t),r=i(n);return n?parseInt(r.parent().width()/r.outerWidth(),10):1},getRowCount:function(e){var t=this;return e=e||t.getColumnCount(),(this.getCount()+e-1)/e},_getNextItem:function(e,t,n){var i,r=this,o=r._getCurrentIndex(),a=r.getCount(),s=e?1:-1;return-1===o?e?r.getFirstItem():r.getLastItem():(e||(t*=s),i=(o+t+n)%n,i>a-1&&(e?i-=a-1:i+=t),r.getItemAt(i))},_getLeftItem:function(){var e=this,t=e.getCount(),n=e.getColumnCount();return!t||1>=n?null:e._getNextItem(!1,1,t)},_getCurrentItem:function(){return this.getHighlighted()},_getCurrentIndex:function(){var e=this,t=e._getCurrentItem();return this.indexOfItem(t)},_getRightItem:function(){var e=this,t=e.getCount(),n=e.getColumnCount();return!t||1>=n?null:this._getNextItem(!0,1,t)},_getDownItem:function(){var e=this,t=e.getColumnCount(),n=e.getRowCount(t);return 1>=n?null:this._getNextItem(!0,t,t*n)},getScrollContainer:function(){return this.get("el")},isScrollVertical:function(){var e=this,t=e.get("el"),n=e.get("view").getItemContainer();return t.height()<n.height()},_scrollToItem:function(e,t){var n=this;if(n.isScrollVertical()){t=t||n.findElement(e);var r=n.getScrollContainer(),o=i(t).position().top,a=r.position().top,s=r.height(),u=o-a,l=i(t).height(),c=r.scrollTop();(0>u||u>s-l)&&r.scrollTop(c+u)}},_getUpperItem:function(){var e=this,t=e.getColumnCount(),n=e.getRowCount(t);return 1>=n?null:this._getNextItem(!1,t,t*n)},handleNavUp:function(){var e=this,t=e._getUpperItem();e.setHighlighted(t)},handleNavDown:function(){this.setHighlighted(this._getDownItem())},handleNavLeft:function(){this.setHighlighted(this._getLeftItem())},handleNavRight:function(){this.setHighlighted(this._getRightItem())},handleNavEnter:function(){var e,t=this,n=t._getCurrentItem();n&&(e=t.findElement(n),i(e).trigger("click"))},handleNavEsc:function(){this.setHighlighted(null)},handleNavTab:function(){this.setHighlighted(this._getRightItem())}}),n.exports=o}),define("bui/list/sortable",["jquery","bui/common","bui/data"],function(e,t,n){var i=e("jquery"),r=e("bui/common"),o=e("bui/data").Sortable,a=function(){};a.ATTRS=r.merge(!0,o.ATTRS,{}),r.augment(a,o,{compare:function(e,t,n,r){var o,a=this;return n=n||a.get("sortField"),r=r||a.get("sortDirection"),n&&r?(o="ASC"===r?1:-1,i.isPlainObject(e)||(e=a.getItemByElement(e)),i.isPlainObject(t)||(t=a.getItemByElement(t)),a.get("compareFunction")(e[n],t[n])*o):1},getSortData:function(){return i.makeArray(this.get("view").getAllElements())},sort:function(e,t){var n=this,o=n.sortData(e,t),a=n.get("view").getItemContainer();n.get("store")||n.sortData(e,t,n.get("items")),r.each(o,function(e){i(e).appendTo(a)})}}),n.exports=a}),define("bui/mask",["jquery","bui/common","bui/mask/mask","bui/mask/loadmask"],function(e,t,n){var i=(e("bui/common"),e("bui/mask/mask"));i.LoadMask=e("bui/mask/loadmask"),n.exports=i}),define("bui/mask/mask",["jquery","bui/common"],function(e,t,n){var i=e("jquery"),r=e("bui/common"),o=r.namespace("Mask"),a=r.UA,s=r.prefix+"ext-mask",u=s+"-msg";r.mix(o,{maskElement:function(e,t,n){var o=i(e),l=o.children("."+s),c=null,d=null,f=null,m=null;if(!l.length&&(l=i('<div class="'+s+'"></div>').appendTo(o),o.addClass("x-masked-relative x-masked"),"body"==e?6==a.ie?l.height(r.docHeight()):l.css("position","fixed"):6===a.ie&&l.height(o.height()),t)){c=['<div class="'+u+'"><div>',t,"</div></div>"].join(""),d=i(c).appendTo(o),n&&d.addClass(n);try{"body"==e&&6!=a.ie?(f="50%",m="50%",d.css("position","fixed")):(f=(l.height()-d.height())/2,m=(l.width()-d.width())/2),d.css({left:m,top:f})}catch(g){r.log("mask error occurred")}}return l},unmaskElement:function(e){var t=i(e),n=t.children("."+u),r=t.children("."+s);n&&n.remove(),r&&r.remove(),t.removeClass("x-masked-relative x-masked")}}),n.exports=o}),define("bui/mask/loadmask",["jquery","bui/mask/mask","bui/common"],function(e,t,n){function i(e){var t=this;i.superclass.constructor.call(t,e)}var r=(e("jquery"),e("bui/mask/mask"));BUI.extend(i,BUI.Base),i.ATTRS={el:{},msg:{value:"Loading..."},msgCls:{value:"x-mask-loading"},disabled:{value:!1}},BUI.augment(i,{disable:function(){this.set("disabled",!0)},onLoad:function(){r.unmaskElement(this.get("el"))},onBeforeLoad:function(){var e=this;e.get("disabled")||r.maskElement(e.get("el"),e.get("msg"),this.get("msgCls"))},show:function(){this.onBeforeLoad()},hide:function(){this.onLoad()},destroy:function(){this.hide(),this.clearAttrVals(),this.off()}}),n.exports=i}),define("bui/overlay",["jquery","bui/common","bui/overlay/overlay","bui/overlay/dialog","bui/overlay/message"],function(e,t,n){var i=e("bui/common"),r=i.namespace("Overlay");i.mix(r,{Overlay:e("bui/overlay/overlay"),Dialog:e("bui/overlay/dialog"),Message:e("bui/overlay/message")}),i.mix(r,{OverlayView:r.Overlay.View,DialogView:r.Dialog.View}),i.Message=i.Overlay.Message,n.exports=r}),define("bui/overlay/overlay",["jquery","bui/common"],function(e,t,n){var i=e("jquery"),r=e("bui/common"),o=r.Component,a="x-align-arrow",s=o.UIBase,u=o.View.extend([s.PositionView,s.CloseView]),l=o.Controller.extend([s.Position,s.Align,s.Close,s.AutoShow,s.AutoHide],{renderUI:function(){var e=this,t=e.get("el"),n=e.get("arrowContainer"),r=n?t.one(n):t;e.get("showArrow")&&i(e.get("arrowTpl")).appendTo(r)},show:function(){function e(){"visibility"===r?i.css({display:"block"}):t.set("visible",!0),n.callback&&n.callback.call(t);var e=t.get("autoHideDelay"),o=t.get("delayHandler");e&&(o&&clearTimeout(o),o=setTimeout(function(){t.hide(),t.set("delayHandler",null)},e),t.set("delayHandler",o))}var t=this,n=t.get("effect"),i=t.get("el"),r=t.get("visibleMode"),o=n.effect,a=n.duration;switch(t.get("rendered")||(t.set("visible",!0),t.render(),t.set("visible",!1),i=t.get("el")),"visibility"===r&&(t.set("visible",!0),i.css({display:"none"})),o){case"linear":i.show(a,e);break;case"fade":i.fadeIn(a,e);break;case"slide":i.slideDown(a,e);break;default:e()}},hide:function(){function e(){"visibility"===t.get("visibleMode")&&i.css({display:"block"}),t.set("visible",!1),n.callback&&n.callback.call(t)}var t=this,n=t.get("effect"),i=t.get("el"),r=n.effect,o=n.duration;switch(r){case"linear":i.hide(o,e);break;case"fade":i.fadeOut(o,e);break;case"slide":i.slideUp(o,e);break;default:e()}}},{ATTRS:{effect:{value:{effect:"none",duration:0,callback:null}},autoHideDelay:{},closeable:{value:!1},showArrow:{value:!1},arrowContainer:{view:!0},arrowTpl:{value:'<s class="'+a+'"><s class="'+a+'-inner"></s></s>'},visibleMode:{value:"visibility"},visible:{value:!1},xview:{value:u}}},{xclass:"overlay"});l.View=u,n.exports=l}),define("bui/overlay/dialog",["jquery","bui/overlay/overlay","bui/common"],function(e,t,n){var i=e("jquery"),r=e("bui/overlay/overlay"),o=BUI.Component.UIBase,a="header-title",s=BUI.prefix,u=20,l=r.View.extend([o.StdModView,o.MaskView],{getContentElement:function(){return this.get("body")},_uiSetTitle:function(e){var t=this,n=t.get("el");n.find("."+a).html(e)},_uiSetContentId:function(e){var t=this,n=t.get("body"),r=i("#"+e).children();r.appendTo(n)},_uiSetHeight:function(e){var t=this,n=e,i=t.get("header"),r=t.get("body"),o=t.get("footer");n-=i.outerHeight()+o.outerHeight(),n-=2*u,r.height(n)},_removeContent:function(){var e=this,t=e.get("body"),n=e.get("contentId");n?t.children().appendTo(i("#"+n)):t.children().remove()}},{xclass:"dialog-view"}),c=r.extend([o.StdMod,o.Mask,o.Drag],{show:function(){var e=this;align=e.get("align"),c.superclass.show.call(this),e.set("align",align)},bindUI:function(){var e=this;e.on("closeclick",function(){return e.onCancel()})},onCancel:function(){var e=this,t=e.get("cancel");return t.call(this)},_uiSetButtons:function(e){var t=this,n=t.get("footer");n.children().remove(),BUI.each(e,function(e){t._createButton(e,n)})},_createButton:function(e,t){var n=this,r='<button class="'+e.elCls+'">'+e.text+"</button>",o=i(r).appendTo(t);o.on("click",function(){e.handler.call(n,n,this)})},destructor:function(){var e=this,t=e.get("contentId"),n=e.get("body"),i=e.get("closeAction");"destroy"==i&&(e.hide(),t&&n.children().appendTo("#"+t))}},{ATTRS:{closeTpl:{view:!0,value:'<a tabindex="0" href=javascript:void("\u5173\u95ed") role="button" class="'+s+'ext-close" style=""><span class="'+s+'ext-close-x x-icon x-icon-normal">\xd7</span></a>'},buttons:{value:[{text:"\u786e\u5b9a",elCls:"button button-primary",handler:function(){var e=this,t=e.get("success");t&&t.call(e)}},{text:"\u53d6\u6d88",elCls:"button button-primary",handler:function(){this.onCancel()!==!1&&this.close()}}]},contentId:{view:!0},success:{value:function(){this.close()}},cancel:{value:function(){}},dragNode:{valueFn:function(){return this.get("header")}},defaultLoaderCfg:{valueFn:function(){var e=this;return{property:"bodyContent",autoLoad:!1,lazyLoad:{event:"show"},loadMask:{el:e.get("body")}}}},title:{view:!0,value:""},align:{value:{node:window,points:["cc","cc"]}},mask:{value:!0},maskShared:{value:!1},headerContent:{value:'<div class="'+a+'">\u6807\u9898</div>'},footerContent:{},closeable:{value:!0},xview:{value:l}}},{xclass:"dialog"});c.View=l,n.exports=c}),define("bui/overlay/message",["jquery","bui/overlay/dialog","bui/overlay/overlay","bui/common"],function(e,t,n){function i(e,t){return function(n,i,o){return BUI.isString(i)&&(o=i,i=null),o=o||t,i=i||a,r({buttons:e,icon:o,msg:n,success:i}),s}}function r(e){s||(s=new f({icon:"info",title:""})),s.set(e),s.show()}function o(){var e=this,t=e.get("success");t&&(t.call(e),e.hide())}function a(){this.hide()}var s,u=e("jquery"),l=e("bui/overlay/dialog"),c=BUI.prefix,d={info:"i",error:"\xd7",success:'<i class="icon-ok icon-white"></i>',question:"?",warning:"!"},f=l.extend({renderUI:function(){this._setContent()},bindUI:function(){var e=this,t=e.get("body");e.on("afterVisibleChange",function(n){if(n.newVal&&BUI.UA.ie<8){var i=t.outerWidth();6==BUI.UA.ie&&(i=i>350?350:i),e.get("header").width(i-20),e.get("footer").width(i)}})},_setContent:function(){var e=this,t=e.get("body"),n=BUI.substitute(e.get("contentTpl"),{msg:e.get("msg"),iconTpl:e.get("iconTpl")});t.empty(),u(n).appendTo(t)},_uiSetIcon:function(){this.get("rendered")&&this._setContent()},_uiSetMsg:function(){this.get("rendered")&&this._setContent()}},{ATTRS:{icon:{},msg:{},iconTpl:{getter:function(){var e=this,t=e.get("icon");return'<div class="x-icon x-icon-'+t+'">'+d[t]+"</div>"}},contentTpl:{value:'{iconTpl}<div class="'+c+'message-content">{msg}</div>'}}},{xclass:"message",priority:0}),m=i([{text:"\u786e\u5b9a",elCls:"button button-primary",handler:o}],"info"),g=i([{text:"\u786e\u5b9a",elCls:"button button-primary",handler:o},{text:"\u53d6\u6d88",elCls:"button",handler:a}],"question");f.Alert=m,f.Confirm=g,f.Show=r,n.exports=f}),define("bui/picker",["jquery","bui/common","bui/picker/mixin","bui/picker/picker","bui/picker/listpicker","bui/overlay","bui/data","bui/list"],function(e,t,n){var i=e("bui/common"),r=i.namespace("Picker");i.mix(r,{Mixin:e("bui/picker/mixin"),Picker:e("bui/picker/picker"),ListPicker:e("bui/picker/listpicker")}),n.exports=r}),define("bui/picker/mixin",["jquery"],function(e,t,n){var i=e("jquery"),r=function(){};r.ATTRS={innerControl:{getter:function(){return this.get("children")[0]}},triggerEvent:{value:"click"},autoSetValue:{value:!0},changeEvent:{value:"selectedchange"},autoHide:{value:!0},hideEvent:{value:"itemclick"},textField:{},align:{value:{points:["bl","tl"],offset:[0,0]}},valueField:{}},r.prototype={__bindUI:function(){{var e=this;e.get("hideEvent"),i(e.get("trigger"))}e.on("show",function(){if(e.get("isInit")||e._initControl(),e.get("autoSetValue")){var t=e.get("valueField")||e.get("textField")||e.get("curTrigger"),n=i(t).val();e.setSelectedValue(n)}})},_initControl:function(){var e=this;if(!e.get("isInit")){if(!e.get("innerControl")){var t=e.createControl();e.get("children").push(t)}e.initControlEvent(),e.set("isInit",!0)}},initControl:function(){this._initControl()},createControl:function(){},initControlEvent:function(){var e=this,t=e.get("innerControl"),n=i(e.get("trigger")),r=e.get("hideEvent");t.on(e.get("changeEvent"),function(t){var r=e.get("curTrigger"),o=e.get("textField")||r||n,a=e.get("valueField"),s=e.getSelectedValue(),u=!1;if(o){var l=e.getSelectedText(),c=i(o).val();l!=c&&(i(o).val(l),u=!0,i(o).trigger("change"))}if(a&&e.get("autoSetValue")){var d=i(a).val();a!=d&&(i(a).val(s),u=!0,i(a).trigger("change"))}u&&e.onChange(l,s,t)}),r&&t.on(e.get("hideEvent"),function(){var t=e.get("curTrigger");try{t&&t.focus()}catch(n){BUI.log(n)}e.hide()})},setSelectedValue:function(){},getSelectedValue:function(){},getSelectedText:function(){},focus:function(){this.get("innerControl").focus()},onChange:function(e,t){var n=this,i=n.get("curTrigger");n.fire("selectedchange",{value:t,text:e,curTrigger:i})},handleNavEsc:function(){this.hide()},_uiSetValueField:function(e){var t=this;null!=e&&""!==e&&t.get("autoSetValue")&&t.setSelectedValue(i(e).val())},_getTextField:function(){var e=this;return e.get("textField")||e.get("curTrigger")}},n.exports=r}),define("bui/picker/picker",["jquery","bui/common","bui/overlay","bui/picker/mixin"],function(e,t,n){var i=(e("jquery"),e("bui/overlay").Overlay),r=e("bui/picker/mixin"),o=i.extend([r],{},{ATTRS:{}},{xclass:"picker"});n.exports=o}),define("bui/picker/listpicker",["jquery","bui/common","bui/data","bui/list","bui/picker/picker","bui/overlay","bui/picker/mixin"],function(e,t,n){var i=(e("jquery"),e("bui/list"),e("bui/picker/picker")),r=i.extend({initializer:function(){var e=this,t=e.get("children"),n=e.get("list");n||t.push({})},setSelectedValue:function(e){e=e?e.toString():"",this.get("isInit")||this._initControl();var t=this,n=t.get("list"),i=t.getSelectedValue();e!==i&&n.getCount()&&(n.get("multipleSelect")&&n.clearSelection(),n.setSelectionByField(e.split(",")))},onChange:function(e,t,n){var i=this,r=i.get("curTrigger");i.fire("selectedchange",{value:t,text:e,curTrigger:r,item:n.item})},getSelectedValue:function(){return this.get("isInit")||this._initControl(),this.get("list").getSelectionValues().join(",")},getSelectedText:function(){return this.get("isInit")||this._initControl(),this.get("list").getSelectionText().join(",")}},{ATTRS:{defaultChildClass:{value:"simple-list"},list:{getter:function(){return this.get("children")[0]}}}},{xclass:"list-picker"});n.exports=r}),define("bui/toolbar",["jquery","bui/common","bui/toolbar/baritem","bui/toolbar/bar","bui/toolbar/pagingbar","bui/toolbar/numberpagingbar"],function(e,t,n){var i=e("bui/common"),r=i.namespace("Toolbar");i.mix(r,{BarItem:e("bui/toolbar/baritem"),Bar:e("bui/toolbar/bar"),PagingBar:e("bui/toolbar/pagingbar"),NumberPagingBar:e("bui/toolbar/numberpagingbar")}),n.exports=r}),define("bui/toolbar/baritem",["jquery","bui/common"],function(e,t,n){var i=(e("jquery"),e("bui/common")),r=i.prefix,o=i.Component,a=o.UIBase,s=o.View.extend([a.ListItemView]),u=o.Controller.extend([a.ListItem],{renderUI:function(){var e=this.get("el");e.addClass(r+"inline-block"),e.attr("id")||e.attr("id",this.get("id"))}},{ATTRS:{elTagName:{view:!0,value:"li"},selectable:{value:!1},focusable:{value:!1},xview:{value:s}}},{xclass:"bar-item",priority:1}),l=u.extend({_uiSetDisabled:function(e){var t=this,n=t.get("el"),i=e?"addClass":"removeClass";n.find("button").attr("disabled",e)[i](r+"button-disabled")},_uiSetChecked:function(e){var t=this,n=t.get("el"),i=e?"addClass":"removeClass";n.find("button")[i](r+"button-checked")},_uiSetText:function(e){var t=this,n=t.get("el");n.find("button").text(e)},_uiSetbtnCls:function(e){var t=this,n=t.get("el");n.find("button").addClass(e)}},{ATTRS:{checked:{value:!1},tpl:{view:!0,value:'<button type="button" class="{btnCls}">{text}</button>'},btnCls:{sync:!1},text:{sync:!1,value:""}}},{xclass:"bar-item-button",priority:2}),c=u.extend({renderUI:function(){var e=this.get("el");e.attr("role","separator")}},{xclass:"bar-item-separator",priority:2}),d=u.extend({},{ATTRS:{width:{view:!0,value:2}}},{xclass:"bar-item-spacer",priority:2}),f=u.extend({_uiSetText:function(e){var t=this,n=t.get("el");n.html(e)}},{ATTRS:{text:{value:""}}},{xclass:"bar-item-text",priority:2});
u.types={button:l,separator:c,spacer:d,text:f},n.exports=u}),define("bui/toolbar/bar",["jquery","bui/common"],function(e,t,n){var i=(e("jquery"),e("bui/common")),r=i.Component,o=r.UIBase,a=r.View.extend({renderUI:function(){var e=this.get("el");e.attr("role","toolbar"),e.attr("id")||e.attr("id",i.guid("bar"))}}),s=r.Controller.extend([o.ChildList],{getItem:function(e){return this.getChild(e)}},{ATTRS:{elTagName:{view:!0,value:"ul"},defaultChildClass:{value:"bar-item"},focusable:{value:!1},xview:{value:a}}},{xclass:"bar",priority:1});n.exports=s}),define("bui/toolbar/pagingbar",["jquery","bui/common","bui/toolbar/bar"],function(e,t,n){var i=(e("jquery"),e("bui/common")),r=e("bui/toolbar/bar"),o=i.Component,a=o.UIBase.Bindable,s=i.prefix,u="first",l="prev",c="next",d="last",f="skip",m="refresh",g="totalPage",h="curPage",v="totalCount",p=[u,l,c,d,f,m],b=[g,h,v],y=r.extend([a],{initializer:function(){var e=this,t=e.get("children"),n=e.get("items"),r=e.get("store");n?i.each(n,function(n){i.isString(n)&&(n=i.Array.contains(n,p)?e._getButtonItem(n):i.Array.contains(n,b)?e._getTextItem(n):{xtype:n}),t.push(n)}):(n=e._getItems(),i.each(n,function(e){t.push(e)})),r&&r.get("pageSize")&&e.set("pageSize",r.get("pageSize"))},bindUI:function(){var e=this;e._bindButtonEvent()},jumpToPage:function(e){if(!(0>=e||e>this.get("totalPage"))){var t=this,n=t.get("store"),i=t.get("pageSize"),r=e-1,o=r*i,a=t.fire("beforepagechange",{from:t.get("curPage"),to:e});n&&a!==!1&&n.load({start:o,limit:i,pageIndex:r})}},_afterStoreLoad:function(e){var t,n,i,r,o=this,a=o.get("pageSize"),s=0;s=e.get("start"),n=e.getTotalCount(),t=n-s>a?s+e.getCount()-1:n,r=parseInt((n+a-1)/a,10),r=r>0?r:1,i=parseInt(s/a,10)+1,o.set("start",s),o.set("end",t),o.set("totalCount",n),o.set("curPage",i),o.set("totalPage",r),o._setAllButtonsState(),o._setNumberPages()},_bindButtonEvent:function(){function e(){var e=parseInt(t._getCurrentPageValue(),10);t._isPageAllowRedirect(e)?t.jumpToPage(e):t._setCurrentPageValue(t.get("curPage"))}var t=this;t._bindButtonItemEvent(u,function(){t.jumpToPage(1)}),t._bindButtonItemEvent(l,function(){t.jumpToPage(t.get("curPage")-1)}),t._bindButtonItemEvent(c,function(){t.jumpToPage(t.get("curPage")+1)}),t._bindButtonItemEvent(d,function(){t.jumpToPage(t.get("totalPage"))}),t._bindButtonItemEvent(f,function(){e()}),t._bindButtonItemEvent(m,function(){t.jumpToPage(t.get("curPage"))});var n=t.getItem(h);n&&n.get("el").on("keyup",function(t){t.stopPropagation(),13===t.keyCode&&e()})},_bindButtonItemEvent:function(e,t){var n=this,i=n.getItem(e);i&&i.on("click",t)},onLoad:function(e){var t=this,n=t.get("store");t._afterStoreLoad(n,e)},_getItems:function(){var e=this,t=e.get("items");return t&&t.length?t:(t=[],t.push(e._getButtonItem(u)),t.push(e._getButtonItem(l)),t.push(e._getSeparator()),t.push(e._getTextItem(g)),t.push(e._getTextItem(h)),t.push(e._getButtonItem(f)),t.push(e._getSeparator()),t.push(e._getButtonItem(c)),t.push(e._getButtonItem(d)),t.push(e._getSeparator()),t.push(e._getTextItem(v)),t)},_getButtonItem:function(e){var t=this;return{id:e,xclass:"bar-item-button",text:t.get(e+"Text"),disabled:!0,elCls:t.get(e+"Cls")}},_getSeparator:function(){return{xclass:"bar-item-separator"}},_getTextItem:function(e){var t=this;return{id:e,xclass:"bar-item-text",text:t._getTextItemTpl(e)}},_getTextItemTpl:function(e){var t=this,n=t.getAttrVals();return i.substitute(this.get(e+"Tpl"),n)},_isPageAllowRedirect:function(e){var t=this;return e&&e>0&&e<=t.get("totalPage")&&e!==t.get("curPage")},_setAllButtonsState:function(){var e=this,t=e.get("store");t&&e._setButtonsState([l,c,u,d,f],!0),1===e.get("curPage")&&e._setButtonsState([l,u],!1),e.get("curPage")===e.get("totalPage")&&e._setButtonsState([c,d],!1)},_setButtonsState:function(e,t){var n=this,r=n.get("children");i.each(r,function(n){-1!==i.Array.indexOf(n.get("id"),e)&&n.set("disabled",!t)})},_setNumberPages:function(){var e=this,t=e.getItems();i.each(t,function(t){"bar-item-text"===t.__xclass&&t.set("content",e._getTextItemTpl(t.get("id")))})},_getCurrentPageValue:function(e){var t=this;if(e=e||t.getItem(h)){var n=e.get("el").find("input");return n.val()}},_setCurrentPageValue:function(e,t){var n=this;if(t=t||n.getItem(h)){var i=t.get("el").find("input");i.val(e)}}},{ATTRS:{firstText:{value:"\u9996 \u9875"},firstCls:{value:s+"pb-first"},prevText:{value:"\u4e0a\u4e00\u9875"},prevCls:{value:s+"pb-prev"},nextText:{value:"\u4e0b\u4e00\u9875"},nextCls:{value:s+"pb-next"},lastText:{value:"\u672b \u9875"},lastCls:{value:s+"pb-last"},skipText:{value:"\u786e\u5b9a"},skipCls:{value:s+"pb-skip"},refreshText:{value:"\u5237\u65b0"},refreshCls:{value:s+"pb-refresh"},totalPageTpl:{value:"\u5171 {totalPage} \u9875"},curPageTpl:{value:'\u7b2c <input type="text" autocomplete="off" class="'+s+'pb-page" size="20" value="{curPage}" name="inputItem"> \u9875'},totalCountTpl:{value:"\u5171{totalCount}\u6761\u8bb0\u5f55"},autoInitItems:{value:!1},curPage:{value:0},totalPage:{value:0},totalCount:{value:0},pageSize:{value:30},store:{}},ID_FIRST:u,ID_PREV:l,ID_NEXT:c,ID_LAST:d,ID_SKIP:f,ID_REFRESH:m,ID_TOTAL_PAGE:g,ID_CURRENT_PAGE:h,ID_TOTAL_COUNT:v},{xclass:"pagingbar",priority:2});n.exports=y}),define("bui/toolbar/numberpagingbar",["jquery","bui/common","bui/toolbar/pagingbar","bui/toolbar/bar"],function(e,t,n){var i=(e("jquery"),e("bui/common")),r=(i.Component,e("bui/toolbar/pagingbar")),o=i.prefix,a=o+"button-number",s=r.extend({_getItems:function(){var e=this,t=e.get("items");return t?t:(t=[],t.push(e._getButtonItem(r.ID_PREV)),t.push(e._getButtonItem(r.ID_NEXT)),t)},_getButtonItem:function(e){var t=this;return{id:e,content:'<a href="javascript:;">'+t.get(e+"Text")+"</a>",disabled:!0}},_bindButtonEvent:function(){var e=this,t=e.get("numberButtonCls");e.constructor.superclass._bindButtonEvent.call(this),e.get("el").delegate("a","click",function(e){e.preventDefault()}),e.on("click",function(n){var i=n.target;if(i&&i.get("el").hasClass(t)){var r=i.get("id");e.jumpToPage(r)}})},_setNumberPages:function(){var e=this;e._setNumberButtons()},_setNumberButtons:function(){var e,t=this,n=t.get("curPage"),r=t.get("totalPage"),o=t._getNumberItems(n,r);t._clearNumberButtons(),i.each(o,function(e){t._appendNumberButton(e)}),e=t.getItem(n),e&&e.set("selected",!0)},_appendNumberButton:function(e){{var t=this,n=t.getItemCount();t.addItemAt(e,n-1)}},_clearNumberButtons:function(){for(var e=this,t=(e.getItems(),e.getItemCount());t>2;)e.removeItemAt(t-2),t=e.getItemCount()},_getNumberItems:function(e,t){function n(e,t){for(var n=e;t>=n;n++)a.push(o._getNumberItem(n))}function i(){a.push(o._getEllipsisItem())}var r,o=this,a=[],s=o.get("maxLimitCount"),u=o.get("showRangeCount");if(s>t)r=t,n(1,t);else{var l=s>=e?1:e-u,c=e+u,d=t>c?c>s?c:s:t;l>1&&(n(1,1),l>2&&i()),r=d,n(l,d)}return t>r&&(t-1>r&&i(),n(t,t)),a},_getEllipsisItem:function(){var e=this;return{disabled:!0,content:e.get("ellipsisTpl")}},_getNumberItem:function(e){var t=this;return{id:e,elCls:t.get("numberButtonCls")}}},{ATTRS:{itemStatusCls:{value:{selected:"active",disabled:"disabled"}},itemTpl:{value:'<a href="">{id}</a>'},prevText:{value:"<<"},nextText:{value:">>"},maxLimitCount:{value:4},showRangeCount:{value:1},numberButtonCls:{value:a},ellipsisTpl:{value:'<a href="#">...</a>'}}},{xclass:"pagingbar-number",priority:3});n.exports=s}),define("bui/calendar",["jquery","bui/common","bui/calendar/calendar","bui/calendar/monthpicker","bui/calendar/datepicker","bui/data","bui/list","bui/overlay","bui/picker","bui/calendar/header","bui/calendar/panel","bui/toolbar"],function(e,t,n){var i=e("bui/common"),r=i.namespace("Calendar");i.mix(r,{Calendar:e("bui/calendar/calendar"),MonthPicker:e("bui/calendar/monthpicker"),DatePicker:e("bui/calendar/datepicker")}),n.exports=r}),define("bui/calendar/calendar",["jquery","bui/common","bui/data","bui/list","bui/overlay","bui/picker","bui/calendar/monthpicker","bui/calendar/header","bui/calendar/panel","bui/toolbar"],function(e,t,n){function i(){var e=new Date;return new Date(e.getFullYear(),e.getMonth(),e.getDate())}function r(e){return 10>e?"0"+e:e.toString()}function o(e){for(var t=[],n=0;e>n;n++)t.push({text:r(n),value:r(n)});return t}function a(e,t,n){var i=e.get("el").find("."+t);s.isNumber(n)&&(n=r(n)),i.val(n)}var s=e("bui/common"),u=s.prefix,l="x-datepicker-time",c="x-datepicker-hour",d="x-datepicker-minute",f="x-datepicker-second",m="x-timepicker",g=e("bui/picker").ListPicker,h=e("bui/calendar/monthpicker"),v=e("bui/calendar/header"),p=e("bui/calendar/panel"),b=e("bui/toolbar"),y=s.Component,x=s.Date,I=y.Controller.extend({initializer:function(){var e=this,t=e.get("children"),n=new v,i=new p,r=e.get("footer")||e._createFooter();t.push(n),t.push(i),t.push(r),e.set("header",n),e.set("panel",i),e.set("footer",r)},renderUI:function(){var e=this,t=e.get("children");if(e.get("showTime")){var n=e.get("timepicker")||e._initTimePicker();t.push(n),e.set("timepicker",n)}},bindUI:function(){var e=this,t=e.get("header"),n=e.get("panel");n.on("selectedchange",function(t){var n=t.date;x.isDateEquals(n,e.get("selectedDate"))||e.set("selectedDate",n)}),e.get("showTime")?e._initTimePickerEvent():n.on("click",function(){e.fire("accept")}),t.on("monthchange",function(t){e._setYearMonth(t.year,t.month)}),t.on("headerclick",function(){var n=e.get("monthpicker")||e._createMonthPicker();n.set("year",t.get("year")),n.set("month",t.get("month")),n.show()})},_initTimePicker:function(){var e=this,t=e.get("lockTime"),n={hour:c,minute:d,second:f};if(t)for(var i in t){var r=n[i.toLowerCase()];e.set(i,t[i]),t.editable||e.get("el").find("."+r).attr("disabled","")}var o=new g({elCls:m,children:[{itemTpl:'<li><a href="#">{text}</a></li>'}],autoAlign:!1,align:{node:e.get("el"),points:["bl","bl"],offset:[0,-30]},trigger:e.get("el").find("."+l)});return o.render(),e._initTimePickerEvent(o),o},_initTimePickerEvent:function(e){var t=this,e=t.get("timepicker");e&&(e.get("el").delegate("a","click",function(e){e.preventDefault()}),e.on("triggerchange",function(t){var n=t.curTrigger;n.hasClass(c)?e.get("list").set("items",o(24)):e.get("list").set("items",o(60))}),e.on("selectedchange",function(e){var n=e.curTrigger,i=e.value;n.hasClass(c)?t.setInternal("hour",i):n.hasClass(d)?t.setInternal("minute",i):t.setInternal("second",i)}))},_setYearMonth:function(e,t){var n=this,i=n.get("selectedDate"),r=i.getDate();if(e!==i.getFullYear()||t!==i.getMonth()){var o=new Date(e,t,r);o.getMonth()!=t&&(o=x.addDay(-1,new Date(e,t+1))),n.set("selectedDate",o)}},_createMonthPicker:function(){var e,t=this;return e=new h({render:t.get("el"),effect:{effect:"slide",duration:300},visibleMode:"display",success:function(){var e=this;t._setYearMonth(e.get("year"),e.get("month")),e.hide()},cancel:function(){this.hide()}}),t.set("monthpicker",e),t.get("children").push(e),e},_createFooter:function(){var e=this,t=this.get("showTime"),n=[];return t?(n.push({content:e.get("timeTpl")}),n.push({xclass:"bar-item-button",text:"\u786e\u5b9a",btnCls:"button button-small button-primary",listeners:{click:function(){e.fire("accept")}}})):(n.push({xclass:"bar-item-button",text:"\u4eca\u5929",btnCls:"button button-small",id:"todayBtn",listeners:{click:function(){var t=i();e.set("selectedDate",t),e.fire("accept")}}}),n.push({xclass:"bar-item-button",text:"\u6e05\u9664",btnCls:"button button-small",id:"clsBtn",listeners:{click:function(){e.fire("clear")}}})),new b.Bar({elCls:u+"calendar-footer",children:n})},_updateTodayBtnAble:function(){var e=this;if(!e.get("showTime")){var t=e.get("footer"),n=e.get("panel").get("view"),r=i(),o=t.getItem("todayBtn");n._isInRange(r)?o.enable():o.disable()}},_uiSetSelectedDate:function(e){var t=this,n=e.getFullYear(),i=e.getMonth();t.get("header").setMonth(n,i),t.get("panel").set("selected",e),t.fire("datechange",{date:e})},_uiSetHour:function(e){a(this,c,e)},_uiSetMinute:function(e){a(this,d,e)},_uiSetSecond:function(e){a(this,f,e)},_uiSetMaxDate:function(e){var t=this;t.get("panel").set("maxDate",e),t._updateTodayBtnAble()},_uiSetMinDate:function(e){var t=this;t.get("panel").set("minDate",e),t._updateTodayBtnAble()}},{ATTRS:{header:{},panel:{},maxDate:{},minDate:{},monthPicker:{},timepicker:{},width:{value:180},events:{value:{click:!1,accept:!1,datechange:!1,monthchange:!1}},showTime:{value:!1},lockTime:{},timeTpl:{value:'<input type="text" readonly class="'+l+" "+c+'" />:<input type="text" readonly class="'+l+" "+d+'" />:<input type="text" readonly class="'+l+" "+f+'" />'},selectedDate:{value:i()},hour:{value:(new Date).getHours()},minute:{value:(new Date).getMinutes()},second:{value:0}}},{xclass:"calendar",priority:0});n.exports=I}),define("bui/calendar/monthpicker",["jquery","bui/common","bui/overlay","bui/data","bui/list","bui/toolbar"],function(e,t,n){function i(){return r.map(g,function(e,t){return{text:e,value:t}})}var r=e("jquery"),o=e("bui/common"),a=(o.Component,e("bui/overlay").Overlay),s=e("bui/list").SimpleList,u=e("bui/toolbar"),l=o.prefix,c="x-monthpicker-month",d="x-monthpicker-year",f="x-monthpicker-yearnav",m="x-monthpicker-item",g=["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"],h=s.extend({bindUI:function(){var e=this;e.get("el").delegate("a","click",function(e){e.preventDefault()}).delegate("."+c,"dblclick",function(){e.fire("monthdblclick")})}},{ATTRS:{itemTpl:{view:!0,value:'<li class="'+m+' x-monthpicker-month"><a href="#" hidefocus="on">{text}</a></li>'},itemCls:{value:m},items:{view:!0,value:i()},elCls:{view:!0,value:"x-monthpicker-months"}}},{xclass:"calendar-month-panel"}),v=s.extend({bindUI:function(){var e=this,t=e.get("el");t.delegate("a","click",function(e){e.preventDefault()}),t.delegate("."+d,"dblclick",function(){e.fire("yeardblclick")}),t.delegate(".x-icon","click",function(t){var n=r(t.currentTarget);n.hasClass(f+"-prev")?e._prevPage():n.hasClass(f+"-next")&&e._nextPage()}),e.on("itemselected",function(t){t.item&&e.setInternal("year",t.item.value)})},_prevPage:function(){var e=this,t=e.get("start"),n=e.get("yearCount");e.set("start",t-n)},_nextPage:function(){var e=this,t=e.get("start"),n=e.get("yearCount");e.set("start",t+n)},_uiSetStart:function(){var e=this;e._setYearsContent()},_uiSetYear:function(e){var t=this,n=t.findItemByField("value",e);n?t.setSelectedByField(e):t.set("start",e)},_setYearsContent:function(){for(var e=this,t=e.get("year"),n=e.get("start"),i=e.get("yearCount"),r=[],o=n;n+i>o;o++){var a=o.toString();r.push({text:a,value:o})}e.set("items",r),e.setSelectedByField(t)}},{ATTRS:{items:{view:!0,value:[]},elCls:{view:!0,value:"x-monthpicker-years"},itemCls:{value:m},year:{},start:{value:(new Date).getFullYear()},yearCount:{value:10},itemTpl:{view:!0,value:'<li class="'+m+" "+d+'"><a href="#" hidefocus="on">{text}</a></li>'},tpl:{view:!0,value:'<div class="'+f+'"><span class="'+f+'-prev x-icon x-icon-normal x-icon-small"><span class="icon icon-caret icon-caret-left"></span></span><span class="'+f+'-next x-icon x-icon-normal x-icon-small"><span class="icon icon-caret icon-caret-right"></span></span></div><ul></ul>'}}},{xclass:"calendar-year-panel"}),p=a.extend({initializer:function(){var e=this,t=e.get("children"),n=new h,i=new v,r=e._createFooter();t.push(n),t.push(i),t.push(r),e.set("yearPanel",i),e.set("monthPanel",n)},bindUI:function(){var e=this;e.get("monthPanel").on("itemselected",function(t){t.item&&e.setInternal("month",t.item.value)}).on("monthdblclick",function(){e._successCall()}),e.get("yearPanel").on("itemselected",function(t){t.item&&e.setInternal("year",t.item.value)}).on("yeardblclick",function(){e._successCall()})},_successCall:function(){var e=this,t=e.get("success");t&&t.call(e)},_createFooter:function(){var e=this;return new u.Bar({elCls:l+"clear x-monthpicker-footer",children:[{xclass:"bar-item-button",text:"\u786e\u5b9a",btnCls:"button button-small button-primary",handler:function(){e._successCall()}},{xclass:"bar-item-button",text:"\u53d6\u6d88",btnCls:"button button-small last",handler:function(){var t=e.get("cancel");t&&t.call(e)}}]})},_uiSetYear:function(e){this.get("yearPanel").set("year",e)},_uiSetMonth:function(e){this.get("monthPanel").setSelectedByField(e)}},{ATTRS:{footer:{},align:{value:{}},year:{},success:{value:function(){}},cancel:{value:function(){}},width:{value:180},month:{},yearPanel:{},monthPanel:{}}},{xclass:"monthpicker"});n.exports=p}),define("bui/calendar/datepicker",["jquery","bui/common","bui/data","bui/list","bui/overlay","bui/picker","bui/calendar/calendar","bui/calendar/monthpicker","bui/calendar/header","bui/calendar/panel","bui/toolbar"],function(e,t,n){var i=e("bui/common"),r=e("bui/picker").Picker,o=e("bui/calendar/calendar"),a=i.Date,s=r.extend({initializer:function(){},createControl:function(){var e=this,t=e.get("children"),n=new o({render:e.get("el"),showTime:e.get("showTime"),lockTime:e.get("lockTime"),minDate:e.get("minDate"),maxDate:e.get("maxDate"),autoRender:!0});return n.on("clear",function(){var t=e.get("curTrigger"),n=t.val();n&&(t.val(""),t.trigger("change"))}),e.get("dateMask")||(e.get("showTime")?e.set("dateMask","yyyy-mm-dd HH:MM:ss"):e.set("dateMask","yyyy-mm-dd")),t.push(n),e.set("calendar",n),n},setSelectedValue:function(e){if(this.get("calendar")){var t=this,n=this.get("calendar"),i=a.parse(e,t.get("dateMask"));if(i=i||t.get("selectedDate"),n.set("selectedDate",a.getDate(i)),t.get("showTime")){var r=this.get("lockTime"),o=i.getHours(),s=i.getMinutes(),u=i.getSeconds();r&&(e&&r.editable||(o=null!=r.hour?r.hour:o,s=null!=r.minute?r.minute:s,u=null!=r.second?r.second:u)),n.set("hour",o),n.set("minute",s),n.set("second",u)}}},getSelectedValue:function(){if(!this.get("calendar"))return null;var e=this,t=e.get("calendar"),n=a.getDate(t.get("selectedDate"));return e.get("showTime")&&(n=a.addHour(t.get("hour"),n),n=a.addMinute(t.get("minute"),n),n=a.addSecond(t.get("second"),n)),n},getSelectedText:function(){return this.get("calendar")?a.format(this.getSelectedValue(),this._getFormatType()):""},_getFormatType:function(){return this.get("dateMask")},_uiSetMaxDate:function(e){if(!this.get("calendar"))return null;var t=this;t.get("calendar").set("maxDate",e)},_uiSetMinDate:function(e){if(!this.get("calendar"))return null;var t=this;t.get("calendar").set("minDate",e)}},{ATTRS:{showTime:{value:!1},lockTime:{},maxDate:{},minDate:{},dateMask:{},changeEvent:{value:"accept"},hideEvent:{value:"accept clear"},calendar:{},selectedDate:{value:new Date((new Date).setSeconds(0))}}},{xclass:"datepicker",priority:0});n.exports=s}),define("bui/calendar/header",["jquery","bui/common"],function(e,t,n){var i=e("jquery"),r=e("bui/common"),o=r.prefix,a=r.Component,s="year-text",u="month-text",l="x-datepicker-arrow",c="x-datepicker-prev",d="x-datepicker-next",f=a.Controller.extend({bindUI:function(){var e=this,t=e.get("el");t.delegate("."+l,"click",function(t){t.preventDefault();var n=i(t.currentTarget);n.hasClass(d)?e.nextMonth():n.hasClass(c)&&e.prevMonth()}),t.delegate(".x-datepicker-month","click",function(){e.fire("headerclick")})},setMonth:function(e,t){var n=this,i=n.get("year"),r=n.get("month");(e!==i||t!==r)&&(n.set("year",e),n.set("month",t),n.fire("monthchange",{year:e,month:t}))},nextMonth:function(){var e=this,t=new Date(e.get("year"),e.get("month")+1);e.setMonth(t.getFullYear(),t.getMonth())},prevMonth:function(){var e=this,t=new Date(e.get("year"),e.get("month")-1);e.setMonth(t.getFullYear(),t.getMonth())},_uiSetYear:function(e){var t=this;t.get("el").find("."+s).text(e)},_uiSetMonth:function(e){var t=this;t.get("el").find("."+u).text(e+1)}},{ATTRS:{year:{sync:!1},month:{sync:!1,setter:function(e){this.set("monthText",e+1)}},monthText:{},tpl:{view:!0,value:'<div class="'+l+" "+c+'"><span class="icon icon-white icon-caret  icon-caret-left"></span></div><div class="x-datepicker-month"><div class="month-text-container"><span><span class="year-text">{year}</span>\u5e74 <span class="month-text">{monthText}</span>\u6708</span><span class="'+o+"caret "+o+'caret-down"></span></div></div><div class="'+l+" "+d+'"><span class="icon icon-white icon-caret  icon-caret-right"></span></div>'},elCls:{view:!0,value:"x-datepicker-header"},events:{value:{monthchange:!0}}}},{xclass:"calendar-header"});n.exports=f}),define("bui/calendar/panel",["jquery","bui/common"],function(e,t,n){var i=e("jquery"),r=e("bui/common"),o=r.Component,a=r.Date,s="x-datepicker-date",u="x-datepicker-today",l="x-datepicker-disabled",c="isoDate",d="x-datepicker-selected",f=6,m={deactive:"prevday",active:"active",disabled:"disabled"},g=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],h=o.View.extend({renderUI:function(){this.updatePanel()},updatePanel:function(){var e=this,t=e.get("el"),n=t.find("tbody"),r=e._getPanelInnerTpl();n.empty(),i(r).appendTo(n)},_getPanelInnerTpl:function(){for(var e=this,t=e._getFirstDate(),n=[],i=0;f>i;i++){var r=a.addWeek(i,t);n.push(e._getWeekTpl(r))}return n.join("")},_getWeekTpl:function(e){for(var t=this,n=t.get("weekTpl"),i=[],o=0;o<g.length;o++){var s=a.addDay(o,e);i.push(t._getDayTpl(s))}return r.substitute(n,{daysTpl:i.join("")})},_getDayTpl:function(e){var t=this,n=t.get("dayTpl"),i=e.getDay(),o=t._isToday(e)?u:"",s=g[i],l=e.getDate(),d=t._isInRange(e)?t._isCurrentMonth(e)?m.active:m.deactive:m.disabled;return r.substitute(n,{dayOfWeek:s,dateType:d,dateNumber:l,todayCls:o,date:a.format(e,c)})},_getFirstDate:function(e,t){var n=this,i=n._getMonthFirstDate(e,t),r=i.getDay();return a.addDay(-1*r,i)},_getMonthFirstDate:function(e,t){var n=this,e=e||n.get("year"),t=t||n.get("month");return new Date(e,t)},_isCurrentMonth:function(e){return e.getMonth()===this.get("month")},_isToday:function(e){var t=new Date;return t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate()},_isInRange:function(e){var t=this,n=t.get("maxDate"),i=t.get("minDate");return i&&i>e?!1:n&&e>n?!1:!0},_clearSelectedDate:function(){var e=this;e.get("el").find("."+d).removeClass(d)},_findDateElement:function(e){var t=this,n=a.format(e,c),r=t.get("el").find("."+s),o=null;return n&&r.each(function(e,t){return i(t).attr("title")===n?(o=i(t),!1):void 0}),o},_setSelectedDate:function(e){var t=this,n=t._findDateElement(e);t._clearSelectedDate(),n&&n.addClass(d)}},{ATTRS:{}}),v=o.Controller.extend({initializer:function(){var e=this,t=new Date;e.get("year")||e.set("year",t.getFullYear()),e.get("month")||e.set("month",t.getMonth())},bindUI:function(){var e=this,t=e.get("el");t.delegate("."+s,"click",function(e){e.preventDefault()}),t.delegate("."+l,"mouseup",function(e){e.stopPropagation()})},performActionInternal:function(e){var t=this,n=i(e.target).closest("."+s);if(n){var r=n.attr("title");r&&(r=a.parse(r),t.get("view")._isInRange(r)&&t.set("selected",r))}},setMonth:function(e,t){var n=this,i=n.get("year"),r=n.get("month");(e!==i||t!==r)&&(n.set("year",e),n.set("month",t),n.get("view").updatePanel())},_uiSetSelected:function(e,t){var n=this;t&&t.prevVal&&a.isDateEquals(e,t.prevVal)||(n.setMonth(e.getFullYear(),e.getMonth()),n.get("view")._setSelectedDate(e),n.fire("selectedchange",{date:e}))},_uiSetMaxDate:function(e){e&&this.get("view").updatePanel()},_uiSetMinDate:function(e){e&&this.get("view").updatePanel()}},{ATTRS:{year:{view:!0},month:{view:!0},selected:{},focusable:{value:!0},dayTpl:{view:!0,value:'<td class="x-datepicker-date x-datepicker-{dateType} {todayCls} day-{dayOfWeek}" title="{date}"><a href="#" hidefocus="on" tabindex="1"><em><span>{dateNumber}</span></em></a></td>'},events:{value:{click:!1,selectedchange:!0}},maxDate:{view:!0,setter:function(e){return e?r.isString(e)?a.parse(e):e:void 0}},minDate:{view:!0,setter:function(e){return e?r.isString(e)?a.parse(e):e:void 0}},weekTpl:{view:!0,value:"<tr>{daysTpl}</tr>"},tpl:{view:!0,value:'<table class="x-datepicker-inner" cellspacing="0"><thead><tr><th  title="Sunday"><span>\u65e5</span></th><th  title="Monday"><span>\u4e00</span></th><th  title="Tuesday"><span>\u4e8c</span></th><th  title="Wednesday"><span>\u4e09</span></th><th  title="Thursday"><span>\u56db</span></th><th  title="Friday"><span>\u4e94</span></th><th  title="Saturday"><span>\u516d</span></th></tr></thead><tbody class="x-datepicker-body"></tbody></table>'},xview:{value:h}}},{xclass:"calendar-panel",priority:0});n.exports=v}),define("bui/select",["jquery","bui/common","bui/select/select","bui/select/combox","bui/select/suggest","bui/data","bui/list","bui/overlay","bui/picker","bui/select/tag"],function(e,t,n){var i=e("bui/common"),r=i.namespace("Select");i.mix(r,{Select:e("bui/select/select"),Combox:e("bui/select/combox"),Suggest:e("bui/select/suggest")}),n.exports=r}),define("bui/select/select",["jquery","bui/common","bui/data","bui/list","bui/overlay","bui/picker"],function(e,t,n){"use strict";function i(e){if(r.isPlainObject(e)){var t=[];return o.each(e,function(e,n){t.push({value:n,text:e})}),t}var n=[];return o.each(e,function(e){n.push(o.isString(e)?{value:e,text:e}:e)}),n}var r=e("jquery"),o=e("bui/common"),a=e("bui/picker").ListPicker,s=o.prefix,u=o.Component,l=a,c=s+"select-input",d=u.Controller.extend({initializer:function(){var e,t=this,n=t.get("multipleSelect"),r=t.get("picker");r?t.get("valueField")&&r.set("valueField",t.get("valueField")):(e=n?"listbox":"simple-list",r=new l({children:[{xclass:e,elCls:s+"select-list",store:t.get("store"),items:i(t.get("items"))}],valueField:t.get("valueField")}),t.set("picker",r)),n&&r.set("hideEvent","")},renderUI:function(){var e=this,t=e.get("picker"),n=e._getTextEl();t.set("trigger",e.getTrigger()),t.set("triggerEvent",e.get("triggerEvent")),t.set("autoSetValue",e.get("autoSetValue")),t.set("textField",n),t.render(),e.set("list",t.get("list"))},bindUI:function(){{var e=this,t=e.get("picker"),n=t.get("list");n.get("store")}t.on("selectedchange",function(t){e.fire("change",{text:t.text,value:t.value,item:t.item})}),n.on("itemsshow",function(){e._syncValue()}),t.on("show",function(){e.get("forceFit")&&t.set("width",e.get("el").outerWidth())})},containsElement:function(e){var t=this,n=t.get("picker");return u.Controller.prototype.containsElement.call(this,e)||n.containsElement(e)},getTrigger:function(){return this.get("el")},_uiSetItems:function(e){if(e){var t=this,n=t.get("picker"),r=n.get("list");r.set("items",i(e)),t._syncValue()}},_syncValue:function(){var e=this,t=e.get("picker"),n=e.get("valueField");n&&t.setSelectedValue(r(n).val())},_uiSetName:function(e){var t=this,n=t._getTextEl();e&&n.attr("name",e)},_uiSetWidth:function(e){var t=this;if(null!=e){if(t.get("inputForceFit")){var n=t._getTextEl(),i=t.get("el").find(".x-icon"),r=n.outerWidth()-n.width(),o=e-i.outerWidth()-r;n.width(o)}if(t.get("forceFit")){var a=t.get("picker");a.set("width",e)}}},_uiSetDisabled:function(e){var t=this,n=t.get("picker"),i=t._getTextEl();n.set("disabled",e),i&&i.attr("disabled",e)},_getTextEl:function(){var e=this,t=e.get("el");return t.is("input")?t:t.find("input")},destructor:function(){var e=this,t=e.get("picker");t&&t.destroy()},_getList:function(){var e=this,t=e.get("picker"),n=t.get("list");return n},getSelectedValue:function(){return this.get("picker").getSelectedValue()},setSelectedValue:function(e){var t=this,n=t.get("picker");n.setSelectedValue(e)},getSelectedText:function(){return this.get("picker").getSelectedText()}},{ATTRS:{picker:{},list:{},valueField:{},store:{},focusable:{value:!0},autoSetValue:{value:!0},multipleSelect:{value:!1},inputForceFit:{value:!0},name:{},items:{sync:!1},inputCls:{value:c},forceFit:{value:!0},events:{value:{change:!1}},tpl:{view:!0,value:'<input type="text" readonly="readonly" class="'+c+'"/><span class="x-icon x-icon-normal"><i class="icon icon-caret icon-caret-down"></i></span>'},triggerEvent:{value:"click"}}},{xclass:"select"});n.exports=d}),define("bui/select/combox",["jquery","bui/common","bui/select/select","bui/select/tag","bui/data","bui/list","bui/overlay","bui/picker"],function(e,t,n){var i=e("jquery"),r=e("bui/common"),o=e("bui/select/select"),a=e("bui/select/tag"),s=r.prefix+"combox-input",u=o.extend([a],{renderUI:function(){var e=this,t=e.get("picker");t.set("autoFocused",!1)},_uiSetItems:function(e){for(var t=this,n=0;n<e.length;n++){var i=e[n];r.isString(i)&&(e[n]={value:i,text:i})}u.superclass._uiSetItems.call(t,e)},bindUI:function(){var e=this,t=e.get("picker"),n=t.get("list"),r=t.get("textField");i(r).on("keyup",function(){var e=n.getSelected();e&&n.clearItemStatus(e)}),t.on("show",function(){n.clearSelected()})},_uiSetValueField:function(){},getTrigger:function(){return this._getTextEl()}},{ATTRS:{tpl:{view:!0,value:'<input type="text" class="'+s+'"/>'},inputCls:{value:s},autoSetValue:{value:!1}}},{xclass:"combox"});n.exports=u}),define("bui/select/suggest",["jquery","bui/common","bui/select/combox","bui/select/select","bui/select/tag","bui/data","bui/list","bui/overlay","bui/picker"],function(e,t,n){"use strict";var i=e("jquery"),r=e("bui/common"),o=e("bui/select/combox"),a=200,s="",u=o.extend({bindUI:function(){var e=this,t=e.get("el").find("input"),n="keyup"===e.get("triggerEvent")?"keyup":"keyup click";t.on(n,function(){e._start()})},_start:function(){var e=this;e._timer=e.later(function(){e._updateContent()},a)},_updateContent:function(){var e,t=this,n=t.get("data"),i=t.get("el").find("input");if((n||i.val()!==t.get("query"))&&(t.set("query",i.val()),e=i.val(),n||e)){var r=t.get("cacheable"),o=t.get("url"),a=t.get("data");if(r&&o){var s=t.get("dataCache");void 0!==s[e]?t._handleResponse(s[e]):t._requestData()}else o?t._requestData():a&&t._handleResponse(a,!0)}},_getStore:function(){var e=this,t=e.get("picker"),n=t.get("list");return n?n.get("store"):void 0},_requestData:function(){var e=this,t=e.get("el").find("input"),n=e.get("callback"),r=e.get("store"),o={};o[t.attr("name")]=t.val(),r?(o.start=0,r.load(o,n)):i.ajax({url:e.get("url"),type:"post",dataType:e.get("dataType"),data:o,success:function(t){e._handleResponse(t),n&&n(t)}})},_handleResponse:function(e,t){var n=this,i=t?n._getFilterItems(e):e;n.set("items",i),n.get("cacheable")&&(n.get("dataCache")[n.get("query")]=i)},_getItemText:function(e){var t=this,n=t.get("picker"),i=n.get("list");return i?i.getItemText(e):""},_getFilterItems:function(e){function t(e,t){o.push(r.isString(t)?e:t)}var n=this,o=[],a=n.get("el").find("input"),s=a.val(),u=n.get("data");return e=e||[],r.each(e,function(e){var o=r.isString(e)?e:n._getItemText(e);u?-1!==o.indexOf(i.trim(s))&&t(o,e):t(o,e)}),o},later:function(e,t,n){t=t||0;var i=n?setInterval(e,t):setTimeout(e,t);return{id:i,interval:n,cancel:function(){this.interval?clearInterval(i):clearTimeout(i)}}}},{ATTRS:{data:{value:null},query:{value:s},cacheable:{value:!1},dataCache:{shared:!1,value:{}},dataType:{value:"jsonp"},url:{},callback:{},triggerEvent:{valueFn:function(){return this.get("data")?"click":"keyup"}},autoSetValue:{value:!1}}},{xclass:"suggest"});n.exports=u}),define("bui/select/tag",["jquery","bui/common","bui/data","bui/list"],function(e,t,n){var i=e("jquery"),r=e("bui/common"),o=e("bui/list"),a=r.KeyCode,s="warn",u=function(){};u.ATTRS={showTag:{value:!1},tagItemTpl:{value:"<li>{value}<button>\xd7</button></li>"},tagList:{value:null},tagPlaceholder:{value:"\u8f93\u5165\u6807\u7b7e"},separator:{value:";"}},r.augment(u,{__renderUI:function(){var e=this,t=e.get("showTag"),n=e.get("tagPlaceholder"),i=e.getTagInput();t&&!i.attr("placeholder")&&(i.attr("placeholder",n),e.set("inputForceFit",!1))},__bindUI:function(){var e=this,t=e.get("showTag"),n=e.getTagInput();t&&(n.on("keydown",function(t){if(!n.val()){var i=e.get("tagList"),r=i.getLastItem(),o=e.get("picker");t.which==a.DELETE||t.which==a.BACKSPACE?(i.hasStatus(r,s)?e._delTag(r):i.setItemStatus(r,s,!0),o.hide()):i.setItemStatus(r,s,!1)}}),n.on("change",function(){setTimeout(function(){var t=n.val();t&&e._addTag(t)})}))},__syncUI:function(){var e=this,t=e.get("showTag"),n=e.get("valueField");t&&n&&e._setTags(i(n).val())},_setTags:function(e){var t=this,n=t.get("tagList"),i=t.get("separator"),o=e.split(i);n||(n=t._initTagList()),e&&r.each(o,function(e){n.addItem({value:e})
})},_addTag:function(e){var t=this,n=t.get("tagList"),i=t.getTagInput(),r=n.getItem(e);r?t._blurItem(n,r):(n.addItem({value:e}),t._synTagsValue()),i.val("")},_blurItem:function(e,t){e.setItemStatus(t,"active",!0),setTimeout(function(){e.setItemStatus(t,"active",!1)},400)},_delTag:function(e){var t=this,n=t.get("tagList");n.removeItem(e),t._synTagsValue()},getTagsValue:function(){var e=this,t=e.get("tagList"),n=t.getItems(),i=[];return r.each(n,function(e){i.push(e.value)}),i.join(e.get("separator"))},_initTagList:function(){var e=this,t=e.getTagInput(),n=new o.SimpleList({elBefore:t,itemTpl:e.get("tagItemTpl"),idField:"value"});return n.render(),e._initTagEvent(n),e.set("tagList",n),n},_initTagEvent:function(e){var t=this;e.on("itemclick",function(e){var n=i(e.domTarget);n.is("button")&&t._delTag(e.item)})},getTagInput:function(){var e=this,t=e.get("el");return t.is("input")?t:t.find("input")},_synTagsValue:function(){var e=this,t=e.get("valueField");t&&i(t).val(e.getTagsValue())}}),n.exports=u}),define("bui/form",["bui/common","jquery","bui/overlay","bui/list","bui/data"],function(e,t,n){var i=e("bui/common"),r=i.namespace("Form"),o=e("bui/form/tips");i.mix(r,{Tips:o,TipItem:o.Item,FieldContainer:e("bui/form/fieldcontainer"),Form:e("bui/form/form"),Row:e("bui/form/row"),Group:e("bui/form/fieldgroup"),HForm:e("bui/form/hform"),Rules:e("bui/form/rules"),Field:e("bui/form/field"),FieldGroup:e("bui/form/fieldgroup")}),n.exports=r}),define("bui/form/tips",["jquery","bui/common","bui/overlay"],function(e,t,n){var i=e("jquery"),r=e("bui/common"),o=r.prefix,a=e("bui/overlay").Overlay,s="data-tip",u=o+"form-tip-container",l=a.extend({initializer:function(){var e=this,t=e.get("render");if(!t){var n=i(e.get("trigger")).parent();e.set("render",n)}},renderUI:function(){var e=this;e.resetVisible()},resetVisible:function(){var e=this,t=i(e.get("trigger"));t.val()?e.set("visible",!1):(e.set("align",{node:i(e.get("trigger")),points:["cl","cl"]}),e.set("visible",!0))},bindUI:function(){var e=this,t=i(e.get("trigger"));e.get("el").on("click",function(){e.hide(),t.focus()}),t.on("click focus",function(){e.hide()}),t.on("blur",function(){e.resetVisible()})}},{ATTRS:{trigger:{},text:{},iconCls:{},tpl:{value:'<span class="{iconCls}"></span><span class="tip-text">{text}</span>'}}},{xclass:"form-tip"}),c=function(e){return this.constructor!==c?new c(e):(c.superclass.constructor.call(this,e),void this._init())};c.ATTRS={form:{},items:{valueFn:function(){return[]}}},r.extend(c,r.Base),r.augment(c,{_init:function(){var e=this,t=i(e.get("form"));t.length&&(r.each(i.makeArray(t[0].elements),function(t){var n=i(t).attr(s);n&&e._initFormElement(t,i.parseJSON(n))}),t.addClass(u))},_initFormElement:function(e,t){t&&(t.trigger=e);var n=this,i=n.get("items"),r=new l(t);i.push(r)},getItem:function(e){var t=this,n=t.get("items"),o=null;return r.each(n,function(t){return i(t.get("trigger")).attr("name")===e?(o=t,!1):void 0}),o},resetVisible:function(){var e=this,t=e.get("items");r.each(t,function(e){e.resetVisible()})},render:function(){var e=this,t=e.get("items");r.each(t,function(e){e.render()})},destroy:function(){var e=this,t=e.get(t);r.each(t,function(e){e.destroy()})}}),c.Item=l,n.exports=c}),define("bui/form/fieldcontainer",["jquery","bui/common","bui/overlay","bui/list","bui/data"],function(e,t,n){function i(e){return e.is(m)}function r(e,t){if(e!=t){if(i(e))return[e];var n=e.attr("class");if(n&&(-1!==n.indexOf(f)||-1!==n.indexOf(d)))return[e]}var s=[],u=e.children();return a.each(u,function(e){s=s.concat(r(o(e),t))}),s}var o=e("jquery"),a=e("bui/common"),s=e("bui/form/field"),u=e("bui/form/groupvalid"),l=a.prefix,c="form-field",d=l+c,f=l+"form-group",m="input,select,textarea",g=a.Component.View.extend([u.View]),h=a.Component.Controller.extend([u],{syncUI:function(){var e=this,t=e.getFields(),n=e.get("validators");a.each(t,function(e){var t=e.get("name");n[t]&&e.set("validator",n[t])}),a.each(n,function(t,n){if(0==n.indexOf("#")){var i=n.replace("#",""),r=e.getChild(i,!0);r&&r.set("validator",t)}})},getDecorateElments:function(){var e=this,t=e.get("el"),n=r(t,t);return n},findXClassByNode:function(e,t){return"checkbox"===e.attr("type")?c+"-checkbox":"radio"===e.attr("type")?c+"-radio":"number"===e.attr("type")?c+"-number":e.hasClass("calendar")?c+"-date":"SELECT"==e[0].tagName?c+"-select":i(e)?c:a.Component.Controller.prototype.findXClassByNode.call(this,e,t)},getRecord:function(){var e=this,t={},n=e.getFields();return a.each(n,function(n){var i=n.get("name"),r=e._getFieldValue(n);if(t[i]){if(a.isArray(t[i])&&null!=r)t[i].push(r);else if(null!=r){var o=[t[i]];o.push(r),t[i]=o}}else t[i]=r}),t},getFields:function(e){var t=this,n=[],i=t.get("children");return a.each(i,function(t){t instanceof s?e&&t.get("name")!=e||n.push(t):t.getFields&&(n=n.concat(t.getFields(e)))}),n},getField:function(e){var t=this,n=t.getFields(),i=null;return a.each(n,function(t){return t.get("name")===e?(i=t,!1):void 0}),i},getFieldAt:function(e){return this.getFields()[e]},setFieldValue:function(e,t){var n=this,i=n.getFields(e);a.each(i,function(e){n._setFieldValue(e,t)})},_setFieldValue:function(e,t){if(!e.get("disabled"))if(e instanceof s.Check){var n=e.get("value");t&&(n===t||a.isArray(t)&&a.Array.contains(n,t))?e.set("checked",!0):e.set("checked",!1)}else null==t&&(t=""),e.clearErrors(!0),e.set("value",t)},getFieldValue:function(e){var t=this,n=t.getFields(e),i=[];return a.each(n,function(e){var n=t._getFieldValue(e);n&&i.push(n)}),0===i.length?null:1===i.length?i[0]:i},_getFieldValue:function(e){return e instanceof s.Check&&!e.get("checked")?null:e.get("value")},clearFields:function(){this.clearErrors(!0),this.setRecord({})},setRecord:function(e){var t=this,n=t.getFields();a.each(n,function(n){var i=n.get("name");t._setFieldValue(n,e[i])})},updateRecord:function(e){var t=this,n=t.getFields();a.each(n,function(n){var i=n.get("name");e.hasOwnProperty(i)&&t._setFieldValue(n,e[i])})},focus:function(){var e=this,t=e.getFields(),n=t[0];n&&n.focus()},_uiSetDisabled:function(e){var t=this,n=t.get("children");a.each(n,function(t){t.set("disabled",e)})}},{ATTRS:{record:{setter:function(e){this.setRecord(e)},getter:function(){return this.getRecord()}},validators:{value:{}},defaultLoaderCfg:{value:{property:"children",dataType:"json"}},disabled:{sync:!1},isDecorateChild:{value:!0},xview:{value:g}}},{xclass:"form-field-container"});h.View=g,n.exports=h}),define("bui/form/field",["bui/common","jquery","bui/overlay","bui/list","bui/data"],function(e,t,n){var i=e("bui/common"),r=e("bui/form/fields/base");i.mix(r,{Text:e("bui/form/fields/text"),Date:e("bui/form/fields/date"),Select:e("bui/form/fields/select"),Hidden:e("bui/form/fields/hidden"),Number:e("bui/form/fields/number"),Check:e("bui/form/fields/check"),Radio:e("bui/form/fields/radio"),Checkbox:e("bui/form/fields/checkbox"),Plain:e("bui/form/fields/plain"),List:e("bui/form/fields/list"),TextArea:e("bui/form/fields/textarea"),Uploader:e("bui/form/fields/uploader"),CheckList:e("bui/form/fields/checklist"),RadioList:e("bui/form/fields/radiolist")}),n.exports=r}),define("bui/form/fields/base",["jquery","bui/common","bui/overlay"],function(e,t,n){var i=e("jquery"),r=e("bui/common"),o=r.Component,a=e("bui/form/tips").Item,s=e("bui/form/valid"),u=e("bui/form/remote"),l=r.prefix+"form-field-error",c="bui-form-tip-container",d=o.View.extend([u.View,s.View],{renderUI:function(){var e=this,t=e.get("control");if(t)e.set("controlContainer",t.parent());else{var n=e.get("controlTpl"),r=e.getControlContainer();if(n){var t=i(n).appendTo(r);e.set("control",t)}}},clearErrors:function(){var e=this,t=e.get("msgEl");t&&(t.remove(),e.set("msgEl",null)),e.get("el").removeClass(l)},showError:function(e,t){var n=this,o=n.get("control"),a=r.substitute(t,{error:e}),s=i(a);s.appendTo(o.parent()),n.set("msgEl",s),n.get("el").addClass(l)},getControlContainer:function(){var e=this,t=e.get("el"),n=e.get("controlContainer");return n&&r.isString(n)&&(n=t.find(n)),n&&n.length?n:t},getLoadingContainer:function(){return this.getControlContainer()},_uiSetName:function(e){var t=this;t.get("control").attr("name",e)}},{ATTRS:{error:{},controlContainer:{},msgEl:{},control:{}}}),f=o.Controller.extend([u,s],{isField:!0,initializer:function(){var e=this;e.on("afterRenderUI",function(){var t=e.get("tip");if(t){var n=e.getTipTigger();n&&n.parent().addClass(c),t.trigger=n,t.autoRender=!0,t=new a(t),e.set("tip",t)}})},bindUI:function(){var e=this,t=e.get("validEvent"),n=e.get("changeEvent"),i=e.get("firstValidEvent"),r=e.getInnerControl();r.is("select")&&(t="change"),r.on(t,function(){var t=e.getControlValue(r);e.validControl(t)}),i&&r.on(i,function(){if(!e.get("hasValid")){var t=e.getControlValue(r);e.validControl(t)}}),e.on(n,function(){e.onValid()}),e.on("remotecomplete",function(t){e._setError(t.error)})},onValid:function(){var e=this,t=e.getControlValue();t=e.parseValue(t),e.isCurrentValue(t)||(e.setInternal("value",t),e.onChange())},onChange:function(){this.fire("change")},isCurrentValue:function(e){return e==this.get("value")},_clearError:function(){this.set("error",null),this.get("view").clearErrors()},_setError:function(e){this.set("error",e),this.showErrors()},getControlValue:function(e){var t=this;return e=e||t.getInnerControl(),e.val()},getControlContainer:function(){return this.get("view").getControlContainer()},getRemoteParams:function(){var e=this,t={};return t[e.get("name")]=e.getControlValue(),t},setControlValue:function(e){var t=this,n=t.getInnerControl();n.val(e)},parseValue:function(e){return e},valid:function(){var e=this;e.validControl()},validControl:function(e){var t,n=this;return e=e||n.getControlValue(),preError=n.get("error"),t=n.getValidError(e),n.setInternal("hasValid",!0),t?(n._setError(t),n.fire("error",{msg:t,value:e}),preError!==t&&n.fire("validchange",{valid:!1})):(n._clearError(),n.fire("valid"),preError&&n.fire("validchange",{valid:!0})),!t},focus:function(){this.getInnerControl().focus()},change:function(){var e=this.getInnerControl();e.change()},blur:function(){this.getInnerControl().blur()},isValid:function(){var e=this;return e.get("hasValid")||e.validControl(),!e.get("error")},getError:function(){return this.get("error")},getErrors:function(){var e=this.getError();return e?[e]:[]},clearErrors:function(e){var t=this;t._clearError(),e&&t.getControlValue()!=t.get("value")&&t.setControlValue(t.get("value"))},getInnerControl:function(){return this.get("view").get("control")},getTipTigger:function(){return this.getInnerControl()},destructor:function(){var e=this,t=e.get("tip");t&&t.destroy&&t.destroy()},setInnerWidth:function(e){var t=this,n=t.getInnerControl(),o=n.siblings(),a=n.outerWidth()-n.width();r.each(o,function(e){a+=i(e).outerWidth()}),n.width(e-a)},_resetTip:function(){var e=this,t=e.get("tip");t&&t.resetVisible()},resetTip:function(){this._resetTip()},_uiSetValue:function(e){var t=this;t.setControlValue(e),t.get("rendered")&&(t.validControl(),t.onChange()),t._resetTip()},_uiSetDisabled:function(e){var t=this,n=t.getInnerControl(),i=t.get("children");n.attr("disabled",e),t.get("rendered")&&(e&&t.clearErrors(),e||t.valid()),r.each(i,function(t){t.set("disabled",e)})},_uiSetWidth:function(e){var t=this;null!=e&&t.get("forceFit")&&t.setInnerWidth(e)}},{ATTRS:{hasValid:{value:!1},forceFit:{value:!1},tip:{},changeEvent:{value:"valid"},firstValidEvent:{value:"blur"},validEvent:{value:"keyup change"},name:{view:!0},showError:{view:!0,value:!0},value:{view:!0},label:{},controlContainer:{view:!0},control:{view:!0},controlTpl:{view:!0,value:'<input type="text"/>'},events:{value:{error:!1,valid:!1,change:!0,validchange:!0}},tpl:{value:"<label>{label}</label>"},xview:{value:d}},PARSER:{control:function(e){var t=e.find("input,select,textarea");return t.length?t:e},disabled:function(e){return!!e.attr("disabled")},value:function(e){var t=this,n="select,input,textarea",i=t.get("value");return i||(e.is(n)?(i=e.val(),!i&&e.is("select")&&(i=e.attr("value"))):i=e.find(n).val()),i},name:function(e){var t=this,n="select,input,textarea",i=t.get("name");return i||(i=e.is(n)?e.attr("name"):e.find(n).attr("name")),i}}},{xclass:"form-field"});f.View=d,n.exports=f}),define("bui/form/valid",["bui/common","jquery"],function(e,t,n){var i=e("bui/common"),r=e("bui/form/rules"),o=function(){};o.prototype={getErrorsContainer:function(){var e=this,t=e.get("errorContainer");return t?i.isString(t)?e.get("el").find(t):t:e.getContentElement()},showErrors:function(e){var t=this,n=t.getErrorsContainer(),r=t.get("errorTpl");return t.clearErrors(),t.get("showError")?t.get("showOneError")?void(e&&e.length&&t.showError(e[0],r,n)):void i.each(e,function(e){e&&t.showError(e,r,n)}):void 0},showError:function(){},clearErrors:function(){}};var a=function(){};a.ATTRS={defaultRules:{value:{}},defaultMessages:{value:{}},rules:{shared:!1,value:{}},messages:{shared:!1,value:{}},validator:{},errorContainer:{view:!0},errorTpl:{view:!0,value:'<span class="x-field-error"><span class="x-icon x-icon-mini x-icon-error">!</span><label class="x-field-error-text">{error}</label></span>'},showError:{view:!0,value:!0},showOneError:{},error:{},pauseValid:{value:!1}},a.prototype={__bindUI:function(){var e=this;e.on("afterDisabledChange",function(t){var n=t.newVal;n?e.clearErrors(!1,!1):e.valid()})},isValid:function(){},valid:function(){},validControl:function(){},validRules:function(e,t){if(!e)return null;if(this.get("pauseValid"))return null;var n=this,i=n._getValidMessages(),o=null;for(var a in e)if(e.hasOwnProperty(a)){var s=e[a];if(o=r.valid(a,t,s,i[a],n))break}return o},_getValidMessages:function(){var e=this,t=e.get("defaultMessages"),n=e.get("messages");return i.merge(t,n)},getValidError:function(e){var t=this,n=t.get("validator"),i=null;return i=t.validRules(t.get("defaultRules"),e)||t.validRules(t.get("rules"),e),i||this.get("pauseValid")||(t.parseValue&&(e=t.parseValue(e)),i=n?n.call(this,e):""),i},getErrors:function(){},showErrors:function(e){var t=this,e=e||t.getErrors();t.get("view").showErrors(e)},clearErrors:function(e,t){t=null==t?!0:t;var n=this,r=n.get("children");t&&i.each(r,function(n){n.clearErrors&&(n.field?n.clearErrors(e):n.clearErrors(e,t))}),n.set("error",null),n.get("view").clearErrors()},addRule:function(e,t,n){var i=this,r=i.get("rules"),o=i.get("messages");r[e]=t,n&&(o[e]=n)},addRules:function(e,t){var n=this;i.each(e,function(e,i){var r=t?t[i]:null;n.addRule(i,e,r)})},removeRule:function(e){var t=this,n=t.get("rules");delete n[e]},clearRules:function(){var e=this;e.set("rules",{})}},a.View=o,n.exports=a}),define("bui/form/rules",["jquery","bui/common"],function(e,t,n){function i(e){return parseFloat(e)}function r(e){return BUI.Date.parse(e)}function o(e,t,n){var i=e&&e.equals!==!1;return i?t>=n:t>n}function a(e){return""==e||null==e}function s(e,t,n,i){for(var r=i.getFields(),s=!0,u=1;u<r.length;u++){var l,c,d=r[u],f=r[u-1];if(d&&f&&(l=d.get("value"),c=f.get("value"),!a(l)&&!a(c)&&!o(t,l,c))){s=!1;break}}return s?null:n}function u(e){var t=e.getFieldAt(0);return t?t.get("name"):""}function l(e,t){if(BUI.isArray(t)||(t=[t]),!e||!t.length)return!1;var n=e?BUI.isArray(e)?e.length:1:0;if(1==t.length){var i=t[0];if(!i)return!0;if(i>n)return!1}else{var r=t[0],o=t[1];if(r>n||n>o)return!1}return!0}{var c=e("jquery"),d=e("bui/form/rule"),f={},m={add:function(e){var t;return c.isPlainObject(e)?(t=e.name,f[t]=new d(e)):e.get&&(t=e.get("name"),f[t]=e),f[t]},remove:function(e){delete f[e]},get:function(e){return f[e]},valid:function(e,t,n,i,r){var o=m.get(e);return o?o.valid(t,n,i,r):null},isValid:function(e,t,n,i){return null==m.valid(e,t,n,i)}};m.add({name:"required",msg:"\u4e0d\u80fd\u4e3a\u7a7a\uff01",validator:function(e,t,n){return t!==!1&&/^\s*$/.test(e)?n:void 0}}),m.add({name:"equalTo",msg:"\u4e24\u6b21\u8f93\u5165\u4e0d\u4e00\u81f4\uff01",validator:function(e,t,n){var i=c(t);return i.length&&(t=i.val()),e===t?void 0:n}}),m.add({name:"min",msg:"\u8f93\u5165\u503c\u4e0d\u80fd\u5c0f\u4e8e{0}\uff01",validator:function(e,t,n){return BUI.isString(e)&&(e=e.replace(/\,/g,"")),""!==e&&i(e)<i(t)?n:void 0}}),m.add({name:"max",msg:"\u8f93\u5165\u503c\u4e0d\u80fd\u5927\u4e8e{0}\uff01",validator:function(e,t,n){return BUI.isString(e)&&(e=e.replace(/\,/g,"")),""!==e&&i(e)>i(t)?n:void 0}}),m.add({name:"length",msg:"\u8f93\u5165\u503c\u957f\u5ea6\u4e3a{0}\uff01",validator:function(e,t,n){return null!=e&&(e=c.trim(e.toString()),t!=e.length)?n:void 0}}),m.add({name:"minlength",msg:"\u8f93\u5165\u503c\u957f\u5ea6\u4e0d\u5c0f\u4e8e{0}\uff01",validator:function(e,t,n){if(null!=e){e=c.trim(e.toString());var i=e.length;if(t>i)return n}}}),m.add({name:"maxlength",msg:"\u8f93\u5165\u503c\u957f\u5ea6\u4e0d\u5927\u4e8e{0}\uff01",validator:function(e,t,n){if(e){e=c.trim(e.toString());var i=e.length;if(i>t)return n}}}),m.add({name:"regexp",msg:"\u8f93\u5165\u503c\u4e0d\u7b26\u5408{0}\uff01",validator:function(e,t,n){return t?t.test(e)?void 0:n:void 0}}),m.add({name:"email",msg:"\u4e0d\u662f\u6709\u6548\u7684\u90ae\u7bb1\u5730\u5740\uff01",validator:function(e,t,n){return e=c.trim(e),e?/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e)?void 0:n:void 0}}),m.add({name:"date",msg:"\u4e0d\u662f\u6709\u6548\u7684\u65e5\u671f\uff01",validator:function(e,t,n){return BUI.isNumber(e)||BUI.isDate(e)?void 0:(e=c.trim(e),e?BUI.Date.isDateString(e)?void 0:n:void 0)}}),m.add({name:"minDate",msg:"\u8f93\u5165\u65e5\u671f\u4e0d\u80fd\u5c0f\u4e8e{0}\uff01",validator:function(e,t,n){if(e){var i=r(e);if(i&&i<r(t))return n}}}),m.add({name:"maxDate",msg:"\u8f93\u5165\u65e5\u671f\u4e0d\u80fd\u5927\u4e8e{0}\uff01",validator:function(e,t,n){if(e){var i=r(e);if(i&&i>r(t))return n}}}),m.add({name:"mobile",msg:"\u4e0d\u662f\u6709\u6548\u7684\u624b\u673a\u53f7\u7801\uff01",validator:function(e,t,n){return e=c.trim(e),e?/^\d{11}$/.test(e)?void 0:n:void 0}}),m.add({name:"number",msg:"\u4e0d\u662f\u6709\u6548\u7684\u6570\u5b57\uff01",validator:function(e,t,n){return BUI.isNumber(e)?void 0:(e=e.replace(/\,/g,""),isNaN(e)?n:void 0)}}),m.add({name:"dateRange",msg:"\u7ed3\u675f\u65e5\u671f\u4e0d\u80fd\u5c0f\u4e8e\u8d77\u59cb\u65e5\u671f\uff01",validator:s}),m.add({name:"numberRange",msg:"\u7ed3\u675f\u6570\u5b57\u4e0d\u80fd\u5c0f\u4e8e\u5f00\u59cb\u6570\u5b57\uff01",validator:s}),m.add({name:"checkRange",msg:"\u5fc5\u987b\u9009\u4e2d{0}\u9879\uff01",validator:function(e,t,n,i){var r,o=u(i),a=t;return o&&a&&(r=e[o],!l(r,a))?n:null}})}n.exports=m}),define("bui/form/rule",["jquery","bui/common"],function(e,t,n){function i(e,t,n,i,r){s.isArray(n)&&s.isString(n[1])&&(n[1]&&(i=n[1]),n=n[0]);var a=e,u=a.get("validator"),l=o(e,n,i);return t=null==t?"":t,u.call(a,t,n,l,r)}function r(e){if(null==e)return{};if(a.isPlainObject(e))return e;var t=e,n={};if(s.isArray(e)){for(var i=0;i<t.length;i++)n[i]=t[i];return n}return{0:e}}function o(e,t,n){var i=r(t);return n=n||e.get("msg"),s.substitute(n,i)}var a=e("jquery"),s=e("bui/common"),u=function(e){u.superclass.constructor.call(this,e)};s.extend(u,s.Base),u.ATTRS={name:{},msg:{},validator:{value:function(){}}},s.augment(u,{valid:function(e,t,n,r){var o=this;return i(o,e,t,n,r)}}),n.exports=u}),define("bui/form/remote",["jquery","bui/common"],function(e,t,n){var i=e("jquery"),r=e("bui/common"),o=function(){};o.ATTRS={isLoading:{},loadingEl:{}},o.prototype={getLoadingContainer:function(){},_setLoading:function(){var e=this,t=e.get("loadingEl"),n=e.get("loadingTpl");n&&!t&&(t=i(n).appendTo(e.getLoadingContainer()),e.setInternal("loadingEl",t))},_clearLoading:function(){var e=this,t=e.get("loadingEl");t&&(t.remove(),e.setInternal("loadingEl",null))},_uiSetIsLoading:function(e){var t=this;e?t._setLoading():t._clearLoading()}};var a=function(){};a.ATTRS={defaultRemote:{value:{method:"GET",cache:!0,callback:function(e){return e}}},remoteDaly:{value:500},cacheMap:{value:{}},loadingTpl:{view:!0,value:'<img src="http://img02.taobaocdn.com/tps/i2/T1NU8nXCVcXXaHNz_X-16-16.gif" alt="loading"/>'},isLoading:{view:!0,value:!1},remote:{setter:function(e){return r.isString(e)&&(e={url:e}),e}},remoteHandler:{},events:{value:{remotecomplete:!1,remotestart:!1}}},a.prototype={__bindUI:function(){var e=this;e.on("valid",function(){if(e.get("remote")&&e.isValid()&&!e.get("pauseValid")){var t=e.getControlValue(),n=e.getRemoteParams();e._startRemote(n,t)}}),e.on("error",function(){e.get("remote")&&e._cancelRemote()})},_startRemote:function(e,t){function n(){i._remoteValid(e,r,t),i.set("isLoading",!0)}var i=this,r=i.get("remoteHandler"),o=i.get("cacheMap"),a=i.get("remoteDaly");return r&&i._cancelRemote(r),null!=o[t]?void i._validResult(i._getCallback(),o[t]):(r=setTimeout(n,a),void i.setInternal("remoteHandler",r))},_validResult:function(e,t){var n=this,i=e(t);n.onRemoteComplete(i,t)},onRemoteComplete:function(e,t,n){var i=this;n==i.get("remoteHandler")&&(i.fire("remotecomplete",{error:e,data:t}),i.set("isLoading",!1),i.setInternal("remoteHandler",null))},_getOptions:function(e){var t=this,n=t.get("remote"),i=t.get("defaultRemote"),o=r.merge(i,n,{data:e});return o},_getCallback:function(){return this._getOptions().callback},_remoteValid:function(e,t,n){var r=this,o=r.get("cacheMap"),a=r._getOptions(e);a.success=function(e){var i=a.callback,s=i(e);o[n]=e,r.onRemoteComplete(s,e,t)},a.error=function(e,n,i){r.onRemoteComplete(i,null,t)},r.fire("remotestart",{data:e}),i.ajax(a)},getRemoteParams:function(){},clearCache:function(){this.set("cacheMap",{})},_cancelRemote:function(e){var t=this;e=e||t.get("remoteHandler"),e&&(clearTimeout(e),t.setInternal("remoteHandler",null)),t.set("isLoading",!1)}},a.View=o,n.exports=a}),define("bui/form/fields/text",["jquery","bui/common","bui/overlay"],function(e,t,n){var i=e("bui/form/fields/base"),r=i.extend({},{xclass:"form-field-text"});n.exports=r}),define("bui/form/fields/date",["jquery","bui/common","bui/overlay"],function(e,t,n){var i=e("jquery"),r=e("bui/common"),o=e("bui/form/fields/base"),a=r.Date,s=o.extend({renderUI:function(){var e=this,t=e.get("datePicker");i.isPlainObject(t)&&e.initDatePicker(t),(t.get&&t.get("showTime")||t.showTime)&&e.getInnerControl().addClass("calendar-time")},initDatePicker:function(t){var n=this;e.async("bui/calendar",function(e){t.trigger=n.getInnerControl(),t.autoRender=!0,t=new e.DatePicker(t),n.set("datePicker",t),n.set("isCreatePicker",!0),n.get("children").push(t)})},setControlValue:function(e){var t=this,n=t.getInnerControl();r.isDate(e)&&(e=a.format(e,t._getFormatMask())),n.val(e)},_getFormatMask:function(){var e=this,t=e.get("datePicker");return t.showTime||t.get&&t.get("showTime")?"yyyy-mm-dd HH:MM:ss":"yyyy-mm-dd"},parseValue:function(e){return r.isNumber(e)?new Date(e):a.parse(e)},isCurrentValue:function(e){return a.isEquals(e,this.get("value"))},_uiSetMax:function(e){this.addRule("max",e);var t=this,n=t.get("datePicker");n&&(n.set?n.set("maxDate",e):n.maxDate=e)},_uiSetMin:function(e){this.addRule("min",e);var t=this,n=t.get("datePicker");n&&(n.set?n.set("minDate",e):n.minDate=e)}},{ATTRS:{controlTpl:{value:'<input type="text" class="calendar"/>'},defaultRules:{value:{date:!0}},max:{},min:{},value:{setter:function(e){return r.isNumber(e)?new Date(e):e}},datePicker:{shared:!1,value:{}},isCreatePicker:{value:!0}},PARSER:{datePicker:function(e){var t=this,n=t.get("datePicker")||{};return e.hasClass("calendar-time")&&r.mix(n,{showTime:!0}),n}}},{xclass:"form-field-date"});n.exports=s}),define("bui/form/fields/select",["jquery","bui/common","bui/overlay"],function(e,t,n){function i(e,t,n){e.children().remove();var i=n.get("emptyText");i&&n.get("showBlank")&&r("",i,e),a.each(t,function(t){r(t.value,t.text,e)})}function r(e,t,n){var i=new Option(t,e),r=n[0].options;r[r.length]=i}var o=e("jquery"),a=e("bui/common"),s=e("bui/form/fields/base"),u=s.extend({renderUI:function(){var e=this,t=e.getInnerControl(),n=e.get("select");e.get("srcNode")&&t.is("select")||o.isPlainObject(n)&&e._initSelect(n)},_initSelect:function(t){{var n=this;n.get("items")}e.async("bui/select",function(e){t.render=n.getControlContainer(),t.valueField=n.getInnerControl(),t.autoRender=!0,t=new e.Select(t),n.set("select",t),n.set("isCreate",!0),n.get("children").push(t),t.on("change",function(){var e=t.getSelectedValue();n.set("value",e)})})},setItems:function(e){var t=this,n=t.get("select");if(o.isPlainObject(e)){var r=[];a.each(e,function(e,t){r.push({value:t,text:e})}),e=r}var s=t.getInnerControl();s.is("select")&&(i(s,e,t),t.setControlValue(t.get("value")),t.getControlValue()||t.setInternal("value","")),n&&(n.set?n.set("items",e):n.items=e)},setControlValue:function(e){var t=this,n=t.get("select"),i=t.getInnerControl();i.val(e),n&&n.set&&n.getSelectedValue()!==e&&n.setSelectedValue(e)},getSelectedText:function(){var e=this,t=e.get("select"),n=e.getInnerControl();if(n.is("select")){var i=n[0],r=i.options[i.selectedIndex];return r?r.text:""}return t.getSelectedText()},getTipTigger:function(){var e=this,t=e.get("select");return t&&t.rendered?t.get("el").find("input"):e.get("el")},_uiSetItems:function(e){e&&this.setItems(e)},setInnerWidth:function(e){var t=this,n=t.getInnerControl(),i=t.get("select"),r=n.outerWidth()-n.width();n.width(e-r),i&&i.set&&i.set("width",e)}},{ATTRS:{items:{},controlTpl:{value:'<input type="hidden"/>'},showBlank:{value:!0},emptyText:{value:"\u8bf7\u9009\u62e9"},select:{shared:!1,value:{}}},PARSER:{emptyText:function(e){if(!this.get("showBlank"))return"";var t=e.find("option"),n=this.get("emptyText");return t.length&&(n=o(t[0]).text()),n}}},{xclass:"form-field-select"});n.exports=u}),define("bui/form/fields/hidden",["jquery","bui/common","bui/overlay"],function(e,t,n){var i=e("bui/form/fields/base"),r=i.extend({},{ATTRS:{controlTpl:{value:'<input type="hidden"/>'},tpl:{value:""}}},{xclass:"form-field-hidden"});n.exports=r}),define("bui/form/fields/number",["jquery","bui/common","bui/overlay"],function(e,t,n){var i=e("bui/form/fields/base"),r=i.extend({parseValue:function(e){if(""==e||null==e)return null;if(BUI.isNumber(e))return e;var t=this,n=t.get("allowDecimals");return e=e.replace(/\,/g,""),n?parseFloat(parseFloat(e).toFixed(t.get("decimalPrecision"))):parseInt(e,10)},_uiSetMax:function(e){this.addRule("max",e)},_uiSetMin:function(e){this.addRule("min",e)}},{ATTRS:{max:{},min:{},decorateCfgFields:{value:{min:!0,max:!0}},validEvent:{value:"keyup change"},defaultRules:{value:{number:!0}},allowDecimals:{value:!0},decimalPrecision:{value:2},step:{value:1}}},{xclass:"form-field-number"});n.exports=r}),define("bui/form/fields/check",["jquery","bui/common","bui/overlay"],function(e,t,n){var i=(e("jquery"),e("bui/form/fields/base")),r=i.extend({onValid:function(){var e=this,t=e._getControlChecked();e.setInternal("checked",t),e.fire("change"),e.fire(t?"checked":"unchecked")},_setControlChecked:function(e){var t=this,n=t.getInnerControl();n.attr("checked",!!e)},_getControlChecked:function(){var e=this,t=e.getInnerControl();return!!t.attr("checked")},_uiSetValue:function(e){this.setControlValue(e)},_uiSetWidth:function(){},_uiSetChecked:function(e){var t=this;t._setControlChecked(e),t.get("rendered")&&t.onValid()}},{ATTRS:{validEvent:{value:"click"},checked:{value:!1},events:{value:{checked:!1,unchecked:!1}}},PARSER:{checked:function(e){return!!e.attr("checked")}}},{xclass:"form-check-field"});n.exports=r}),define("bui/form/fields/radio",["jquery","bui/common","bui/overlay"],function(e,t,n){var i=e("bui/form/fields/check"),r=i.extend({bindUI:function(){var e=this,t=e.get("parent"),n=e.get("name");t&&e.getInnerControl().on("click",function(){var i=t.getFields(n);BUI.each(i,function(t){t!=e&&t.set("checked",!1)})})}},{ATTRS:{controlTpl:{view:!0,value:'<input type="radio"/>'},controlContainer:{value:".radio"},tpl:{value:'<label><span class="radio"></span>{label}</label>'}}},{xclass:"form-field-radio"});n.exports=r}),define("bui/form/fields/checkbox",["jquery","bui/common","bui/overlay"],function(e,t,n){var i=e("bui/form/fields/check"),r=i.extend({},{ATTRS:{controlTpl:{view:!0,value:'<input type="checkbox"/>'},controlContainer:{value:".checkbox"},tpl:{value:'<label><span class="checkbox"></span>{label}</label>'}}},{xclass:"form-field-checkbox"});n.exports=r}),define("bui/form/fields/plain",["jquery","bui/common","bui/overlay"],function(e,t,n){var i=e("jquery"),r=e("bui/form/fields/base"),o=r.View.extend({_uiSetValue:function(e){var t,n=this,r=n.get("textEl"),o=n.getControlContainer(),a=n.get("renderer"),s=a?a(e):e,u=n.get("width"),l=0;r&&r.remove(),s=s||"&nbsp;",t=BUI.substitute(n.get("textTpl"),{text:s}),r=i(t).appendTo(o),l=r.outerWidth()-r.width(),r.width(u-l),n.set("textEl",r)}},{ATTRS:{textEl:{},value:{}}},{xclass:"form-field-plain-view"}),a=r.extend({},{ATTRS:{controlTpl:{value:'<input type="hidden"/>'},textTpl:{view:!0,value:'<span class="x-form-text">{text}</span>'},renderer:{view:!0,value:function(e){return e}},tpl:{value:""},xview:{value:o}}},{xclass:"form-field-plain"});n.exports=a}),define("bui/form/fields/list",["jquery","bui/common","bui/list","bui/data","bui/overlay"],function(e,t,n){function i(e){var t=e;return r.isPlainObject(e)&&(t=[],o.each(e,function(e,n){t.push({text:e,value:n})})),t}var r=e("jquery"),o=e("bui/common"),a=e("bui/list"),s=e("bui/form/fields/base"),a=s.extend({initializer:function(){var e=this;e._initList()},_getList:function(){var e=this,t=e.get("children");return t[0]},bindUI:function(){var e=this,t=e._getList();t&&t.on("selectedchange",function(){var n=e._getListValue(t);e.set("value",n)})},_getListValue:function(e){var t=this;return e=e||t._getList(),e.getSelectionValues().join(",")},setControlValue:function(e){var t=this,n=t.getInnerControl(),i=t._getList();n.val(e),t._getListValue(i)!==e&&i.getCount()&&(i.get("multipleSelect")&&i.clearSelection(),i.setSelectionByField(e.split(",")))},syncUI:function(){this.set("list",this._getList())},_initList:function(){var e=this,t=e.get("defaultListCfg"),n=e.get("children"),i=e.get("list")||{};n[0]||(r.isPlainObject(i)&&o.mix(i,t),n.push(i))},setItems:function(e){var t=this,n=t.get("value"),r=t._getList();r.set("items",i(e)),r.setSelectionByField(n.split(","))},_uiSetItems:function(e){e&&this.setItems(e)}},{ATTRS:{controlTpl:{value:'<input type="hidden"/>'},defaultListCfg:{value:{xclass:"simple-list"}},items:{setter:function(e){if(r.isPlainObject(e)){var t=[];o.each(e,function(e,n){t.push({value:n,text:e})}),e=t}return e}},list:{}},PARSER:{list:function(e){var t=e.find(".bui-simple-list");return t.length?{srcNode:t}:void 0}}},{xclass:"form-field-list"});n.exports=a}),define("bui/form/fields/textarea",["jquery","bui/common","bui/overlay"],function(e,t,n){var i=e("bui/form/fields/base"),r=i.extend({_uiSetRows:function(e){var t=this,n=t.getInnerControl();e&&n.attr("rows",e)},_uiSetCols:function(e){var t=this,n=t.getInnerControl();e&&n.attr("cols",e)}},{ATTRS:{controlTpl:{value:"<textarea></textarea>"},rows:{},cols:{},decorateCfgFields:{value:{rows:!0,cols:!0}}}},{xclass:"form-field-textarea"});n.exports=r}),define("bui/form/fields/uploader",["bui/common","jquery","bui/overlay"],function(e,t,n){var i=e("bui/common"),r=i.JSON,o=e("bui/form/fields/base"),a=e("bui/form/rules"),s=o.extend({renderUI:function(){var e=this,t=e.getInnerControl();e.get("srcNode")&&"file"===t.get(0).type||(e._initControlValue(),e._initUpload())},_initUpload:function(){var t=this,n=(t.get("children"),t.get("uploader")||{});e.async("bui/uploader",function(e){n.render=t.getControlContainer(),n.autoRender=!0,n=new e.Uploader(n),t.set("uploader",n),t.set("isCreate",!0),t.get("children").push(n),t._initQueue(n.get("queue")),n.on("success",function(){var e=t._getUploaderResult();t.setControlValue(e)}),n.get("queue").on("itemremoved",function(){var e=t._getUploaderResult();t.setControlValue(e)})})},_getUploaderResult:function(){var e=this,t=e.get("uploader"),n=t.get("queue"),r=n.getItems(),o=[];return i.each(r,function(e){e.result&&o.push(e.result)}),o},setControlValue:function(e){var t=this,n=t.getInnerControl();n.val(r.stringify(e))},_initControlValue:function(){var e,t=this,n=t.getControlValue();n&&(e=i.JSON.parse(n),t.set("value",e))},_initQueue:function(e){var t=this,n=t.get("value"),r=[];
i.each(n,function(e){var t=i.cloneObject(e);t.success=!0,t.result=e,r.push(t)}),e&&e.setItems(r)}},{ATTRS:{controlTpl:{value:'<input type="hidden"/>'},uploader:{setter:function(e){var t=this.get("disabled");return e&&e.isController&&e.set("disabled",t),e}},disabled:{setter:function(e){var t=this,n=t.get("uploader");n&&n.isController&&n.set("disabled",e)}},value:{shared:!1,value:[]},defaultRules:function(){}}},{xclass:"form-field-uploader"});a.add({name:"uploader",msg:"\u4e0a\u4f20\u6587\u4ef6\u9009\u62e9\u6709\u8bef\uff01",validator:function(e,t,n,i){var r=i.get("uploader");return r&&!r.isValid()?n:void 0}}),n.exports=s}),define("bui/form/fields/checklist",["bui/common","jquery","bui/list","bui/data","bui/overlay"],function(e,t,n){"use strict";var i=(e("bui/common"),e("bui/form/fields/list")),r=i.extend({},{ATTRS:{defaultListCfg:{value:{itemTpl:'<li><span class="x-checkbox"></span>{text}</li>',multipleSelect:!0,allowTextSelection:!1}}}},{xclass:"form-field-checklist"});n.exports=r}),define("bui/form/fields/radiolist",["bui/common","jquery","bui/list","bui/data","bui/overlay"],function(e,t,n){"use strict";var i=(e("bui/common"),e("bui/form/fields/list")),r=i.extend({},{ATTRS:{defaultListCfg:{value:{itemTpl:'<li><span class="x-radio"></span>{text}</li>',allowTextSelection:!1}}}},{xclass:"form-field-radiolist"});n.exports=r}),define("bui/form/groupvalid",["jquery","bui/common"],function(e,t,n){function i(){}function r(){}var o=e("jquery"),a="x-form-error",s=e("bui/form/valid");BUI.augment(i,s.View,{showError:function(e,t,n){var i=BUI.substitute(t,{error:e}),r=o(i);r.appendTo(n),r.addClass(a)},clearErrors:function(){var e=this,t=e.getErrorsContainer();t.children("."+a).remove()}}),r.ATTRS=ATTRS=BUI.merge(!0,s.ATTRS,{events:{value:{validchange:!0,change:!0}}}),BUI.augment(r,s,{__bindUI:function(){var e=this,t="validchange change";e.on(t,function(t){var n=t.target;if(n!=this&&e.get("showError")){var i=n.isValid();e._hasAllChildrenValid()&&(i=i&&e.isChildrenValid(),i&&(e.validControl(e.getRecord()),i=e.isSelfValid())),i?e.clearErrors():e.showErrors()}})},isValid:function(){if(this.get("disabled"))return!0;var e=this,t=e.isChildrenValid();return t&&e.isSelfValid()},valid:function(){var e=this,t=e.get("children");e.get("disabled")||BUI.each(t,function(e){e.get("disabled")||e.valid()})},_hasAllChildrenValid:function(){var e=this,t=e.get("children"),n=!0;return BUI.each(t,function(e){return e.get("disabled")||e.get("hasValid")!==!1?void 0:(n=!1,!1)}),n},isChildrenValid:function(){var e=this,t=e.get("children"),n=!0;return BUI.each(t,function(e){return e.get("disabled")||e.isValid()?void 0:(n=!1,!1)}),n},isSelfValid:function(){return!this.get("error")},validControl:function(e){var t=this,n=t.getValidError(e);t.set("error",n)},getErrors:function(){var e=this,t=e.get("children"),n=e.get("showChildError"),i=null,r=[];return n&&BUI.each(t,function(e){e.getErrors&&(r=r.concat(e.getErrors()))}),e._hasAllChildrenValid()&&e.isChildrenValid()&&(i=e.get("error"),i&&r.push(i)),r},_uiSetErrorTpl:function(e){var t=this,n=t.get("children");BUI.each(n,function(t){t.get("userConfig").errorTpl||t.set("errorTpl",e)})}}),r.View=i,n.exports=r}),define("bui/form/form",["jquery","bui/common","bui/overlay","bui/list","bui/data"],function(e,t,n){var i=e("jquery"),r=e("bui/common"),o=e("bui/form/fieldcontainer"),a=(r.Component,{NORMAL:"normal",AJAX:"ajax",IFRAME:"iframe"}),s=o.View.extend({_uiSetMethod:function(e){this.get("el").attr("method",e)},_uiSetAction:function(e){this.get("el").attr("action",e)}},{ATTRS:{method:{},action:{}}},{xclass:"form-view"}),u=o.extend({renderUI:function(){var e,t=this,n=t.get("buttonBar");i.isPlainObject(n)&&t.get("buttons")&&(e=r.merge(t.getDefaultButtonBarCfg(),n),t._initButtonBar(e)),t._initSubmitMask()},_initButtonBar:function(t){var n=this;e.async("bui/toolbar",function(e){buttonBar=new e.Bar(t),n.set("buttonBar",buttonBar)})},bindUI:function(){var e=this,t=e.get("el");t.on("submit",function(t){return e.valid(),e.isValid()&&e.onBeforeSubmit()!==!1?void(e.isValid()&&e.get("submitType")===a.AJAX&&(t.preventDefault(),e.ajaxSubmit())):(t.preventDefault(),void e.focusError())})},getDefaultButtonBarCfg:function(){var e=this,t=e.get("buttons");return{autoRender:!0,elCls:"toolbar",render:e.get("el"),items:t,defaultChildClass:"bar-item-button"}},focusError:function(){var e=this,t=e.getFields();r.each(t,function(e){if(e.get("visible")&&!e.get("disabled")&&!e.isValid()){try{e.focus()}catch(t){r.log(t)}return!1}})},submit:function(e){var t=this,n=t.get("submitType");if(t.valid(),t.isValid()){if(0==t.onBeforeSubmit())return;n===a.NORMAL?t.get("el")[0].submit():n===a.AJAX&&t.ajaxSubmit(e)}else t.focusError()},ajaxSubmit:function(e){var t,n=this,o=n.get("method"),a=n.get("action"),s=n.get("callback"),u=n.get("submitMask"),l=n.serializeToObject(),c=r.merge(!0,{url:a,type:o,dataType:"json",data:l},e);e&&e.success&&(t=e.success),c.success=function(e){u&&u.hide&&u.hide(),t&&t(e),s&&s.call(n,e)},u&&u.show&&u.show(),i.ajax(c)},_initSubmitMask:function(){var t=this,n=t.get("submitType"),o=t.get("submitMask");n===a.AJAX&&o&&e.async("bui/mask",function(e){var n=i.isPlainObject(o)?o:{};o=new e.LoadMask(r.mix({el:t.get("el")},n)),t.set("submitMask",o)})},serializeToObject:function(){return r.FormHelper.serializeToObject(this.get("el")[0])},toObject:function(){return this.serializeToObject()},onBeforeSubmit:function(){return this.fire("beforesubmit")},reset:function(){var e=this,t=e.get("initRecord");e.setRecord(t)},resetTips:function(){var e=this,t=e.getFields();r.each(t,function(e){e.resetTip()})},destructor:function(){var e=this,t=e.get("buttonBar"),n=e.get("submitMask");t&&t.destroy&&t.destroy(),n&&n.destroy&&n.destroy()},_uiSetInitRecord:function(e){this.setRecord(e)}},{ATTRS:{action:{view:!0,value:""},allowTextSelection:{value:!0},events:{value:{beforesubmit:!1}},method:{view:!0,value:"get"},defaultLoaderCfg:{value:{autoLoad:!0,property:"record",dataType:"json"}},submitMask:{value:{msg:"\u6b63\u5728\u63d0\u4ea4\u3002\u3002\u3002"}},submitType:{value:"normal"},focusError:{value:!0},callback:{},decorateCfgFields:{value:{method:!0,action:!0}},defaultChildClass:{value:"form-field"},elTagName:{value:"form"},buttons:{},buttonBar:{shared:!1,value:{}},childContainer:{value:".x-form-fields"},initRecord:{},showError:{value:!1},xview:{value:s},tpl:{value:'<div class="x-form-fields"></div>'}}},{xclass:"form"});u.View=s,n.exports=u}),define("bui/form/row",["bui/common","jquery","bui/overlay","bui/list","bui/data"],function(e,t,n){var i=(e("bui/common"),e("bui/form/fieldcontainer")),r=i.extend({},{ATTRS:{elCls:{value:"row"},defaultChildCfg:{value:{tpl:' <label class="control-label">{label}</label>              <div class="controls">              </div>',childContainer:".controls",showOneError:!0,controlContainer:".controls",elCls:"control-group span8",errorTpl:'<span class="valid-text"><span class="estate error"><span class="x-icon x-icon-mini x-icon-error">!</span><em>{error}</em></span></span>'}},defaultChildClass:{value:"form-field-text"}}},{xclass:"form-row"});n.exports=r}),define("bui/form/fieldgroup",["bui/common","jquery","bui/overlay","bui/list","bui/data"],function(e){var t=e("bui/common"),n=e("bui/form/group/base");return t.mix(n,{Range:e("bui/form/group/range"),Check:e("bui/form/group/check"),Select:e("bui/form/group/select")}),n}),define("bui/form/group/base",["bui/common","jquery","bui/overlay","bui/list","bui/data"],function(e,t,n){var i=(e("bui/common"),e("bui/form/fieldcontainer")),r=i.extend({},{ATTRS:{label:{view:!0},defaultChildClass:{value:"form-field"}}},{xclass:"form-group"});n.exports=r}),define("bui/form/group/range",["bui/common","jquery","bui/overlay","bui/list","bui/data"],function(e,t,n){function i(e,t,n){var i=e.get("allowEqual");return i?t>=n:t>n}var r=e("bui/form/group/base"),o=r.extend({},{ATTRS:{rangeText:{value:"\u5f00\u59cb\u4e0d\u80fd\u5927\u4e8e\u7ed3\u675f\uff01"},allowEqual:{value:!0},validator:{value:function(){for(var e=this,t=e.getFields(),n=!0,r=1;r<t.length;r++){var o,a,s=t[r],u=t[r-1];if(s&&u&&(o=s.get("value"),a=u.get("value"),!i(e,o,a))){n=!1;break}}return n?null:e.get("rangeText")}}}},{xclass:"form-group-range"});n.exports=o}),define("bui/form/group/check",["bui/common","jquery","bui/overlay","bui/list","bui/data"],function(e,t,n){function i(e){var t=e.getFieldAt(0);return t?t.get("name"):""}var r=e("bui/form/group/base"),o=r.extend({bindUI:function(){var e=this;e.on("change",function(){var t=i(e),n=e.get("range"),r=e.getRecord(),o=r[t],a=n[1];o&&o.length>=a?e._setFieldsEnable(t,!1):e._setFieldsEnable(t,!0)})},_setFieldsEnable:function(e,t){var n=this,i=n.getFields(e);BUI.each(i,function(e){t?e.enable():e.get("checked")||e.disable()})},_uiSetRange:function(e){this.addRule("checkRange",e)}},{ATTRS:{range:{setter:function(e){return(BUI.isString(e)||BUI.isNumber(e))&&(e=[parseInt(e,10)]),e}}}},{xclass:"form-group-check"});n.exports=o}),define("bui/form/group/select",["bui/common","jquery","bui/overlay","bui/list","bui/data"],function(e,t,n){function i(e){var t=[];return BUI.each(e,function(e){t.push({text:e.text,value:e.id})}),t}var r=e("bui/form/group/base"),o=e("bui/data"),a=BUI.Component.UIBase.Bindable,s=r.extend([a],{initializer:function(){var e=this,t=e.get("url"),n=e.get("store")||e._getStore();n.isStore||(n.autoLoad=!0,t&&(n.url=t),n=new o.TreeStore(n)),e.set("store",n)},bindUI:function(){var e=this;e.on("change",function(t){var n=t.target;if(n!=e){var i=n,r=i.get("value"),o=e._getFieldIndex(i)+1;e._valueChange(r,o)}})},onLoad:function(e){var t=this,n=e?e.node:t.get("store").get("root");t._setFieldItems(n.level,n.children)},_getStore:function(){var e=this,t=e.get("type");return t&&u[t]?u[t]:{}},_valueChange:function(e,t){var n=this,i=n.get("store");if(e){var r=i.findNode(e);if(!r)return;i.isLoaded(r)?n._setFieldItems(t,r.children):i.loadNode(r)}else n._setFieldItems(t,[])},_setFieldItems:function(e,t){var n=this,r=n.getFieldAt(e),o=i(t);r&&(r.setItems(o),n._valueChange(r.get("value"),e+1))},_getFieldIndex:function(e){var t=this,n=t.getFields();return BUI.Array.indexOf(e,n)}},{ATTRS:{type:{},store:{}}},{xclass:"form-group-select"}),u={};s.addType=function(e,t){u[e]=t},s.addType("city",{proxy:{url:"http://lp.taobao.com/go/rgn/citydistrictdata.php",dataType:"jsonp"},map:{isleaf:"leaf",value:"text"}}),n.exports=s}),define("bui/form/hform",["jquery","bui/common","bui/overlay","bui/list","bui/data"],function(e,t,n){var i=(e("jquery"),e("bui/common"),e("bui/form/form")),r=i.extend({getDefaultButtonBarCfg:function(){var e=this,t=e.get("buttons");return{autoRender:!0,elCls:"actions-bar toolbar row",tpl:'<div class="form-actions span21 offset3"></div>',childContainer:".form-actions",render:e.get("el"),items:t,defaultChildClass:"bar-item-button"}}},{ATTRS:{defaultChildClass:{value:"form-row"},errorTpl:{value:'<span class="valid-text"><span class="estate error"><span class="x-icon x-icon-mini x-icon-error">!</span><em>{error}</em></span></span>'},elCls:{value:"form-horizontal"}},PARSER:{}},{xclass:"form-horizontal"});n.exports=r});