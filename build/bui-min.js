!function(e,t){function n(e){return function(t){return Object.prototype.toString.call(t)==="[object "+e+"]"}}function i(){return S++}function r(e){return e.match(R)[0]}function a(e){for(e=e.replace(V,"/");e.match(F);)e=e.replace(F,"/");return e}function o(e){var t=e.length-1,n=e.charAt(t);return"#"===n?e.substring(0,t):".js"===e.substring(t-2)||e.indexOf("?")>0||".css"===e.substring(t-3)||"/"===n?e:e+".js"}function l(e){var t=y.alias;return t&&I(t[e])?t[e]:e}function s(e){var t,n=y.paths;return n&&(t=e.match(D))&&I(n[t[1]])&&(e=n[t[1]]+t[2]),e}function u(e){var t=y.vars;return t&&e.indexOf("{")>-1&&(e=e.replace(M,function(e,n){return I(t[n])?t[n]:e})),e}function c(e){var t=y.map,n=e;if(t)for(var i=0,r=t.length;r>i;i++){var a=t[i];if(n=w(a)?a(e)||e:e.replace(a[0],a[1]),n!==e)break}return n}function d(e,t){var n,i=e.charAt(0);if(N.test(e))n=e;else if("."===i)n=a((t?r(t):y.cwd)+e);else if("/"===i){var o=y.cwd.match(P);n=o?o[0]+e.substring(1):e}else n=y.base+e;return n}function f(e,t){if(!e)return"";e=l(e),e=s(e),e=u(e),e=o(e);var n=d(e,t);return n=c(n)}function g(e){return e.hasAttribute?e.src:e.getAttribute("src",4)}function h(e,t,n){var i=X.test(e),r=$.createElement(i?"link":"script");if(n){var a=w(n)?n(e):n;a&&(r.charset=a)}v(r,t,i),i?(r.rel="stylesheet",r.href=e):(r.async=!0,r.src=e),k=r,Y?z.insertBefore(r,Y):z.appendChild(r),k=null}function v(e,t,n){var i=n&&(G||!("onload"in e));return i?void setTimeout(function(){m(e,t)},1):void(e.onload=e.onerror=e.onreadystatechange=function(){q.test(e.readyState)&&(e.onload=e.onerror=e.onreadystatechange=null,n||y.debug||z.removeChild(e),e=null,t())})}function m(e,t){var n,i=e.sheet;if(G)i&&(n=!0);else if(i)try{i.cssRules&&(n=!0)}catch(r){"NS_ERROR_DOM_SECURITY_ERR"===r.name&&(n=!0)}setTimeout(function(){n?t():m(e,t)},20)}function p(){if(k)return k;if(B&&"interactive"===B.readyState)return B;for(var e=z.getElementsByTagName("script"),t=e.length-1;t>=0;t--){var n=e[t];if("interactive"===n.readyState)return B=n}}function b(e){var t=[];return e.replace(J,"").replace(K,function(e,n,i){i&&t.push(i)}),t}function C(e,t){this.uri=e,this.dependencies=t||[],this.exports=null,this.status=0,this._waitings={},this._remain=0}if(!e.seajs){var x=e.seajs={version:"2.1.1"},y=x.data={},_=n("Object"),I=n("String"),T=Array.isArray||n("Array"),w=n("Function"),S=0,E=y.events={};x.on=function(e,t){var n=E[e]||(E[e]=[]);return n.push(t),x},x.off=function(e,t){if(!e&&!t)return E=y.events={},x;var n=E[e];if(n)if(t)for(var i=n.length-1;i>=0;i--)n[i]===t&&n.splice(i,1);else delete E[e];return x};var k,B,A,U=x.emit=function(e,t){var n,i=E[e];if(i)for(i=i.slice();n=i.shift();)n(t);return x},R=/[^?#]*\//,V=/\/\.\//g,F=/\/[^/]+\/\.\.\//,D=/^([^/:]+)(\/.+)$/,M=/{([^{]+)}/g,N=/^\/\/.|:\//,P=/^.*?\/\/.*?\//,$=document,L=location,O=r(L.href),j=$.getElementsByTagName("script"),H=$.getElementById("seajsnode")||j[j.length-1],W=r(g(H)||O),z=$.getElementsByTagName("head")[0]||$.documentElement,Y=z.getElementsByTagName("base")[0],X=/\.css(?:\?|$)/i,q=/^(?:loaded|complete|undefined)$/,G=1*navigator.userAgent.replace(/.*AppleWebKit\/(\d+)\..*/,"$1")<536,K=/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|\/\*[\S\s]*?\*\/|\/(?:\\\/|[^\/\r\n])+\/(?=[^\/])|\/\/.*|\.\s*require|(?:^|[^$])\brequire\s*\(\s*(["'])(.+?)\1\s*\)/g,J=/\\\\/g,Z=x.cache={},Q={},et={},tt={},nt=C.STATUS={FETCHING:1,SAVED:2,LOADING:3,LOADED:4,EXECUTING:5,EXECUTED:6};C.prototype.resolve=function(){for(var e=this,t=e.dependencies,n=[],i=0,r=t.length;r>i;i++)n[i]=C.resolve(t[i],e.uri);return n},C.prototype.load=function(){var e=this;if(!(e.status>=nt.LOADING)){e.status=nt.LOADING;var t=e.resolve();U("load",t);for(var n,i=e._remain=t.length,r=0;i>r;r++)n=C.get(t[r]),n.status<nt.LOADED?n._waitings[e.uri]=(n._waitings[e.uri]||0)+1:e._remain--;if(0===e._remain)return void e.onload();var a={};for(r=0;i>r;r++)n=Z[t[r]],n.status<nt.FETCHING?n.fetch(a):n.status===nt.SAVED&&n.load();for(var o in a)a.hasOwnProperty(o)&&a[o]()}},C.prototype.onload=function(){var e=this;e.status=nt.LOADED,e.callback&&e.callback();var t,n,i=e._waitings;for(t in i)i.hasOwnProperty(t)&&(n=Z[t],n._remain-=i[t],0===n._remain&&n.onload());delete e._waitings,delete e._remain},C.prototype.fetch=function(e){function t(){h(a.requestUri,a.onRequest,a.charset)}function n(){delete Q[o],et[o]=!0,A&&(C.save(r,A),A=null);var e,t=tt[o];for(delete tt[o];e=t.shift();)e.load()}var i=this,r=i.uri;i.status=nt.FETCHING;var a={uri:r};U("fetch",a);var o=a.requestUri||r;return!o||et[o]?void i.load():Q[o]?void tt[o].push(i):(Q[o]=!0,tt[o]=[i],U("request",a={uri:r,requestUri:o,onRequest:n,charset:y.charset}),void(a.requested||(e?e[a.requestUri]=t:t())))},C.prototype.exec=function(){function require(e){return C.get(require.resolve(e)).exec()}var e=this;if(e.status>=nt.EXECUTING)return e.exports;e.status=nt.EXECUTING;var n=e.uri;require.resolve=function(e){return C.resolve(e,n)},require.async=function(e,t){return C.use(e,t,n+"_async_"+i()),require};var r=e.factory,a=w(r)?r(require,e.exports={},e):r;return a===t&&(a=e.exports),null!==a||X.test(n)||U("error",e),delete e.factory,e.exports=a,e.status=nt.EXECUTED,U("exec",e),a},C.resolve=function(e,t){var n={id:e,refUri:t};return U("resolve",n),n.uri||f(n.id,t)},C.define=function(e,n,i){var r=arguments.length;1===r?(i=e,e=t):2===r&&(i=n,T(e)?(n=e,e=t):n=t),!T(n)&&w(i)&&(n=b(i.toString()));var a={id:e,uri:C.resolve(e),deps:n,factory:i};if(!a.uri&&$.attachEvent){var o=p();o&&(a.uri=o.src)}U("define",a),a.uri?C.save(a.uri,a):A=a},C.save=function(e,t){var n=C.get(e);n.status<nt.SAVED&&(n.id=t.id||e,n.dependencies=t.deps||[],n.factory=t.factory,n.status=nt.SAVED)},C.get=function(e,t){return Z[e]||(Z[e]=new C(e,t))},C.use=function(t,n,i){var r=C.get(i,T(t)?t:[t]);r.callback=function(){for(var t=[],i=r.resolve(),a=0,o=i.length;o>a;a++)t[a]=Z[i[a]].exec();n&&n.apply(e,t),delete r.callback},r.load()},C.preload=function(e){var t=y.preload,n=t.length;n?C.use(t,function(){t.splice(0,n),C.preload(e)},y.cwd+"_preload_"+i()):e()},x.use=function(e,t){return C.preload(function(){C.use(e,t,y.cwd+"_use_"+i())}),x},C.define.cmd={},e.define=C.define,x.Module=C,y.fetchedList=et,y.cid=i,x.resolve=f,x.require=function(e){return(Z[C.resolve(e)]||{}).exports};var it=/^(.+?\/)(\?\?)?(seajs\/)+/;y.base=(W.match(it)||["",W])[1],y.dir=W,y.cwd=O,y.charset="utf-8",y.preload=function(){var e=[],t=L.search.replace(/(seajs-\w+)(&|$)/g,"$1=1$2");return t+=" "+$.cookie,t.replace(/(seajs-\w+)=1/g,function(t,n){e.push(n)}),e}(),x.config=function(e){for(var t in e){var n=e[t],i=y[t];if(i&&_(i))for(var r in n)i[r]=n[r];else T(i)?n=i.concat(n):"base"===t&&("/"===n.slice(-1)||(n+="/"),n=d(n)),y[t]=n}return U("config",e),x}}}(this),function(){var e=seajs.pluginSDK?seajs.pluginSDK.util.loaderDir:seajs.data.base,t=e.lastIndexOf("/");t==e.length-1&&(e=e.substr(0,t)),seajs.config({charset:"utf-8"}),seajs.config({paths:{bui:e}});var n=window.BUI=window.BUI||{},i=document.getElementsByTagName("script"),r=i[i.length-1];n.loaderScript=r,n.debug="true"==r.getAttribute("data-debug")?!0:!1,n.use=seajs.use,n.config=function(e){e.alias&&(e.paths=e.alias,delete e.alias),seajs.config(e)},n.setDebug=function(e){if(n.debug=e,e){var t=seajs.data.map,i=-1;if(t){for(var r=0;r<t.length;r++){var a=t[r];if(a[0].toString()==/.js$/.toString()&&"-min.js"==a[1]){i=r;break}}-1!=i&&t.splice(i,1)}}else seajs.config({map:[[/.js$/,"-min.js"]]})},n.setDebug(n.debug)}(),function(){var e=["bui/util","bui/ua","bui/json","bui/date","bui/array","bui/keycode","bui/observable","bui/base","bui/component"];!window.KISSY||window.KISSY.Node&&window.jQuery||e.unshift("bui/adapter"),define("bui/common",e,function(require){!window.KISSY||window.KISSY.Node&&window.jQuery||require("bui/adapter");var e=require("bui/util");return e.mix(e,{UA:require("bui/ua"),JSON:require("bui/json"),Date:require("bui/date"),Array:require("bui/array"),KeyCode:require("bui/keycode"),Observable:require("bui/observable"),Base:require("bui/base"),Component:require("bui/component")}),e})}(),window.BUI=window.BUI||{},!BUI.use&&window.seajs&&(BUI.use=seajs.use,BUI.config=seajs.config),define("bui/util",function(){function e(e,n){for(var i in n)n.hasOwnProperty(i)&&(e[i]=e[i]||{},t(e[i],n[i]))}function t(e,t){for(var n in t)t.hasOwnProperty(n)&&("value"==n?BUI.isObject(t[n])?(e[n]=e[n]||{},BUI.mix(e[n],t[n])):BUI.isArray(t[n])?(e[n]=e[n]||[],e[n]=e[n].concat(t[n])):e[n]=t[n]:e[n]=t[n])}!function(e){e.fn&&(e.fn.on=e.fn.on||e.fn.bind,e.fn.off=e.fn.off||e.fn.unbind)}(jQuery);var n=window,i=document,r=Object.prototype,a=r.toString,o="body",l="documentElement",s="scroll",u=s+"Width",c=s+"Height",d="ATTRS",f="PARSER",g="guid";$.extend(BUI,{version:1,subVersion:89,isFunction:function(e){return"function"==typeof e},isArray:"isArray"in Array?Array.isArray:function(e){return"[object Array]"===a.call(e)},isDate:function(e){return"[object Date]"===a.call(e)},isObject:"[object Object]"===a.call(null)?function(e){return null!==e&&void 0!==e&&"[object Object]"===a.call(e)&&void 0===e.ownerDocument}:function(e){return"[object Object]"===a.call(e)},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},augment:function(e){if(!BUI.isFunction(e))return e;for(var t=1;t<arguments.length;t++)BUI.mix(e.prototype,arguments[t].prototype||arguments[t]);return e},cloneObject:function(e){var t=BUI.isArray(e)?[]:{};return BUI.mix(!0,t,e)},error:function(e){if(BUI.debug)throw e},extend:function(e,t,n,i){BUI.isFunction(t)||(n=t,t=e,e=function(){});var r=Object.create?function(e,t){return Object.create(e,{constructor:{value:t}})}:function(e,t){function n(){}n.prototype=e;var i=new n;return i.constructor=t,i},a=r(t.prototype,e);return e.prototype=BUI.mix(a,e.prototype),e.superclass=r(t.prototype,t),BUI.mix(a,n),BUI.mix(e,i),e},guid:function(){var e={};return function(t){return t=t||BUI.prefix+g,e[t]?e[t]+=1:e[t]=1,t+e[t]}}(),isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isBoolean:function(e){return"boolean"==typeof e},log:function(e){BUI.debug&&n.console&&n.console.log&&n.console.log(e)},merge:function(){var e=$.makeArray(arguments),t=e[0];return BUI.isBoolean(t)?(e.shift(),e.unshift({}),e.unshift(t)):e.unshift({}),BUI.mix.apply(null,e)},mix:function(){return $.extend.apply(null,arguments)},app:function(e){return window[e]||(window[e]={namespace:function(t){return BUI.namespace(t,window[e])}}),window[e]},mixAttrs:e,mixAttr:t,mixin:function(t,n,i){i=i||[d,f];var r=n;if(r){t.mixins=r;var a={},o=r.concat(t);BUI.each(o,function(t){t&&BUI.each(i,function(n){t[n]&&(a[n]=a[n]||{},"ATTRS"==n?e(a[n],t[n]):BUI.mix(a[n],t[n]))})}),BUI.each(a,function(e,n){t[n]=e});var l={};BUI.each(o,function(e){if(e){var t=e.prototype;for(var n in t)t.hasOwnProperty(n)&&(l[n]=t[n])}}),BUI.each(l,function(e,n){t.prototype[n]=e})}return t},namespace:function(e,t){if(t=t||BUI,!e)return t;for(var n=e.split("."),i=t,r=0;r<n.length;r++){var a=n[r];i[a]||(i[a]={}),i=i[a]}return i},prefix:"bui-",substitute:function(e,t,n){return BUI.isString(e)&&(BUI.isObject(t)||BUI.isArray(t))?e.replace(n||/\\?\{([^{}]+)\}/g,function(e,n){return"\\"===e.charAt(0)?e.slice(1):void 0===t[n]?"":t[n]}):e},ucfirst:function(e){return e+="",e.charAt(0).toUpperCase()+e.substring(1)},isInView:function(e){var t=e.left,n=e.top,i=BUI.viewportWidth(),r=BUI.viewportHeight(),a=BUI.scrollTop(),o=BUI.scrollLeft();return o>t||t>o+i?!1:a>n||n>a+r?!1:!0},isInVerticalView:function(e){var t=BUI.viewportHeight(),n=BUI.scrollTop();return n>e||e>n+t?!1:!0},isInHorizontalView:function(e){var t=BUI.viewportWidth(),n=BUI.scrollLeft();return n>e||e>n+t?!1:!0},viewportWidth:function(){return $(window).width()},viewportHeight:function(){return $(window).height()},scrollLeft:function(){return $(window).scrollLeft()},scrollTop:function(){return $(window).scrollTop()},docWidth:function(){return Math.max(this.viewportWidth(),i[l][u],i[o][u])},docHeight:function(){return Math.max(this.viewportHeight(),i[l][c],i[o][c])},each:function(e,t){e&&$.each(e,function(e,n){return t(n,e)})},wrapBehavior:function(e,t){return e["__bui_wrap_"+t]=function(n){e.get("disabled")||e[t](n)}},getWrapBehavior:function(e,t){return e["__bui_wrap_"+t]},getControl:function(e){return BUI.Component.Manager.getComponent(e)}});var h=BUI.FormHelper={serializeToObject:function(e){var t=$(e).serializeArray(),n={};return BUI.each(t,function(e){var t=e.name;n[t]?(BUI.isArray(n[t])||(n[t]=[n[t]]),n[t].push(e.value)):n[t]=e.value}),n},setFields:function(e,t){for(var n in t)t.hasOwnProperty(n)&&BUI.FormHelper.setField(e,n,t[n])},clear:function(e){var t=$.makeArray(e.elements);BUI.each(t,function(e){"checkbox"===e.type||"radio"===e.type?$(e).attr("checked",!1):$(e).val(""),$(e).change()})},setField:function(e,t,n){var i=e.elements[t];i&&i.type?h._setFieldValue(i,n):(BUI.isArray(i)||i&&i.length)&&BUI.each(i,function(e){h._setFieldValue(e,n)})},_setFieldValue:function(e,t){"checkbox"===e.type?e.value==""+t||BUI.isArray(t)&&-1!==BUI.Array.indexOf(e.value,t)?$(e).attr("checked",!0):$(e).attr("checked",!1):"radio"===e.type?e.value==""+t?$(e).attr("checked",!0):$(e).attr("checked",!1):$(e).val(t)},getField:function(e,t){return BUI.FormHelper.serializeToObject(e)[t]}};return BUI}),define("bui/array",["bui/util"],function(e){var t=e("bui/util");return t.Array={peek:function(e){return e[e.length-1]},indexOf:function(e,t,n){for(var i=null==n?0:0>n?Math.max(0,t.length+n):n,r=i;r<t.length;r++)if(r in t&&t[r]===e)return r;return-1},contains:function(e,n){return t.Array.indexOf(e,n)>=0},each:t.each,equals:function(e,t){if(e==t)return!0;if(!e||!t)return!1;if(e.length!=t.length)return!1;for(var n=!0,i=0;i<e.length;i++)if(e[i]!==t[i]){n=!1;break}return n},filter:function(e,n){var i=[];return t.Array.each(e,function(e,t){n(e,t)&&i.push(e)}),i},map:function(e,n){var i=[];return t.Array.each(e,function(e,t){i.push(n(e,t))}),i},find:function(e,n){var i=t.Array.findIndex(e,n);return 0>i?null:e[i]},findIndex:function(e,n){var i=-1;return t.Array.each(e,function(e,t){return n(e,t)?(i=t,!1):void 0}),i},isEmpty:function(e){return 0==e.length},add:function(e,t){e.push(t)},addAt:function(e,n,i){t.Array.splice(e,i,0,n)},empty:function(e){if(!(e instanceof Array))for(var t=e.length-1;t>=0;t--)delete e[t];e.length=0},remove:function(e,n){var i,r=t.Array.indexOf(n,e);return(i=r>=0)&&t.Array.removeAt(e,r),i},removeAt:function(e,n){return 1==t.Array.splice(e,n,1).length},slice:function(e,t,n){return arguments.length<=2?Array.prototype.slice.call(e,t):Array.prototype.slice.call(e,t,n)},splice:function(e){return Array.prototype.splice.apply(e,t.Array.slice(arguments,1))}},t.Array}),define("bui/observable",["bui/util"],function(e){function t(){return new i}var n=e("bui/util"),i=function(){this._init()};n.augment(i,{_functions:null,_init:function(){var e=this;e._functions=[]},add:function(e){this._functions.push(e)},remove:function(e){var t=this._functions;index=n.Array.indexOf(e,t),index>=0&&t.splice(index,1)},empty:function(){var e=this._functions.length;this._functions.splice(0,e)},pause:function(){this._paused=!0},resume:function(){this._paused=!1},fireWith:function(e,t){var i,r=this;if(!this._paused)return n.each(r._functions,function(n){return i=n.apply(e,t),i===!1?!1:void 0}),i}});var r=function(e){this._events=[],this._eventMap={},this._bubblesEvents=[],this._initEvents(e)};return n.augment(r,{_events:[],_eventMap:{},_bubblesEvents:[],_bubbleTarget:null,_getCallbacks:function(e){var t=this,n=t._eventMap;return n[e]},_initEvents:function(e){var t=this,n=null;if(e&&(n=e.listeners||{},e.handler&&(n.click=e.handler),n))for(var i in n)n.hasOwnProperty(i)&&t.on(i,n[i])},_isBubbles:function(e){return n.Array.indexOf(e,this._bubblesEvents)>=0},addTarget:function(e){this._bubbleTarget=e},addEvents:function(e){function i(e){-1===n.Array.indexOf(e,a)&&(o[e]=t(),a.push(e))}var r=this,a=r._events,o=r._eventMap;n.isArray(e)?$.each(e,function(e,t){i(t)}):i(e)},clearListeners:function(){var e=this,t=e._eventMap;for(var n in t)t.hasOwnProperty(n)&&t[n].empty()},fire:function(e,t){var n,i=this,r=i._getCallbacks(e),a=$.makeArray(arguments);if(t||(t={},a.push(t)),t.target||(t.target=i),r&&(n=r.fireWith(i,Array.prototype.slice.call(a,1))),i._isBubbles(e)){var o=i._bubbleTarget;o&&o.fire&&o.fire(e,t)}return n},pauseEvent:function(e){var t=this,n=t._getCallbacks(e);n&&n.pause()},resumeEvent:function(e){var t=this,n=t._getCallbacks(e);n&&n.resume()},on:function(e,t){var i=e.split(" "),r=this,a=null;return i.length>1?n.each(i,function(e){r.on(e,t)}):(a=r._getCallbacks(e),a?a.add(t):(r.addEvents(e),r.on(e,t))),r},off:function(e,t){if(!e&&!t)return this.clearListeners(),this;var n=this,i=n._getCallbacks(e);return i&&i.remove(t),n},publish:function(e,t){var i=this,r=i._bubblesEvents;if(t.bubbles)-1===n.Array.indexOf(e,r)&&r.push(e);else{var a=n.Array.indexOf(e,r);-1!==a&&r.splice(a,1)}}}),r}),define("bui/ua",function(){function e(e){var t=0;return parseFloat(e.replace(/\./g,function(){return 0===t++?".":""}))}function t(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[],n={browser:t[1]||"",version:t[2]||"0"},i={};return n.browser&&(i[n.browser]=!0,i.version=n.version),i.chrome?i.webkit=!0:i.webkit&&(i.safari=!0),i}var n=$.UA||function(){var n=$.browser||t(navigator.userAgent),i=e(n.version),r={ie:n.msie&&i,webkit:n.webkit&&i,opera:n.opera&&i,mozilla:n.mozilla&&i};return r}();return n}),define("bui/json",["bui/ua"],function(require){function e(e){return 10>e?"0"+e:e}function t(e){return c.lastIndex=0,c.test(e)?'"'+e.replace(c,function(e){var t=d[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function n(e,i){var r,a,o,c,d,f=l,g=i[e];switch(g&&"object"==typeof g&&"function"==typeof g.toJSON&&(g=g.toJSON(e)),"function"==typeof u&&(g=u.call(i,e,g)),typeof g){case"string":return t(g);case"number":return isFinite(g)?String(g):"null";case"boolean":case"null":return String(g);case"object":if(!g)return"null";if(l+=s,d=[],"[object Array]"===Object.prototype.toString.apply(g)){for(c=g.length,r=0;c>r;r+=1)d[r]=n(r,g)||"null";return o=0===d.length?"[]":l?"[\n"+l+d.join(",\n"+l)+"\n"+f+"]":"["+d.join(",")+"]",l=f,o}if(u&&"object"==typeof u)for(c=u.length,r=0;c>r;r+=1)a=u[r],"string"==typeof a&&(o=n(a,g),o&&d.push(t(a)+(l?": ":":")+o));else for(a in g)Object.hasOwnProperty.call(g,a)&&(o=n(a,g),o&&d.push(t(a)+(l?": ":":")+o));return o=0===d.length?"{}":l?"{\n"+l+d.join(",\n"+l)+"\n"+f+"}":"{"+d.join(",")+"}",l=f,o}}function i(e){try{return new Function("return "+e+";")()}catch(t){throw"Json parse error!"}}var r=window,a=require("bui/ua"),o=r.JSON;(!o||a.ie<9)&&(o=r.JSON={}),"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var l,s,u,c=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,d={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};"function"!=typeof o.stringify&&(o.stringify=function(e,t,i){var r;if(l="",s="","number"==typeof i)for(r=0;i>r;r+=1)s+=" ";else"string"==typeof i&&(s=i);if(u=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return n("",{"":e})});var o={parse:$.parseJSON,looseParse:i,stringify:o.stringify};return o}),define("bui/keycode",function(){var e={BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,RETURN:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123};return e}),define("bui/date",function(){function e(t,n){if(t instanceof Date)return t;if("undefined"==typeof n||null==n||""==n){for(var i=new Array("y-m-d","yyyy-mm-dd","yyyy-mm-dd HH:MM:ss","H:M:s"),r=0;r<i.length;r++){var a=e(t,i[r]);if(null!=a)return a}return null}t+="";var o,l,s=0,u=0,c="",d="",f=new Date,g=f.getYear(),h=f.getMonth()+1,v=1,m=0,p=0,b=0;for(this.isInteger=function(e){return/^\d*$/.test(e)},this.getInt=function(e,t,n,i){for(var r=i;r>=n;r--){var a=e.substring(t,t+r);if(a.length<n)return null;if(this.isInteger(a))return a}return null};u<n.length;){for(c=n.charAt(u),d="";n.charAt(u)==c&&u<n.length;)d+=n.charAt(u++);if("yyyy"==d||"yy"==d||"y"==d){if("yyyy"==d&&(o=4,l=4),"yy"==d&&(o=2,l=2),"y"==d&&(o=2,l=4),g=this.getInt(t,s,o,l),null==g)return null;s+=g.length,2==g.length&&(g=g>70?1900+(g-0):2e3+(g-0))}else if("mm"==d||"m"==d){if(h=this.getInt(t,s,d.length,2),null==h||1>h||h>12)return null;s+=h.length}else if("dd"==d||"d"==d){if(v=this.getInt(t,s,d.length,2),null==v||1>v||v>31)return null;s+=v.length}else if("hh"==d||"h"==d){if(m=this.getInt(t,s,d.length,2),null==m||1>m||m>12)return null;s+=m.length}else if("HH"==d||"H"==d){if(m=this.getInt(t,s,d.length,2),null==m||0>m||m>23)return null;s+=m.length}else if("MM"==d||"M"==d){if(p=this.getInt(t,s,d.length,2),null==p||0>p||p>59)return null;s+=p.length}else if("ss"==d||"s"==d){if(b=this.getInt(t,s,d.length,2),null==b||0>b||b>59)return null;s+=b.length}else{if(t.substring(s,s+d.length)!=d)return null;s+=d.length}}if(s!=t.length)return null;if(2==h)if(g%4==0&&g%100!=0||g%400==0){if(v>29)return null}else if(v>28)return null;return(4==h||6==h||9==h||11==h)&&v>30?null:new Date(g,h-1,v,m,p,b)}function t(e,t,n){var i=new Date(n);switch(isNaN(i)&&(i=new Date),t=parseInt(t,10),e){case"s":i=new Date(i.getTime()+1e3*t);break;case"n":i=new Date(i.getTime()+6e4*t);break;case"h":i=new Date(i.getTime()+36e5*t);break;case"d":i=new Date(i.getTime()+864e5*t);break;case"w":i=new Date(i.getTime()+6048e5*t);break;case"m":i=new Date(i.getFullYear(),i.getMonth()+t,i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds());break;case"y":i=new Date(i.getFullYear()+t,i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds())}return i}var n=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]?)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/,i=function(){var e=/w{1}|d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,t=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,n=/[^-+\dA-Z]/g,i=function(e,t){for(e=String(e),t=t||2;e.length<t;)e="0"+e;return e},r={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUTCDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",localShortDate:"yy\u5e74mm\u6708dd\u65e5",localShortDateTime:"yy\u5e74mm\u6708dd\u65e5 hh:MM:ss TT",localLongDate:"yyyy\u5e74mm\u6708dd\u65e5",localLongDateTime:"yyyy\u5e74mm\u6708dd\u65e5 hh:MM:ss TT",localFullDate:"yyyy\u5e74mm\u6708dd\u65e5 w",localFullDateTime:"yyyy\u5e74mm\u6708dd\u65e5 w hh:MM:ss TT"},a={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","\u661f\u671f\u65e5","\u661f\u671f\u4e00","\u661f\u671f\u4e8c","\u661f\u671f\u4e09","\u661f\u671f\u56db","\u661f\u671f\u4e94","\u661f\u671f\u516d"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]};return function(o,l,s){if(1!==arguments.length||"[object String]"!==Object.prototype.toString.call(o)||/\d/.test(o)||(l=o,o=void 0),o=o?new Date(o):new Date,isNaN(o))throw SyntaxError("invalid date");l=String(r[l]||l||r["default"]),"UTC:"===l.slice(0,4)&&(l=l.slice(4),s=!0);var u=s?"getUTC":"get",c=o[u+"Date"](),d=o[u+"Day"](),f=o[u+"Month"](),g=o[u+"FullYear"](),h=o[u+"Hours"](),v=o[u+"Minutes"](),m=o[u+"Seconds"](),p=o[u+"Milliseconds"](),b=s?0:o.getTimezoneOffset(),C={d:c,dd:i(c,void 0),ddd:a.dayNames[d],dddd:a.dayNames[d+7],w:a.dayNames[d+14],m:f+1,mm:i(f+1,void 0),mmm:a.monthNames[f],mmmm:a.monthNames[f+12],yy:String(g).slice(2),yyyy:g,h:h%12||12,hh:i(h%12||12,void 0),H:h,HH:i(h,void 0),M:v,MM:i(v,void 0),s:m,ss:i(m,void 0),l:i(p,3),L:i(p>99?Math.round(p/10):p,void 0),t:12>h?"a":"p",tt:12>h?"am":"pm",T:12>h?"A":"P",TT:12>h?"AM":"PM",Z:s?"UTC":(String(o).match(t)||[""]).pop().replace(n,""),o:(b>0?"-":"+")+i(100*Math.floor(Math.abs(b)/60)+Math.abs(b)%60,4),S:["th","st","nd","rd"][c%10>3?0:(c%100-c%10!==10)*c%10]};return l.replace(e,function(e){return e in C?C[e]:e.slice(1,e.length-1)})}}(),r={add:function(e,n,i){return t(e,n,i)},addHour:function(e,n){return t("h",e,n)},addMinute:function(e,n){return t("n",e,n)},addSecond:function(e,n){return t("s",e,n)},addDay:function(e,n){return t("d",e,n)},addWeek:function(e,n){return t("w",e,n)},addMonths:function(e,n){return t("m",e,n)},addYear:function(e,n){return t("y",e,n)},isDateEquals:function(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()},isEquals:function(e,t){return e==t?!0:e&&t&&e.getTime&&t.getTime?e.getTime()==t.getTime():!1},isDateString:function(e){return n.test(e)},format:function(e,t,n){return i(e,t,n)},parse:function(t,n){return BUI.isString(t)&&(t=t.replace("/","-")),e(t,n)},today:function(){var e=new Date;return new Date(e.getFullYear(),e.getMonth(),e.getDate())},getDate:function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())}};return r}),define("bui/base",["bui/observable"],function(require){function e(e,t,n){var i=e[t]||{};return n&&(e[t]=i),i}function t(e,t){return BUI.isString(t)?e[t]:t}function n(e,t,n,i,r){var a=n;return e.fire(t+BUI.ucfirst(n)+"Change",{attrName:a,prevVal:i,newVal:r})}function i(e,t,i,r){r=r||{};var a,o;return o=e.get(t),$.isPlainObject(i)||BUI.isArray(i)||o!==i?r.silent||!1!==n(e,"before",t,o,i)?(a=e._set(t,i,r),a===!1?a:(r.silent||(i=e.__attrVals[t],n(e,"after",t,o,i)),e)):!1:void 0}function r(e){if(!e._attrs&&e!=l){var t=e.superclass.constructor;t&&!t._attrs&&r(t),e._attrs={},BUI.mixAttrs(e._attrs,t._attrs),BUI.mixAttrs(e._attrs,e.ATTRS)}}var a={},o=require("bui/observable"),l=function(e){var t=this,n=t.constructor,i=[];for(this.__attrs={},this.__attrVals={},o.apply(this,arguments);n;)i.push(n),n.extensions&&(BUI.mixin(n,n.extensions),delete n.extensions),n=n.superclass?n.superclass.constructor:null;var a=t.constructor;r(a),t._initStaticAttrs(a._attrs),t._initAttrs(e)};return l.INVALID=a,BUI.extend(l,o),BUI.augment(l,{_initStaticAttrs:function(e){var t,n=this;t=n.__attrs={};for(var i in e)if(e.hasOwnProperty(i)){var r=e[i];r.shared===!1||r.valueFn?(t[i]={},BUI.mixAttr(t[i],e[i])):t[i]=e[i]}},addAttr:function(e,t){var n=this,i=n.__attrs,r=i[e];r||(r=i[e]={});for(var a in t)t.hasOwnProperty(a)&&("value"==a?BUI.isObject(t[a])?(r[a]=r[a]||{},BUI.mix(r[a],t[a])):BUI.isArray(t[a])?(r[a]=r[a]||[],BUI.mix(r[a],t[a])):r[a]=t[a]:r[a]=t[a]);return n},addAttrs:function(e,t,n){var i=this;return e?("boolean"==typeof t&&(n=t,t=null),BUI.each(e,function(e,t){i.addAttr(t,e,n)}),t&&i.set(t),i):i},hasAttr:function(e){return e&&this.__attrs.hasOwnProperty(e)},getAttrs:function(){return this.__attrs},getAttrVals:function(){return this.__attrVals},get:function(n){var i,r,a,o=this,l=o.__attrVals;return i=e(o.__attrs,n),r=i.getter,a=n in l?l[n]:o._getDefAttrVal(n),r&&(r=t(o,r))&&(a=r.call(o,a,n)),a},clearAttrVals:function(){this.__attrVals={}},removeAttr:function(e){var t=this;return t.hasAttr(e)&&(delete t.__attrs[e],delete t.__attrVals[e]),t},set:function(e,t,n){var r=this;if($.isPlainObject(e)){n=t;var a=Object(e);for(e in a)a.hasOwnProperty(e)&&i(r,e,a[e],n);return r}return i(r,e,t,n)},setInternal:function(e,t,n){return this._set(e,t,n)},_getDefAttrVal:function(n){var i,r=this,a=r.__attrs,o=e(a,n),l=o.valueFn;return l&&(l=t(r,l))&&(i=l.call(r),void 0!==i&&(o.value=i),delete o.valueFn,a[n]=o),o.value},_set:function(n,i){var r,o=this,l=e(o.__attrs,n,!0),s=l.setter;return s&&(s=t(o,s))&&(r=s.call(o,i,n)),r===a?!1:(void 0!==r&&(i=r),o.__attrVals[n]=i,o)},_initAttrs:function(e){var t=this;if(e)for(var n in e)e.hasOwnProperty(n)&&t._set(n,e[n])}}),l}),define("bui/component",["bui/component/manage","bui/component/uibase","bui/component/view","bui/component/controller"],function(require){function e(e,n){var i,r;return e&&(r=e.xclass)&&(n&&!e.prefixCls&&(e.prefixCls=n.get("prefixCls")),i=t.Manager.getConstructorByXClass(r),i||BUI.error("can not find class by xclass desc : "+r),e=new i(e)),e}var t={};return BUI.mix(t,{Manager:require("bui/component/manage"),UIBase:require("bui/component/uibase"),View:require("bui/component/view"),Controller:require("bui/component/controller")}),t.create=e,t}),define("bui/component/manage",function(){function e(e){for(var t,n=e.split(/\s+/),i=-1,a=null,o=0;o<n.length;o++){var l=r[n[o]];l&&(t=l.priority)>i&&(i=t,a=l.constructor)}return a}function t(e){for(var t in r){var n=r[t];if(n.constructor==e)return t}return 0}function n(e,t){BUI.isFunction(t)?r[e]={constructor:t,priority:0}:(t.priority=t.priority||0,r[e]=t)}function i(e){for(var t=$.trim(e).split(/\s+/),n=0;n<t.length;n++)t[n]&&(t[n]=this.get("prefixCls")+t[n]);return t.join(" ")}var r={},a={},o={__instances:a,addComponent:function(e,t){a[e]=t},removeComponent:function(e){delete a[e]},eachComponent:function(e){BUI.each(a,e)},getComponent:function(e){return a[e]},getCssClassWithPrefix:i,getXClassByConstructor:t,getConstructorByXClass:e,setConstructorByXClass:n};return o}),function(){var e="bui/component/uibase/";define("bui/component/uibase",[e+"base",e+"align",e+"autoshow",e+"autohide",e+"close",e+"collapsable",e+"drag",e+"keynav",e+"list",e+"listitem",e+"mask",e+"position",e+"selection",e+"stdmod",e+"decorate",e+"tpl",e+"childcfg",e+"bindable",e+"depends"],function(t){var n=t(e+"base");return BUI.mix(n,{Align:t(e+"align"),AutoShow:t(e+"autoshow"),AutoHide:t(e+"autohide"),Close:t(e+"close"),Collapsable:t(e+"collapsable"),Drag:t(e+"drag"),KeyNav:t(e+"keynav"),List:t(e+"list"),ListItem:t(e+"listitem"),Mask:t(e+"mask"),Position:t(e+"position"),Selection:t(e+"selection"),StdMod:t(e+"stdmod"),Decorate:t(e+"decorate"),Tpl:t(e+"tpl"),ChildCfg:t(e+"childcfg"),Bindable:t(e+"bindable"),Depends:t(e+"depends")}),BUI.mix(n,{CloseView:n.Close.View,CollapsableView:n.Collapsable.View,ChildList:n.List.ChildList,ListItemView:n.ListItem.View,MaskView:n.Mask.View,PositionView:n.Position.View,StdModView:n.StdMod.View,TplView:n.Tpl.View}),n})}(),define("bui/component/uibase/base",["bui/component/manage"],function(require){function e(e){t(e,"initializer","constructor")}function t(e,t,n){for(var i,r,a,o,l=e.constructor,s=[];l;){if(o=[],a=l.mixins)for(var u=0;u<a.length;u++)i=a[u],i&&("constructor"!=n&&(i=i.prototype.hasOwnProperty(n)?i.prototype[n]:null),i&&o.push(i));l.prototype.hasOwnProperty(t)&&(r=l.prototype[t])&&o.push(r),o.length&&s.push.apply(s,o.reverse()),l=l.superclass&&l.superclass.constructor}for(u=s.length-1;u>=0;u--)s[u]&&s[u].call(e)}function n(e){for(var t,n,i,r=e.constructor;r;){if(r.prototype.hasOwnProperty("destructor")&&r.prototype.destructor.apply(e),t=r.mixins)for(i=t.length-1;i>=0;i--)n=t[i]&&t[i].prototype.__destructor,n&&n.apply(e);
r=r.superclass&&r.superclass.constructor}}function i(e){e&&BUI.each(e,function(t,n){BUI.isFunction(t)&&(e[n]=new t)})}function r(e,t,n){t&&BUI.each(t,function(t){t[n]&&t[n](e)})}function a(){}function o(e){var t,n,i=e.getAttrs();for(var r in i)if(i.hasOwnProperty(r)){var a=u+c(r);(n=e[a])&&i[r].sync!==!1&&void 0!==(t=e.get(r))&&n.call(e,t)}}function l(e){for(var t=[];e.base;)t.push(e),e=e.base;for(var n=t.length-1;n>=0;n--){var i=t[n];BUI.mix(i.prototype,i.px),BUI.mix(i,i.sx),i.base=null,i.px=null,i.sx=null}}var s=require("bui/component/manage"),u="_uiSet",c=BUI.ucfirst,d=$.noop,f=require("bui/base"),g=function(t){var n=this;f.apply(n,arguments),n.setInternal("userConfig",t),e(n,t);var a=n.get("plugins");i(a);var o=n.get("xclass");o&&(n.__xclass=o),r(n,a,"initializer"),t&&t.autoRender&&n.render()};return g.ATTRS={userConfig:{},autoRender:{value:!1},listeners:{value:{}},plugins:{},rendered:{value:!1},xclass:{valueFn:function(){return s.getXClassByConstructor(this.constructor)}}},BUI.extend(g,f),BUI.augment(g,{create:function(){var e=this;return e.get("created")||(e.fire("beforeCreateDom"),t(e,"createDom","__createDom"),e._set("created",!0),e.fire("afterCreateDom"),r(e,e.get("plugins"),"createDom")),e},render:function(){var e=this;if(!e.get("rendered")){var n=e.get("plugins");e.create(void 0),e.set("created",!0),e.fire("beforeRenderUI"),t(e,"renderUI","__renderUI"),e.fire("afterRenderUI"),r(e,n,"renderUI"),e.fire("beforeBindUI"),a(e),t(e,"bindUI","__bindUI"),e.set("binded",!0),e.fire("afterBindUI"),r(e,n,"bindUI"),e.fire("beforeSyncUI"),o(e),t(e,"syncUI","__syncUI"),e.fire("afterSyncUI"),r(e,n,"syncUI"),e._set("rendered",!0)}return e},createDom:d,renderUI:d,bindUI:d,syncUI:d,destroy:function(){var e=this;return e.destroyed?e:(e.fire("beforeDestroy"),r(e,e.get("plugins"),"destructor"),n(e),e.fire("afterDestroy"),e.off(),e.clearAttrVals(),e.destroyed=!0,e)}}),BUI.mix(g,{define:function(e,t,n,i){function r(){var e=this.constructor;e.base&&l(e),g.apply(this,arguments)}return $.isPlainObject(t)&&(i=n,n=t,t=[]),BUI.extend(r,e),r.base=e,r.px=n,r.sx=i,t.length&&(r.extensions=t),r},extend:function h(){var e,t=$.makeArray(arguments),n=t[t.length-1];if(t.unshift(this),n.xclass&&(t.pop(),t.push(n.xclass)),e=g.define.apply(g,t),n.xclass){var i=n.priority||(this.priority?this.priority+1:1);s.setConstructorByXClass(n.xclass,{constructor:e,priority:i}),e.__xclass=n.xclass,e.priority=i,e.toString=function(){return n.xclass}}return e.extend=h,e}}),g}),define("bui/component/uibase/align",["bui/ua"],function(require){function e(e){var t,n=e.ownerDocument,i=n.body,r=$(e).css("position"),a="fixed"==r||"absolute"==r;if(!a)return"html"==e.nodeName.toLowerCase()?null:e.parentNode;for(t=e.parentNode;t&&t!=i;t=t.parentNode)if(r=$(t).css("position"),"static"!=r)return t;return null}function t(t){var n,i,r,a,o={left:0,right:1/0,top:0,bottom:1/0},l=t.ownerDocument,s=l.body,u=l.documentElement;for(n=t;n=e(n);)if((!f.ie||0!=n.clientWidth)&&n!=s&&n!=u&&"visible"!=$(n).css("overflow")){var c=$(n).offset();c.left+=n.clientLeft,c.top+=n.clientTop,o.top=Math.max(o.top,c.top),o.right=Math.min(o.right,c.left+n.clientWidth),o.bottom=Math.min(o.bottom,c.top+n.clientHeight),o.left=Math.max(o.left,c.left)}return i=$(h).scrollLeft(),r=$(h).scrollTop(),o.left=Math.max(o.left,i),o.top=Math.max(o.top,r),a={width:BUI.viewportWidth(),height:BUI.viewportHeight()},o.right=Math.min(o.right,i+a.width),o.bottom=Math.min(o.bottom,r+a.height),o.top>=0&&o.left>=0&&o.bottom>o.top&&o.right>o.left?o:null}function n(e,t,n,i){var r,a,o,l;return r={left:e.left,top:e.top},o=c(t,n[0]),l=c(e,n[1]),a=[l.left-o.left,l.top-o.top],{left:r.left-a[0]+ +i[0],top:r.top-a[1]+ +i[1]}}function i(e,t,n){return e.left<n.left||e.left+t.width>n.right}function r(e,t,n){return e.top<n.top||e.top+t.height>n.bottom}function a(e,t,n,i){var r=BUI.cloneObject(e),a={width:t.width,height:t.height};return i.adjustX&&r.left<n.left&&(r.left=n.left),i.resizeWidth&&r.left>=n.left&&r.left+a.width>n.right&&(a.width-=r.left+a.width-n.right),i.adjustX&&r.left+a.width>n.right&&(r.left=Math.max(n.right-a.width,n.left)),i.adjustY&&r.top<n.top&&(r.top=n.top),i.resizeHeight&&r.top>=n.top&&r.top+a.height>n.bottom&&(a.height-=r.top+a.height-n.bottom),i.adjustY&&r.top+a.height>n.bottom&&(r.top=Math.max(n.bottom-a.height,n.top)),BUI.mix(r,a)}function o(e,t,n){var i=[];return $.each(e,function(e,r){i.push(r.replace(t,function(e){return n[e]}))}),i}function l(e,t){return e[t]=-e[t],e}function s(){}function u(e){var t,n,i;return e.length&&!$.isWindow(e[0])?(t=e.offset(),n=e.outerWidth(),i=e.outerHeight()):(t={left:BUI.scrollLeft(),top:BUI.scrollTop()},n=BUI.viewportWidth(),i=BUI.viewportHeight()),t.width=n,t.height=i,t}function c(e,t){var n,i,r=t.charAt(0),a=t.charAt(1),o=e.width,l=e.height;return n=e.left,i=e.top,"c"===r?i+=l/2:"b"===r&&(i+=l),"c"===a?n+=o/2:"r"===a&&(n+=o),{left:n,top:i}}function d(e){var t=e.attr("class"),n=new RegExp("s?"+g+"[a-z]{2}-[a-z]{2}","ig"),i=n.exec(t);i&&e.removeClass(i.join(" "))}var f=require("bui/ua"),g="x-align-",h=window;return s.__getOffsetParent=e,s.__getVisibleRectForElement=t,s.ATTRS={align:{shared:!1,value:{}}},s.prototype={_uiSetAlign:function(e){var t,n,i="";e&&e.points&&(this.align(e.node,e.points,e.offset,e.overflow),this.set("cachePosition",null),t=this.get("el"),d(t),n=e.points.join("-"),i=g+n,t.addClass(i))},align:function(e,s,c,d){e=$(e||h),c=c&&[].concat(c)||[0,0],d=d||{};var f=this,g=f.get("el"),v=0,m=t(g[0]),p=u(g),b=u(e),C=n(p,b,s,c),x=BUI.merge(p,C);if(m&&(d.adjustX||d.adjustY)){i(C,p,m)&&(v=1,s=o(s,/[lr]/gi,{l:"r",r:"l"}),c=l(c,0)),r(C,p,m)&&(v=1,s=o(s,/[tb]/gi,{t:"b",b:"t"}),c=l(c,1)),v&&(C=n(p,b,s,c),BUI.mix(x,C));var y={};y.adjustX=d.adjustX&&i(C,p,m),y.adjustY=d.adjustY&&r(C,p,m),(y.adjustX||y.adjustY)&&(x=a(C,p,m,y))}return x.left!=p.left&&(f.setInternal("x",null),f.get("view").setInternal("x",null),f.set("x",x.left)),x.top!=p.top&&(f.setInternal("y",null),f.get("view").setInternal("y",null),f.set("y",x.top)),x.width!=p.width&&g.width(g.width()+x.width-p.width),x.height!=p.height&&g.height(g.height()+x.height-p.height),f},center:function(e){var t=this;return t.set("align",{node:e,points:["cc","cc"],offset:[0,0]}),t}},s}),define("bui/component/uibase/autoshow",function(){function e(){}return e.ATTRS={trigger:{},delegateTigger:{getter:function(){this.get("delegateTrigger")},setter:function(e){this.set("delegateTrigger",e)}},delegateTrigger:{value:!1},autoAlign:{value:!0},autoFocused:{value:!0},triggerActiveCls:{},curTrigger:{},triggerCallback:{},triggerEvent:{value:"click"},triggerHideEvent:{},events:{value:{triggerchange:!1}}},e.prototype={__createDom:function(){this._setTrigger()},__bindUI:function(){var e=this,t=e.get("triggerActiveCls");t&&e.on("hide",function(){var n=e.get("curTrigger");n&&n.removeClass(t)})},_setTrigger:function(){function e(e){if(!n.get("disabled")){var t=n.get("curTrigger"),i=$(s?e.currentTarget:this),r=n.get("align");t&&t[0]==i[0]||(t&&t.removeClass(o),n.set("curTrigger",i),n.fire("triggerchange",{prevTrigger:t,curTrigger:i})),i.addClass(o),n.get("autoAlign")&&(r.node=i),n.set("align",r),n.show(),a&&a(e)}}function t(e){var t=e.toElement||e.relatedTarget;t&&n.containsElement(t)||n.hide()}var n=this,i=n.get("triggerEvent"),r=n.get("triggerHideEvent"),a=n.get("triggerCallback"),o=n.get("triggerActiveCls")||"",l=n.get("trigger"),s=n.get("delegateTrigger"),u=$(l);i&&(s&&BUI.isString(l)?$(document).delegate(l,i,e):u.on(i,e)),r&&(s&&BUI.isString(l)?$(document).delegate(l,r,t):u.on(r,t))},__renderUI:function(){var e=this,t=e.get("align");t&&!t.node&&(t.node=e.get("render")||e.get("trigger"))}},e}),define("bui/component/uibase/autohide",function(){function e(e,t){var n=e.get("hideExceptNode");return n&&n.length?$.contains(n[0],t):!1}function t(){}var n=BUI.wrapBehavior,i=BUI.getWrapBehavior;return t.ATTRS={autoHideType:{value:"click"},autoHide:{value:!1},hideExceptNode:{},events:{value:{autohide:!1}}},t.prototype={__bindUI:function(){var e=this;e.on("afterVisibleChange",function(t){var n=t.newVal;e.get("autoHide")&&(n?e._bindHideEvent():e._clearHideEvent())})},handleMoveOuter:function(t){var n=this,i=t.toElement||t.relatedTarget;n.containsElement(i)||e(n,i)||n.fire("autohide")!==!1&&n.hide()},handleDocumentClick:function(t){var n=this,i=t.target;n.containsElement(i)||e(n,i)||n.fire("autohide")!==!1&&n.hide()},_bindHideEvent:function(){var e=this,t=e.get("curTrigger"),i=e.get("autoHideType");"click"===i?$(document).on("mousedown",n(e,"handleDocumentClick")):(e.get("el").on("mouseleave",n(e,"handleMoveOuter")),t&&$(t).on("mouseleave",n(e,"handleMoveOuter")))},_clearHideEvent:function(){var e=this,t=e.get("curTrigger"),n=e.get("autoHideType");"click"===n?$(document).off("mousedown",i(e,"handleDocumentClick")):(e.get("el").off("mouseleave",i(e,"handleMoveOuter")),t&&$(t).off("mouseleave",i(e,"handleMoveOuter")))}},t}),define("bui/component/uibase/close",function(){function e(e){return $(e.get("closeTpl"))}function t(){}function n(){}var i=BUI.prefix+"ext-";t.ATTRS={closeTpl:{value:'<a tabindex="0" href=\'javascript:void("\u5173\u95ed")\' role="button" class="'+i+'close"><span class="'+i+'close-x">\u5173\u95ed</span></a>'},closeable:{value:!0},closeBtn:{}},t.prototype={_uiSetCloseable:function(t){var n=this,i=n.get("closeBtn");t?(i||n.setInternal("closeBtn",i=e(n)),i.appendTo(n.get("el"),void 0)):i&&i.remove()}};var r="hide";n.ATTRS={closeTpl:{view:!0},closeable:{view:1},closeBtn:{view:1},closeAction:{value:r}};var a={hide:r,destroy:"destroy",remove:"remove"};return n.prototype={_uiSetCloseable:function(e){var t=this;e&&!t.__bindCloseEvent&&(t.__bindCloseEvent=1,t.get("closeBtn").on("click",function(e){t.fire("closeclick",{domTarget:e.target})!==!1&&t.close(),e.preventDefault()}))},__destructor:function(){var e=this.get("closeBtn");e&&e.detach()},close:function(){var e=this,t=a[e.get("closeAction")||r];e.fire("closing",{action:t})!==!1&&(e.fire("beforeclosed",{action:t}),"remove"==t?e[t](!0):e[t](),e.fire("closed",{action:t}))}},n.View=t,n}),define("bui/component/uibase/drag",function(){function e(){var e=$(i).css("opacity",0).prependTo("body");return e}var t=BUI.guid("drag"),n=function(){};n.ATTRS={dragNode:{},draging:{setter:function(e){return e===!0?{}:void 0},value:null},constraint:{},dragBackEl:{getter:function(){return $("#"+t)}}};var i='<div id="'+t+'" style="background-color: red; position: fixed; left: 0px; width: 100%; height: 100%; top: 0px; cursor: move; z-index: 999999; display: none; "></div>';return n.prototype={__bindUI:function(){function e(e){var t=r.get("draging");t&&(e.preventDefault(),r._dragMoveTo(e.pageX,e.pageY,t,a))}function t(e){if(1==e.which){r.set("draging",!1);var t=r.get("dragBackEl");t&&t.hide(),i()}}function n(){$(document).on("mousemove",e),$(document).on("mouseup",t)}function i(){$(document).off("mousemove",e),$(document).off("mouseup",t)}var r=this,a=r.get("constraint"),o=r.get("dragNode");o&&o.on("mousedown",function(e){1==e.which&&(e.preventDefault(),r.set("draging",{elX:r.get("x"),elY:r.get("y"),startX:e.pageX,startY:e.pageY}),n())})},_dragMoveTo:function(t,n,i,r){var a=this,o=a.get("dragBackEl"),i=i||a.get("draging"),l=i.startX-t,s=i.startY-n;o.length||(o=e()),o.css({cursor:"move",display:"block"}),a.set("xy",[a._getConstrainX(i.elX-l,r),a._getConstrainY(i.elY-s,r)])},_getConstrainX:function(e,t){var n=this,i=n.get("el").outerWidth(),r=e+i,a=n.get("x");if(t){var o=t.offset();return o.left>=e?o.left:o.left+t.width()<r?o.left+t.width()-i:e}return BUI.isInHorizontalView(e)&&BUI.isInHorizontalView(r)?e:a},_getConstrainY:function(e,t){var n=this,i=n.get("el").outerHeight(),r=e+i,a=n.get("y");if(t){var o=t.offset();return o.top>e?o.top:o.top+t.height()<r?o.top+t.height()-i:e}return BUI.isInVerticalView(e)&&BUI.isInVerticalView(r)?e:a}},n}),define("bui/component/uibase/keynav",["bui/keycode"],function(require){var e=require("bui/keycode"),t=BUI.wrapBehavior,n=BUI.getWrapBehavior,i=function(){};return i.ATTRS={allowKeyNav:{value:!0},navEvent:{value:"keydown"},ignoreInputFields:{value:!0}},i.prototype={__bindUI:function(){},_uiSetAllowKeyNav:function(e){var i=this,r=i.get("navEvent"),a=i.get("el");e?a.on(r,t(i,"_handleKeyDown")):a.off(r,n(i,"_handleKeyDown"))},_handleKeyDown:function(t){var n=this,i=n.get("ignoreInputFields"),r=t.which;if(!i||!$(t.target).is("input,select,textarea"))switch(r){case e.UP:t.preventDefault(),n.handleNavUp(t);break;case e.DOWN:t.preventDefault(),n.handleNavDown(t);break;case e.RIGHT:t.preventDefault(),n.handleNavRight(t);break;case e.LEFT:t.preventDefault(),n.handleNavLeft(t);break;case e.ENTER:n.handleNavEnter(t);break;case e.ESC:n.handleNavEsc(t);break;case e.TAB:n.handleNavTab(t)}},handleNavUp:function(){},handleNavDown:function(){},handleNavLeft:function(){},handleNavRight:function(){},handleNavEnter:function(){},handleNavEsc:function(){},handleNavTab:function(){}},i}),define("bui/component/uibase/mask",function(require){function e(e){return e.get("prefixCls")+"ext-mask"}function t(){return s?BUI.docWidth()+"px":"100%"}function n(){return s?BUI.docHeight()+"px":"100%"}function i(e){var i=$('<div  style="width:'+t()+";left:0;top:0;height:"+n()+";position:"+(s?"absolute":"fixed")+';" class="'+e+'">'+(s?'<iframe style="position:absolute;left:0;top:0;background:white;width: expression(this.parentNode.offsetWidth);height: expression(this.parentNode.offsetHeight);filter:alpha(opacity=0);z-index:-1;"></iframe>':"")+"</div>").prependTo("body");return i.on("mousedown",function(e){e.preventDefault()}),i}function r(){}function a(){}var o=require("bui/ua"),l={},s=6==o.ie;return r.ATTRS={maskShared:{value:!0}},r.prototype={_maskExtShow:function(){var t,n=this,r=e(n),a=l[r],o=n.get("maskShared"),s=n.get("maskNode");s||(o?a?s=a.node:(s=i(r),a=l[r]={num:0,node:s}):s=i(r),n.setInternal("maskNode",s)),(t=n.get("zIndex"))&&s.css("z-index",t-1),o&&a.num++,o&&1!=a.num||s.show(),$("body").addClass("x-masked-relative")},_maskExtHide:function(){var t=this,n=e(t),i=l[n],r=t.get("maskShared"),a=t.get("maskNode");r&&i?(i.num=Math.max(i.num-1,0),0==i.num&&a.hide()):a&&a.hide(),$("body").removeClass("x-masked-relative")},__destructor:function(){var e=this,t=e.get("maskShared"),n=e.get("maskNode");e.get("maskNode")&&(t?e.get("visible")&&e._maskExtHide():n.remove())}},a.ATTRS={mask:{value:!1},maskNode:{view:1},maskShared:{view:1}},a.prototype={__bindUI:function(){{var e=this,t=e.get("view");t._maskExtShow,t._maskExtHide}e.get("mask")&&(e.on("show",function(){t._maskExtShow()}),e.on("hide",function(){t._maskExtHide()}))}},a=a,a.View=r,a}),define("bui/component/uibase/position",function(){function e(){}function t(){}return e.ATTRS={x:{valueFn:function(){var e=this;return e.get("el")&&e.get("el").offset().left}},y:{valueFn:function(){var e=this;return e.get("el")&&e.get("el").offset().top}},zIndex:{},visibleMode:{value:"visibility"}},e.prototype={__createDom:function(){this.get("el").addClass(BUI.prefix+"ext-position")},_uiSetZIndex:function(e){this.get("el").css("z-index",e)},_uiSetX:function(e){null!=e&&this.get("el").offset({left:e})},_uiSetY:function(e){null!=e&&this.get("el").offset({top:e})},_uiSetLeft:function(e){null!=e&&this.get("el").css({left:e})},_uiSetTop:function(e){null!=e&&this.get("el").css({top:e})}},t.ATTRS={x:{view:1},y:{view:1},left:{view:1},top:{view:1},xy:{setter:function(e){var t=this,n=$.makeArray(e);return n.length&&(n[0]&&t.set("x",n[0]),n[1]&&t.set("y",n[1])),e},getter:function(){return[this.get("x"),this.get("y")]}},zIndex:{view:1},visible:{view:!0,value:!0}},t.prototype={move:function(e,t){var n=this;return BUI.isArray(e)&&(t=e[1],e=e[0]),n.set("xy",[e,t]),n},_uiSetX:function(e){if(null!=e){var t=this,n=t.get("el");t.setInternal("left",n.position().left),-999!=e&&this.set("cachePosition",null)}},_uiSetY:function(e){if(null!=e){var t=this,n=t.get("el");t.setInternal("top",n.position().top),-999!=e&&this.set("cachePosition",null)}},_uiSetLeft:function(e){var t=this,n=t.get("el");null!=e&&t.setInternal("x",n.offset().left)},_uiSetTop:function(e){var t=this,n=t.get("el");null!=e&&t.setInternal("y",n.offset().top)}},t.View=e,t}),define("bui/component/uibase/listitem",function(){function e(){}function t(){}return e.ATTRS={selected:{}},e.prototype={_uiSetSelected:function(e){var t=this,n=t.getStatusCls("selected"),i=t.get("el");e?i.addClass(n):i.removeClass(n)}},t.ATTRS={selectable:{value:!0},selected:{view:!0,sync:!1,value:!1}},t.prototype={},t.View=e,t}),define("bui/component/uibase/stdmod",function(){function e(){}function t(e,t){var n=e.get("contentEl"),i=e.get(t);i||(i=$('<div class="'+r+t+'"  ></div>'),i.appendTo(n),e.setInternal(t,i))}function n(e,t,n){t=e.get(t),BUI.isString(n)?t.html(n):t.html("").append(n)}function i(){}var r=BUI.prefix+"stdmod-";return e.ATTRS={header:{},body:{},footer:{},bodyStyle:{},footerStyle:{},headerStyle:{},headerContent:{},bodyContent:{},footerContent:{}},e.PARSER={header:function(e){return e.one("."+r+"header")},body:function(e){return e.one("."+r+"body")},footer:function(e){return e.one("."+r+"footer")}},e.prototype={__renderUI:function(){t(this,"header"),t(this,"body"),t(this,"footer")},_uiSetBodyStyle:function(e){this.get("body").css(e)},_uiSetHeaderStyle:function(e){this.get("header").css(e)},_uiSetFooterStyle:function(e){this.get("footer").css(e)},_uiSetBodyContent:function(e){n(this,"body",e)},_uiSetHeaderContent:function(e){n(this,"header",e)},_uiSetFooterContent:function(e){n(this,"footer",e)}},i.ATTRS={header:{view:1},body:{view:1},footer:{view:1},bodyStyle:{view:1},footerStyle:{view:1},headerStyle:{view:1},headerContent:{view:1},bodyContent:{view:1},footerContent:{view:1}},i.View=e,i}),define("bui/component/uibase/decorate",["bui/array","bui/json","bui/component/manage"],function(require){function e(e,t){if(t[e])return!0;var n=new RegExp("^"+d);return e!==f&&n.test(e)?!0:!1}function t(e){for(var t=[],n=e.constructor;n;)t.push(n),n=n.superclass&&n.superclass.constructor;return t}function n(e){return e.toLowerCase().replace(v,function(e,t){return(t+"").toUpperCase()})}function i(e){if(e=$.trim(e),"false"===e.toLowerCase())e=!1;else if("true"===e.toLowerCase())e=!0;else if(m.test(e))e=u.looseParse(e);else if(/\d/.test(e)&&/[^a-z]/i.test(e)){var t=parseFloat(e);t+""===e&&(e=t)}return e}function r(e,t){var n=e.userConfig||{};for(var i in t)i in n||e.setInternal(i,t[i])}function a(e,t){var n,i,r=this,a=r.userConfig||{};for(n in t)n in a||(i=t[n],BUI.isFunction(i)?r.setInternal(n,i.call(r,e)):"string"==typeof i?r.setInternal(n,e.find(i)):BUI.isArray(i)&&i[0]&&r.setInternal(n,e.find(i[0])))}function o(e,n){var i,r,o,l=e.constructor;for(o=t(e),i=o.length-1;i>=0;i--)l=o[i],(r=l[g])&&a.call(e,n,r)}function l(e){var t,n,i=e,a=i.get("srcNode");a&&(a=$(a),i.setInternal("el",a),i.setInternal("srcNode",a),t=i.get("userConfig"),n=i.getDecorateConfig(a),r(e,n),i.get("isDecorateChild")&&i.decorateInternal&&i.decorateInternal(a),o(e,a))}function s(){l(this)}var u=(require("bui/array"),require("bui/json")),c=BUI.prefix,d="data-",f=d+"cfg",g="PARSER",h=require("bui/component/manage"),v=/-([a-z])/g,m=/^[\{\[]/;return s.ATTRS={srcNode:{view:!0},isDecorateChild:{value:!1},decorateCfgFields:{value:{id:!0,name:!0,value:!0,title:!0}}},s.prototype={getDecorateConfig:function(t){if(!t.length)return null;var r=this,a=t[0],o=a.attributes,l=r.get("decorateCfgFields"),s={},u=r._getStautsCfg(t);return BUI.each(o,function(t){var r=t.nodeName;try{if(r===f){var a=i(t.nodeValue);BUI.mix(s,a)}else if(e(r,l)){var o=t.nodeValue;-1!==r.indexOf(d)&&(r=r.replace(d,""),r=n(r),o=i(o)),s[r]&&BUI.isObject(o)?BUI.mix(s[r],o):s[r]=o}}catch(u){BUI.log("parse field error,the attribute is:"+r)}}),BUI.mix(s,u)},_getStautsCfg:function(e){var t=this,n={},i=t.get("statusCls");return BUI.each(i,function(t,i){e.hasClass(t)&&(n[i]=!0)}),n},getDecorateElments:function(){var e=this,t=e.get("el"),n=e.get("childContainer");return n?t.find(n).children():t.children()},decorateInternal:function(e){var t=this;t.decorateChildren(e)},findXClassByNode:function(e,t){var n=this,i=e.attr("class")||"",r=n.get("defaultChildClass");i=i.replace(new RegExp("\\b"+c,"ig"),"");var a=h.getConstructorByXClass(i)||h.getConstructorByXClass(r);return a||t||(BUI.log(e),BUI.error("can not find ui "+i+" from this markup")),h.getXClassByConstructor(a)},decorateChildrenInternal:function(e,t){var n=this,i=n.get("children");i.push({xclass:e,srcNode:t})},decorateChildren:function(){var e=this,t=e.getDecorateElments();BUI.each(t,function(t){var n=e.findXClassByNode($(t));e.decorateChildrenInternal(n,$(t))})}},s}),define("bui/component/uibase/tpl",function(){function e(){}function t(){}return e.ATTRS={tpl:{},tplEl:{}},e.prototype={__renderUI:function(){var e,t=this,n=t.get("childContainer");n&&(e=t.get("el").find(n),e.length&&t.set("contentEl",e))},getTpl:function(e){var t=this,n=t.get("tpl"),i=t.get("tplRender");return e=e||t.getAttrVals(),i?i(e):n?BUI.substitute(n,e):""},setTplContent:function(e){var t=this,n=t.get("el"),i=t.get("content"),r=(t.get("tplEl"),t.getTpl(e));!i&&r&&(n.empty(),n.html(r))}},t.ATTRS={tpl:{view:!0,sync:!1},tplRender:{view:!0,value:null},childContainer:{view:!0}},t.prototype={__renderUI:function(){this.get("srcNode")||this.setTplContent()},updateContent:function(){this.setTplContent()},setTplContent:function(){var e=this,t=e.getAttrVals();e.get("view").setTplContent(t)},_uiSetTpl:function(){this.setTplContent()}},t.View=e,t}),define("bui/component/uibase/collapsable",function(){var e=function(){};e.ATTRS={collapsed:{}},e.prototype={_uiSetCollapsed:function(e){var t=this,n=t.getStatusCls("collapsed"),i=t.get("el");e?i.addClass(n):i.removeClass(n)}};var t=function(){};return t.ATTRS={collapsable:{value:!1},collapsed:{view:!0,value:!1},events:{value:{expanded:!0,collapsed:!0}}},t.prototype={_uiSetCollapsed:function(e){var t=this;t.fire(e?"collapsed":"expanded")}},t.View=e,t}),define("bui/component/uibase/selection",function(){var e=function(){};return e.ATTRS={selectedEvent:{value:"click"},events:{value:{selectedchange:!1,beforeselectedchange:!1,itemselected:!1,itemunselected:!1}},idField:{value:"id"},multipleSelect:{value:!1}},e.prototype={clearSelection:function(){var e=this,t=e.getSelection();BUI.each(t,function(t){e.clearSelected(t)})},getSelection:function(){},getSelected:function(){return this.getSelection()[0]},getSelectedValue:function(){var e=this,t=e.get("idField"),n=e.getSelected();return e.getValueByField(n,t)},getSelectionValues:function(){var e=this,t=e.get("idField"),n=e.getSelection();return $.map(n,function(n){return e.getValueByField(n,t)})},getSelectionText:function(){var e=this,t=e.getSelection();return $.map(t,function(t){return e.getItemText(t)})},clearSelected:function(e){var t=this;e=e||t.getSelected(),e&&t.setItemSelected(e,!1)},getSelectedText:function(){var e=this,t=e.getSelected();return e.getItemText(t)},setSelection:function(e){var t=this;e=BUI.isArray(e)?e:[e],BUI.each(e,function(e){t.setSelected(e)})},setSelected:function(e){var t=this,n=t.get("multipleSelect");if(t.isItemSelectable(e)){if(!n){var i=t.getSelected();e!=i&&t.clearSelected(i)}t.setItemSelected(e,!0)}},isItemSelected:function(){},isItemSelectable:function(){return!0},setItemSelected:function(e,t){var n,i=this;e&&(n=i.isItemSelected(e),n==t)||i.fire("beforeselectedchange",{item:e,selected:t})!==!1&&i.setItemSelectedStatus(e,t)},setItemSelectedStatus:function(){},setAllSelection:function(){},setSelectedByField:function(e,t){t||(t=e,e=this.get("idField"));var n=this,i=n.findItemByField(e,t);n.setSelected(i)},setSelectionByField:function(e,t){t||(t=e,e=this.get("idField"));var n=this;BUI.each(t,function(t){n.setSelectedByField(e,t)})},afterSelected:function(e,t,n){var i=this;t?(i.fire("itemselected",{item:e,domTarget:n}),i.fire("selectedchange",{item:e,domTarget:n,selected:t})):(i.fire("itemunselected",{item:e,domTarget:n}),i.get("multipleSelect")&&i.fire("selectedchange",{item:e,domTarget:n,selected:t}))}},e}),define("bui/component/uibase/list",["bui/component/uibase/selection"],function(require){function e(e,n){var i=n.isController?n.getAttrVals():n,r=e.get("itemTpl"),a=e.get("itemStatusCls"),o=e.get("itemTplRender");if(r&&!i.tpl&&t(n,"tpl",r),o&&!i.tplRender&&t(n,"tplRender",o),a){var l=i.statusCls||n.isController?n.get("statusCls"):{};BUI.each(a,function(e,t){e&&!l[t]&&(l[t]=e)}),t(n,"statusCls",l)}}function t(e,t,n){e.isController?e.set(t,n):e[t]=n}var n=require("bui/component/uibase/selection"),i=function(){};i.ATTRS={items:{shared:!1,view:!0},idField:{value:"id"},itemTpl:{view:!0},itemTplRender:{view:!0},itemStatusCls:{view:!0,value:{}},events:{value:{itemclick:!0}}},i.prototype={getItemCount:function(){return this.getItems().length},getValueByField:function(){},getItems:function(){},getFirstItem:function(){return this.getItemAt(0)},getLastItem:function(){return this.getItemAt(this.getItemCount()-1)},getItemAt:function(e){return this.getItems()[e]||null},getItem:function(e){var t=this.get("idField");return this.findItemByField(t,e)},indexOfItem:function(e){return BUI.Array.indexOf(e,this.getItems())},addItems:function(e){var t=this;BUI.each(e,function(e){t.addItem(e)})},addItemsAt:function(e,t){var n=this;BUI.each(e,function(e,i){n.addItemAt(e,t+i)})},updateItem:function(){},addItem:function(e){return this.addItemAt(e,this.getItemCount())},addItemAt:function(){},findItemByField:function(){},getItemText:function(){},clearItems:function(){var e=this,t=e.getItems();t.splice(0),e.clearControl()},removeItem:function(){},removeItems:function(e){var t=this;BUI.each(e,function(e){t.removeItem(e)})},removeItemAt:function(e){this.removeItem(this.getItemAt(e))},clearControl:function(){}};var r=function(){this.__init()};return r.ATTRS=BUI.merge(!0,i.ATTRS,n.ATTRS,{items:{sync:!1},autoInitItems:{value:!0},isDecorateChild:{value:!0},defaultLoaderCfg:{value:{property:"children",dataType:"json"}}}),BUI.augment(r,i,n,{__init:function(){var e=this,t=e.get("items");t&&e.get("autoInitItems")&&e.addItems(t),e.on("beforeRenderUI",function(){e._beforeRenderUI()})},_uiSetItems:function(e){var t=this;t.clearControl(),t.addItems(e)},_beforeRenderUI:function(){{var t=this,n=t.get("children");t.get("items")}BUI.each(n,function(n){e(t,n)})},__bindUI:function(){var t=this,n=t.get("selectedEvent");t.on(n,function(e){var n=e.target;n.get("selectable")&&(n.get("selected")?t.get("multipleSelect")&&t.clearSelected(n):t.setSelected(n))}),t.on("click",function(e){e.target!==t&&t.fire("itemclick",{item:e.target,domTarget:e.domTarget,domEvent:e})}),t.on("beforeAddChild",function(n){e(t,n.child)}),t.on("beforeRemoveChild",function(e){var n=e.child,i=n.get("selected");i&&(t.get("multipleSelect")?t.clearSelected(n):t.setSelected(null)),n.set("selected",!1)})},clearControl:function(){this.removeChildren(!0)},getItems:function(){return this.get("children")},updateItem:function(e){var t=this,n=t.get("idField"),i=t.findItemByField(n,e[n]);return i&&i.setTplContent(),i},removeItem:function(e){var t=this,n=t.get("idField");e instanceof BUI.Component.Controller||(e=t.findItemByField(n,e[n])),this.removeChild(e,!0)},addItemAt:function(e,t){return this.addChild(e,t)},findItemByField:function(e,t,n){n=n||this;var i=this,r=n.get("children"),a=null;return $(r).each(function(n,r){return r.get(e)==t?a=r:r.get("children").length&&(a=i.findItemByField(e,t,r)),a?!1:void 0}),a},getItemText:function(e){return e.get("el").text()},getValueByField:function(e,t){return e&&e.get(t)},setItemSelectedStatus:function(e,t){var n=this,i=null;e&&(e.set("selected",t),i=e.get("el")),n.afterSelected(e,t,i)},isItemSelected:function(e){return e?e.get("selected"):!1},setAllSelection:function(){var e=this,t=e.getItems();e.setSelection(t)},getSelection:function(){var e=this,t=e.getItems(),n=[];return BUI.each(t,function(t){e.isItemSelected(t)&&n.push(t)}),n}}),i.ChildList=r,i}),define("bui/component/uibase/childcfg",function(){var e=function(){this._init()};return e.ATTRS={defaultChildCfg:{}},e.prototype={_init:function(){var e=this,t=e.get("defaultChildCfg");t&&e.on("beforeAddChild",function(e){var n=e.child;$.isPlainObject(n)&&BUI.each(t,function(e,t){null==n[t]&&(n[t]=e)})})}},e}),define("bui/component/uibase/depends",["bui/component/manage"],function(require){function e(e){var t=a.exec(e),n=t[1],r=t[2],o=i(n);return{source:o,eventType:r}}function t(t,n,i){var r,a=e(n),o=a.source,l=a.eventType;return o&&i&&l&&(BUI.isFunction(i)?r=i:BUI.isArray(i)&&(r=function(){BUI.each(i,function(e){t[e]&&t[e]()})})),r?(a.callbak=r,o.on(l,r),a):null}function n(e){var t=e.source,n=e.eventType,i=e.callbak;t.off(n,i)}function i(e){var t=o.getComponent(e);return t||(t=$("#"+e),t.length||(t=null)),t}function r(){}var a=/^#(.*):(.*)$/,o=require("bui/component/manage");return r.ATTRS={depends:{},dependencesMap:{shared:!1,value:{}}},r.prototype={__syncUI:function(){this.initDependences()},initDependences:function(){var e=this,t=e.get("depends");BUI.each(t,function(t,n){e.addDependence(n,t)})},addDependence:function(e,n){var i,r=this,a=r.get("dependencesMap");r.removeDependence(e),i=t(r,e,n),i&&(a[e]=i)},removeDependence:function(e){var t=this,i=t.get("dependencesMap"),r=i[e];r&&(n(r),delete i[e])},clearDependences:function(){var e=this,t=e.get("dependencesMap");BUI.each(t,function(e){n(e)}),e.set("dependencesMap",{})},__destructor:function(){this.clearDependences()}},r}),define("bui/component/uibase/bindable",function(){function e(){}return e.ATTRS={store:{},loadMask:{value:!1}},BUI.augment(e,{__bindUI:function(){var e=this,t=e.get("store"),n=e.get("loadMask");t&&(t.on("beforeload",function(t){e.onBeforeLoad(t),n&&n.show&&n.show()}),t.on("load",function(t){e.onLoad(t),n&&n.hide&&n.hide()}),t.on("exception",function(t){e.onException(t),n&&n.hide&&n.hide()}),t.on("add",function(t){e.onAdd(t)}),t.on("remove",function(t){e.onRemove(t)}),t.on("update",function(t){e.onUpdate(t)}),t.on("localsort",function(t){e.onLocalSort(t)}),t.on("filtered",function(t){e.onFiltered(t)}))},__syncUI:function(){var e=this,t=e.get("store");t&&t.hasData()&&e.onLoad()},onBeforeLoad:function(){},onLoad:function(){},onException:function(){},onAdd:function(){},onRemove:function(){},onUpdate:function(){},onLocalSort:function(){},onFiltered:function(){}}),e}),define("bui/component/view",["bui/component/manage","bui/component/uibase"],function(require){var e=require("bui/component/manage"),t=require("bui/component/uibase"),n=document,i=t.extend([t.TplView],{getComponentCssClassWithState:function(e){var t=this,n=t.get("ksComponentCss");return e=e||"",t.getCssClassWithPrefix(n.split(/\s+/).join(e+" ")+e)},getCssClassWithPrefix:e.getCssClassWithPrefix,getKeyEventTarget:function(){return this.get("el")},getContentElement:function(){return this.get("contentEl")||this.get("el")},getStatusCls:function(e){var t=this,n=t.get("statusCls"),i=n[e];return i||(i=t.getComponentCssClassWithState("-"+e)),i},renderUI:function(){var e=this;if(!e.get("srcNode")){var t=e.get("render"),i=e.get("el"),r=e.get("elBefore");r?i.insertBefore(r,void 0):t?i.appendTo(t,void 0):i.appendTo(n.body,void 0)}},createDom:function(){var e=this,t=e.get("contentEl"),n=e.get("el");e.get("srcNode")||(n=$("<"+e.get("elTagName")+">"),t&&n.append(t),e.setInternal("el",n)),n.addClass(e.getComponentCssClassWithState()),t||e.setInternal("contentEl",n)},_uiSetHighlighted:function(e){var t=this,n=t.getStatusCls("hover"),i=t.get("el");i[e?"addClass":"removeClass"](n)},_uiSetDisabled:function(e){var t=this,n=t.getStatusCls("disabled"),i=t.get("el");i[e?"addClass":"removeClass"](n).attr("aria-disabled",e),e&&t.get("highlighted")&&t.set("highlighted",!1),t.get("focusable")&&t.getKeyEventTarget().attr("tabIndex",e?-1:0)},_uiSetActive:function(e){var t=this,n=t.getStatusCls("active");t.get("el")[e?"addClass":"removeClass"](n).attr("aria-pressed",!!e)},_uiSetFocused:function(e){var t=this,n=t.get("el"),i=t.getStatusCls("focused");n[e?"addClass":"removeClass"](i)},_uiSetElAttrs:function(e){this.get("el").attr(e)},_uiSetElCls:function(e){this.get("el").addClass(e)},_uiSetElStyle:function(e){this.get("el").css(e)},_uiSetRole:function(e){e&&this.get("el").attr("role",e)},_uiSetWidth:function(e){this.get("el").width(e)
},_uiSetHeight:function(e){var t=this;t.get("el").height(e)},_uiSetContent:function(e){var t,n=this;n.get("srcNode")&&!n.get("rendered")||(t=n.get("contentEl"),"string"==typeof e?t.html(e):e&&t.empty().append(e))},_uiSetVisible:function(e){var t=this,n=t.get("el"),i=t.get("visibleMode");"visibility"===i?n.css("visibility",e?"visible":"hidden"):n.css("display",e?"":"none")},set:function(e,t){var n,r,a,o=this,l=o.__attrs[e];if(!l||!o.get("binded"))return i.superclass.set.call(this,e,t),o;var s=i.superclass.get.call(this,e);return $.isPlainObject(t)||BUI.isArray(t)||s!==t?(i.superclass.set.call(this,e,t),t=o.__attrVals[e],n={attrName:e,prevVal:s,newVal:t},r=BUI.ucfirst(e),a="_uiSet"+r,o[a]&&o[a](t,n),o):o},destructor:function(){var e=this.get("el");e&&e.remove()}},{xclass:"view",priority:0});return i.ATTRS={el:{setter:function(e){return $(e)}},elCls:{},elStyle:{},role:{},width:{},height:{},statusCls:{value:{}},elTagName:{value:"div"},elAttrs:{},content:{},elBefore:{},render:{},visible:{value:!0},visibleMode:{value:"display"},cachePosition:{},contentEl:{valueFn:function(){return this.get("el")}},prefixCls:{value:BUI.prefix},focusable:{value:!0},focused:{},active:{},disabled:{},highlighted:{}},i}),define("bui/component/loader",["bui/util"],function(require){"use strict";var e=require("bui/util"),t=require("bui/base"),n=function(e){n.superclass.constructor.call(this,e),this._init()};return n.ATTRS={url:{},target:{},hasLoad:{value:!1},autoLoad:{},lazyLoad:{},property:{},renderer:{value:function(e){return e}},loadMask:{value:!1},dataType:{value:"text"},ajaxOptions:{value:{type:"get",cache:!1}},params:{},appendParams:{},lastParams:{shared:!1,value:{}},callback:{},failure:{}},e.extend(n,t),e.augment(n,{isLoader:!0,_init:function(){var e=this,t=e.get("autoLoad"),n=e.get("params");e._initMask(),t?e.load(n):(e._initParams(),e._initLazyLoad())},_initLazyLoad:function(){var e=this,t=e.get("target"),n=e.get("lazyLoad");t&&n&&n.event&&t.on(n.event,function(){(!e.get("hasLoad")||n.repeat)&&e.load()})},_initMask:function(){var t=this,n=t.get("target"),i=t.get("loadMask");n&&i&&e.use("bui/mask",function(r){var a=$.isPlainObject(i)?i:{};i=new r.LoadMask(e.mix({el:n.get("el")},a)),t.set("loadMask",i)})},_initParams:function(){var t=this,n=t.get("lastParams"),i=t.get("params");e.mix(n,i)},load:function(t){var n=this,i=n.get("url"),r=n.get("ajaxOptions"),a=n.get("lastParams"),o=n.get("appendParams");t=t||a,t=e.merge(o,t),n.set("lastParams",t),i&&(n.onBeforeLoad(),n.set("hasLoad",!0),$.ajax(e.mix({dataType:n.get("dataType"),data:t,url:i,success:function(e){n.onload(e,t)},error:function(e,i,r){n.onException({jqXHR:e,textStatus:i,errorThrown:r},t)}},r)))},onBeforeLoad:function(){var e=this,t=e.get("loadMask");t&&t.show&&t.show()},onload:function(t,n){var i=this,r=i.get("loadMask"),a=i.get("property"),o=i.get("callback"),l=i.get("renderer"),s=i.get("target");e.isString(t)&&s.set(a,""),s.set(a,l.call(i,t)),r&&r.hide&&r.hide(),o&&o.call(this,t,n)},onException:function(e,t){var n=this,i=n.get("failure");i&&i.call(this,e,t)}}),n}),define("bui/component/controller",["bui/component/uibase","bui/component/manage","bui/component/view","bui/component/loader"],function(require){"use strict";function e(e,t,n){e.create();var i=e.getContentElement(),r=e.get("defaultChildClass");return t.xclass||t instanceof c||(t.xclass=t.xtype?r+"-"+t.xtype:r),t=BUI.Component.create(t,e),t.setInternal("parent",e),t.set("render",i),t.set("elBefore",n),t.create(void 0),t}function t(e){var t,i,r,a,o={},l=e.get("xview");t=e.getAttrs();for(r in t)t.hasOwnProperty(r)&&(i=t[r],i.view&&void 0!==(a=e.get(r))&&(o[r]=a));return delete o.autoRender,o.ksComponentCss=n(e),new l(o)}function n(e){for(var t,n=e.constructor,i=[];n&&n!==c;)t=a.getXClassByConstructor(n),t&&i.push(t),n=n.superclass&&n.superclass.constructor;return i.join(" ")}function i(e,t){var n=e.relatedTarget;return n&&(n===t[0]||$.contains(t,n))}var r=require("bui/component/uibase"),a=require("bui/component/manage"),o=require("bui/component/view"),l=require("bui/component/loader"),s=BUI.wrapBehavior,u=BUI.getWrapBehavior,c=r.extend([r.Decorate,r.Tpl,r.ChildCfg,r.KeyNav,r.Depends],{isController:!0,getCssClassWithPrefix:a.getCssClassWithPrefix,initializer:function(){var e=this;e.get("id")||e.set("id",e.getNextUniqueId()),a.addComponent(e.get("id"),e);var n=t(e);e.setInternal("view",n),e.__view=n},getNextUniqueId:function(){var e=this,t=a.getXClassByConstructor(e.constructor);return BUI.guid(t)},createDom:function(){var e=this,t=e.get("view");t.create(void 0)},renderUI:function(){var e=this,t=e.get("loader");e.get("view").render(),e._initChildren(),t&&e.setInternal("loader",t)},_initChildren:function(e){var t,e,n,i=this;for(e=e||i.get("children").concat(),i.get("children").length=0,t=0;t<e.length;t++)n=i.addChild(e[t]),n.render()},bindUI:function(){var e=this,t=e.get("events");this.on("afterVisibleChange",function(e){this.fire(e.newVal?"show":"hide")}),BUI.each(t,function(t,n){e.publish(n,{bubbles:t})})},containsElement:function(e){var t=this,n=t.get("el"),i=t.get("children"),r=!1;return t.get("rendered")?($.contains(n[0],e)||n[0]===e?r=!0:BUI.each(i,function(t){return t.containsElement(e)?(r=!0,!1):void 0}),r):!1},isChildrenElement:function(e){var t=this,n=t.get("children"),i=!1;return BUI.each(n,function(t){return t.containsElement(e)?(i=!0,!1):void 0}),i},show:function(){var e=this;return e.render(),e.set("visible",!0),e},hide:function(){var e=this;return e.set("visible",!1),e},toggle:function(){return this.set("visible",!this.get("visible")),this},_uiSetFocusable:function(e){var t,n=this,i=n.getKeyEventTarget();e?i.attr("tabIndex",0).attr("hideFocus",!0).on("focus",s(n,"handleFocus")).on("blur",s(n,"handleBlur")).on("keydown",s(n,"handleKeydown")).on("keyup",s(n,"handleKeyUp")):(i.removeAttr("tabIndex"),(t=u(n,"handleFocus"))&&i.off("focus",t),(t=u(n,"handleBlur"))&&i.off("blur",t),(t=u(n,"handleKeydown"))&&i.off("keydown",t),(t=u(n,"handleKeyUp"))&&i.off("keyup",t))},_uiSetHandleMouseEvents:function(e){var t,n=this,i=n.get("el");e?i.on("mouseenter",s(n,"handleMouseEnter")).on("mouseleave",s(n,"handleMouseLeave")).on("contextmenu",s(n,"handleContextMenu")).on("mousedown",s(n,"handleMouseDown")).on("mouseup",s(n,"handleMouseUp")).on("dblclick",s(n,"handleDblClick")):(t=u(n,"handleMouseEnter")&&i.off("mouseenter",t),t=u(n,"handleMouseLeave")&&i.off("mouseleave",t),t=u(n,"handleContextMenu")&&i.off("contextmenu",t),t=u(n,"handleMouseDown")&&i.off("mousedown",t),t=u(n,"handleMouseUp")&&i.off("mouseup",t),t=u(n,"handleDblClick")&&i.off("dblclick",t))},_uiSetFocused:function(e){e&&this.getKeyEventTarget()[0].focus()},_uiSetVisible:function(e){var t=this,n=(t.get("el"),t.get("visibleMode"));if("visibility"===n){if(e){var i=t.get("cachePosition");i&&t.set("xy",i)}if(!e){var i=[t.get("x"),t.get("y")];t.set("cachePosition",i),t.set("xy",[-999,-999])}}},_uiSetChildren:function(e){var t=this,n=BUI.cloneObject(e);t._initChildren(n)},enable:function(){return this.set("disabled",!1),this},disable:function(){return this.set("disabled",!0),this},focus:function(){this.get("focusable")&&this.set("focused",!0)},getContentElement:function(){return this.get("view").getContentElement()},getKeyEventTarget:function(){return this.get("view").getKeyEventTarget()},addChild:function(t,n){var i,r=this,a=r.get("children");return void 0===n&&(n=a.length),r.fire("beforeAddChild",{child:t,index:n}),i=a[n]&&a[n].get("el")||null,t=e(r,t,i),a.splice(n,0,t),r.get("rendered")&&t.render(),r.fire("afterAddChild",{child:t,index:n}),t},remove:function(e){var t=this,n=t.get("parent");return n?n.removeChild(t,e):e&&t.destroy(),t},removeChild:function(e,t){var n=this,i=n.get("children"),r=BUI.Array.indexOf(e,i);if(-1!==r)return n.fire("beforeRemoveChild",{child:e,destroy:t}),-1!==r&&i.splice(r,1),t&&e.destroy&&e.destroy(),n.fire("afterRemoveChild",{child:e,destroy:t}),e},removeChildren:function(e){var t,n=this,i=[].concat(n.get("children"));for(t=0;t<i.length;t++)n.removeChild(i[t],e)},getChildAt:function(e){var t=this.get("children");return t[e]||null},getChild:function(e,t){return this.getChildBy(function(t){return t.get("id")===e},t)},getChildBy:function(e,t){return this.getChildrenBy(e,t)[0]||null},getAppendHeight:function(){var e=this.get("el");return e.outerHeight()-e.height()},getAppendWidth:function(){var e=this.get("el");return e.outerWidth()-e.width()},getChildrenBy:function(e,t){var n=this,i=[];return e?(n.eachChild(function(n){e(n)?i.push(n):t&&(i=i.concat(n.getChildrenBy(e,t)))}),i):i},eachChild:function(e){BUI.each(this.get("children"),e)},handleDblClick:function(e){this.performActionInternal(e),this.isChildrenElement(e.target)||this.fire("dblclick",{domTarget:e.target,domEvent:e})},handleMouseOver:function(e){var t=this,n=t.get("el");i(e,n)||t.handleMouseEnter(e)},handleMouseOut:function(e){var t=this,n=t.get("el");i(e,n)||t.handleMouseLeave(e)},handleMouseEnter:function(e){var t=this;this.set("highlighted",!!e),t.fire("mouseenter",{domTarget:e.target,domEvent:e})},handleMouseLeave:function(e){var t=this;t.set("active",!1),t.set("highlighted",!e),t.fire("mouseleave",{domTarget:e.target,domEvent:e})},handleMouseDown:function(e){var t,n,i=this,r=($(e.target),1===e.which);r&&(n=i.getKeyEventTarget(),i.get("activeable")&&i.set("active",!0),i.get("focusable")&&i.setInternal("focused",!0),i.get("allowTextSelection")||(t=e.target.nodeName,t=t&&t.toLowerCase(),"input"!==t&&"textarea"!==t&&e.preventDefault()),i.isChildrenElement(e.target)||i.fire("mousedown",{domTarget:e.target,domEvent:e}))},handleMouseUp:function(e){var t=this,n=t.isChildrenElement(e.target);t.get("active")&&1===e.which&&(t.performActionInternal(e),t.set("active",!1),n||t.fire("click",{domTarget:e.target,domEvent:e})),n||t.fire("mouseup",{domTarget:e.target,domEvent:e})},handleContextMenu:function(){},handleFocus:function(e){this.set("focused",!!e),this.fire("focus",{domEvent:e,domTarget:e.target})},handleBlur:function(e){this.set("focused",!e),this.fire("blur",{domEvent:e,domTarget:e.target})},handleKeyEventInternal:function(e){var t=this,n=t.isChildrenElement(e.target);return 13===e.which?(n||t.fire("click",{domTarget:e.target,domEvent:e}),this.performActionInternal(e)):void(n||t.fire("keydown",{domTarget:e.target,domEvent:e}))},handleKeydown:function(e){var t=this;return t.handleKeyEventInternal(e)?(e.halt(),!0):void 0},handleKeyUp:function(e){var t=this;t.isChildrenElement(e.target)||t.fire("keyup",{domTarget:e.target,domEvent:e})},performActionInternal:function(){},destructor:function(){var e,t,n=this,i=n.get("children");for(e=n.get("id"),t=0;t<i.length;t++)i[t].destroy&&i[t].destroy();n.get("view").destroy(),a.removeComponent(e)},set:function(e,t,n){var i,r,a,o=this,l=o.__view,s=o.__attrs[e];if(BUI.isObject(e)&&(n=t,BUI.each(e,function(e,t){o.set(t,e,n)})),!l||!s||n&&n.silent)return c.superclass.set.call(this,e,t,n),o;var u=c.superclass.get.call(this,e);return $.isPlainObject(t)||BUI.isArray(t)||u!==t?(i=BUI.ucfirst(e),a="_uiSet"+i,o.fire("before"+i+"Change",{attrName:e,prevVal:u,newVal:t}),o.setInternal(e,t),t=o.__attrVals[e],l&&s.view&&l.set(e,t),r={attrName:e,prevVal:u,newVal:t},o.fire("after"+i+"Change",r),o.get("binded")&&o[a]&&o[a](t,r),o):o},get:function(e){var t=this,n=t.__view,i=t.__attrs[e],r=c.superclass.get.call(this,e);return void 0!==r?r:n&&i&&i.view?n.get(e):r}},{ATTRS:{content:{view:1},elTagName:{view:!0,value:"div"},defaultChildClass:{},xtype:{},id:{view:!0},width:{view:1},height:{view:1},elCls:{view:1},elStyle:{view:1},elAttrs:{view:1},elBefore:{view:1},el:{view:1},events:{value:{click:!0,dblclick:!0,mouseenter:!0,mouseleave:!0,keydown:!0,keyup:!0,focus:!1,blur:!1,mousedown:!0,mouseup:!0,show:!1,hide:!1}},render:{view:1},role:{view:1},statusCls:{view:!0,value:{}},visibleMode:{view:1,value:"display"},visible:{value:!0,view:1},handleMouseEvents:{value:!0},focusable:{value:!1,view:1},defaultLoaderCfg:{value:{property:"content",autoLoad:!0}},loader:{getter:function(e){var t,n=this;return e&&!e.isLoader&&(e.target=n,t=n.get("defaultLoaderCfg"),e=new l(BUI.merge(t,e)),n.setInternal("loader",e)),e}},allowTextSelection:{value:!0},activeable:{value:!0},focused:{view:1},active:{view:1},highlighted:{view:1},children:{sync:!1,shared:!1,value:[]},prefixCls:{value:BUI.prefix,view:1},parent:{setter:function(e){this.addTarget(e)}},disabled:{view:1,value:!1},xview:{value:o}},PARSER:{visible:function(e){var t=this,n=e.css("display"),i=e.css("visibility"),r=t.get("visibleMode");return"none"==n&&"display"==r||"hidden"==i&&"visibility"==r?!1:!0}}},{xclass:"controller",priority:0});return c}),define("bui/cookie",function(){function e(e){return"string"==typeof e&&""!==e}var t=document,n=864e5,i=encodeURIComponent,r=decodeURIComponent,a={get:function(n){var i,a;return e(n)&&(a=String(t.cookie).match(new RegExp("(?:^| )"+n+"(?:(?:=([^;]*))|;|$)")))&&(i=a[1]?r(a[1]):""),i},set:function(r,a,o,l,s,u){var c=String(i(a)),d=o;"number"==typeof d&&(d=new Date,d.setTime(d.getTime()+o*n)),d instanceof Date&&(c+="; expires="+d.toUTCString()),e(l)&&(c+="; domain="+l),e(s)&&(c+="; path="+s),u&&(c+="; secure"),t.cookie=r+"="+c},remove:function(e,t,n,i){this.set(e,"",-1,t,n,i)}};return BUI.Cookie=a,a}),function(){var e="bui/data/";define("bui/data",["bui/common",e+"sortable",e+"proxy",e+"abstractstore",e+"store",e+"node",e+"treestore"],function(t){var n=t("bui/common"),i=n.namespace("Data");return n.mix(i,{Sortable:t(e+"sortable"),Proxy:t(e+"proxy"),AbstractStore:t(e+"abstractstore"),Store:t(e+"store"),Node:t(e+"node"),TreeStore:t(e+"treestore")}),i})}(),define("bui/data/sortable",function(){var e="ASC",t=function(){};return t.ATTRS={compareFunction:{value:function(e,t){return void 0===e&&(e=""),void 0===t&&(t=""),BUI.isString(e)?e.localeCompare(t):e>t?1:e===t?0:-1}},sortField:{},sortDirection:{value:"ASC"},sortInfo:{getter:function(){var e=this,t=e.get("sortField");return{field:t,direction:e.get("sortDirection")}},setter:function(e){var t=this;t.set("sortField",e.field),t.set("sortDirection",e.direction)}}},BUI.augment(t,{compare:function(t,n,i,r){var a,o=this;return i=i||o.get("sortField"),r=r||o.get("sortDirection"),i&&r?(a=r===e?1:-1,o.get("compareFunction")(t[i],n[i])*a):1},getSortData:function(){},sortData:function(e,t,n){var i=this,n=n||i.getSortData();return BUI.isArray(e)&&(n=e,e=null),e=e||i.get("sortField"),t=t||i.get("sortDirection"),i.set("sortField",e),i.set("sortDirection",t),e&&t?(n.sort(function(n,r){return i.compare(n,r,e,t)}),n):n}}),t}),define("bui/data/proxy",["bui/data/sortable"],function(require){var e=require("bui/data/sortable"),t=function(e){t.superclass.constructor.call(this,e)};t.ATTRS={},BUI.extend(t,BUI.Base),BUI.augment(t,{_read:function(){},read:function(e,t,n){var i=this;n=n||i,i._read(e,function(e){t.call(n,e)})},_save:function(){},save:function(e,t,n,i){var r=this;i=i||r,r._save(e,t,function(e){n.call(i,e)})}});var n={READ:"read",ADD:"add",UPDATE:"update",REMOVE:"remove",SAVE_ALL:"all"},i=function(e){i.superclass.constructor.call(this,e)};i.ATTRS=BUI.mix(!0,t.ATTRS,{limitParam:{value:"limit"},startParam:{value:"start"},pageIndexParam:{value:"pageIndex"},saveTypeParam:{value:"saveType"},saveDataParam:{},pageStart:{value:0},dataType:{value:"json"},method:{value:"GET"},ajaxOptions:{value:{}},cache:{value:!1},save:{},url:{}}),BUI.extend(i,t),BUI.augment(i,{_processParams:function(e){var t=this,n=t.get("pageStart"),i=["start","limit","pageIndex"];null!=e.pageIndex&&(e.pageIndex=e.pageIndex+n),BUI.each(i,function(n){var i=t.get(n+"Param");i!==n&&(e[i]=e[n],delete e[n])})},_getUrl:function(e){var t,i=this,r=i.get("save");return e===n.READ?i.get("url"):r?BUI.isString(r)?r:(t=r[e+"Url"],t||(t=i.get("url")),t):i.get("url")},_getAppendParams:function(e){var t,i,r=this,a=null;return e==n.READ?a:(t=r.get("save"),i=r.get("saveTypeParam"),t&&!t[e+"Url"]&&(a={},a[i]=e),a)},_read:function(e,t){var i,r=this;e=BUI.cloneObject(e),r._processParams(e),i=r._getAjaxOptions(n.READ,e),r._ajax(i,t)},_getAjaxOptions:function(e,t){var n,i=this,r=i.get("ajaxOptions"),a=i._getUrl(e);return BUI.mix(t,i._getAppendParams(e)),n=BUI.merge({url:a,type:i.get("method"),dataType:i.get("dataType"),data:t,cache:i.get("cache")},r)},_ajax:function(e,t){var n=e.success,i=e.error;e.success=function(e){n&&n(e),t(e)},e.error=function(e,n,r){i&&i(e,n,r);var a={exception:{status:n,errorThrown:r,jqXHR:e}};t(a)},$.ajax(e)},_save:function(e,t,n){var i,r=this;i=r._getAjaxOptions(e,t),r._ajax(i,n)}});var r=function(e){r.superclass.constructor.call(this,e)};return r.ATTRS={matchFields:{value:[]}},BUI.extend(r,t),BUI.mixin(r,[e]),BUI.augment(r,{_read:function(e,t){var n=this,i=(e.pageable,e.start),r=e.sortField,a=e.sortDirection,o=e.limit,l=n.get("data"),s=[];l=n._getMatches(e),n.sortData(r,a),o?(s=l.slice(i,i+o),t({rows:s,results:l.length})):(s=l.slice(i),t(s))},_getMatchFn:function(e,t){return function(n){var i=!0;return BUI.each(t,function(t){return null!=e[t]&&e[t]!==n[t]?(i=!1,!1):void 0}),i}},_getMatches:function(e){var t,n=this,i=n.get("matchFields"),r=n.get("data")||[];return e&&i.length&&(t=n._getMatchFn(e,i),r=BUI.Array.filter(r,t)),r},_save:function(e,t){var i=this,r=i.get("data");e==n.ADD?r.push(t):e==n.REMOVE?BUI.Array.remove(r,t):e==n.SAVE_ALL&&(BUI.each(t.add,function(e){r.push(e)}),BUI.each(t.remove,function(e){BUI.Array.remove(r,e)}))}}),t.Ajax=i,t.Memery=r,t}),define("bui/data/abstractstore",["bui/common","bui/data/proxy"],function(require){function e(t){e.superclass.constructor.call(this,t),this._init()}var t=require("bui/common"),n=require("bui/data/proxy");return e.ATTRS={autoLoad:{value:!1},remoteFilter:{value:!1},lastParams:{shared:!1,value:{}},params:{},proxy:{shared:!1,value:{}},url:{},events:{value:["acceptchanges","load","beforeload","beforeprocessload","add","exception","remove","update","localsort","filtered"]},data:{setter:function(e){var t=this,n=t.get("proxy");n.set?n.set("data",e):n.data=e,t.set("autoLoad",!0)}}},t.extend(e,t.Base),t.augment(e,{isStore:!0,_init:function(){var e=this;e.beforeInit(),e._initParams(),e._initProxy(),e._initData()},beforeInit:function(){},_initData:function(){var e=this,t=e.get("autoLoad");t&&e.load()},_initParams:function(){var e=this,n=e.get("lastParams"),i=e.get("params");t.mix(n,i)},_initProxy:function(){var e=this,t=e.get("url"),i=e.get("proxy");i instanceof n||(t&&(i.url=t),i="ajax"===i.type||i.url?new n.Ajax(i):new n.Memery(i),e.set("proxy",i))},load:function(e,n){var i=this,r=i.get("proxy"),a=i.get("lastParams");t.mix(a,i.getAppendParams(),e),i.fire("beforeload",{params:a}),e=t.cloneObject(a),r.read(a,function(t){i.onLoad(t,e),n&&n(t,e)},i)},onFiltered:function(e,t){var n=this;n.fire("filtered",{data:e,filter:t})},onLoad:function(e,t){var n=this,i=n.processLoad(e,t);i&&n.afterProcessLoad(e,t)},getResult:function(){},filter:function(e){var t,n=this,i=n.get("remoteFilter");e=e||n.get("filter"),i?n.load({filter:e}):e&&(n.set("filter",e),n.getResult().length>0&&(t=n._filterLocal(e),n.onFiltered(t,e)))},_filterLocal:function(){},getFilterResult:function(){var e=this.get("filter");return e?this._filterLocal(e):this.getResult()},_clearLocalFilter:function(){this.set("filter",null)},clearFilter:function(){var e,t=this,n=t.get("remoteFilter");n?t.load({filter:""}):(t._clearLocalFilter(),e=t.getFilterResult(),t.onFiltered(e,null))},processLoad:function(e){var t=this,n=t.get("hasErrorProperty");return t.fire("beforeprocessload",{data:e}),t.fire("beforeProcessLoad",e),e[n]||e.exception?(t.onException(e),!1):!0},afterProcessLoad:function(){},onException:function(e){var t=this,n=t.get("errorProperty"),i={};e.exception?(i.type="exception",i[n]=e.exception):(i.type="error",i[n]=e[n]),t.fire("exception",i)},hasData:function(){},getAppendParams:function(){return{}}}),e}),define("bui/data/node",["bui/common"],function(require){function e(e,t){var i={};return t?(n.each(e,function(e,n){var r=t[n]||n;i[r]=e}),i.record=e):i=e,i}function t(t,i){t=e(t,i),n.mix(this,t)}var n=require("bui/common");return n.augment(t,{root:!1,leaf:null,text:"",id:null,loaded:!1,path:null,parent:null,level:0,record:null,children:null,isNode:!0}),t}),define("bui/data/treestore",["bui/common","bui/data/node","bui/data/abstractstore","bui/data/proxy"],function(require){function e(t){e.superclass.constructor.call(this,t)}var t=require("bui/common"),n=require("bui/data/node"),i=require("bui/data/proxy"),r=require("bui/data/abstractstore");return e.ATTRS={root:{},map:{},pidField:{},dataProperty:{value:"nodes"},events:{value:["add","update","remove","load"]}},t.extend(e,r),t.augment(e,{beforeInit:function(){this.initRoot()},_initData:function(){var e=this,t=e.get("autoLoad"),n=e.get("pidField"),i=e.get("proxy"),r=e.get("root");!i.get("url")&&n&&i.get("matchFields").push(n),t&&!r.children&&e.loadNode(r)},initRoot:function(){var e=this,t=e.get("map"),i=e.get("root");i||(i={}),i.isNode||(i=new n(i,t)),i.path=[i.id],i.level=0,i.children&&e.setChildren(i,i.children),e.set("root",i)},add:function(e,t,n){var i=this;return e=i._add(e,t,n),i.fire("add",{node:e,record:e,index:n}),e},_add:function(e,i,r){i=i||this.get("root");var a,o=this,l=o.get("map"),s=i.children;return e.isNode||(e=new n(e,l)),a=e.children||[],0==a.length&&null==e.leaf&&(e.leaf=!0),i&&(i.leaf=!1),e.parent=i,e.level=i.level+1,e.path=i.path.concat(e.id),r=null==r?i.children.length:r,t.Array.addAt(s,e,r),o.setChildren(e,a),e},remove:function(e){var n=e.parent||_self.get("root"),i=t.Array.indexOf(e,n.children);return t.Array.remove(n.children,e),0===n.children.length&&(n.leaf=!0),this.fire("remove",{node:e,record:e,index:i}),e.parent=null,e},setValue:function(e,t,n){var i=this;e[t]=n,i.fire("update",{node:e,record:e,field:t,value:n})},update:function(e){this.fire("update",{node:e,record:e})},getResult:function(){return this.get("root").children},setResult:function(e){var t=this,n=t.get("proxy"),r=t.get("root");n instanceof i.Memery?(t.set("data",e),t.load({id:r.id})):t.setChildren(r,e)},setChildren:function(e,n){var i=this;e.children=[],n.length&&t.each(n,function(t){i._add(t,e)})},findNode:function(e,t,n){return this.findNodeBy(function(t){return t.id===e},t,n)},findNodeBy:function(e,n,i){var r=this;if(i=null==i?!0:i,!n){var a=r.get("root");return e(a)?a:r.findNodeBy(e,a)}var o=n.children,l=null;return t.each(o,function(t){return e(t)?l=t:i&&(l=r.findNodeBy(e,t)),l?!1:void 0}),l},findNodesBy:function(e,n){var i=this,r=[];return n||(n=i.get("root")),t.each(n.children,function(t){e(t)&&r.push(t),r=r.concat(i.findNodesBy(e,t))}),r},findNodeByPath:function(e){if(!e)return null;var t,n,i=this,r=i.get("root"),a=e.split(","),o=a[0];if(!o)return null;if(t=r.id==o?r:i.findNode(o,r,!1)){for(n=1;n<a.length;n+=1){var o=a[n];if(t=i.findNode(o,t,!1),!t)break}return t}},contains:function(e,t){var n=this,i=n.findNode(e.id,t);return!!i},afterProcessLoad:function(e,n){var i=this,r=i.get("pidField"),a=n.id||n[r],o=i.get("dataProperty"),l=i.findNode(a)||i.get("root");t.isArray(e)?i.setChildren(l,e):i.setChildren(l,e[o]),l.loaded=!0,i.fire("load",{node:l,params:n})},hasData:function(){return this.get("root").children&&0!==this.get("root").children.length},isLoaded:function(e){var t=this.get("root");return e!=t||t.children?this.get("url")||this.get("pidField")?e.loaded||e.leaf||!(!e.children||!e.children.length):!0:!1},loadNode:function(e,t){var n,i=this,r=i.get("pidField");(t||!i.isLoaded(e))&&(n={id:e.id},r&&(n[r]=e.id),i.load(n))},reloadNode:function(e){var t=this;e=e||t.get("root"),e.loaded=!1,t.loadNode(e,!0)},loadPath:function(e){var t=this,n=e.split(","),i=n[0];t.findNodeByPath(e)||t.load({id:i,path:e})}}),e}),define("bui/data/store",["bui/data/proxy","bui/data/abstractstore","bui/data/sortable"],function(require){function e(e,t){if(!(0>e)){var n=t,i=n[e];return n.splice(e,1),i}}function t(t,n){var i=BUI.Array.indexOf(t,n);i>=0&&e(i,n)}function n(e,t){return-1!==BUI.Array.indexOf(e,t)}var i=require("bui/data/proxy"),r=require("bui/data/abstractstore"),a=require("bui/data/sortable"),o=function(e){o.superclass.constructor.call(this,e)};return o.ATTRS={autoSync:{value:!1},currentPage:{value:0},deletedRecords:{shared:!1,value:[]},errorProperty:{value:"error"},hasErrorProperty:{value:"hasError"},matchFunction:{value:function(e,t){return e==t}},modifiedRecords:{shared:!1,value:[]},newRecords:{shared:!1,value:[]},remoteSort:{value:!1},resultMap:{shared:!1,value:{}},root:{value:"rows"},rowCount:{value:0},totalProperty:{value:"results"},start:{value:0},pageSize:{}},BUI.extend(o,r),BUI.mixin(o,[a]),BUI.augment(o,{add:function(e,t,n){var i=this,r=i.getCount();i.addAt(e,r,t,n)},addAt:function(e,n,i,r){var a=this;r=r||a._getDefaultMatch(),BUI.isArray(e)||(e=[e]),$.each(e,function(e,o){i&&a.contains(o,r)||(a._addRecord(o,e+n),a.get("newRecords").push(o),t(o,a.get("deletedRecords")),t(o,a.get("modifiedRecords")))})},contains:function(e,t){return-1!==this.findIndexBy(e,t)},find:function(e,t){var n=this,i=null,r=n.getResult();return $.each(r,function(n,r){return r[e]===t?(i=r,!1):void 0}),i},findAll:function(e,t){var n=this,i=[],r=n.getResult();return $.each(r,function(n,r){r[e]===t&&i.push(r)}),i},findByIndex:function(e){return this.getResult()[e]},findIndexBy:function(e,t){var n=this,i=-1,r=n.getResult();return t=t||n._getDefaultMatch(),null===e||void 0===e?-1:($.each(r,function(n,r){return t(e,r)?(i=n,!1):void 0}),i)},findNextRecord:function(e){var t=this,n=t.findIndexBy(e);return n>=0?t.findByIndex(n+1):void 0},getCount:function(){return this.getResult().length},getTotalCount:function(){var e=this,t=e.get("resultMap"),n=e.get("totalProperty");return parseInt(t[n],10)||0},getResult:function(){var e=this,t=e.get("resultMap"),n=e.get("root");return t[n]},hasData:function(){return 0!==this.getCount()},setResult:function(e){var t=this,n=t.get("proxy");n instanceof i.Memery?(t.set("data",e),t.load({start:0})):(t._setResult(e),t.get("filter")&&t.filter())},remove:function(i,r){var a=this;r=r||a._getDefaultMatch(),BUI.isArray(i)||(i=[i]),$.each(i,function(i,o){var i=a.findIndexBy(o,r),l=e(i,a.getResult());n(l,a.get("newRecords"))||n(l,a.get("deletedRecords"))||a.get("deletedRecords").push(l),t(l,a.get("newRecords")),t(l,a.get("modifiedRecords")),a.fire("remove",{record:l})})},save:function(e,t,n){var i=this,r=i.get("proxy");BUI.isFunction(e)&&(n=e,e=void 0),BUI.isObject(e)&&(n=t,t=e,e=void 0),e||(e=i._getSaveType(t)),"all"!=e||t||(t=i._getDirtyData()),i.fire("beforesave",{type:e,saveData:t}),r.save(e,t,function(r){i.onSave(e,t,r),n&&n(r,t)},i)},_getSaveType:function(e){var t=this;return e?BUI.Array.contains(e,t.get("newRecords"))?"add":BUI.Array.contains(e,t.get("modifiedRecords"))?"update":BUI.Array.contains(e,t.get("deletedRecords"))?"remove":"custom":"all"},_getDirtyData:function(){var e=this,t=e.get("proxy");return t.get("url")?{add:BUI.JSON.stringify(e.get("newRecords")),update:BUI.JSON.stringify(e.get("modifiedRecords")),remove:BUI.JSON.stringify(e.get("deletedRecords"))}:{add:e.get("newRecords"),update:e.get("modifiedRecords"),remove:e.get("deletedRecords")}},onSave:function(e,t,n){var i=this,r=i.get("hasErrorProperty");return n[r]||n.exception?void i.onException(n):(i._clearDirty(e,t),i.fire("saved",{type:e,saveData:t,data:n}),void(i.get("autoSync")&&i.load()))},_clearDirty:function(e,t){function n(e,t){BUI.Array.remove(i.get(t),e)}var i=this;switch(e){case"all":i._clearChanges();break;case"add":n(t,"newRecords");break;case"update":n(t,"modifiedRecords");break;case"remove":n(t,"deletedRecords")}},sort:function(e,t){var n=this,i=n.get("remoteSort");i?(n.set("sortField",e),n.set("sortDirection",t),n.load(n.get("sortInfo"))):n._localSort(e,t)},sum:function(e,t){var n=this,i=t||n.getResult(),r=0;return BUI.each(i,function(t){var n=t[e];isNaN(n)||(r+=parseFloat(n))}),r},setValue:function(e,t,i){var r=e,a=this;r[t]=i,n(r,a.get("newRecords"))||n(r,a.get("modifiedRecords"))||a.get("modifiedRecords").push(r),a.fire("update",{record:r,field:t,value:i})},update:function(e,t,i){var r=e,a=this,i=null,o=null;t&&(i=i||a._getDefaultMatch(),o=a.findIndexBy(e,i),o>=0&&(r=a.getResult()[o])),r=BUI.mix(r,e),n(r,a.get("newRecords"))||n(r,a.get("modifiedRecords"))||a.get("modifiedRecords").push(r),a.fire("update",{record:r})},_addRecord:function(e,t){var n=this.getResult();void 0==t&&(t=n.length),n.splice(t,0,e),this.fire("add",{record:e,index:t})},_clearChanges:function(){var e=this;BUI.Array.empty(e.get("newRecords")),BUI.Array.empty(e.get("modifiedRecords")),BUI.Array.empty(e.get("deletedRecords"))},_filterLocal:function(e,t){var n=this,i=[];return t=t||n.getResult(),e?(BUI.each(t,function(t){e(t)&&i.push(t)}),i):t},_getDefaultMatch:function(){return this.get("matchFunction")},_getPageParams:function(){var e=this,t=e.get("sortInfo"),n=e.get("start"),i=e.get("pageSize"),r=e.get("pageIndex")||(i?n/i:0);return params={start:n,limit:i,pageIndex:r},e.get("remoteSort")&&BUI.mix(params,t),params},getAppendParams:function(){return this._getPageParams()},beforeInit:function(){this._setResult([])},_localSort:function(e,t){var n=this;n._sortData(e,t),n.fire("localsort",{field:e,direction:t})},_sortData:function(e,t,n){var i=this;n=n||i.getResult(),i.sortData(e,t,n)},afterProcessLoad:function(e,t){var n=this,i=n.get("root"),r=t.start,a=t.limit,o=n.get("totalProperty");BUI.isArray(e)?n._setResult(e):n._setResult(e[i],e[o]),n.set("start",r),a&&n.set("pageIndex",r/a),n.get("remoteSort")||n._sortData(),n.fire("load",{params:t}),!n.get("remoteFilter")&&n.get("filter")&&n.filter(n.get("filter"))},_setResult:function(e,t){var n=this,i=n.get("resultMap");t=t||e.length,i[n.get("root")]=e,i[n.get("totalProperty")]=t,n._clearChanges()}}),o}),define("bui/overlay",["bui/common","bui/overlay/overlay","bui/overlay/dialog","bui/overlay/message"],function(require){var e=require("bui/common"),t=e.namespace("Overlay");return e.mix(t,{Overlay:require("bui/overlay/overlay"),Dialog:require("bui/overlay/dialog"),Message:require("bui/overlay/message")}),e.mix(t,{OverlayView:t.Overlay.View,DialogView:t.Dialog.View}),e.Message=e.Overlay.Message,t}),define("bui/overlay/overlay",["bui/common"],function(require){var e=require("bui/common"),t=e.Component,n="x-align-arrow",i=t.UIBase,r=t.View.extend([i.PositionView,i.CloseView]),a=t.Controller.extend([i.Position,i.Align,i.Close,i.AutoShow,i.AutoHide],{renderUI:function(){var e=this,t=e.get("el"),n=e.get("arrowContainer"),i=n?t.one(n):t;e.get("showArrow")&&$(e.get("arrowTpl")).appendTo(i)},show:function(){function e(){"visibility"===r?i.css({display:"block"}):t.set("visible",!0),n.callback&&n.callback.call(t);var e=t.get("autoHideDelay"),a=t.get("delayHandler");e&&(a&&clearTimeout(a),a=setTimeout(function(){t.hide(),t.set("delayHandler",null)},e),t.set("delayHandler",a))}var t=this,n=t.get("effect"),i=t.get("el"),r=t.get("visibleMode"),a=n.effect,o=n.duration;switch(t.get("rendered")||(t.set("visible",!0),t.render(),t.set("visible",!1),i=t.get("el")),"visibility"===r&&(t.set("visible",!0),i.css({display:"none"})),a){case"linear":i.show(o,e);break;case"fade":i.fadeIn(o,e);break;case"slide":i.slideDown(o,e);break;default:e()}},hide:function(){function e(){"visibility"===t.get("visibleMode")&&i.css({display:"block"}),t.set("visible",!1),n.callback&&n.callback.call(t)}var t=this,n=t.get("effect"),i=t.get("el"),r=n.effect,a=n.duration;switch(r){case"linear":i.hide(a,e);break;case"fade":i.fadeOut(a,e);break;case"slide":i.slideUp(a,e);break;default:e()}}},{ATTRS:{effect:{value:{effect:"none",duration:0,callback:null}},autoHideDelay:{},closeable:{value:!1},showArrow:{value:!1},arrowContainer:{view:!0},arrowTpl:{value:'<s class="'+n+'"><s class="'+n+'-inner"></s></s>'},visibleMode:{value:"visibility"},visible:{value:!1},xview:{value:r}}},{xclass:"overlay"});return a.View=r,a}),define("bui/overlay/dialog",["bui/overlay/overlay"],function(require){var e=require("bui/overlay/overlay"),t=BUI.Component.UIBase,n="header-title",i=BUI.prefix,r=20,a=e.View.extend([t.StdModView,t.MaskView],{getContentElement:function(){return this.get("body")},_uiSetTitle:function(e){var t=this,i=t.get("el");i.find("."+n).html(e)},_uiSetContentId:function(e){var t=this,n=t.get("body"),i=$("#"+e).children();
i.appendTo(n)},_uiSetHeight:function(e){var t=this,n=e,i=t.get("header"),a=t.get("body"),o=t.get("footer");n-=i.outerHeight()+o.outerHeight(),n-=2*r,a.height(n)},_removeContent:function(){var e=this,t=e.get("body"),n=e.get("contentId");n?t.children().appendTo($("#"+n)):t.children().remove()}},{xclass:"dialog-view"}),o=e.extend([t.StdMod,t.Mask,t.Drag],{show:function(){var e=this;o.superclass.show.call(this),e.center()},bindUI:function(){var e=this;e.on("closeclick",function(){return e.onCancel()})},onCancel:function(){var e=this,t=e.get("cancel");return t.call(this)},_uiSetButtons:function(e){var t=this,n=t.get("footer");n.children().remove(),BUI.each(e,function(e){t._createButton(e,n)})},_createButton:function(e,t){var n=this,i='<button class="'+e.elCls+'">'+e.text+"</button>",r=$(i).appendTo(t);r.on("click",function(){e.handler.call(n,n,this)})},destructor:function(){var e=this,t=e.get("contentId"),n=e.get("body"),i=e.get("closeAction");"destroy"==i&&(e.hide(),t&&n.children().appendTo("#"+t))}},{ATTRS:{closeTpl:{view:!0,value:'<a tabindex="0" href=javascript:void("\u5173\u95ed") role="button" class="'+i+'ext-close" style=""><span class="'+i+'ext-close-x x-icon x-icon-normal">\xd7</span></a>'},buttons:{value:[{text:"\u786e\u5b9a",elCls:"button button-primary",handler:function(){var e=this,t=e.get("success");t&&t.call(e)}},{text:"\u53d6\u6d88",elCls:"button button-primary",handler:function(){this.onCancel()!==!1&&this.close()}}]},contentId:{view:!0},success:{value:function(){this.close()}},cancel:{value:function(){}},dragNode:{valueFn:function(){return this.get("header")}},defaultLoaderCfg:{valueFn:function(){var e=this;return{property:"bodyContent",autoLoad:!1,lazyLoad:{event:"show"},loadMask:{el:e.get("body")}}}},title:{view:!0,value:""},mask:{value:!0},maskShared:{value:!1},headerContent:{value:'<div class="'+n+'">\u6807\u9898</div>'},footerContent:{},closeable:{value:!0},xview:{value:a}}},{xclass:"dialog"});return o.View=a,o}),define("bui/overlay/message",["bui/overlay/dialog"],function(require){function e(e,n){return function(r,a,o){BUI.isString(a)&&(o=a,a=null),o=o||n,a=a||i,t({buttons:e,icon:o,msg:r,success:a})}}function t(e){r||(r=new s({icon:"info",title:""})),r.set(e),r.show()}function n(){var e=this,t=e.get("success");t&&(t.call(e),e.hide())}function i(){this.hide()}var r,a=require("bui/overlay/dialog"),o=BUI.prefix,l={info:"i",error:"\xd7",success:'<i class="icon-ok icon-white"></i>',question:"?",warning:"!"},s=a.extend({renderUI:function(){this._setContent()},bindUI:function(){var e=this,t=e.get("body");e.on("afterVisibleChange",function(n){if(n.newVal&&BUI.UA.ie<8){var i=t.outerWidth();6==BUI.UA.ie&&(i=i>350?350:i),e.get("header").width(i-20),e.get("footer").width(i)}})},_setContent:function(){var e=this,t=e.get("body"),n=BUI.substitute(e.get("contentTpl"),{msg:e.get("msg"),iconTpl:e.get("iconTpl")});t.empty(),$(n).appendTo(t)},_uiSetIcon:function(){this.get("rendered")&&this._setContent()},_uiSetMsg:function(){this.get("rendered")&&this._setContent()}},{ATTRS:{icon:{},msg:{},iconTpl:{getter:function(){var e=this,t=e.get("icon");return'<div class="x-icon x-icon-'+t+'">'+l[t]+"</div>"}},contentTpl:{value:'{iconTpl}<div class="'+o+'message-content">{msg}</div>'}}},{xclass:"message",priority:0}),u=e([{text:"\u786e\u5b9a",elCls:"button button-primary",handler:n}],"info"),c=e([{text:"\u786e\u5b9a",elCls:"button button-primary",handler:n},{text:"\u53d6\u6d88",elCls:"button button-primary",handler:i}],"question");return s.Alert=u,s.Confirm=c,s.Show=t,s}),function(){var e="bui/list/";define("bui/list",["bui/common",e+"list",e+"listitem",e+"simplelist",e+"listbox"],function(t){var n=t("bui/common"),i=n.namespace("List");return n.mix(i,{List:t(e+"list"),ListItem:t(e+"listitem"),SimpleList:t(e+"simplelist"),Listbox:t(e+"listbox")}),n.mix(i,{ListItemView:i.ListItem.View,SimpleListView:i.SimpleList.View}),i})}(),define("bui/list/domlist",["bui/common"],function(require){"use strict";function e(e,t){var n=t,i=n.get("itemCls"),r=n.get("itemStatusCls");return r&&r[e]?r[e]:i+"-"+e}function t(t,i){var a=t.attributes,o=i.get("itemStatusFields"),l={};return n.each(a,function(e){var t=e.nodeName;-1!==t.indexOf(r)&&(t=t.replace(r,""),l[t]=e.nodeValue)}),l.text=$(t).text(),n.each(o,function(n,r){var a=e(r,i);$(t).hasClass(a)&&(l[n]=!0)}),l}var n=require("bui/common"),i=n.Component.UIBase.Selection,r="data-",a=n.Component.UIBase.List,o=function(){};o.ATTRS={items:{}},o.prototype={clearControl:function(){var e=this,t=e.getItemContainer(),n=e.get("itemCls");t.find("."+n).remove()},addItem:function(e,t){return this._createItem(e,t)},getItems:function(){var e=this,t=e.getAllElements(),i=[];return n.each(t,function(t){i.push(e.getItemByElement(t))}),i},updateItem:function(e){var t,i=this,r=i.getItems(),a=n.Array.indexOf(e,r),o=null;return a>=0&&(o=i.findElement(e),t=i.getItemTpl(e,a),o&&$(o).html($(t).html())),o},removeItem:function(e,t){t=t||this.findElement(e),$(t).remove()},getItemContainer:function(){var e=this.get("itemContainer");return e.length?e:this.get("el")},getItemTpl:function(e,t){var i=this,r=i.get("itemTplRender"),a=i.get("itemTpl");return r?r(e,t):n.substitute(a,e)},_createItem:function(e,t){var n=this,i=n.getItemContainer(),r=n.get("itemCls"),a=n.get("dataField"),o=n.getItemTpl(e,t),l=$(o);if(void 0!==t){var s=i.find("."+r)[t];s?l.insertBefore(s):l.appendTo(i)}else l.appendTo(i);return l.addClass(r),l.data(a,e),l},getItemStatusCls:function(t){return e(t,this)},setItemStatusCls:function(e,t,n){var i=this,r=i.getItemStatusCls(e),a=n?"addClass":"removeClass";t&&$(t)[a](r)},hasStatus:function(e,t){var n=this,i=n.getItemStatusCls(e);return $(t).hasClass(i)},setItemSelected:function(e,t,n){var i=this;n=n||i.findElement(e),i.setItemStatusCls("selected",n,t)},getAllElements:function(){var e=this,t=e.get("itemCls"),n=e.get("el");return n.find("."+t)},getItemByElement:function(e){var t=this,n=t.get("dataField");return $(e).data(n)},getFirstElementByStatus:function(e){var t=this,n=t.getItemStatusCls(e),i=t.get("el");return i.find("."+n)[0]},getElementsByStatus:function(e){var t=this,n=t.getItemStatusCls(e),i=t.get("el");return i.find("."+n)},getSelectedElements:function(){var e=this,t=e.getItemStatusCls("selected"),n=e.get("el");return n.find("."+t)},findElement:function(e){var t=this,i=t.getAllElements(),r=null;return n.each(i,function(n){return t.getItemByElement(n)==e?(r=n,!1):void 0}),r},isElementSelected:function(e){var t=this,n=t.getItemStatusCls("selected");return e&&$(e).hasClass(n)}};var l=function(){};return l.ATTRS=n.merge(!0,a.ATTRS,i.ATTRS,{dataField:{view:!0,value:"data-item"},itemContainer:{view:!0},itemStatusFields:{value:{}},itemCls:{view:!0},cancelSelected:{value:!1},textGetter:{},defaultLoaderCfg:{value:{property:"items",dataType:"json"}},events:{value:{itemrendered:!0,itemremoved:!0,itemupdated:!0,itemsshow:!1,beforeitemsshow:!1,itemsclear:!1,itemdblclick:!1,beforeitemsclear:!1}}}),l.PARSER={items:function(e){var i=this,r=[],a=i.get("itemCls"),o=i.get("dataField"),l=e.find("."+a);return l.length||(l=e.children(),l.addClass(a)),n.each(l,function(e){var n=t(e,i);r.push(n),$(e).data(o,n)}),r}},n.augment(l,a,i,{_uiSetItems:function(e){var t=this;(!t.get("srcNode")||t.get("rendered"))&&this.setItems(e)},__bindUI:function(){function e(e,n){var i,r=t.get("multipleSelect");i=t.isItemSelected(e,n),i?r?t.setItemSelected(e,!1,n):t.get("cancelSelected")&&t.setSelected(null):(r||t.clearSelected(),t.setItemSelected(e,!0,n))}var t=this,n=t.get("selectedEvent"),i=t.get("itemCls"),r=t.get("view").getItemContainer();r.delegate("."+i,"click",function(i){if(!t.get("disabled")){var r=$(i.currentTarget),a=t.getItemByElement(r);if(!t.isItemDisabled(a,r)){var o=t.fire("itemclick",{item:a,element:r[0],domTarget:i.target,domEvent:i});o!==!1&&"click"==n&&t.isItemSelectable(a)&&e(a,r)}}}),"click"!==n&&r.delegate("."+i,n,function(n){if(!t.get("disabled")){var i=$(n.currentTarget),r=t.getItemByElement(i);t.isItemDisabled(r,i)||t.isItemSelectable(r)&&e(r,i)}}),r.delegate("."+i,"dblclick",function(e){if(!t.get("disabled")){var n=$(e.currentTarget),i=t.getItemByElement(n);t.isItemDisabled(i,n)||t.fire("itemdblclick",{item:i,element:n[0],domTarget:e.target})}}),t.on("itemrendered itemupdated",function(e){var n=e.item,i=e.element;t._syncItemStatus(n,i)})},getValueByField:function(e,t){return e&&e[t]},_syncItemStatus:function(e,t){var i=this,r=i.get("itemStatusFields");n.each(r,function(n,r){null!=e[n]&&i.get("view").setItemStatusCls(r,t,e[n])})},getStatusValue:function(e,t){var n=this,i=n.get("itemStatusFields"),r=i[t];return e[r]},getCount:function(){var e=this.getItems();return e?e.length:0},getStatusField:function(e){var t=this,n=t.get("itemStatusFields");return n[e]},setStatusValue:function(e,t,n){var i=this,r=i.get("itemStatusFields"),a=r[t];a&&(e[a]=n)},getItemText:function(e){var t=this,n=t.get("textGetter");return e?n?n(e):$(t.findElement(e)).text():""},removeItem:function(e){var t,i=this,r=i.get("items"),a=i.findElement(e);t=n.Array.indexOf(e,r),-1!==t&&r.splice(t,1),i.get("view").removeItem(e,a),i.fire("itemremoved",{item:e,domTarget:$(a)[0],element:a})},addItemAt:function(e,t){var n=this,i=n.get("items");return void 0===t&&(t=i.length),i.splice(t,0,e),n.addItemToView(e,t),e},addItemToView:function(e,t){var n=this,i=n.get("view").addItem(e,t);return n.fire("itemrendered",{item:e,domTarget:$(i)[0],element:i}),i},updateItem:function(e){var t=this,n=t.get("view").updateItem(e);t.fire("itemupdated",{item:e,domTarget:$(n)[0],element:n})},setItems:function(e){var t=this;e!=t.getItems()&&t.setInternal("items",e),t.clearControl(),t.fire("beforeitemsshow"),n.each(e,function(e,n){t.addItemToView(e,n)}),t.fire("itemsshow")},getItems:function(){return this.get("items")},getItemByElement:function(e){return this.get("view").getItemByElement(e)},getSelected:function(){var e=this,t=e.get("view").getFirstElementByStatus("selected");return e.getItemByElement(t)||null},getItemsByStatus:function(e){var t=this,i=t.get("view").getElementsByStatus(e),r=[];return n.each(i,function(e){r.push(t.getItemByElement(e))}),r},findElement:function(e){var t=this;return n.isString(e)&&(e=t.getItem(e)),this.get("view").findElement(e)},findItemByField:function(e,t){var i=this,r=i.get("items"),a=null;return n.each(r,function(n){return null!=n[e]&&n[e]==t?(a=n,!1):void 0}),a},setItemSelectedStatus:function(e,t,n){var i=this;n=n||i.findElement(e),i.setItemStatus(e,"selected",t,n)},setAllSelection:function(){var e=this,t=e.getItems();e.setSelection(t)},isItemSelected:function(e,t){var n=this;return t=t||n.findElement(e),n.get("view").isElementSelected(t)},isItemDisabled:function(e,t){return this.hasStatus(e,"disabled",t)},setItemDisabled:function(e,t){var n=this;n.setItemStatus(e,"disabled",t)},getSelection:function(){var e=this,t=e.get("view").getSelectedElements(),i=[];return n.each(t,function(t){i.push(e.getItemByElement(t))}),i},clearControl:function(){this.fire("beforeitemsclear"),this.get("view").clearControl(),this.fire("itemsclear")},hasStatus:function(e,t,n){if(!e)return!1;{var i=this;i.getStatusField(t)}return n=n||i.findElement(e),i.get("view").hasStatus(t,n)},setItemStatus:function(e,t,n,i){var r=this;e&&(i=i||r.findElement(e)),r.isItemDisabled(e,i)&&"disabled"!==t||(e&&("disabled"===t&&n&&r.clearItemStatus(e),r.setStatusValue(e,t,n),r.get("view").setItemStatusCls(t,i,n),r.fire("itemstatuschange",{item:e,status:t,value:n,element:i})),"selected"===t&&r.afterSelected(e,n,i))},clearItemStatus:function(e,t,i){var r=this,a=r.get("itemStatusFields");i=i||r.findElement(e),t?r.setItemStatus(e,t,!1,i):(n.each(a,function(t,n){r.setItemStatus(e,n,!1,i)}),a.selected||r.setItemSelected(e,!1),r.setItemStatus(e,"hover",!1))}}),l.View=o,l}),define("bui/list/keynav",["bui/common"],function(require){"use strict";var e=require("bui/common"),t=function(){};return t.ATTRS={highlightedStatus:{value:"hover"}},e.augment(t,{setHighlighted:function(e,t){if(!this.hasStatus(e,"hover",t)){var n=this,i=n.get("highlightedStatus"),r=n._getHighLightedElement(),a=r?n.getItemByElement(r):null;a!==e&&(a&&this.setItemStatus(a,i,!1,r),this.setItemStatus(e,i,!0,t),n._scrollToItem(e,t))}},_getHighLightedElement:function(){var e=this,t=e.get("highlightedStatus"),n=e.get("view").getFirstElementByStatus(t);return n},getHighlighted:function(){var e=this,t=e.get("highlightedStatus"),n=e.get("view").getFirstElementByStatus(t);return e.getItemByElement(n)||null},getColumnCount:function(){var e=this,t=e.getFirstItem(),n=e.findElement(t),i=$(n);return n?parseInt(i.parent().width()/i.outerWidth(),10):1},getRowCount:function(e){var t=this;return e=e||t.getColumnCount(),(this.getCount()+e-1)/e},_getNextItem:function(e,t,n){var i,r=this,a=r._getCurrentIndex(),o=r.getCount(),l=e?1:-1;return-1===a?e?r.getFirstItem():r.getLastItem():(e||(t*=l),i=(a+t+n)%n,i>o-1&&(e?i-=o-1:i+=t),r.getItemAt(i))},_getLeftItem:function(){var e=this,t=e.getCount(),n=e.getColumnCount();return!t||1>=n?null:e._getNextItem(!1,1,t)},_getCurrentItem:function(){return this.getHighlighted()},_getCurrentIndex:function(){var e=this,t=e._getCurrentItem();return this.indexOfItem(t)},_getRightItem:function(){var e=this,t=e.getCount(),n=e.getColumnCount();return!t||1>=n?null:this._getNextItem(!0,1,t)},_getDownItem:function(){var e=this,t=e.getColumnCount(),n=e.getRowCount(t);return 1>=n?null:this._getNextItem(!0,t,t*n)},getScrollContainer:function(){return this.get("el")},isScrollVertical:function(){var e=this,t=e.get("el"),n=e.get("view").getItemContainer();return t.height()<n.height()},_scrollToItem:function(e,t){var n=this;if(n.isScrollVertical()){t=t||n.findElement(e);var i=n.getScrollContainer(),r=$(t).position().top,a=i.position().top,o=i.height(),l=r-a,s=$(t).height(),u=i.scrollTop();(0>l||l>o-s)&&i.scrollTop(u+l)}},_getUpperItem:function(){var e=this,t=e.getColumnCount(),n=e.getRowCount(t);return 1>=n?null:this._getNextItem(!1,t,t*n)},handleNavUp:function(){var e=this,t=e._getUpperItem();e.setHighlighted(t)},handleNavDown:function(){this.setHighlighted(this._getDownItem())},handleNavLeft:function(){this.setHighlighted(this._getLeftItem())},handleNavRight:function(){this.setHighlighted(this._getRightItem())},handleNavEnter:function(){var e,t=this,n=t._getCurrentItem();n&&(e=t.findElement(n),$(e).trigger("click"))},handleNavEsc:function(){this.setHighlighted(null)},handleNavTab:function(){this.setHighlighted(this._getRightItem())}}),t}),define("bui/list/sortable",["bui/common","bui/data"],function(require){var e=require("bui/common"),t=require("bui/data").Sortable,n=function(){};return n.ATTRS=e.merge(!0,t.ATTRS,{}),e.augment(n,t,{compare:function(e,t,n,i){var r,a=this;return n=n||a.get("sortField"),i=i||a.get("sortDirection"),n&&i?(r="ASC"===i?1:-1,$.isPlainObject(e)||(e=a.getItemByElement(e)),$.isPlainObject(t)||(t=a.getItemByElement(t)),a.get("compareFunction")(e[n],t[n])*r):1},getSortData:function(){return $.makeArray(this.get("view").getAllElements())},sort:function(t,n){var i=this,r=i.sortData(t,n),a=i.get("view").getItemContainer();i.get("store")||i.sortData(t,n,i.get("items")),e.each(r,function(e){$(e).appendTo(a)})}}),n}),define("bui/list/simplelist",["bui/common","bui/list/domlist","bui/list/keynav","bui/list/sortable"],function(require){var e=require("bui/common"),t=e.Component.UIBase,n=e.UA,i=require("bui/list/domlist"),r=require("bui/list/keynav"),a=require("bui/list/sortable"),o=e.prefix+"list-item",l=e.Component.View.extend([i.View],{setElementHover:function(e,t){var n=this;n.setItemStatusCls("hover",e,t)}},{ATTRS:{itemContainer:{valueFn:function(){return this.get("el").find(this.get("listSelector"))}}}},{xclass:"simple-list-view"}),s=e.Component.Controller.extend([i,t.Bindable,r,a],{bindUI:function(){var e=this,t=e.get("itemCls"),i=e.get("view").getItemContainer();i.delegate("."+t,"mouseover",function(t){if(!e.get("disabled")){var i=t.currentTarget,r=e.getItemByElement(i);e.isItemDisabled(t.item,t.currentTarget)||(n.ie&&n.ie<8||!e.get("focusable")||"hover"!==e.get("highlightedStatus")?e.setItemStatus(r,"hover",!0,i):e.setHighlighted(r,i))}}).delegate("."+t,"mouseout",function(t){if(!e.get("disabled")){var n=$(t.currentTarget);e.get("view").setElementHover(n,!1)}})},onAdd:function(e){var t=this,n=t.get("store"),i=e.record;0==t.getCount()?t.setItems(n.getResult()):t.addItemToView(i,e.index)},onRemove:function(e){var t=this,n=e.record;t.removeItem(n)},onUpdate:function(e){this.updateItem(e.record)},onLocalSort:function(e){this.get("frontSortable")?this.sort(e.field,e.direction):this.onLoad(e)},onLoad:function(){var e=this,t=e.get("store"),n=t.getResult();e.set("items",n)},onFiltered:function(e){var t=this,n=e.data;t.set("items",n)}},{ATTRS:{frontSortable:{value:!1},focusable:{value:!1},items:{view:!0,value:[]},itemCls:{view:!0,value:o},idField:{value:"value"},listSelector:{view:!0,value:"ul"},itemTpl:{view:!0,value:'<li role="option" class="'+o+'">{text}</li>'},tpl:{value:"<ul></ul>"},xview:{value:l}}},{xclass:"simple-list",prority:0});return s.View=l,s}),define("bui/list/listbox",["bui/list/simplelist"],function(require){var e=require("bui/list/simplelist"),t=e.extend({bindUI:function(){var e=this;e.on("selectedchange",function(e){var t=e.item,n=$(e.domTarget),i=n.find("input");t&&i.attr("checked",e.selected)})}},{ATTRS:{itemTpl:{value:'<li><span class="x-checkbox"></span>{text}</li>'},multipleSelect:{value:!0}}},{xclass:"listbox"});return t}),define("bui/list/listitem",["bui/common"],function(require){var e=require("bui/common"),t=e.Component,n=t.UIBase,i=t.View.extend([n.ListItemView],{}),r=t.Controller.extend([n.ListItem],{},{ATTRS:{elTagName:{view:!0,value:"li"},xview:{value:i},tpl:{view:!0,value:"<span>{text}</span>"}}},{xclass:"list-item"});return r.View=i,r}),define("bui/list/list",["bui/common"],function(require){var e=require("bui/common"),t=e.Component,n=t.UIBase,i=t.Controller.extend([n.ChildList],{},{ATTRS:{elTagName:{view:!0,value:"ul"},idField:{value:"id"},defaultChildClass:{value:"list-item"}}},{xclass:"list"});return i}),define("bui/picker",["bui/common","bui/picker/mixin","bui/picker/picker","bui/picker/listpicker"],function(require){var e=require("bui/common"),t=e.namespace("Picker");return e.mix(t,{Mixin:require("bui/picker/mixin"),Picker:require("bui/picker/picker"),ListPicker:require("bui/picker/listpicker")}),t}),define("bui/picker/mixin",function(){var e=function(){};return e.ATTRS={innerControl:{getter:function(){return this.get("children")[0]}},triggerEvent:{value:"click"},autoSetValue:{value:!0},changeEvent:{value:"selectedchange"},autoHide:{value:!0},hideEvent:{value:"itemclick"},textField:{},align:{value:{points:["bl","tl"],offset:[0,0]}},valueField:{}},e.prototype={__bindUI:function(){{var e=this;e.get("hideEvent"),$(e.get("trigger"))}e.on("show",function(){if(e.get("isInit")||e._initControl(),e.get("autoSetValue")){var t=e.get("valueField")||e.get("textField")||e.get("curTrigger"),n=$(t).val();e.setSelectedValue(n)}})},_initControl:function(){var e=this;if(!e.get("isInit")){if(!e.get("innerControl")){var t=e.createControl();e.get("children").push(t)}e.initControlEvent(),e.set("isInit",!0)}},initControl:function(){this._initControl()},createControl:function(){},initControlEvent:function(){var e=this,t=e.get("innerControl"),n=$(e.get("trigger")),i=e.get("hideEvent");t.on(e.get("changeEvent"),function(t){var i=e.get("curTrigger"),r=e.get("textField")||i||n,a=e.get("valueField"),o=e.getSelectedValue(),l=!1;if(r){var s=e.getSelectedText(),u=$(r).val();s!=u&&($(r).val(s),l=!0,$(r).trigger("change"))}if(a){var c=$(a).val();a!=c&&($(a).val(o),l=!0,$(a).trigger("change"))}l&&e.onChange(s,o,t)}),i&&t.on(e.get("hideEvent"),function(){var t=e.get("curTrigger");try{t&&t.focus()}catch(n){BUI.log(n)}e.hide()})},setSelectedValue:function(){},getSelectedValue:function(){},getSelectedText:function(){},focus:function(){this.get("innerControl").focus()},onChange:function(e,t){var n=this,i=n.get("curTrigger");n.fire("selectedchange",{value:t,text:e,curTrigger:i})},handleNavEsc:function(){this.hide()},_uiSetValueField:function(e){var t=this;null!=e&&""!==e&&t.setSelectedValue($(e).val())},_getTextField:function(){var e=this;return e.get("textField")||e.get("curTrigger")}},e}),define("bui/picker/picker",["bui/overlay","bui/picker/mixin"],function(require){var e=require("bui/overlay").Overlay,t=require("bui/picker/mixin"),n=e.extend([t],{},{ATTRS:{}},{xclass:"picker"});return n}),define("bui/picker/listpicker",["bui/picker/picker","bui/list"],function(require){var e=(require("bui/list"),require("bui/picker/picker")),t=e.extend({initializer:function(){var e=this,t=e.get("children"),n=e.get("list");n||t.push({})},setSelectedValue:function(e){e=e?e.toString():"",this.get("isInit")||this._initControl();var t=this,n=t.get("list"),i=t.getSelectedValue();e!==i&&n.getCount()&&(n.get("multipleSelect")&&n.clearSelection(),n.setSelectionByField(e.split(",")))},onChange:function(e,t,n){var i=this,r=i.get("curTrigger");i.fire("selectedchange",{value:t,text:e,curTrigger:r,item:n.item})},getSelectedValue:function(){return this.get("isInit")||this._initControl(),this.get("list").getSelectionValues().join(",")},getSelectedText:function(){return this.get("isInit")||this._initControl(),this.get("list").getSelectionText().join(",")}},{ATTRS:{defaultChildClass:{value:"simple-list"},list:{getter:function(){return this.get("children")[0]}}}},{xclass:"list-picker"});return t}),function(){var e="bui/form/";define("bui/form",["bui/common",e+"fieldcontainer",e+"form",e+"row",e+"fieldgroup",e+"horizontal",e+"rules",e+"field",e+"fieldgroup"],function(t){var n=t("bui/common"),i=n.namespace("Form"),r=t(e+"tips");return n.mix(i,{Tips:r,TipItem:r.Item,FieldContainer:t(e+"fieldcontainer"),Form:t(e+"form"),Row:t(e+"row"),Group:t(e+"fieldgroup"),HForm:t(e+"horizontal"),Rules:t(e+"rules"),Field:t(e+"field"),FieldGroup:t(e+"fieldgroup")}),i})}(),define("bui/form/tips",["bui/common","bui/overlay"],function(require){var e=require("bui/common"),t=e.prefix,n=require("bui/overlay").Overlay,i="data-tip",r=t+"form-tip-container",a=n.extend({initializer:function(){var e=this,t=e.get("render");if(!t){var n=$(e.get("trigger")).parent();e.set("render",n)}},renderUI:function(){var e=this;e.resetVisible()},resetVisible:function(){var e=this,t=$(e.get("trigger"));t.val()?e.set("visible",!1):(e.set("align",{node:$(e.get("trigger")),points:["cl","cl"]}),e.set("visible",!0))},bindUI:function(){var e=this,t=$(e.get("trigger"));e.get("el").on("click",function(){e.hide(),t.focus()}),t.on("click focus",function(){e.hide()}),t.on("blur",function(){e.resetVisible()})}},{ATTRS:{trigger:{},text:{},iconCls:{},tpl:{value:'<span class="{iconCls}"></span><span class="tip-text">{text}</span>'}}},{xclass:"form-tip"}),o=function(e){return this.constructor!==o?new o(e):(o.superclass.constructor.call(this,e),void this._init())};return o.ATTRS={form:{},items:{valueFn:function(){return[]}}},e.extend(o,e.Base),e.augment(o,{_init:function(){var t=this,n=$(t.get("form"));n.length&&(e.each($.makeArray(n[0].elements),function(e){var n=$(e).attr(i);n&&t._initFormElement(e,$.parseJSON(n))}),n.addClass(r))},_initFormElement:function(e,t){t&&(t.trigger=e);var n=this,i=n.get("items"),r=new a(t);i.push(r)},getItem:function(t){var n=this,i=n.get("items"),r=null;return e.each(i,function(e){return $(e.get("trigger")).attr("name")===t?(r=e,!1):void 0}),r},resetVisible:function(){var t=this,n=t.get("items");e.each(n,function(e){e.resetVisible()})},render:function(){var t=this,n=t.get("items");e.each(n,function(e){e.render()})},destroy:function(){var t=this,n=t.get(n);e.each(n,function(e){e.destroy()})}}),o.Item=a,o}),define("bui/form/basefield",["bui/common","bui/form/tips","bui/form/valid","bui/form/remote"],function(require){var e=require("bui/common"),t=e.Component,n=require("bui/form/tips").Item,i=require("bui/form/valid"),r=require("bui/form/remote"),a=e.prefix+"form-field-error",o=t.View.extend([r.View,i.View],{renderUI:function(){var e=this,t=e.get("control");if(t)e.set("controlContainer",t.parent());else{var n=e.get("controlTpl"),i=e.getControlContainer();if(n){var t=$(n).appendTo(i);e.set("control",t)}}},clearErrors:function(){var e=this,t=e.get("msgEl");t&&(t.remove(),e.set("msgEl",null)),e.get("el").removeClass(a)},showError:function(t,n){var i=this,r=i.get("control"),o=e.substitute(n,{error:t}),l=$(o);l.appendTo(r.parent()),i.set("msgEl",l),i.get("el").addClass(a)},getControlContainer:function(){var t=this,n=t.get("el"),i=t.get("controlContainer");return i&&e.isString(i)&&(i=n.find(i)),i&&i.length?i:n},getLoadingContainer:function(){return this.getControlContainer()},_uiSetName:function(e){var t=this;t.get("control").attr("name",e)}},{ATTRS:{error:{},controlContainer:{},msgEl:{},control:{}}}),l=t.Controller.extend([r,i],{isField:!0,initializer:function(){var e=this;e.on("afterRenderUI",function(){var t=e.get("tip");t&&(t.trigger=e.getTipTigger(),t.autoRender=!0,t=new n(t),e.set("tip",t))})},bindUI:function(){var e=this,t=e.get("validEvent"),n=e.get("changeEvent"),i=e.get("firstValidEvent"),r=e.getInnerControl();r.is("select")&&(t="change"),r.on(t,function(){var t=e.getControlValue(r);e.validControl(t)}),i&&r.on(i,function(){if(!e.get("hasValid")){var t=e.getControlValue(r);e.validControl(t)}}),e.on(n,function(){e.onValid()}),e.on("remotecomplete",function(t){e._setError(t.error)})},onValid:function(){var e=this,t=e.getControlValue();t=e.parseValue(t),e.isCurrentValue(t)||(e.setInternal("value",t),e.onChange())},onChange:function(){this.fire("change")},isCurrentValue:function(e){return e==this.get("value")},_clearError:function(){this.set("error",null),this.get("view").clearErrors()},_setError:function(e){this.set("error",e),this.showErrors()},getControlValue:function(e){var t=this;return e=e||t.getInnerControl(),e.val()},getControlContainer:function(){return this.get("view").getControlContainer()},getRemoteParams:function(){var e=this,t={};return t[e.get("name")]=e.getControlValue(),t},setControlValue:function(e){var t=this,n=t.getInnerControl();n.val(e)},parseValue:function(e){return e},valid:function(){var e=this;e.validControl()},validControl:function(e){var t,n=this;return e=e||n.getControlValue(),preError=n.get("error"),t=n.getValidError(e),n.setInternal("hasValid",!0),t?(n._setError(t),n.fire("error",{msg:t,value:e}),preError!==t&&n.fire("validchange",{valid:!1})):(n._clearError(),n.fire("valid"),preError&&n.fire("validchange",{valid:!0})),!t},focus:function(){this.getInnerControl().focus()},change:function(){var e=this.getInnerControl();e.change()},blur:function(){this.getInnerControl().blur()},isValid:function(){var e=this;return e.get("hasValid")||e.validControl(),!e.get("error")},getError:function(){return this.get("error")},getErrors:function(){var e=this.getError();return e?[e]:[]},clearErrors:function(e){var t=this;t._clearError(),e&&t.getControlValue()!=t.get("value")&&t.setControlValue(t.get("value"))},getInnerControl:function(){return this.get("view").get("control")},getTipTigger:function(){return this.getInnerControl()},destructor:function(){var e=this,t=e.get("tip");t&&t.destroy&&t.destroy()},setInnerWidth:function(t){var n=this,i=n.getInnerControl(),r=i.siblings(),a=i.outerWidth()-i.width();e.each(r,function(e){a+=$(e).outerWidth()}),i.width(t-a)},_resetTip:function(){var e=this,t=e.get("tip");t&&t.resetVisible()},resetTip:function(){this._resetTip()},_uiSetValue:function(e){var t=this;t.setControlValue(e),t.get("rendered")&&(t.validControl(),t.onChange()),t._resetTip()},_uiSetDisabled:function(t){var n=this,i=n.getInnerControl(),r=n.get("children");i.attr("disabled",t),n.get("rendered")&&(t&&n.clearErrors(),t||n.valid()),e.each(r,function(e){e.set("disabled",t)})},_uiSetWidth:function(e){var t=this;null!=e&&t.get("forceFit")&&t.setInnerWidth(e)}},{ATTRS:{hasValid:{value:!1},forceFit:{value:!1},tip:{},changeEvent:{value:"valid"},firstValidEvent:{value:"blur"},validEvent:{value:"keyup change"},name:{view:!0},showError:{view:!0,value:!0},value:{view:!0},label:{},controlContainer:{view:!0},control:{view:!0},controlTpl:{view:!0,value:'<input type="text"/>'},events:{value:{error:!1,valid:!1,change:!0,validchange:!0}},tpl:{value:"<label>{label}</label>"},xview:{value:o}},PARSER:{control:function(e){var t=e.find("input,select,textarea");return t.length?t:e},disabled:function(e){return!!e.attr("disabled")},value:function(e){var t=this,n="select,input,textarea",i=t.get("value");return i||(e.is(n)?(i=e.val(),!i&&e.is("select")&&(i=e.attr("value"))):i=e.find(n).val()),i},name:function(e){var t=this,n="select,input,textarea",i=t.get("name");return i||(i=e.is(n)?e.attr("name"):e.find(n).attr("name")),i}}},{xclass:"form-field"});return l.View=o,l}),define("bui/form/textfield",["bui/form/basefield"],function(require){var e=require("bui/form/basefield"),t=e.extend({},{xclass:"form-field-text"});return t}),define("bui/form/textareafield",["bui/form/basefield"],function(require){var e=require("bui/form/basefield"),t=e.extend({_uiSetRows:function(e){var t=this,n=t.getInnerControl();e&&n.attr("rows",e)},_uiSetCols:function(e){var t=this,n=t.getInnerControl();e&&n.attr("cols",e)}},{ATTRS:{controlTpl:{value:"<textarea></textarea>"},rows:{},cols:{},decorateCfgFields:{value:{rows:!0,cols:!0}}}},{xclass:"form-field-textarea"});return t}),define("bui/form/numberfield",["bui/form/basefield"],function(require){var e=require("bui/form/basefield"),t=e.extend({parseValue:function(e){if(""==e||null==e)return null;if(BUI.isNumber(e))return e;var t=this,n=t.get("allowDecimals");return e=e.replace(/\,/g,""),n?parseFloat(parseFloat(e).toFixed(t.get("decimalPrecision"))):parseInt(e,10)},_uiSetMax:function(e){this.addRule("max",e)},_uiSetMin:function(e){this.addRule("min",e)}},{ATTRS:{max:{},min:{},decorateCfgFields:{value:{min:!0,max:!0}},validEvent:{value:"keyup change"},defaultRules:{value:{number:!0}},allowDecimals:{value:!0},decimalPrecision:{value:2},step:{value:1}}},{xclass:"form-field-number"});return t}),define("bui/form/hiddenfield",["bui/form/basefield"],function(require){var e=require("bui/form/basefield"),t=e.extend({},{ATTRS:{controlTpl:{value:'<input type="hidden"/>'},tpl:{value:""}}},{xclass:"form-field-hidden"});return t}),define("bui/form/readonlyfield",["bui/form/basefield"],function(require){var e=require("bui/form/basefield"),t=e.extend({},{ATTRS:{controlTpl:{value:'<input type="text" readonly="readonly"/>'}}},{xclass:"form-field-readonly"});return t}),define("bui/form/selectfield",["bui/common","bui/form/basefield"],function(require){function e(e,i,r){e.children().remove();var a=r.get("emptyText");a&&r.get("showBlank")&&t("",a,e),n.each(i,function(n){t(n.value,n.text,e)})}function t(e,t,n){var i='<option value="'+e+'">'+t+"</option>";$(i).appendTo(n)}var n=require("bui/common"),i=require("bui/form/basefield"),r=i.extend({renderUI:function(){var e=this,t=e.getInnerControl(),n=e.get("select");e.get("srcNode")&&t.is("select")||$.isPlainObject(n)&&e._initSelect(n)},_initSelect:function(e){{var t=this;t.get("items")}n.use("bui/select",function(n){e.render=t.getControlContainer(),e.valueField=t.getInnerControl(),e.autoRender=!0,e=new n.Select(e),t.set("select",e),t.set("isCreate",!0),t.get("children").push(e),e.on("change",function(){var n=e.getSelectedValue();t.set("value",n)})})},setItems:function(t){var i=this,r=i.get("select");if($.isPlainObject(t)){var a=[];n.each(t,function(e,t){a.push({value:t,text:e})}),t=a}var o=i.getInnerControl();o.is("select")&&(e(o,t,i),i.setControlValue(i.get("value")),i.getControlValue()||i.setInternal("value","")),r&&(r.set?r.set("items",t):r.items=t)},setControlValue:function(e){var t=this,n=t.get("select"),i=t.getInnerControl();i.val(e),n&&n.set&&n.getSelectedValue()!==e&&n.setSelectedValue(e)},getSelectedText:function(){var e=this,t=e.get("select"),n=e.getInnerControl();if(n.is("select")){var i=n[0],r=i.options[i.selectedIndex];return r?r.text:""}return t.getSelectedText()},getTipTigger:function(){var e=this,t=e.get("select");return t&&t.rendered?t.get("el").find("input"):e.get("el")},_uiSetItems:function(e){e&&this.setItems(e)},setInnerWidth:function(e){var t=this,n=t.getInnerControl(),i=t.get("select"),r=n.outerWidth()-n.width();
n.width(e-r),i&&i.set&&i.set("width",e)}},{ATTRS:{items:{},controlTpl:{value:'<input type="hidden"/>'},showBlank:{value:!0},emptyText:{value:"\u8bf7\u9009\u62e9"},select:{shared:!1,value:{}}},PARSER:{emptyText:function(e){if(!this.get("showBlank"))return"";var t=e.find("option"),n=this.get("emptyText");return t.length&&(n=$(t[0]).text()),n}}},{xclass:"form-field-select"});return r}),define("bui/form/datefield",["bui/common","bui/form/basefield","bui/calendar"],function(require){var e=require("bui/common"),t=require("bui/form/basefield"),n=e.Date,i=t.extend({renderUI:function(){var e=this,t=e.get("datePicker");$.isPlainObject(t)&&e.initDatePicker(t),(t.get&&t.get("showTime")||t.showTime)&&e.getInnerControl().addClass("calendar-time")},initDatePicker:function(t){var n=this;e.use("bui/calendar",function(e){t.trigger=n.getInnerControl(),t.autoRender=!0,t=new e.DatePicker(t),n.set("datePicker",t),n.set("isCreatePicker",!0),n.get("children").push(t)})},setControlValue:function(t){var i=this,r=i.getInnerControl();e.isDate(t)&&(t=n.format(t,i._getFormatMask())),r.val(t)},_getFormatMask:function(){var e=this,t=e.get("datePicker");return t.showTime||t.get&&t.get("showTime")?"yyyy-mm-dd HH:MM:ss":"yyyy-mm-dd"},parseValue:function(t){return e.isNumber(t)?new Date(t):n.parse(t)},isCurrentValue:function(e){return n.isEquals(e,this.get("value"))},_uiSetMax:function(e){this.addRule("max",e);var t=this,n=t.get("datePicker");n&&(n.set?n.set("maxDate",e):n.maxDate=e)},_uiSetMin:function(e){this.addRule("min",e);var t=this,n=t.get("datePicker");n&&(n.set?n.set("minDate",e):n.minDate=e)}},{ATTRS:{controlTpl:{value:'<input type="text" class="calendar"/>'},defaultRules:{value:{date:!0}},max:{},min:{},value:{setter:function(t){return e.isNumber(t)?new Date(t):t}},datePicker:{shared:!1,value:{}},isCreatePicker:{value:!0}},PARSER:{datePicker:function(t){var n=this,i=n.get("datePicker")||{};return t.hasClass("calendar-time")&&e.mix(i,{showTime:!0}),i}}},{xclass:"form-field-date"});return i}),define("bui/form/checkfield",["bui/form/basefield"],function(require){var e=require("bui/form/basefield"),t=e.extend({onValid:function(){var e=this,t=e._getControlChecked();e.setInternal("checked",t),e.fire("change"),e.fire(t?"checked":"unchecked")},_setControlChecked:function(e){var t=this,n=t.getInnerControl();n.attr("checked",!!e)},_getControlChecked:function(){var e=this,t=e.getInnerControl();return!!t.attr("checked")},_uiSetValue:function(e){this.setControlValue(e)},_uiSetWidth:function(){},_uiSetChecked:function(e){var t=this;t._setControlChecked(e),t.get("rendered")&&t.onValid()}},{ATTRS:{validEvent:{value:"click"},checked:{value:!1},events:{value:{checked:!1,unchecked:!1}}},PARSER:{checked:function(e){return!!e.attr("checked")}}},{xclass:"form-check-field"});return t}),define("bui/form/checkboxfield",["bui/form/checkfield"],function(e){var t=e("bui/form/checkfield"),n=t.extend({},{ATTRS:{controlTpl:{view:!0,value:'<input type="checkbox"/>'},controlContainer:{value:".checkbox"},tpl:{value:'<label><span class="checkbox"></span>{label}</label>'}}},{xclass:"form-field-checkbox"});return n}),define("bui/form/radiofield",["bui/form/checkfield"],function(e){var t=e("bui/form/checkfield"),n=t.extend({bindUI:function(){var e=this,t=e.get("parent"),n=e.get("name");t&&e.getInnerControl().on("click",function(){var i=t.getFields(n);BUI.each(i,function(t){t!=e&&t.set("checked",!1)})})}},{ATTRS:{controlTpl:{view:!0,value:'<input type="radio"/>'},controlContainer:{value:".radio"},tpl:{value:'<label><span class="radio"></span>{label}</label>'}}},{xclass:"form-field-radio"});return n}),define("bui/form/plainfield",["bui/form/basefield"],function(require){var e=require("bui/form/basefield"),t=e.View.extend({_uiSetValue:function(e){var t,n=this,i=n.get("textEl"),r=n.getControlContainer(),a=n.get("renderer"),o=a?a(e):e,l=n.get("width"),s=0;i&&i.remove(),o=o||"&nbsp;",t=BUI.substitute(n.get("textTpl"),{text:o}),i=$(t).appendTo(r),s=i.outerWidth()-i.width(),i.width(l-s),n.set("textEl",i)}},{ATTRS:{textEl:{},value:{}}},{xclass:"form-field-plain-view"}),n=e.extend({},{ATTRS:{controlTpl:{value:'<input type="hidden"/>'},textTpl:{view:!0,value:'<span class="x-form-text">{text}</span>'},renderer:{view:!0,value:function(e){return e}},tpl:{value:""},xview:{value:t}}},{xclass:"form-field-plain"});return n}),define("bui/form/listfield",["bui/common","bui/form/basefield","bui/list"],function(require){function e(e){var n=e;return $.isPlainObject(e)&&(n=[],t.each(e,function(e,t){n.push({text:e,value:t})})),n}var t=require("bui/common"),n=require("bui/list"),i=require("bui/form/basefield"),n=i.extend({initializer:function(){var e=this;e._initList()},_getList:function(){var e=this,t=e.get("children");return t[0]},bindUI:function(){var e=this,t=e._getList();t&&t.on("selectedchange",function(){var n=e._getListValue(t);e.set("value",n)})},_getListValue:function(e){var t=this;return e=e||t._getList(),e.getSelectionValues().join(",")},setControlValue:function(e){var t=this,n=t.getInnerControl(),i=t._getList();n.val(e),t._getListValue(i)!==e&&i.getCount()&&(i.get("multipleSelect")&&i.clearSelection(),i.setSelectionByField(e.split(",")))},syncUI:function(){this.set("list",this._getList())},_initList:function(){var e=this,n=e.get("defaultListCfg"),i=e.get("children"),r=e.get("list")||{};i[0]||($.isPlainObject(r)&&t.mix(r,n),i.push(r))},setItems:function(t){var n=this,i=n.get("value"),r=n._getList();r.set("items",e(t)),r.setSelectionByField(i.split(","))},_uiSetItems:function(e){e&&this.setItems(e)}},{ATTRS:{controlTpl:{value:'<input type="hidden"/>'},defaultListCfg:{value:{xclass:"simple-list"}},items:{setter:function(e){if($.isPlainObject(e)){var n=[];t.each(e,function(e,t){n.push({value:t,text:e})}),e=n}return e}},list:{}},PARSER:{list:function(e){var t=e.find(".bui-simple-list");return t.length?{srcNode:t}:void 0}}},{xclass:"form-field-list"});return n}),define("bui/form/uploaderfield",["bui/common","bui/form/basefield","bui/form/rules"],function(require){var e=require("bui/common"),t=e.JSON,n=require("bui/form/basefield"),i=require("bui/form/rules"),r=n.extend({renderUI:function(){var e=this,t=e.getInnerControl();e.get("srcNode")&&"file"===t.get(0).type||(e._initControlValue(),e._initUpload())},_initUpload:function(){var t=this,n=(t.get("children"),t.get("uploader")||{});e.use("bui/uploader",function(e){n.render=t.getControlContainer(),n.autoRender=!0,n=new e.Uploader(n),t.set("uploader",n),t.set("isCreate",!0),t.get("children").push(n),t._initQueue(n.get("queue")),n.on("success",function(){var e=t._getUploaderResult();t.setControlValue(e)}),n.get("queue").on("itemremoved",function(){var e=t._getUploaderResult();t.setControlValue(e)})})},_getUploaderResult:function(){var t=this,n=t.get("uploader"),i=n.get("queue"),r=i.getItems(),a=[];return e.each(r,function(e){e.result&&a.push(e.result)}),a},setControlValue:function(e){var n=this,i=n.getInnerControl();i.val(t.stringify(e))},_initControlValue:function(){var t,n=this,i=n.getControlValue();i&&(t=e.JSON.parse(i),n.set("value",t))},_initQueue:function(t){var n=this,i=n.get("value"),r=[];e.each(i,function(t){var n=e.cloneObject(t);n.success=!0,n.result=t,r.push(n)}),t&&t.setItems(r)}},{ATTRS:{controlTpl:{value:'<input type="hidden"/>'},uploader:{setter:function(e){var t=this.get("disabled");return e&&e.isController&&e.set("disabled",t),e}},disabled:{setter:function(e){var t=this,n=t.get("uploader");n&&n.isController&&n.set("disabled",e)}},value:{shared:!1,value:[]},defaultRules:function(){}}},{xclass:"form-field-uploader"});return i.add({name:"uploader",msg:"\u4e0a\u4f20\u6587\u4ef6\u9009\u62e9\u6709\u8bef\uff01",validator:function(e,t,n,i){var r=i.get("uploader");return r&&!r.isValid()?n:void 0}}),r}),define("bui/form/checklistfield",["bui/common","bui/form/listfield"],function(require){"use strict";var e=(require("bui/common"),require("bui/form/listfield")),t=e.extend({},{ATTRS:{defaultListCfg:{value:{itemTpl:'<li><span class="x-checkbox"></span>{text}</li>',multipleSelect:!0,allowTextSelection:!1}}}},{xclass:"form-field-checklist"});return t}),define("bui/form/radiolistfield",["bui/common","bui/form/listfield"],function(require){"use strict";var e=(require("bui/common"),require("bui/form/listfield")),t=e.extend({},{ATTRS:{defaultListCfg:{value:{itemTpl:'<li><span class="x-radio"></span>{text}</li>',allowTextSelection:!1}}}},{xclass:"form-field-radiolist"});return t}),function(){var e="bui/form/";define(e+"field",["bui/common",e+"textfield",e+"datefield",e+"selectfield",e+"hiddenfield",e+"numberfield",e+"checkfield",e+"radiofield",e+"checkboxfield",e+"plainfield",e+"listfield",e+"uploaderfield",e+"checklistfield",e+"radiolistfield",e+"textareafield"],function(require){var t=require("bui/common"),n=require(e+"basefield");return t.mix(n,{Text:require(e+"textfield"),Date:require(e+"datefield"),Select:require(e+"selectfield"),Hidden:require(e+"hiddenfield"),Number:require(e+"numberfield"),Check:require(e+"checkfield"),Radio:require(e+"radiofield"),Checkbox:require(e+"checkboxfield"),Plain:require(e+"plainfield"),List:require(e+"listfield"),TextArea:require(e+"textareafield"),Uploader:require(e+"uploaderfield"),CheckList:require(e+"checklistfield"),RadioList:require(e+"radiolistfield")}),n})}(),define("bui/form/valid",["bui/common","bui/form/rules"],function(require){var e=require("bui/common"),t=require("bui/form/rules"),n=function(){};n.prototype={getErrorsContainer:function(){var t=this,n=t.get("errorContainer");return n?e.isString(n)?t.get("el").find(n):n:t.getContentElement()},showErrors:function(t){var n=this,i=n.getErrorsContainer(),r=n.get("errorTpl");return n.clearErrors(),n.get("showError")?n.get("showOneError")?void(t&&t.length&&n.showError(t[0],r,i)):void e.each(t,function(e){e&&n.showError(e,r,i)}):void 0},showError:function(){},clearErrors:function(){}};var i=function(){};return i.ATTRS={defaultRules:{value:{}},defaultMessages:{value:{}},rules:{shared:!1,value:{}},messages:{shared:!1,value:{}},validator:{},errorContainer:{view:!0},errorTpl:{view:!0,value:'<span class="x-field-error"><span class="x-icon x-icon-mini x-icon-error">!</span><label class="x-field-error-text">{error}</label></span>'},showError:{view:!0,value:!0},showOneError:{},error:{},pauseValid:{value:!1}},i.prototype={__bindUI:function(){var e=this;e.on("afterDisabledChange",function(t){var n=t.newVal;n?e.clearErrors(!1,!1):e.valid()})},isValid:function(){},valid:function(){},validControl:function(){},validRules:function(e,n){if(!e)return null;if(this.get("pauseValid"))return null;var i=this,r=i._getValidMessages(),a=null;for(var o in e)if(e.hasOwnProperty(o)){var l=e[o];if(a=t.valid(o,n,l,r[o],i))break}return a},_getValidMessages:function(){var t=this,n=t.get("defaultMessages"),i=t.get("messages");return e.merge(n,i)},getValidError:function(e){var t=this,n=t.get("validator"),i=null;return i=t.validRules(t.get("defaultRules"),e)||t.validRules(t.get("rules"),e),i||this.get("pauseValid")||(t.parseValue&&(e=t.parseValue(e)),i=n?n.call(this,e):""),i},getErrors:function(){},showErrors:function(e){var t=this,e=e||t.getErrors();t.get("view").showErrors(e)},clearErrors:function(t,n){n=null==n?!0:n;var i=this,r=i.get("children");n&&e.each(r,function(e){e.clearErrors&&(e.field?e.clearErrors(t):e.clearErrors(t,n))}),i.set("error",null),i.get("view").clearErrors()},addRule:function(e,t,n){var i=this,r=i.get("rules"),a=i.get("messages");r[e]=t,n&&(a[e]=n)},addRules:function(t,n){var i=this;e.each(t,function(e,t){var r=n?n[t]:null;i.addRule(t,e,r)})},removeRule:function(e){var t=this,n=t.get("rules");delete n[e]},clearRules:function(){var e=this;e.set("rules",{})}},i.View=n,i}),define("bui/form/groupvalid",["bui/form/valid"],function(require){function e(){}function t(){}var n="x-form-error",i=require("bui/form/valid");return BUI.augment(e,i.View,{showError:function(e,t,i){var r=BUI.substitute(t,{error:e}),a=$(r);a.appendTo(i),a.addClass(n)},clearErrors:function(){var e=this,t=e.getErrorsContainer();t.children("."+n).remove()}}),t.ATTRS=ATTRS=BUI.merge(!0,i.ATTRS,{events:{value:{validchange:!0,change:!0}}}),BUI.augment(t,i,{__bindUI:function(){var e=this,t="validchange change";e.on(t,function(t){var n=t.target;if(n!=this&&e.get("showError")){var i=n.isValid();e._hasAllChildrenValid()&&(i=i&&e.isChildrenValid(),i&&(e.validControl(e.getRecord()),i=e.isSelfValid())),i?e.clearErrors():e.showErrors()}})},isValid:function(){if(this.get("disabled"))return!0;var e=this,t=e.isChildrenValid();return t&&e.isSelfValid()},valid:function(){var e=this,t=e.get("children");e.get("disabled")||BUI.each(t,function(e){e.get("disabled")||e.valid()})},_hasAllChildrenValid:function(){var e=this,t=e.get("children"),n=!0;return BUI.each(t,function(e){return e.get("disabled")||e.get("hasValid")!==!1?void 0:(n=!1,!1)}),n},isChildrenValid:function(){var e=this,t=e.get("children"),n=!0;return BUI.each(t,function(e){return e.get("disabled")||e.isValid()?void 0:(n=!1,!1)}),n},isSelfValid:function(){return!this.get("error")},validControl:function(e){var t=this,n=t.getValidError(e);t.set("error",n)},getErrors:function(){var e=this,t=e.get("children"),n=e.get("showChildError"),i=null,r=[];return n&&BUI.each(t,function(e){e.getErrors&&(r=r.concat(e.getErrors()))}),e._hasAllChildrenValid()&&e.isChildrenValid()&&(i=e.get("error"),i&&r.push(i)),r},_uiSetErrorTpl:function(e){var t=this,n=t.get("children");BUI.each(n,function(t){t.get("userConfig").errorTpl||t.set("errorTpl",e)})}}),t.View=e,t}),define("bui/form/fieldcontainer",["bui/common","bui/form/field","bui/form/groupvalid"],function(require){function e(e){return e.is(u)}function t(i,r){if(i!=r){if(e(i))return[i];var a=i.attr("class");if(a&&(-1!==a.indexOf(s)||-1!==a.indexOf(l)))return[i]}var o=[],u=i.children();return n.each(u,function(e){o=o.concat(t($(e),r))}),o}var n=require("bui/common"),i=require("bui/form/field"),r=require("bui/form/groupvalid"),a=n.prefix,o="form-field",l=a+o,s=a+"form-group",u="input,select,textarea",c=n.Component.View.extend([r.View]),d=n.Component.Controller.extend([r],{syncUI:function(){var e=this,t=e.getFields(),i=e.get("validators");n.each(t,function(e){var t=e.get("name");i[t]&&e.set("validator",i[t])}),n.each(i,function(t,n){if(0==n.indexOf("#")){var i=n.replace("#",""),r=e.getChild(i,!0);r&&r.set("validator",t)}})},getDecorateElments:function(){var e=this,n=e.get("el"),i=t(n,n);return i},findXClassByNode:function(t,i){return"checkbox"===t.attr("type")?o+"-checkbox":"radio"===t.attr("type")?o+"-radio":"number"===t.attr("type")?o+"-number":t.hasClass("calendar")?o+"-date":"SELECT"==t[0].tagName?o+"-select":e(t)?o:n.Component.Controller.prototype.findXClassByNode.call(this,t,i)},getRecord:function(){var e=this,t={},i=e.getFields();return n.each(i,function(i){var r=i.get("name"),a=e._getFieldValue(i);if(t[r]){if(n.isArray(t[r])&&null!=a)t[r].push(a);else if(null!=a){var o=[t[r]];o.push(a),t[r]=o}}else t[r]=a}),t},getFields:function(e){var t=this,r=[],a=t.get("children");return n.each(a,function(t){t instanceof i?e&&t.get("name")!=e||r.push(t):t.getFields&&(r=r.concat(t.getFields(e)))}),r},getField:function(e){var t=this,i=t.getFields(),r=null;return n.each(i,function(t){return t.get("name")===e?(r=t,!1):void 0}),r},getFieldAt:function(e){return this.getFields()[e]},setFieldValue:function(e,t){var i=this,r=i.getFields(e);n.each(r,function(e){i._setFieldValue(e,t)})},_setFieldValue:function(e,t){if(!e.get("disabled"))if(e instanceof i.Check){var r=e.get("value");t&&(r===t||n.isArray(t)&&n.Array.contains(r,t))?e.set("checked",!0):e.set("checked",!1)}else null==t&&(t=""),e.clearErrors(!0),e.set("value",t)},getFieldValue:function(e){var t=this,i=t.getFields(e),r=[];return n.each(i,function(e){var n=t._getFieldValue(e);n&&r.push(n)}),0===r.length?null:1===r.length?r[0]:r},_getFieldValue:function(e){return e instanceof i.Check&&!e.get("checked")?null:e.get("value")},clearFields:function(){this.clearErrors(!0),this.setRecord({})},setRecord:function(e){var t=this,i=t.getFields();n.each(i,function(n){var i=n.get("name");t._setFieldValue(n,e[i])})},updateRecord:function(e){var t=this,i=t.getFields();n.each(i,function(n){var i=n.get("name");e.hasOwnProperty(i)&&t._setFieldValue(n,e[i])})},focus:function(){var e=this,t=e.getFields(),n=t[0];n&&n.focus()},_uiSetDisabled:function(e){var t=this,i=t.get("children");n.each(i,function(t){t.set("disabled",e)})}},{ATTRS:{record:{setter:function(e){this.setRecord(e)},getter:function(){return this.getRecord()}},validators:{value:{}},defaultLoaderCfg:{value:{property:"children",dataType:"json"}},disabled:{sync:!1},isDecorateChild:{value:!0},xview:{value:c}}},{xclass:"form-field-container"});return d.View=c,d}),define("bui/form/group/base",["bui/common","bui/form/fieldcontainer"],function(require){var e=(require("bui/common"),require("bui/form/fieldcontainer")),t=e.extend({},{ATTRS:{label:{view:!0},defaultChildClass:{value:"form-field"}}},{xclass:"form-group"});return t}),define("bui/form/group/range",["bui/form/group/base"],function(require){function e(e,t,n){var i=e.get("allowEqual");return i?t>=n:t>n}var t=require("bui/form/group/base"),n=t.extend({},{ATTRS:{rangeText:{value:"\u5f00\u59cb\u4e0d\u80fd\u5927\u4e8e\u7ed3\u675f\uff01"},allowEqual:{value:!0},validator:{value:function(){for(var t=this,n=t.getFields(),i=!0,r=1;r<n.length;r++){var a,o,l=n[r],s=n[r-1];if(l&&s&&(a=l.get("value"),o=s.get("value"),!e(t,a,o))){i=!1;break}}return i?null:t.get("rangeText")}}}},{xclass:"form-group-range"});return n}),define("bui/form/group/check",["bui/form/group/base"],function(require){function e(e){var t=e.getFieldAt(0);return t?t.get("name"):""}var t=require("bui/form/group/base"),n=t.extend({bindUI:function(){var t=this;t.on("change",function(){var n=e(t),i=t.get("range"),r=t.getRecord(),a=r[n],o=i[1];a&&a.length>=o?t._setFieldsEnable(n,!1):t._setFieldsEnable(n,!0)})},_setFieldsEnable:function(e,t){var n=this,i=n.getFields(e);BUI.each(i,function(e){t?e.enable():e.get("checked")||e.disable()})},_uiSetRange:function(e){this.addRule("checkRange",e)}},{ATTRS:{range:{setter:function(e){return(BUI.isString(e)||BUI.isNumber(e))&&(e=[parseInt(e,10)]),e}}}},{xclass:"form-group-check"});return n}),define("bui/form/group/select",["bui/form/group/base","bui/data"],function(require){function e(e){var t=[];return BUI.each(e,function(e){t.push({text:e.text,value:e.id})}),t}var t=require("bui/form/group/base"),n=require("bui/data"),i=BUI.Component.UIBase.Bindable,r=t.extend([i],{initializer:function(){var e=this,t=e.get("url"),i=e.get("store")||e._getStore();i.isStore||(i.autoLoad=!0,t&&(i.url=t),i=new n.TreeStore(i),e.set("store",i))},bindUI:function(){var e=this;e.on("change",function(t){var n=t.target;if(n!=e){var i=n,r=i.get("value"),a=e._getFieldIndex(i)+1;e._valueChange(r,a)}})},onLoad:function(e){var t=this,n=e?e.node:t.get("store").get("root");t._setFieldItems(n.level,n.children)},_getStore:function(){var e=this,t=e.get("type");return t&&a[t]?a[t]:{}},_valueChange:function(e,t){var n=this,i=n.get("store");if(e){var r=i.findNode(e);if(!r)return;i.isLoaded(r)?n._setFieldItems(t,r.children):i.loadNode(r)}else n._setFieldItems(t,[])},_setFieldItems:function(t,n){var i=this,r=i.getFieldAt(t),a=e(n);r&&(r.setItems(a),i._valueChange(r.get("value"),t+1))},_getFieldIndex:function(e){var t=this,n=t.getFields();return BUI.Array.indexOf(e,n)}},{ATTRS:{type:{},store:{}}},{xclass:"form-group-select"}),a={};return r.addType=function(e,t){a[e]=t},r.addType("city",{proxy:{url:"http://lp.taobao.com/go/rgn/citydistrictdata.php",dataType:"jsonp"},map:{isleaf:"leaf",value:"text"}}),r}),define("bui/form/fieldgroup",["bui/common","bui/form/group/base","bui/form/group/range","bui/form/group/check","bui/form/group/select"],function(require){var e=require("bui/common"),t=require("bui/form/group/base");return e.mix(t,{Range:require("bui/form/group/range"),Check:require("bui/form/group/check"),Select:require("bui/form/group/select")}),t}),define("bui/form/form",["bui/common","bui/form/fieldcontainer"],function(require){var e=require("bui/common"),t={NORMAL:"normal",AJAX:"ajax",IFRAME:"iframe"},n=require("bui/form/fieldcontainer"),i=(e.Component,n.View.extend({_uiSetMethod:function(e){this.get("el").attr("method",e)},_uiSetAction:function(e){this.get("el").attr("action",e)}},{ATTRS:{method:{},action:{}}},{xclass:"form-view"})),r=n.extend({renderUI:function(){var t,n=this,i=n.get("buttonBar");$.isPlainObject(i)&&n.get("buttons")&&(t=e.merge(n.getDefaultButtonBarCfg(),i),n._initButtonBar(t)),n._initSubmitMask()},_initButtonBar:function(t){var n=this;e.use("bui/toolbar",function(e){buttonBar=new e.Bar(t),n.set("buttonBar",buttonBar)})},bindUI:function(){var e=this,n=e.get("el");n.on("submit",function(n){return e.valid(),e.isValid()&&e.onBeforeSubmit()!==!1?void(e.isValid()&&e.get("submitType")===t.AJAX&&(n.preventDefault(),e.ajaxSubmit())):(n.preventDefault(),void e.focusError())})},getDefaultButtonBarCfg:function(){var e=this,t=e.get("buttons");return{autoRender:!0,elCls:"toolbar",render:e.get("el"),items:t,defaultChildClass:"bar-item-button"}},focusError:function(){var t=this,n=t.getFields();e.each(n,function(t){if(t.get("visible")&&!t.get("disabled")&&!t.isValid()){try{t.focus()}catch(n){e.log(n)}return!1}})},submit:function(e){var n=this,i=n.get("submitType");if(n.valid(),n.isValid()){if(0==n.onBeforeSubmit())return;i===t.NORMAL?n.get("el")[0].submit():i===t.AJAX&&n.ajaxSubmit(e)}else n.focusError()},ajaxSubmit:function(t){var n,i=this,r=i.get("method"),a=i.get("action"),o=i.get("callback"),l=i.get("submitMask"),s=i.serializeToObject(),u=e.merge(!0,{url:a,type:r,dataType:"json",data:s},t);t&&t.success&&(n=t.success),u.success=function(e){l&&l.hide&&l.hide(),n&&n(e),o&&o.call(i,e)},l&&l.show&&l.show(),$.ajax(u)},_initSubmitMask:function(){var n=this,i=n.get("submitType"),r=n.get("submitMask");i===t.AJAX&&r&&e.use("bui/mask",function(t){var i=$.isPlainObject(r)?r:{};r=new t.LoadMask(e.mix({el:n.get("el")},i)),n.set("submitMask",r)})},serializeToObject:function(){return e.FormHelper.serializeToObject(this.get("el")[0])},toObject:function(){return this.serializeToObject()},onBeforeSubmit:function(){return this.fire("beforesubmit")},reset:function(){var e=this,t=e.get("initRecord");e.setRecord(t)},resetTips:function(){var t=this,n=t.getFields();e.each(n,function(e){e.resetTip()})},destructor:function(){var e=this,t=e.get("buttonBar"),n=e.get("submitMask");t&&t.destroy&&t.destroy(),n&&n.destroy&&n.destroy()},_uiSetInitRecord:function(e){this.setRecord(e)}},{ATTRS:{action:{view:!0,value:""},allowTextSelection:{value:!0},events:{value:{beforesubmit:!1}},method:{view:!0,value:"get"},defaultLoaderCfg:{value:{autoLoad:!0,property:"record",dataType:"json"}},submitMask:{value:{msg:"\u6b63\u5728\u63d0\u4ea4\u3002\u3002\u3002"}},submitType:{value:"normal"},focusError:{value:!0},callback:{},decorateCfgFields:{value:{method:!0,action:!0}},defaultChildClass:{value:"form-field"},elTagName:{value:"form"},buttons:{},buttonBar:{shared:!1,value:{}},childContainer:{value:".x-form-fields"},initRecord:{},showError:{value:!1},xview:{value:i},tpl:{value:'<div class="x-form-fields"></div>'}}},{xclass:"form"});return r.View=i,r}),define("bui/form/horizontal",["bui/common","bui/form/form"],function(require){var e=(require("bui/common"),require("bui/form/form")),t=e.extend({getDefaultButtonBarCfg:function(){var e=this,t=e.get("buttons");return{autoRender:!0,elCls:"actions-bar toolbar row",tpl:'<div class="form-actions span21 offset3"></div>',childContainer:".form-actions",render:e.get("el"),items:t,defaultChildClass:"bar-item-button"}}},{ATTRS:{defaultChildClass:{value:"form-row"},errorTpl:{value:'<span class="valid-text"><span class="estate error"><span class="x-icon x-icon-mini x-icon-error">!</span><em>{error}</em></span></span>'},elCls:{value:"form-horizontal"}},PARSER:{}},{xclass:"form-horizontal"});return t}),define("bui/form/row",["bui/common","bui/form/fieldcontainer"],function(require){var e=(require("bui/common"),require("bui/form/fieldcontainer")),t=e.extend({},{ATTRS:{elCls:{value:"row"},defaultChildCfg:{value:{tpl:' <label class="control-label">{label}</label>                <div class="controls">                </div>',childContainer:".controls",showOneError:!0,controlContainer:".controls",elCls:"control-group span8",errorTpl:'<span class="valid-text"><span class="estate error"><span class="x-icon x-icon-mini x-icon-error">!</span><em>{error}</em></span></span>'}},defaultChildClass:{value:"form-field-text"}}},{xclass:"form-row"});return t}),define("bui/form/rule",["bui/common"],function(require){function e(e,t,r,a,o){i.isArray(r)&&i.isString(r[1])&&(r[1]&&(a=r[1]),r=r[0]);var l=e,s=l.get("validator"),u=n(e,r,a);return t=null==t?"":t,s.call(l,t,r,u,o)}function t(e){if(null==e)return{};if($.isPlainObject(e))return e;var t=e,n={};if(i.isArray(e)){for(var r=0;r<t.length;r++)n[r]=t[r];return n}return{0:e}}function n(e,n,r){var a=t(n);return r=r||e.get("msg"),i.substitute(r,a)}var i=require("bui/common"),r=function(e){r.superclass.constructor.call(this,e)};return i.extend(r,i.Base),r.ATTRS={name:{},msg:{},validator:{value:function(){}}},i.augment(r,{valid:function(t,n,i,r){var a=this;return e(a,t,n,i,r)}}),r}),define("bui/form/rules",["bui/form/rule"],function(require){function e(e){return parseFloat(e)}function t(e){return BUI.Date.parse(e)}function n(e,t,n){var i=e&&e.equals!==!1;return i?t>=n:t>n}function i(e){return""==e||null==e}function r(e,t,r,a){for(var o=a.getFields(),l=!0,s=1;s<o.length;s++){var u,c,d=o[s],f=o[s-1];if(d&&f&&(u=d.get("value"),c=f.get("value"),!i(u)&&!i(c)&&!n(t,u,c))){l=!1;break}}return l?null:r}function a(e){var t=e.getFieldAt(0);return t?t.get("name"):""}function o(e,t){if(BUI.isArray(t)||(t=[t]),!e||!t.length)return!1;var n=e?BUI.isArray(e)?e.length:1:0;if(1==t.length){var i=t[0];if(!i)return!0;if(i>n)return!1}else{var r=t[0],a=t[1];if(r>n||n>a)return!1}return!0}{var l=require("bui/form/rule"),s={},u={add:function(e){var t;return $.isPlainObject(e)?(t=e.name,s[t]=new l(e)):e.get&&(t=e.get("name"),s[t]=e),s[t]},remove:function(e){delete s[e]},get:function(e){return s[e]},valid:function(e,t,n,i,r){var a=u.get(e);return a?a.valid(t,n,i,r):null},isValid:function(e,t,n,i){return null==u.valid(e,t,n,i)}};u.add({name:"required",msg:"\u4e0d\u80fd\u4e3a\u7a7a\uff01",validator:function(e,t,n){return t!==!1&&/^\s*$/.test(e)?n:void 0}}),u.add({name:"equalTo",msg:"\u4e24\u6b21\u8f93\u5165\u4e0d\u4e00\u81f4\uff01",validator:function(e,t,n){var i=$(t);return i.length&&(t=i.val()),e===t?void 0:n}}),u.add({name:"min",msg:"\u8f93\u5165\u503c\u4e0d\u80fd\u5c0f\u4e8e{0}\uff01",validator:function(t,n,i){return BUI.isString(t)&&(t=t.replace(/\,/g,"")),""!==t&&e(t)<e(n)?i:void 0}}),u.add({name:"max",msg:"\u8f93\u5165\u503c\u4e0d\u80fd\u5927\u4e8e{0}\uff01",validator:function(t,n,i){return BUI.isString(t)&&(t=t.replace(/\,/g,"")),""!==t&&e(t)>e(n)?i:void 0}}),u.add({name:"length",msg:"\u8f93\u5165\u503c\u957f\u5ea6\u4e3a{0}\uff01",validator:function(e,t,n){return null!=e&&(e=$.trim(e.toString()),t!=e.length)?n:void 0}}),u.add({name:"minlength",msg:"\u8f93\u5165\u503c\u957f\u5ea6\u4e0d\u5c0f\u4e8e{0}\uff01",validator:function(e,t,n){if(null!=e){e=$.trim(e.toString());var i=e.length;if(t>i)return n}}}),u.add({name:"maxlength",msg:"\u8f93\u5165\u503c\u957f\u5ea6\u4e0d\u5927\u4e8e{0}\uff01",validator:function(e,t,n){if(e){e=$.trim(e.toString());var i=e.length;if(i>t)return n}}}),u.add({name:"regexp",msg:"\u8f93\u5165\u503c\u4e0d\u7b26\u5408{0}\uff01",validator:function(e,t,n){return t?t.test(e)?void 0:n:void 0}}),u.add({name:"email",msg:"\u4e0d\u662f\u6709\u6548\u7684\u90ae\u7bb1\u5730\u5740\uff01",validator:function(e,t,n){return e=$.trim(e),e?/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e)?void 0:n:void 0}}),u.add({name:"date",msg:"\u4e0d\u662f\u6709\u6548\u7684\u65e5\u671f\uff01",validator:function(e,t,n){return BUI.isNumber(e)||BUI.isDate(e)?void 0:(e=$.trim(e),e?BUI.Date.isDateString(e)?void 0:n:void 0)}}),u.add({name:"minDate",msg:"\u8f93\u5165\u65e5\u671f\u4e0d\u80fd\u5c0f\u4e8e{0}\uff01",validator:function(e,n,i){if(e){var r=t(e);if(r&&r<t(n))return i}}}),u.add({name:"maxDate",msg:"\u8f93\u5165\u65e5\u671f\u4e0d\u80fd\u5927\u4e8e{0}\uff01",validator:function(e,n,i){if(e){var r=t(e);if(r&&r>t(n))return i}}}),u.add({name:"mobile",msg:"\u4e0d\u662f\u6709\u6548\u7684\u624b\u673a\u53f7\u7801\uff01",validator:function(e,t,n){return e=$.trim(e),e?/^\d{11}$/.test(e)?void 0:n:void 0}}),u.add({name:"number",msg:"\u4e0d\u662f\u6709\u6548\u7684\u6570\u5b57\uff01",validator:function(e,t,n){return BUI.isNumber(e)?void 0:(e=e.replace(/\,/g,""),isNaN(e)?n:void 0)}}),u.add({name:"dateRange",msg:"\u7ed3\u675f\u65e5\u671f\u4e0d\u80fd\u5c0f\u4e8e\u8d77\u59cb\u65e5\u671f\uff01",validator:r}),u.add({name:"numberRange",msg:"\u7ed3\u675f\u6570\u5b57\u4e0d\u80fd\u5c0f\u4e8e\u5f00\u59cb\u6570\u5b57\uff01",validator:r}),u.add({name:"checkRange",msg:"\u5fc5\u987b\u9009\u4e2d{0}\u9879\uff01",validator:function(e,t,n,i){var r,l=a(i),s=t;return l&&s&&(r=e[l],!o(r,s))?n:null}})}return u}),define("bui/form/remote",["bui/common"],function(require){var e=require("bui/common"),t=function(){};t.ATTRS={isLoading:{},loadingEl:{}},t.prototype={getLoadingContainer:function(){},_setLoading:function(){var e=this,t=e.get("loadingEl"),n=e.get("loadingTpl");n&&!t&&(t=$(n).appendTo(e.getLoadingContainer()),e.setInternal("loadingEl",t))},_clearLoading:function(){var e=this,t=e.get("loadingEl");t&&(t.remove(),e.setInternal("loadingEl",null))},_uiSetIsLoading:function(e){var t=this;e?t._setLoading():t._clearLoading()}};var n=function(){};return n.ATTRS={defaultRemote:{value:{method:"GET",cache:!0,callback:function(e){return e}}},remoteDaly:{value:500},cacheMap:{value:{}},loadingTpl:{view:!0,value:'<img src="http://img02.taobaocdn.com/tps/i2/T1NU8nXCVcXXaHNz_X-16-16.gif" alt="loading"/>'},isLoading:{view:!0,value:!1},remote:{setter:function(t){return e.isString(t)&&(t={url:t}),t}},remoteHandler:{},events:{value:{remotecomplete:!1,remotestart:!1}}},n.prototype={__bindUI:function(){var e=this;e.on("valid",function(){if(e.get("remote")&&e.isValid()&&!e.get("pauseValid")){var t=e.getControlValue(),n=e.getRemoteParams();e._startRemote(n,t)}}),e.on("error",function(){e.get("remote")&&e._cancelRemote()})},_startRemote:function(e,t){function n(){i._remoteValid(e,r,t),i.set("isLoading",!0)}var i=this,r=i.get("remoteHandler"),a=i.get("cacheMap"),o=i.get("remoteDaly");return r&&i._cancelRemote(r),null!=a[t]?void i._validResult(i._getCallback(),a[t]):(r=setTimeout(n,o),void i.setInternal("remoteHandler",r))},_validResult:function(e,t){var n=this,i=e(t);n.onRemoteComplete(i,t)},onRemoteComplete:function(e,t,n){var i=this;n==i.get("remoteHandler")&&(i.fire("remotecomplete",{error:e,data:t}),i.set("isLoading",!1),i.setInternal("remoteHandler",null))},_getOptions:function(t){var n=this,i=n.get("remote"),r=n.get("defaultRemote"),a=e.merge(r,i,{data:t});return a},_getCallback:function(){return this._getOptions().callback},_remoteValid:function(e,t,n){var i=this,r=i.get("cacheMap"),a=i._getOptions(e);a.success=function(e){var o=a.callback,l=o(e);r[n]=e,i.onRemoteComplete(l,e,t)},a.error=function(e,n,r){i.onRemoteComplete(r,null,t)},i.fire("remotestart",{data:e}),$.ajax(a)},getRemoteParams:function(){},clearCache:function(){this.set("cacheMap",{})},_cancelRemote:function(e){var t=this;e=e||t.get("remoteHandler"),e&&(clearTimeout(e),t.setInternal("remoteHandler",null)),t.set("isLoading",!1)}},n.View=t,n}),define("bui/select",["bui/common","bui/select/select","bui/select/combox","bui/select/suggest"],function(require){var e=require("bui/common"),t=e.namespace("Select");return e.mix(t,{Select:require("bui/select/select"),Combox:require("bui/select/combox"),Suggest:require("bui/select/suggest")}),t}),define("bui/select/select",["bui/common","bui/picker"],function(require){"use strict";function e(e){if($.isPlainObject(e)){var n=[];return t.each(e,function(e,t){n.push({value:t,text:e})}),n}var i=[];return t.each(e,function(e){i.push(t.isString(e)?{value:e,text:e}:e)}),i}var t=require("bui/common"),n=require("bui/picker").ListPicker,i=t.prefix,r=t.Component,a=n,o=i+"select-input",l=r.Controller.extend({initializer:function(){var t,n=this,r=n.get("multipleSelect"),o=n.get("picker");
o?n.get("valueField")&&o.set("valueField",n.get("valueField")):(t=r?"listbox":"simple-list",o=new a({children:[{xclass:t,elCls:i+"select-list",store:n.get("store"),items:e(n.get("items"))}],valueField:n.get("valueField")}),n.set("picker",o)),r&&o.set("hideEvent","")},renderUI:function(){var e=this,t=e.get("picker"),n=e.get("el"),i=n.find("."+e.get("inputCls"));t.set("trigger",n),t.set("triggerEvent",e.get("triggerEvent")),t.set("autoSetValue",e.get("autoSetValue")),t.set("textField",i),t.render(),e.set("list",t.get("list"))},bindUI:function(){{var e=this,t=e.get("picker"),n=t.get("list");n.get("store")}t.on("selectedchange",function(t){e.fire("change",{text:t.text,value:t.value,item:t.item})}),n.on("itemsshow",function(){e._syncValue()}),t.on("show",function(){e.get("forceFit")&&t.set("width",e.get("el").outerWidth())})},containsElement:function(e){var t=this,n=t.get("picker");return r.Controller.prototype.containsElement.call(this,e)||n.containsElement(e)},_uiSetItems:function(t){if(t){var n=this,i=n.get("picker"),r=i.get("list");r.set("items",e(t)),n._syncValue()}},_syncValue:function(){var e=this,t=e.get("picker"),n=e.get("valueField");n&&t.setSelectedValue($(n).val())},_uiSetName:function(e){var t=this,n=t._getTextEl();e&&n.attr("name",e)},_uiSetWidth:function(e){var t=this;if(null!=e){var n=t._getTextEl(),i=t.get("el").find(".x-icon"),r=n.outerWidth()-n.width(),a=t.get("picker"),o=e-i.outerWidth()-r;n.width(o),t.get("forceFit")&&a.set("width",e)}},_uiSetDisabled:function(e){var t=this,n=t.get("picker"),i=t._getTextEl();n.set("disabled",e),i&&i.attr("disabled",e)},_getTextEl:function(){var e=this,t=e.get("el");return t.find("."+e.get("inputCls"))},destructor:function(){var e=this,t=e.get("picker");t&&t.destroy()},_getList:function(){var e=this,t=e.get("picker"),n=t.get("list");return n},getSelectedValue:function(){return this.get("picker").getSelectedValue()},setSelectedValue:function(e){var t=this,n=t.get("picker");n.setSelectedValue(e)},getSelectedText:function(){return this.get("picker").getSelectedText()}},{ATTRS:{picker:{},list:{},valueField:{},store:{},focusable:{value:!0},multipleSelect:{value:!1},name:{},items:{sync:!1},inputCls:{value:o},forceFit:{value:!0},events:{value:{change:!1}},tpl:{view:!0,value:'<input type="text" readonly="readonly" class="'+o+'"/><span class="x-icon x-icon-normal"><i class="icon icon-caret icon-caret-down"></i></span>'},triggerEvent:{value:"click"}}},{xclass:"select"});return l}),define("bui/select/combox",["bui/common","bui/select/select"],function(require){var e=require("bui/common"),t=require("bui/select/select"),n=e.prefix+"combox-input",i=t.extend({renderUI:function(){var e=this,t=e.get("picker");t.set("autoFocused",!1)},_uiSetItems:function(t){for(var n=this,r=0;r<t.length;r++){var a=t[r];e.isString(a)&&(t[r]={value:a,text:a})}i.superclass._uiSetItems.call(n,t)},bindUI:function(){var e=this,t=e.get("picker"),n=t.get("list"),i=t.get("textField");$(i).on("keyup",function(){var e=n.getSelected();e&&n.clearItemStatus(e)})}},{ATTRS:{tpl:{view:!0,value:'<input type="text" class="'+n+'"/>'},inputCls:{value:n}}},{xclass:"combox"});return i}),define("bui/select/suggest",["bui/common","bui/select/combox"],function(require){"use strict";var e=require("bui/common"),t=require("bui/select/combox"),n=200,i="",r=t.extend({bindUI:function(){var e=this,t=e.get("el").find("input"),n="keyup"===e.get("triggerEvent")?"keyup":"keyup click";t.on(n,function(){e._start()})},_start:function(){var e=this;e._timer=e.later(function(){e._updateContent()},n)},_updateContent:function(){var e,t=this,n=t.get("data"),i=t.get("el").find("input");if((n||i.val()!==t.get("query"))&&(t.set("query",i.val()),e=i.val(),n||e)){var r=t.get("cacheable"),a=t.get("url"),o=t.get("data");if(r&&a){var l=t.get("dataCache");void 0!==l[e]?t._handleResponse(l[e]):t._requestData()}else a?t._requestData():o&&t._handleResponse(o,!0)}},_getStore:function(){var e=this,t=e.get("picker"),n=t.get("list");return n?n.get("store"):void 0},_requestData:function(){var e=this,t=e.get("el").find("input"),n=e.get("callback"),i=e.get("store"),r={};r[t.attr("name")]=t.val(),i?(r.start=0,i.load(r,n)):$.ajax({url:e.get("url"),type:"post",dataType:e.get("dataType"),data:r,success:function(t){e._handleResponse(t),n&&n(t)}})},_handleResponse:function(e,t){var n=this,i=t?n._getFilterItems(e):e;n.set("items",i),n.get("cacheable")&&(n.get("dataCache")[n.get("query")]=i)},_getItemText:function(e){var t=this,n=t.get("picker"),i=n.get("list");return i?i.getItemText(e):""},_getFilterItems:function(t){function n(t,n){r.push(e.isString(n)?t:n)}var i=this,r=[],a=i.get("el").find("input"),o=a.val(),l=i.get("data");return t=t||[],e.each(t,function(t){var r=e.isString(t)?t:i._getItemText(t);l?-1!==r.indexOf($.trim(o))&&n(r,t):n(r,t)}),r},later:function(e,t,n){t=t||0;var i=n?setInterval(e,t):setTimeout(e,t);return{id:i,interval:n,cancel:function(){this.interval?clearInterval(i):clearTimeout(i)}}}},{ATTRS:{data:{value:null},query:{value:i},cacheable:{value:!1},dataCache:{shared:!1,value:{}},dataType:{value:"jsonp"},url:{},callback:{},triggerEvent:{valueFn:function(){return this.get("data")?"click":"keyup"}},autoSetValue:{value:!1}}},{xclass:"suggest"});return r}),define("bui/mask",["bui/common","bui/mask/mask","bui/mask/loadmask"],function(require){var e=(require("bui/common"),require("bui/mask/mask"));return e.LoadMask=require("bui/mask/loadmask"),e}),define("bui/mask/mask",["bui/common"],function(require){var e=require("bui/common"),t=e.namespace("Mask"),n=e.UA,i=e.prefix+"ext-mask",r=i+"-msg";return e.mix(t,{maskElement:function(t,a,o){var l=$(t),s=$("."+i,l),u=null,c=null,d=null,f=null;if(!s.length&&(s=$('<div class="'+i+'"></div>').appendTo(l),l.addClass("x-masked-relative x-masked"),6===n.ie&&s.height(l.height()),a)){u=['<div class="'+r+'"><div>',a,"</div></div>"].join(""),c=$(u).appendTo(l),o&&c.addClass(o);try{d=(l.height()-c.height())/2,f=(l.width()-c.width())/2,c.css({left:f,top:d})}catch(g){e.log("mask error occurred")}}return s},unmaskElement:function(e){var t=$(e),n=t.children("."+r),a=t.children("."+i);n&&n.remove(),a&&a.remove(),t.removeClass("x-masked-relative x-masked")}}),t}),define("bui/mask/loadmask",["bui/mask/mask"],function(require){function e(t){var n=this;e.superclass.constructor.call(n,t)}var t=require("bui/mask/mask");return BUI.extend(e,BUI.Base),e.ATTRS={el:{},msg:{value:"Loading..."},msgCls:{value:"x-mask-loading"},disabled:{value:!1}},BUI.augment(e,{disable:function(){this.set("disabled",!0)},onLoad:function(){t.unmaskElement(this.get("el"))},onBeforeLoad:function(){var e=this;e.get("disabled")||t.maskElement(e.get("el"),e.get("msg"),this.get("msgCls"))},show:function(){this.onBeforeLoad()},hide:function(){this.onLoad()},destroy:function(){this.hide(),this.clearAttrVals(),this.off()}}),e}),define("bui/menu",["bui/common","bui/menu/menu","bui/menu/menuitem","bui/memu/contextmenu","bui/menu/popmenu","bui/menu/sidemenu"],function(require){var e=require("bui/common"),t=e.namespace("Menu");return e.mix(t,{Menu:require("bui/menu/menu"),MenuItem:require("bui/menu/menuitem"),ContextMenu:require("bui/memu/contextmenu"),PopMenu:require("bui/menu/popmenu"),SideMenu:require("bui/menu/sidemenu")}),t.ContextMenuItem=t.ContextMenu.Item,t}),define("bui/menu/menuitem",["bui/common"],function(require){var e=require("bui/common"),t=e.Component,n=t.UIBase,i=(e.prefix,"x-caret"),r="data-id",a=t.View.extend([n.ListItemView,n.CollapsableView],{_uiSetOpen:function(e){var t=this,n=t.getStatusCls("open");e?t.get("el").addClass(n):t.get("el").removeClass(n)}},{ATTRS:{}},{xclass:"menu-item-view"}),o=t.Controller.extend([n.ListItem,n.Collapsable],{renderUI:function(){var t=this,n=t.get("el"),i=t.get("id");i||(i=e.guid("menu-item"),t.set("id",i)),n.attr(r,i)},handleMouseEnter:function(e){this.get("subMenu")&&this.get("openable")&&this.set("open",!0),o.superclass.handleMouseEnter.call(this,e)},handleMouseLeave:function(e){if(this.get("openable")){var t=this,n=t.get("subMenu"),i=e.toElement||e.relatedTarget;i&&n&&n.containsElement(i)?t.set("open",!0):t.set("open",!1)}o.superclass.handleMouseLeave.call(this,e)},containsElement:function(e){var t,n=this,i=o.superclass.containsElement.call(n,e);return i||(t=n.get("subMenu"),i=t&&t.containsElement(e)),i},_uiSetOpen:function(e){if(this.get("openable")){var t=this,n=t.get("subMenu"),i=t.get("subMenuAlign");if(n)if(e)i.node=t.get("el"),n.set("align",i),n.show();else{var r=n.get("align");r&&r.node!=t.get("el")||n.hide()}}},_uiSetSubMenu:function(e){if(e){var t=this,n=t.get("el"),i=t.get("parent");e.get("parentMenu")||(e.set("parentMenu",i),i.get("autoHide")&&("click"==i.get("autoHideType")?e.set("autoHide",!1):e.set("autoHideType","leave"))),$(t.get("arrowTpl")).appendTo(n)}},destructor:function(){var e=this,t=e.get("subMenu");t&&t.destroy()}},{ATTRS:{elTagName:{value:"li"},xview:{value:a},open:{view:!0,value:!1},openable:{value:!0},subMenu:{view:!0},subMenuAlign:{valueFn:function(){return{points:["tr","tl"],offset:[-5,0]}}},arrowTpl:{value:'<span class="'+i+" "+i+'-left"></span>'},events:{value:{afterOpenChange:!0}},subMenuType:{value:"pop-menu"}},PARSER:{subMenu:function(t){var n,i=t.find("ul"),r=this.get("subMenuType");return i&&i.length&&(n=e.Component.create({srcNode:i,xclass:r}),"pop-menu"==r?(i.appendTo("body"),n.setInternal({autoHide:!0,autoHideType:"leave"})):this.get("children").push(n)),n}}},{xclass:"menu-item",priority:0}),l=o.extend({},{ATTRS:{focusable:{value:!1},selectable:{value:!1},handleMouseEvents:{value:!1}}},{xclass:"menu-item-sparator"});return o.View=a,o.Separator=l,o}),define("bui/menu/menu",["bui/common"],function(require){var e=require("bui/common"),t=e.Component,n=t.UIBase,i=t.Controller.extend([n.ChildList],{bindUI:function(){var t=this;t.on("click",function(e){var n=e.target,i=t.get("multipleSelect");t!=n&&(i||!t.get("clickHide")||n.get("subMenu")||t.getTopAutoHideMenu().hide())}),t.on("afterOpenChange",function(n){var i=n.target,r=n.newVal,a=t.get("children");r&&e.each(a,function(e){e!==i&&e.get("open")&&e.set("open",!1)})}),t.on("afterVisibleChange",function(e){e.newVal,t.get("parentMenu");t._clearOpen()})},getTopAutoHideMenu:function(){var e=this,t=e.get("parentMenu");return t&&t.get("autoHide")?t.getTopAutoHideMenu():e.get("autoHide")?e:null},_clearOpen:function(){var t=this,n=t.get("children");e.each(n,function(e){e.set&&e.set("open",!1)})},findItemById:function(e){return this.findItemByField("id",e)},_uiSetSelectedItem:function(e){e&&_self.setSelected(e)}},{ATTRS:{elTagName:{view:!0,value:"ul"},idField:{value:"id"},isDecorateChild:{value:!0},defaultChildClass:{value:"menu-item"},selectedItem:{},parentMenu:{}}},{xclass:"menu",priority:0});return i}),define("bui/menu/popmenu",["bui/common","bui/menu/menu"],function(require){var e=require("bui/common"),t=e.Component.UIBase,n=require("bui/menu/menu"),i=e.Component.View.extend([t.PositionView],{}),r=n.extend([t.Position,t.Align,t.AutoShow,t.AutoHide],{},{ATTRS:{clickHide:{value:!0},align:{value:{points:["bl","tl"],offset:[0,0]}},visibleMode:{value:"visibility"},autoHide:{value:!0},visible:{value:!1},xview:{value:i}}},{xclass:"pop-menu"});return r}),define("bui/memu/contextmenu",["bui/common","bui/menu/menuitem","bui/menu/popmenu"],function(require){var e=require("bui/common"),t=require("bui/menu/menuitem"),n=require("bui/menu/popmenu"),i=e.prefix,r=i+"menu-item-link",a=i+"menu-item-icon",o=e.Component,l=(o.UIBase,t.extend({bindUI:function(){var e=this;e.get("el").delegate("."+r,"click",function(e){e.preventDefault()})},_uiSetIconCls:function(e,t){var n=this,i=t.prevVal,r=n.get("el").find("."+a);r.removeClass(i),r.addClass(e)}},{ATTRS:{text:{veiw:!0,value:""},iconCls:{sync:!1,value:""},tpl:{value:'<a class="'+r+'" href="#">        <span class="'+a+' {iconCls}"></span><span class="'+i+'menu-item-text">{text}</span></a>'}}},{xclass:"context-menu-item"})),s=n.extend({},{ATTRS:{defaultChildClass:{value:"context-menu-item"},align:{value:null}}},{xclass:"context-menu"});return s.Item=l,s}),define("bui/menu/sidemenu",["bui/common","bui/menu/menu"],function(require){var e=require("bui/common"),t=require("bui/menu/menu"),n=(e.Component,e.prefix+"menu-title"),i="menu-leaf",r=t.extend({initializer:function(){var t=this,n=t.get("items"),i=t.get("children");e.each(n,function(e){var n=t._initMenuCfg(e);i.push(n)})},bindUI:function(){var t=this,n=t.get("children");e.each(n,function(e){var t=e.get("children")[0];t&&t.publish("click",{bubbles:1})}),t.get("el").delegate("a","click",function(e){e.preventDefault()}),t.on("itemclick",function(e){var n=e.item,r=$(e.domTarget).closest("."+t.get("collapsedCls"));if(r.length){var a=n.get("collapsed");n.set("collapsed",!a)}else n.get("el").hasClass(i)&&(t.fire("menuclick",{item:n}),t.clearSelection(),t.setSelected(n))})},getItems:function(){var t=this,n=[],i=t.get("children");return e.each(i,function(e){var t=e.get("children")[0];n=n.concat(t.get("children"))}),n},_initMenuCfg:function(t){var n=this,i=t.items,r=[],a={selectable:!1,children:[{xclass:"menu",children:r}]};return e.mix(a,{xclass:"menu-item",elCls:"menu-second"},t),e.each(i,function(e){var t=n._initSubMenuCfg(e);r.push(t)}),a},_initSubMenuCfg:function(t){var n=this,i={xclass:"menu-item",elCls:"menu-leaf",tpl:n.get("subMenuItemTpl")};return e.mix(i,t)}},{ATTRS:{defaultChildCfg:{value:{subMenuType:"menu",openable:!1,arrowTpl:""}},autoInitItems:{value:!1},itemTpl:{value:'<div class="'+n+'"><s></s><span class="'+n+'-text">{text}</span></div>'},subMenuItemTpl:{value:'<a href="{href}"><em>{text}</em></a>'},collapsedCls:{value:n},events:{value:{menuclick:!1}}}},{xclass:"side-menu"});return r}),define("bui/tab",["bui/common","bui/tab/tab","bui/tab/tabitem","bui/tab/navtabitem","bui/tab/navtab","bui/tab/tabpanel","bui/tab/tabpanelitem"],function(require){var e=require("bui/common"),t=e.namespace("Tab");return e.mix(t,{Tab:require("bui/tab/tab"),TabItem:require("bui/tab/tabitem"),NavTabItem:require("bui/tab/navtabitem"),NavTab:require("bui/tab/navtab"),TabPanel:require("bui/tab/tabpanel"),TabPanelItem:require("bui/tab/tabpanelitem")}),t}),define("bui/tab/panelitem",function(){var e=function(){};return e.ATTRS={panel:{},panelContent:{},panelVisibleStatus:{value:"selected"},defaultLoaderCfg:{valueFn:function(){var e=this,t=e._getVisibleEvent();return{property:"panelContent",autoLoad:!1,lazyLoad:{event:t},loadMask:{el:e.get("panel")}}}},panelDestroyable:{value:!0}},BUI.augment(e,{__renderUI:function(){this._resetPanelVisible()},__bindUI:function(){var e=this,t=e._getVisibleEvent();e.on(t,function(t){e._setPanelVisible(t.newVal)})},_resetPanelVisible:function(){var e=this,t=e.get("panelVisibleStatus"),n=e.get(t);e._setPanelVisible(n)},_getVisibleEvent:function(){var e=this,t=e.get("panelVisibleStatus");return"after"+BUI.ucfirst(t)+"Change"},_setPanelVisible:function(e){var t=this,n=t.get("panel"),i=e?"show":"hide";n&&$(n)[i]()},__destructor:function(){var e=this,t=e.get("panel");t&&e.get("panelDestroyable")&&$(t).remove()},_setPanelContent:function(e,t){$(e);$(e).html(t)},_uiSetPanelContent:function(e){var t=this,n=t.get("panel");t._setPanelContent(n,e)},_uiSetPanel:function(e){var t=this,n=t.get("panelContent");n&&t._setPanelContent(e,n),t._resetPanelVisible()}}),e}),define("bui/tab/panels",function(){var e=function(){};return e.ATTRS={panelTpl:{},panelContainer:{},panelCls:{}},BUI.augment(e,{__renderUI:function(){var e=this,t=e.get("children"),n=e._initPanelContainer(),i=e.get("panelCls"),r=i?n.find("."+r):n.children();BUI.each(t,function(t,n){var i=r[n];e._initPanelItem(t,i)})},__bindUI:function(){var e=this;e.on("beforeAddChild",function(t){var n=t.child;e._initPanelItem(n)})},_initPanelContainer:function(){var e=this,t=e.get("panelContainer");return t&&BUI.isString(t)&&(t=0==t.indexOf("#")?$(t):e.get("el").find(t),e.setInternal("panelContainer",t)),t},_initPanelItem:function(e,t){var n=this;e.set?e.get("panel")||(t=t||n._getPanel(e.get("userConfig")),e.set("panel",t)):e.panel||(t=t||n._getPanel(e),e.panel=t)},_getPanel:function(e){var t=this,n=t.get("panelContainer"),i=BUI.substitute(t.get("panelTpl"),e);return $(i).appendTo(n)}}),e}),define("bui/tab/navtabitem",["bui/common"],function(e){var t=e("bui/common"),n=t.Component,i="tab-item-title",r="tab-item-close",a="tab-item-inner",o="tab-nav-actived",l="tab-content",s=n.View.extend({renderUI:function(){var e=this,t=e.get("tabContentContainer"),n=e.get("tabContentTpl");if(t){var i=$(n).appendTo(t);e.set("tabContentEl",i)}},_uiSetHref:function(e){this._setHref(e)},_setHref:function(e){var t=this,n=t.get("tabContentEl");e=e||t.get("href"),n&&$("iframe",n).attr("src",e)},resetHref:function(){this._setHref()},_uiSetTitle:function(e){var t=this,n=t.get("el");$("."+i,n).html(e)},_uiSetActived:function(e){var t=this,n=t.get("el");t.setTabContentVisible(e),e?n.addClass(o):n.removeClass(o)},destructor:function(){var e=this,t=e.get("tabContentEl");t&&t.remove()},setTabContentVisible:function(e){var t=this,n=t.get("tabContentEl");n&&(e?n.show():n.hide())}},{ATTRS:{tabContentContainer:{},tabContentEl:{},title:{},href:{}}}),u=n.Controller.extend({createDom:function(){var e=this,t=e.get("parent");t&&e.set("tabContentContainer",t.getTabContentContainer())},bindUI:function(){{var e=this,t=e.get("el");e.get("events")}t.on("click",function(t){var n=$(t.target);n.hasClass(r)&&e.fire("closing")!==!1&&e.close()})},handleDblClick:function(e){var t=this;t.get("closeable")&&t.fire("closing")!==!1&&t.close(),t.fire("dblclick",{domTarget:e.target,domEvent:e})},handleContextMenu:function(e){e.preventDefault(),this.fire("showmenu",{position:{x:e.pageX,y:e.pageY}})},setTitle:function(e){this.set("title",e)},close:function(){this.fire("closed")},reload:function(){this.get("view").resetHref()},show:function(){var e=this;e.get("el").show(500,function(){e.set("visible",!0)})},hide:function(e){var t=this;this.get("el").hide(500,function(){t.set("visible",!1),e&&e()})},_uiSetActived:function(e){var t=this,n=t.get("parent");n&&e&&n._setItemActived(t)},_uiSetCloseable:function(e){var t=this,n=t.get("el"),i=n.find("."+r);e?i.show():i.hide()}},{ATTRS:{elTagName:{value:"li"},actived:{view:!0,value:!1},closeable:{value:!0},allowTextSelection:{view:!1,value:!1},events:{value:{click:!0,closing:!0,closed:!0,showmenu:!0,afterVisibleChange:!0}},tabContentContainer:{view:!0},tabContentTpl:{view:!0,value:'<div class="'+l+'" style="display:none;"><iframe src="" width="100%" height="100%" frameborder="0"></iframe></div>'},href:{view:!0,value:""},visible:{view:!0,value:!0},title:{view:!0,value:""},tpl:{view:!0,value:'<s class="l"></s><div class="'+a+'">{icon}<span class="'+i+'"></span><s class="'+r+'"></s></div><s class="r"></s>'},xview:{value:s}}},{xclass:"nav-tab-item",priority:0});return u.View=s,u}),define("bui/tab/navtab",["bui/common","bui/menu"],function(require){var e=require("bui/common"),t=require("bui/menu"),n=e.Component,i="tab-nav-list",r="arrow-left",a="arrow-right",o=e.prefix+"tab-force",l="m_close",s=140,u=n.View.extend({renderUI:function(){var e=this,t=e.get("el"),n=null;n=t.find("."+i),e.setInternal("listEl",n)},getContentElement:function(){return this.get("listEl")},getTabContentContainer:function(){return this.get("el").find(".tab-content-container")},_uiSetHeight:function(e){var t=this,n=t.get("el"),i=n.find(".tab-nav-bar"),r=t.getTabContentContainer();e&&r.height(e-i.height()),n.height(e)},_uiSetForceFit:function(e){var t=this,n=t.get("el");e?n.addClass(o):n.removeClass(o)}},{ATTRS:{forceFit:{}}},{xclass:"nav-tab-view",priority:0}),c=n.Controller.extend({addTab:function(t,n){var i=this,r=t.id||e.guid("tab-item"),a=i.get("forceFit"),o=i.getItemById(r);if(o){var l=!1;t.href&&o.get("href")!=t.href&&(o.set("href",t.href),l=!0),i._setItemActived(o),n&&!l&&o.reload()}else t=e.mix({id:r,visible:!1,actived:!0,xclass:"nav-tab-item"},t),o=i.addChild(t),a&&i.forceFit(),o.show(),i._resetItemList();return o},getTabContentContainer:function(){return this.get("view").getTabContentContainer()},bindUI:function(){var e=this,t=e.get("forceFit");t||(e._bindScrollEvent(),e.on("afterVisibleChange",function(t){var n=t.target;n.get("actived")&&e._scrollToItem(n)})),e.on("click",function(t){var n=t.target;n!=e&&(e._setItemActived(n),e.fire("itemclick",{item:n}))}),e.on("closed",function(t){var n=t.target;e._closeItem(n)}),e.on("showmenu",function(t){e._showMenu(t.target,t.position)})},_bindScrollEvent:function(){var e=this,t=e.get("el");t.find(".arrow-left").on("click",function(){t.hasClass(r+"-active")&&e._scrollLeft()}),t.find(".arrow-right").on("click",function(){t.hasClass(a+"-active")&&e._scrllRight()})},_showMenu:function(e,t){var n,i=this,r=i._getMenu(),a=e.get("closeable");i.set("showMenuItem",e),r.set("xy",[t.x,t.y]),r.show(),n=r.getItem(l),n&&n.set("disabled",!a)},setActived:function(e){var t=this,n=t.getItemById(e);t._setItemActived(n)},getActivedItem:function(){var t=this,n=t.get("children"),i=null;return e.each(n,function(e){return e.get("actived")?(i=e,!1):void 0}),i},getItemById:function(t){var n=this,i=n.get("children"),r=null;return e.each(i,function(e){return e.get("id")===t?(r=e,!1):void 0}),r},_getMenu:function(){var e=this;return e.get("menu")||e._initMenu()},_initMenu:function(){var e=this,n=new t.ContextMenu({children:[{xclass:"context-menu-item",iconCls:"icon icon-refresh",text:"\u5237\u65b0",listeners:{click:function(){var t=e.get("showMenuItem");t&&t.reload()}}},{id:l,xclass:"context-menu-item",iconCls:"icon icon-remove",text:"\u5173\u95ed",listeners:{click:function(){var t=e.get("showMenuItem");t&&t.close()}}},{xclass:"context-menu-item",iconCls:"icon icon-remove-sign",text:"\u5173\u95ed\u5176\u4ed6",listeners:{click:function(){var t=e.get("showMenuItem");t&&e.closeOther(t)}}},{xclass:"context-menu-item",iconCls:"icon icon-remove-sign",text:"\u5173\u95ed\u6240\u6709",listeners:{click:function(){e.closeAll()}}}]});return e.set("menu",n),n},_closeItem:function(e){var t=this,n=t._getIndex(e),i=t.getActivedItem(),r=t.get("preItem")||t._getItemByIndex(n-1),a=t._getItemByIndex(n+1);e.hide(function(){t.removeChild(e,!0),t._resetItemList(),i===e?t._setItemActived(r?r:a):t._scrollToItem(i),t.forceFit()})},closeAll:function(){var t=this,n=t.get("children");e.each(n,function(e){e.get("closeable")&&e.close()})},closeOther:function(t){var n=this,i=n.get("children");e.each(i,function(e){t!==e&&e.close()})},_getItemByIndex:function(e){var t=this,n=t.get("children");return n[e]},_getIndex:function(t){var n=this,i=n.get("children");return e.Array.indexOf(t,i)},_resetItemList:function(){if(!this.get("forceFit")){var e=this,t=e.getContentElement();t.width(e._getTotalWidth())}},_getTotalWidth:function(){var e=this,t=e.get("children");return t.length*e.get("itemWidth")},_getForceItemWidth:function(){var e=this,t=e.getContentElement().width(),n=e.get("children"),i=e._getTotalWidth(),r=e.get(r);return i>t&&(r=t/n.length),r},forceFit:function(){var e=this;e._forceItemWidth(e._getForceItemWidth())},_forceItemWidth:function(t){t=t||this.get("itemWidth");var n=this,i=n.get("children");e.each(i,function(e){e.set("width",t)})},_scrollToItem:function(e){if(!this.get("forceFit")){var t=this,n=t.getContentElement(),i=n.position(),r=t._getDistanceToEnd(e,n,i),a=t._getDistanceToBegin(e,i);if(n.width()<n.parent().width())t._scrollTo(n,0);else if(0>a)t._scrollTo(n,i.left-a);else if(r>0)t._scrollTo(n,i.left+-1*r);else if(i.left<0){var o=t._getLastDistance(n,i),l=0;0>o&&(l=i.left-o,l=0>l?l:0,t._scrollTo(n,l))}}},_getDistanceToBegin:function(e,t){var n=e.get("el").position();return n.left+t.left},_getDistanceToEnd:function(e,t,n){var i=this,t=t||i.getContentElement(),r=t.parent().width(),n=n||t.position(),a=i._getDistanceToBegin(e,n),o=a+i.get("itemWidth")-r;return o},_getLastDistance:function(e,t){var n=this,i=n.get("children"),r=i[i.length-1];return r?n._getDistanceToEnd(r,e,t):0},_scrollTo:function(e,t){var n=this;e.animate({left:t},500,function(){n._setArrowStatus(e)})},_scrollLeft:function(){var e,t=this,n=t.getContentElement(),i=n.position(),r=t._getLastDistance(n,i);r>0&&(e=r>t.get("itemWidth")?t.get("itemWidth"):r,t._scrollTo(n,i.left-e))},_scrllRight:function(){var e,t=this,n=t.getContentElement(),i=n.position();i.left<0&&(e=i.left+t.get("itemWidth"),e=0>e?e:0,t._scrollTo(n,e))},_setArrowStatus:function(e,t){e=e||this.getContentElement();var n=this,i=n.get("el"),o=t||e.position(),l=n._getLastDistance(e,t);o.left<0?i.addClass(a+"-active"):i.removeClass(a+"-active"),l>0?i.addClass(r+"-active"):i.removeClass(r+"-active")},_setItemActived:function(e){var t=this,n=t.getActivedItem();e!==n&&(n&&n.set("actived",!1),t.set("preItem",n),e&&(e.get("actived")||e.set("actived",!0),e.get("visible")&&t._scrollToItem(e),t.fire("activeChange",{item:e}),t.fire("activedchange",{item:e})))}},{ATTRS:{defaultChildClass:{value:"nav-tab-item"},menu:{},forceFit:{view:!0,value:!1},itemWidth:{value:s},tpl:{view:!0,value:'<div class="tab-nav-bar"><s class="tab-nav-arrow arrow-left"></s><div class="tab-nav-wrapper"><div class="tab-nav-inner"><ul class="'+i+'"></ul></div></div><s class="tab-nav-arrow arrow-right"></s></div><div class="tab-content-container"></div>'},xview:{value:u},events:{value:{itemclick:!1,activedchange:!1}}}},{xclass:"nav-tab",priority:0});return c}),define("bui/tab/tabitem",["bui/common"],function(require){var e=require("bui/common"),t=e.Component,n=t.UIBase,i=t.View.extend([n.ListItemView],{},{xclass:"tab-item-view"}),r=t.Controller.extend([n.ListItem],{},{ATTRS:{elTagName:{view:!0,value:"li"},xview:{value:i},tpl:{view:!0,value:'<span class="bui-tab-item-text">{text}</span>'}}},{xclass:"tab-item"});return r.View=i,r}),define("bui/tab/tab",["bui/common"],function(require){var e=require("bui/common"),t=e.Component,n=t.UIBase,i=t.Controller.extend([n.ChildList],{},{ATTRS:{elTagName:{view:!0,value:"ul"},defaultChildClass:{value:"tab-item"}}},{xclass:"tab"});return i}),define("bui/tab/tabpanelitem",["bui/common","bui/tab/tabitem","bui/tab/panelitem"],function(require){var e=require("bui/common"),t=require("bui/tab/tabitem"),n=require("bui/tab/panelitem"),i="bui-tab-item-text",r=e.Component,a=t.View.extend([r.UIBase.Close.View],{_uiSetTitle:function(e){var t=this,n=t.get("el"),r=n.find("."+i);r.text(e)}},{xclass:"tab-panel-item-view"}),o=t.extend([n,r.UIBase.Close],{},{ATTRS:{closeAction:{value:"remove"},title:{view:!0,sync:!1},tpl:{value:'<span class="'+i+'">{text}{title}</span>'},closeable:{value:!1},events:{value:{beforeclosed:!0}},xview:{value:a}}},{xclass:"tab-panel-item"});return o.View=a,o}),define("bui/tab/tabpanel",["bui/common","bui/tab/tab","bui/tab/panels"],function(require){var e=(require("bui/common"),require("bui/tab/tab")),t=require("bui/tab/panels"),n=e.extend([t],{bindUI:function(){var e=this;e.on("beforeclosed",function(t){var n=t.target;e._beforeClosedItem(n)})},_beforeClosedItem:function(e){if(e.get("selected")){var t,n,i=this,r=i.indexOfItem(e),a=i.getItemCount();r!==a-1?(n=i.getItemAt(r+1),i.setSelected(n)):0!==r&&(t=i.getItemAt(r-1),i.setSelected(t))}}},{ATTRS:{elTagName:{value:"div"},childContainer:{value:"ul"},tpl:{value:'<div class="tab-panel-inner"><ul></ul><div class="tab-panels"></div></div>'},panelTpl:{value:"<div></div>"},panelContainer:{value:".tab-panels"},defaultChildClass:{value:"tab-panel-item"}}},{xclass:"tab-panel"});return n}),define("bui/toolbar",["bui/common","bui/toolbar/baritem","bui/toolbar/bar","bui/toolbar/pagingbar","bui/toolbar/numberpagingbar"],function(require){var e=require("bui/common"),t=e.namespace("Toolbar");return e.mix(t,{BarItem:require("bui/toolbar/baritem"),Bar:require("bui/toolbar/bar"),PagingBar:require("bui/toolbar/pagingbar"),NumberPagingBar:require("bui/toolbar/numberpagingbar")}),t}),define("bui/toolbar/baritem",function(){var e=BUI.prefix,t=BUI.Component,n=t.UIBase,i=t.View.extend([n.ListItemView]),r=t.Controller.extend([n.ListItem],{renderUI:function(){var t=this.get("el");t.addClass(e+"inline-block"),t.attr("id")||t.attr("id",this.get("id"))}},{ATTRS:{elTagName:{view:!0,value:"li"},selectable:{value:!1},focusable:{value:!1},xview:{value:i}}},{xclass:"bar-item",priority:1}),a=r.extend({_uiSetDisabled:function(t){var n=this,i=n.get("el"),r=t?"addClass":"removeClass";i.find("button").attr("disabled",t)[r](e+"button-disabled")},_uiSetChecked:function(t){var n=this,i=n.get("el"),r=t?"addClass":"removeClass";i.find("button")[r](e+"button-checked")},_uiSetText:function(e){var t=this,n=t.get("el");n.find("button").text(e)},_uiSetbtnCls:function(e){var t=this,n=t.get("el");n.find("button").addClass(e)}},{ATTRS:{checked:{value:!1},tpl:{view:!0,value:'<button type="button" class="{btnCls}">{text}</button>'},btnCls:{sync:!1},text:{sync:!1,value:""}}},{xclass:"bar-item-button",priority:2}),o=r.extend({renderUI:function(){var e=this.get("el");e.attr("role","separator")}},{xclass:"bar-item-separator",priority:2}),l=r.extend({},{ATTRS:{width:{view:!0,value:2}}},{xclass:"bar-item-spacer",priority:2}),s=r.extend({_uiSetText:function(e){var t=this,n=t.get("el");n.html(e)}},{ATTRS:{text:{value:""}}},{xclass:"bar-item-text",priority:2});return r.types={button:a,separator:o,spacer:l,text:s},r}),define("bui/toolbar/bar",function(){var e=BUI.Component,t=e.UIBase,n=e.View.extend({renderUI:function(){var e=this.get("el");e.attr("role","toolbar"),e.attr("id")||e.attr("id",BUI.guid("bar"))}}),i=e.Controller.extend([t.ChildList],{getItem:function(e){return this.getChild(e)}},{ATTRS:{elTagName:{view:!0,value:"ul"},defaultChildClass:{value:"bar-item"},focusable:{value:!1},xview:{value:n}}},{xclass:"bar",priority:1});return i}),define("bui/toolbar/pagingbar",["bui/toolbar/bar"],function(require){var e=require("bui/toolbar/bar"),t=BUI.Component,n=t.UIBase.Bindable,i=BUI.prefix,r="first",a="prev",o="next",l="last",s="skip",u="refresh",c="totalPage",d="curPage",f="totalCount",g=[r,a,o,l,s,u],h=[c,d,f],v=e.extend([n],{initializer:function(){var e=this,t=e.get("children"),n=e.get("items"),i=e.get("store");n?BUI.each(n,function(n){BUI.isString(n)&&(n=BUI.Array.contains(n,g)?e._getButtonItem(n):BUI.Array.contains(n,h)?e._getTextItem(n):{xtype:n}),t.push(n)}):(n=e._getItems(),BUI.each(n,function(e){t.push(e)})),i&&i.get("pageSize")&&e.set("pageSize",i.get("pageSize"))},bindUI:function(){var e=this;e._bindButtonEvent()},jumpToPage:function(e){if(!(0>=e||e>this.get("totalPage"))){var t=this,n=t.get("store"),i=t.get("pageSize"),r=e-1,a=r*i,o=t.fire("beforepagechange",{from:t.get("curPage"),to:e});n&&o!==!1&&n.load({start:a,limit:i,pageIndex:r})}},_afterStoreLoad:function(e){var t,n,i,r,a=this,o=a.get("pageSize"),l=0;l=e.get("start"),n=e.getTotalCount(),t=n-l>o?l+e.getCount()-1:n,r=parseInt((n+o-1)/o,10),r=r>0?r:1,i=parseInt(l/o,10)+1,a.set("start",l),a.set("end",t),a.set("totalCount",n),a.set("curPage",i),a.set("totalPage",r),a._setAllButtonsState(),a._setNumberPages()},_bindButtonEvent:function(){function e(){var e=parseInt(t._getCurrentPageValue(),10);t._isPageAllowRedirect(e)?t.jumpToPage(e):t._setCurrentPageValue(t.get("curPage"))}var t=this;t._bindButtonItemEvent(r,function(){t.jumpToPage(1)}),t._bindButtonItemEvent(a,function(){t.jumpToPage(t.get("curPage")-1)}),t._bindButtonItemEvent(o,function(){t.jumpToPage(t.get("curPage")+1)}),t._bindButtonItemEvent(l,function(){t.jumpToPage(t.get("totalPage"))}),t._bindButtonItemEvent(s,function(){e()}),t._bindButtonItemEvent(u,function(){t.jumpToPage(t.get("curPage"))});var n=t.getItem(d);n&&n.get("el").on("keyup",function(t){t.stopPropagation(),13===t.keyCode&&e()})},_bindButtonItemEvent:function(e,t){var n=this,i=n.getItem(e);i&&i.on("click",t)},onLoad:function(e){var t=this,n=t.get("store");t._afterStoreLoad(n,e)},_getItems:function(){var e=this,t=e.get("items");return t&&t.length?t:(t=[],t.push(e._getButtonItem(r)),t.push(e._getButtonItem(a)),t.push(e._getSeparator()),t.push(e._getTextItem(c)),t.push(e._getTextItem(d)),t.push(e._getButtonItem(s)),t.push(e._getSeparator()),t.push(e._getButtonItem(o)),t.push(e._getButtonItem(l)),t.push(e._getSeparator()),t.push(e._getTextItem(f)),t)},_getButtonItem:function(e){var t=this;return{id:e,xclass:"bar-item-button",text:t.get(e+"Text"),disabled:!0,elCls:t.get(e+"Cls")}
},_getSeparator:function(){return{xclass:"bar-item-separator"}},_getTextItem:function(e){var t=this;return{id:e,xclass:"bar-item-text",text:t._getTextItemTpl(e)}},_getTextItemTpl:function(e){var t=this,n=t.getAttrVals();return BUI.substitute(this.get(e+"Tpl"),n)},_isPageAllowRedirect:function(e){var t=this;return e&&e>0&&e<=t.get("totalPage")&&e!==t.get("curPage")},_setAllButtonsState:function(){var e=this,t=e.get("store");t&&e._setButtonsState([a,o,r,l,s],!0),1===e.get("curPage")&&e._setButtonsState([a,r],!1),e.get("curPage")===e.get("totalPage")&&e._setButtonsState([o,l],!1)},_setButtonsState:function(e,t){var n=this,i=n.get("children");BUI.each(i,function(n){-1!==BUI.Array.indexOf(n.get("id"),e)&&n.set("disabled",!t)})},_setNumberPages:function(){var e=this,t=e.getItems();BUI.each(t,function(t){"bar-item-text"===t.__xclass&&t.set("content",e._getTextItemTpl(t.get("id")))})},_getCurrentPageValue:function(e){var t=this;if(e=e||t.getItem(d)){var n=e.get("el").find("input");return n.val()}},_setCurrentPageValue:function(e,t){var n=this;if(t=t||n.getItem(d)){var i=t.get("el").find("input");i.val(e)}}},{ATTRS:{firstText:{value:"\u9996 \u9875"},firstCls:{value:i+"pb-first"},prevText:{value:"\u4e0a\u4e00\u9875"},prevCls:{value:i+"pb-prev"},nextText:{value:"\u4e0b\u4e00\u9875"},nextCls:{value:i+"pb-next"},lastText:{value:"\u672b \u9875"},lastCls:{value:i+"pb-last"},skipText:{value:"\u786e\u5b9a"},skipCls:{value:i+"pb-skip"},refreshText:{value:"\u5237\u65b0"},refreshCls:{value:i+"pb-refresh"},totalPageTpl:{value:"\u5171 {totalPage} \u9875"},curPageTpl:{value:'\u7b2c <input type="text" autocomplete="off" class="'+i+'pb-page" size="20" value="{curPage}" name="inputItem"> \u9875'},totalCountTpl:{value:"\u5171{totalCount}\u6761\u8bb0\u5f55"},autoInitItems:{value:!1},curPage:{value:0},totalPage:{value:0},totalCount:{value:0},pageSize:{value:30},store:{}},ID_FIRST:r,ID_PREV:a,ID_NEXT:o,ID_LAST:l,ID_SKIP:s,ID_REFRESH:u,ID_TOTAL_PAGE:c,ID_CURRENT_PAGE:d,ID_TOTAL_COUNT:f},{xclass:"pagingbar",priority:2});return v}),define("bui/toolbar/numberpagingbar",["bui/toolbar/pagingbar"],function(require){var e=(BUI.Component,require("bui/toolbar/pagingbar")),t=BUI.prefix,n=t+"button-number",i=e.extend({_getItems:function(){var t=this,n=t.get("items");return n?n:(n=[],n.push(t._getButtonItem(e.ID_PREV)),n.push(t._getButtonItem(e.ID_NEXT)),n)},_getButtonItem:function(e){var t=this;return{id:e,content:'<a href="javascript:;">'+t.get(e+"Text")+"</a>",disabled:!0}},_bindButtonEvent:function(){var e=this,t=e.get("numberButtonCls");e.constructor.superclass._bindButtonEvent.call(this),e.get("el").delegate("a","click",function(e){e.preventDefault()}),e.on("click",function(n){var i=n.target;if(i&&i.get("el").hasClass(t)){var r=i.get("id");e.jumpToPage(r)}})},_setNumberPages:function(){var e=this;e._setNumberButtons()},_setNumberButtons:function(){var e,t=this,n=t.get("curPage"),i=t.get("totalPage"),r=t._getNumberItems(n,i);t._clearNumberButtons(),BUI.each(r,function(e){t._appendNumberButton(e)}),e=t.getItem(n),e&&e.set("selected",!0)},_appendNumberButton:function(e){{var t=this,n=t.getItemCount();t.addItemAt(e,n-1)}},_clearNumberButtons:function(){for(var e=this,t=(e.getItems(),e.getItemCount());t>2;)e.removeItemAt(t-2),t=e.getItemCount()},_getNumberItems:function(e,t){function n(e,t){for(var n=e;t>=n;n++)o.push(a._getNumberItem(n))}function i(){o.push(a._getEllipsisItem())}var r,a=this,o=[],l=a.get("maxLimitCount"),s=a.get("showRangeCount");if(l>t)r=t,n(1,t);else{var u=l>=e?1:e-s,c=e+s,d=t>c?c>l?c:l:t;u>1&&(n(1,1),u>2&&i()),r=d,n(u,d)}return t>r&&(t-1>r&&i(),n(t,t)),o},_getEllipsisItem:function(){var e=this;return{disabled:!0,content:e.get("ellipsisTpl")}},_getNumberItem:function(e){var t=this;return{id:e,elCls:t.get("numberButtonCls")}}},{ATTRS:{itemStatusCls:{value:{selected:"active",disabled:"disabled"}},itemTpl:{value:'<a href="">{id}</a>'},prevText:{value:"<<"},nextText:{value:">>"},maxLimitCount:{value:4},showRangeCount:{value:1},numberButtonCls:{value:n},ellipsisTpl:{value:'<a href="#">...</a>'}}},{xclass:"pagingbar-number",priority:3});return i}),define("bui/progressbar",["bui/common","bui/progressbar/base","bui/progressbar/load"],function(require){var e=require("bui/common"),t=e.namespace("ProgressBar");return e.mix(t,{Base:require("bui/progressbar/base"),Load:require("bui/progressbar/load")}),t}),define("bui/progressbar/base",["bui/common"],function(require){var e=require("bui/common"),t=e.Component.View.extend({_uiSetPercent:function(t){var n=this,i=n.get("el").children();e.isArray(t)||(t=[t]),e.each(i,function(e,n){$(e).width(t[n]+"%")})}},{ATTRS:{percent:{}}}),n=e.Component.Controller.extend({},{ATTRS:{percent:{view:!0,value:0},tpl:{value:'<div class="progress-bar-inner"></div>'},xview:{value:t}}},{xclass:"progress-bar"});return n}),define("bui/progressbar/load",["bui/progressbar/base"],function(require){var e=require("bui/progressbar/base"),t=0,n=1,i=2,r=e.extend({bindUI:function(){var e=this;e.on("afterPercentChange",function(){if(e.isLoading()){var t=e.get("percent");100==t&&e.onCompleted(),e.onChange()}})},start:function(){var e=this;e.isLoading()||e.onstart()},complete:function(){var e=this;clearTimeout(e.get("t")),e.set("percent",100)},cancel:function(){var e=this;clearTimeout(e.get("t")),e.get("percent")&&e.set("percent",0),e.set("status",t)},onstart:function(){var e=this,t=e.get("cfg");e.set("percent",0),e.set("status",n),e.fire("start",t),e._startLoad()},onChange:function(){var e=this;e.fire("loadchange")},onCompleted:function(){var e=this;e.set("status",i),e.fire("completed")},isLoading:function(){return this.get("status")===n},isCompleted:function(){return this.get("status")===i},_startLoad:function(){var e,t=this,n=t.get("ajaxCfg"),i=t.get("interval");n.success=function(r){var a=r.percent;t.set("percent",a),100>a&&t.isLoading()&&(e=setTimeout(function(){$.ajax(n)},i),t.set("t",e))},$.ajax(n)}},{ATTRS:{status:{value:0},ajaxCfg:{},interval:{value:500},events:{}}},{xclass:"progress-bar-load"});return r}),define("bui/calendar",["bui/common","bui/calendar/calendar","bui/calendar/monthpicker","bui/calendar/datepicker"],function(require){var e=require("bui/common"),t=e.namespace("Calendar");return e.mix(t,{Calendar:require("bui/calendar/calendar"),MonthPicker:require("bui/calendar/monthpicker"),DatePicker:require("bui/calendar/datepicker")}),t}),define("bui/calendar/monthpicker",["bui/common","bui/overlay","bui/list","bui/toolbar"],function(require){function e(){return $.map(c,function(e,t){return{text:e,value:t}})}var t=require("bui/common"),n=(t.Component,require("bui/overlay").Overlay),i=require("bui/list").SimpleList,r=require("bui/toolbar"),a=t.prefix,o="x-monthpicker-month",l="x-monthpicker-year",s="x-monthpicker-yearnav",u="x-monthpicker-item",c=["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"],d=i.extend({bindUI:function(){var e=this;e.get("el").delegate("a","click",function(e){e.preventDefault()}).delegate("."+o,"dblclick",function(){e.fire("dblclick")})}},{ATTRS:{itemTpl:{view:!0,value:'<li class="'+u+' x-monthpicker-month"><a href="#" hidefocus="on">{text}</a></li>'},itemCls:{value:u},items:{view:!0,value:e()},elCls:{view:!0,value:"x-monthpicker-months"}}},{xclass:"calendar-month-panel"}),f=i.extend({bindUI:function(){var e=this,t=e.get("el");t.delegate("a","click",function(e){e.preventDefault()}),t.delegate("."+l,"dblclick",function(){e.fire("dblclick")}),t.delegate(".x-icon","click",function(t){var n=$(t.currentTarget);n.hasClass(s+"-prev")?e._prevPage():n.hasClass(s+"-next")&&e._nextPage()}),e.on("itemselected",function(t){t.item&&e.setInternal("year",t.item.value)})},_prevPage:function(){var e=this,t=e.get("start"),n=e.get("yearCount");e.set("start",t-n)},_nextPage:function(){var e=this,t=e.get("start"),n=e.get("yearCount");e.set("start",t+n)},_uiSetStart:function(){var e=this;e._setYearsContent()},_uiSetYear:function(e){var t=this,n=t.findItemByField("value",e);n?t.setSelectedByField(e):t.set("start",e)},_setYearsContent:function(){for(var e=this,t=e.get("year"),n=e.get("start"),i=e.get("yearCount"),r=[],a=n;n+i>a;a++){var o=a.toString();r.push({text:o,value:a})}e.set("items",r),e.setSelectedByField(t)}},{ATTRS:{items:{view:!0,value:[]},elCls:{view:!0,value:"x-monthpicker-years"},itemCls:{value:u},year:{},start:{value:(new Date).getFullYear()},yearCount:{value:10},itemTpl:{view:!0,value:'<li class="'+u+" "+l+'"><a href="#" hidefocus="on">{text}</a></li>'},tpl:{view:!0,value:'<div class="'+s+'"><span class="'+s+'-prev x-icon x-icon-normal x-icon-small"><span class="icon icon-caret icon-caret-left"></span></span><span class="'+s+'-next x-icon x-icon-normal x-icon-small"><span class="icon icon-caret icon-caret-right"></span></span></div><ul></ul>'}}},{xclass:"calendar-year-panel"}),g=n.extend({initializer:function(){var e=this,t=e.get("children"),n=new d,i=new f,r=e._createFooter();t.push(n),t.push(i),t.push(r),e.set("yearPanel",i),e.set("monthPanel",n)},bindUI:function(){var e=this;e.get("monthPanel").on("itemselected",function(t){t.item&&e.setInternal("month",t.item.value)}).on("dblclick",function(){e._successCall()}),e.get("yearPanel").on("itemselected",function(t){t.item&&e.setInternal("year",t.item.value)}).on("dblclick",function(){e._successCall()})},_successCall:function(){var e=this,t=e.get("success");t&&t.call(e)},_createFooter:function(){var e=this;return new r.Bar({elCls:a+"clear x-monthpicker-footer",children:[{xclass:"bar-item-button",text:"\u786e\u5b9a",btnCls:"button button-small button-primary",handler:function(){e._successCall()}},{xclass:"bar-item-button",text:"\u53d6\u6d88",btnCls:"button button-small last",handler:function(){var t=e.get("cancel");t&&t.call(e)}}]})},_uiSetYear:function(e){this.get("yearPanel").set("year",e)},_uiSetMonth:function(e){this.get("monthPanel").setSelectedByField(e)}},{ATTRS:{footer:{},align:{value:{}},year:{},success:{value:function(){}},cancel:{value:function(){}},width:{value:180},month:{},yearPanel:{},monthPanel:{}}},{xclass:"monthpicker"});return g}),define("bui/calendar/header",["bui/common"],function(require){var e=require("bui/common"),t=e.prefix,n=e.Component,i="year-text",r="month-text",a="x-datepicker-arrow",o="x-datepicker-prev",l="x-datepicker-next",s=n.Controller.extend({bindUI:function(){var e=this,t=e.get("el");t.delegate("."+a,"click",function(t){t.preventDefault();var n=$(t.currentTarget);n.hasClass(l)?e.nextMonth():n.hasClass(o)&&e.prevMonth()}),t.delegate(".x-datepicker-month","click",function(){e.fire("headerclick")})},setMonth:function(e,t){var n=this,i=n.get("year"),r=n.get("month");(e!==i||t!==r)&&(n.set("year",e),n.set("month",t),n.fire("monthchange",{year:e,month:t}))},nextMonth:function(){var e=this,t=new Date(e.get("year"),e.get("month")+1);e.setMonth(t.getFullYear(),t.getMonth())},prevMonth:function(){var e=this,t=new Date(e.get("year"),e.get("month")-1);e.setMonth(t.getFullYear(),t.getMonth())},_uiSetYear:function(e){var t=this;t.get("el").find("."+i).text(e)},_uiSetMonth:function(e){var t=this;t.get("el").find("."+r).text(e+1)}},{ATTRS:{year:{sync:!1},month:{sync:!1,setter:function(e){this.set("monthText",e+1)}},monthText:{},tpl:{view:!0,value:'<div class="'+a+" "+o+'"><span class="icon icon-white icon-caret  icon-caret-left"></span></div><div class="x-datepicker-month"><div class="month-text-container"><span><span class="year-text">{year}</span>\u5e74 <span class="month-text">{monthText}</span>\u6708</span><span class="'+t+"caret "+t+'caret-down"></span></div></div><div class="'+a+" "+l+'"><span class="icon icon-white icon-caret  icon-caret-right"></span></div>'},elCls:{view:!0,value:"x-datepicker-header"},events:{value:{monthchange:!0}}}},{xclass:"calendar-header"});return s}),define("bui/calendar/panel",["bui/common"],function(require){var e=require("bui/common"),t=e.Component,n=e.Date,i="x-datepicker-date",r="x-datepicker-today",a="x-datepicker-disabled",o="isoDate",l="x-datepicker-selected",s=6,u={deactive:"prevday",active:"active",disabled:"disabled"},c=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],d=t.View.extend({renderUI:function(){this.updatePanel()},updatePanel:function(){var e=this,t=e.get("el"),n=t.find("tbody"),i=e._getPanelInnerTpl();n.empty(),$(i).appendTo(n)},_getPanelInnerTpl:function(){for(var e=this,t=e._getFirstDate(),i=[],r=0;s>r;r++){var a=n.addWeek(r,t);i.push(e._getWeekTpl(a))}return i.join("")},_getWeekTpl:function(t){for(var i=this,r=i.get("weekTpl"),a=[],o=0;o<c.length;o++){var l=n.addDay(o,t);a.push(i._getDayTpl(l))}return e.substitute(r,{daysTpl:a.join("")})},_getDayTpl:function(t){var i=this,a=i.get("dayTpl"),l=t.getDay(),s=i._isToday(t)?r:"",d=c[l],f=t.getDate(),g=i._isInRange(t)?i._isCurrentMonth(t)?u.active:u.deactive:u.disabled;return e.substitute(a,{dayOfWeek:d,dateType:g,dateNumber:f,todayCls:s,date:n.format(t,o)})},_getFirstDate:function(e,t){var i=this,r=i._getMonthFirstDate(e,t),a=r.getDay();return n.addDay(-1*a,r)},_getMonthFirstDate:function(e,t){var n=this,e=e||n.get("year"),t=t||n.get("month");return new Date(e,t)},_isCurrentMonth:function(e){return e.getMonth()===this.get("month")},_isToday:function(e){var t=new Date;return t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate()},_isInRange:function(e){var t=this,n=t.get("maxDate"),i=t.get("minDate");return i&&i>e?!1:n&&e>n?!1:!0},_clearSelectedDate:function(){var e=this;e.get("el").find("."+l).removeClass(l)},_findDateElement:function(e){var t=this,r=n.format(e,o),a=t.get("el").find("."+i),l=null;return r&&a.each(function(e,t){return $(t).attr("title")===r?(l=$(t),!1):void 0}),l},_setSelectedDate:function(e){var t=this,n=t._findDateElement(e);t._clearSelectedDate(),n&&n.addClass(l)}},{ATTRS:{}}),f=t.Controller.extend({initializer:function(){var e=this,t=new Date;e.get("year")||e.set("year",t.getFullYear()),e.get("month")||e.set("month",t.getMonth())},bindUI:function(){var e=this,t=e.get("el");t.delegate("."+i,"click",function(e){e.preventDefault()}),t.delegate("."+a,"mouseup",function(e){e.stopPropagation()})},performActionInternal:function(e){var t=this,r=$(e.target).closest("."+i);if(r){var a=r.attr("title");a&&(a=n.parse(a),t.get("view")._isInRange(a)&&t.set("selected",a))}},setMonth:function(e,t){var n=this,i=n.get("year"),r=n.get("month");(e!==i||t!==r)&&(n.set("year",e),n.set("month",t),n.get("view").updatePanel())},_uiSetSelected:function(e,t){var i=this;t&&t.prevVal&&n.isDateEquals(e,t.prevVal)||(i.setMonth(e.getFullYear(),e.getMonth()),i.get("view")._setSelectedDate(e),i.fire("selectedchange",{date:e}))},_uiSetMaxDate:function(e){e&&this.get("view").updatePanel()},_uiSetMinDate:function(e){e&&this.get("view").updatePanel()}},{ATTRS:{year:{view:!0},month:{view:!0},selected:{},focusable:{value:!0},dayTpl:{view:!0,value:'<td class="x-datepicker-date x-datepicker-{dateType} {todayCls} day-{dayOfWeek}" title="{date}"><a href="#" hidefocus="on" tabindex="1"><em><span>{dateNumber}</span></em></a></td>'},events:{value:{click:!1,selectedchange:!0}},maxDate:{view:!0,setter:function(t){return t?e.isString(t)?n.parse(t):t:void 0}},minDate:{view:!0,setter:function(t){return t?e.isString(t)?n.parse(t):t:void 0}},weekTpl:{view:!0,value:"<tr>{daysTpl}</tr>"},tpl:{view:!0,value:'<table class="x-datepicker-inner" cellspacing="0"><thead><tr><th  title="Sunday"><span>\u65e5</span></th><th  title="Monday"><span>\u4e00</span></th><th  title="Tuesday"><span>\u4e8c</span></th><th  title="Wednesday"><span>\u4e09</span></th><th  title="Thursday"><span>\u56db</span></th><th  title="Friday"><span>\u4e94</span></th><th  title="Saturday"><span>\u516d</span></th></tr></thead><tbody class="x-datepicker-body"></tbody></table>'},xview:{value:d}}},{xclass:"calendar-panel",priority:0});return f}),define("bui/calendar/calendar",["bui/picker","bui/calendar/monthpicker","bui/calendar/header","bui/calendar/panel","bui/toolbar"],function(require){function e(){var e=new Date;return new Date(e.getFullYear(),e.getMonth(),e.getDate())}function t(e){return 10>e?"0"+e:e.toString()}function n(e){for(var n=[],i=0;e>i;i++)n.push({text:t(i),value:t(i)});return n}function i(e,n,i){var a=e.get("el").find("."+n);r.isNumber(i)&&(i=t(i)),a.val(i)}var r=require("bui/common"),a=r.prefix,o="x-datepicker-time",l="x-datepicker-hour",s="x-datepicker-minute",u="x-datepicker-second",c="x-timepicker",d=require("bui/picker").ListPicker,f=require("bui/calendar/monthpicker"),g=require("bui/calendar/header"),h=require("bui/calendar/panel"),v=require("bui/toolbar"),m=r.Component,p=r.Date,b=m.Controller.extend({initializer:function(){var e=this,t=e.get("children"),n=new g,i=new h,r=e.get("footer")||e._createFooter();t.push(n),t.push(i),t.push(r),e.set("header",n),e.set("panel",i),e.set("footer",r)},renderUI:function(){var e=this,t=e.get("children");if(e.get("showTime")){var n=e.get("timepicker")||e._initTimePicker();t.push(n),e.set("timepicker",n)}},bindUI:function(){var e=this,t=e.get("header"),n=e.get("panel");n.on("selectedchange",function(t){var n=t.date;p.isDateEquals(n,e.get("selectedDate"))||e.set("selectedDate",n)}),e.get("showTime")?e._initTimePickerEvent():n.on("click",function(){e.fire("accept")}),t.on("monthchange",function(t){e._setYearMonth(t.year,t.month)}),t.on("headerclick",function(){var n=e.get("monthpicker")||e._createMonthPicker();n.set("year",t.get("year")),n.set("month",t.get("month")),n.show()})},_initTimePicker:function(){var e=this,t=e.get("lockTime"),n={hour:l,minute:s,second:u};if(t)for(var i in t){var r=n[i.toLowerCase()];e.set(i,t[i]),e.get("el").find("."+r).attr("disabled","")}var a=new d({elCls:c,children:[{itemTpl:'<li><a href="#">{text}</a></li>'}],autoAlign:!1,align:{node:e.get("el"),points:["bl","bl"],offset:[0,-30]},trigger:e.get("el").find("."+o)});return a.render(),e._initTimePickerEvent(a),a},_initTimePickerEvent:function(e){var t=this,e=t.get("timepicker");e&&(e.get("el").delegate("a","click",function(e){e.preventDefault()}),e.on("triggerchange",function(t){var i=t.curTrigger;i.hasClass(l)?e.get("list").set("items",n(24)):e.get("list").set("items",n(60))}),e.on("selectedchange",function(e){var n=e.curTrigger,i=e.value;n.hasClass(l)?t.setInternal("hour",i):n.hasClass(s)?t.setInternal("minute",i):t.setInternal("second",i)}))},_setYearMonth:function(e,t){var n=this,i=n.get("selectedDate"),r=i.getDate();(e!==i.getFullYear()||t!==i.getMonth())&&n.set("selectedDate",new Date(e,t,r))},_createMonthPicker:function(){var e,t=this;return e=new f({render:t.get("el"),effect:{effect:"slide",duration:300},visibleMode:"display",success:function(){var e=this;t._setYearMonth(e.get("year"),e.get("month")),e.hide()},cancel:function(){this.hide()}}),t.set("monthpicker",e),t.get("children").push(e),e},_createFooter:function(){var t=this,n=this.get("showTime"),i=[];return n?(i.push({content:t.get("timeTpl")}),i.push({xclass:"bar-item-button",text:"\u786e\u5b9a",btnCls:"button button-small button-primary",listeners:{click:function(){t.fire("accept")}}})):i.push({xclass:"bar-item-button",text:"\u4eca\u5929",btnCls:"button button-small",id:"todayBtn",listeners:{click:function(){var n=e();t.set("selectedDate",n),t.fire("accept")}}}),new v.Bar({elCls:a+"calendar-footer",children:i})},_updateTodayBtnAble:function(){var t=this;if(!t.get("showTime")){var n=t.get("footer"),i=t.get("panel").get("view"),r=e(),a=n.getItem("todayBtn");i._isInRange(r)?a.enable():a.disable()}},_uiSetSelectedDate:function(e){var t=this,n=e.getFullYear(),i=e.getMonth();t.get("header").setMonth(n,i),t.get("panel").set("selected",e),t.fire("datechange",{date:e})},_uiSetHour:function(e){i(this,l,e)},_uiSetMinute:function(e){i(this,s,e)},_uiSetSecond:function(e){i(this,u,e)},_uiSetMaxDate:function(e){var t=this;t.get("panel").set("maxDate",e),t._updateTodayBtnAble()},_uiSetMinDate:function(e){var t=this;t.get("panel").set("minDate",e),t._updateTodayBtnAble()}},{ATTRS:{header:{},panel:{},maxDate:{},minDate:{},monthPicker:{},timepicker:{},width:{value:180},events:{value:{click:!1,accept:!1,datechange:!1,monthchange:!1}},showTime:{value:!1},lockTime:{},timeTpl:{value:'<input type="text" readonly class="'+o+" "+l+'" />:<input type="text" readonly class="'+o+" "+s+'" />:<input type="text" readonly class="'+o+" "+u+'" />'},selectedDate:{value:e()},hour:{value:(new Date).getHours()},minute:{value:(new Date).getMinutes()},second:{value:0}}},{xclass:"calendar",priority:0});return b}),define("bui/calendar/datepicker",["bui/common","bui/picker","bui/calendar/calendar"],function(require){var e=require("bui/common"),t=require("bui/picker").Picker,n=require("bui/calendar/calendar"),i=e.Date,r=t.extend({initializer:function(){},createControl:function(){var e=this,t=e.get("children"),i=new n({render:e.get("el"),showTime:e.get("showTime"),lockTime:e.get("lockTime"),minDate:e.get("minDate"),maxDate:e.get("maxDate"),autoRender:!0});return e.get("dateMask")||(e.get("showTime")?e.set("dateMask","yyyy-mm-dd HH:MM:ss"):e.set("dateMask","yyyy-mm-dd")),t.push(i),e.set("calendar",i),i},setSelectedValue:function(e){if(this.get("calendar")){var t=this,n=this.get("calendar"),r=i.parse(e,t.get("dateMask"));if(r=r||new Date((new Date).setSeconds(0)),n.set("selectedDate",i.getDate(r)),t.get("showTime")){var a=this.get("lockTime"),o=a&&a.hour?a.hour:r.getHours(),l=a&&a.minute?a.minute:r.getMinutes(),s=a&&a.second?a.second:r.getSeconds();n.set("hour",o),n.set("minute",l),n.set("second",s)}}},getSelectedValue:function(){if(!this.get("calendar"))return null;var e=this,t=e.get("calendar"),n=i.getDate(t.get("selectedDate"));return e.get("showTime")&&(n=i.addHour(t.get("hour"),n),n=i.addMinute(t.get("minute"),n),n=i.addSecond(t.get("second"),n)),n},getSelectedText:function(){return this.get("calendar")?i.format(this.getSelectedValue(),this._getFormatType()):""},_getFormatType:function(){return this.get("dateMask")},_uiSetMaxDate:function(e){if(!this.get("calendar"))return null;var t=this;t.get("calendar").set("maxDate",e)},_uiSetMinDate:function(e){if(!this.get("calendar"))return null;var t=this;t.get("calendar").set("minDate",e)}},{ATTRS:{showTime:{value:!1},lockTime:{},maxDate:{},minDate:{},dateMask:{},changeEvent:{value:"accept"},hideEvent:{value:"accept"},calendar:{}}},{xclass:"datepicker",priority:0});return r}),define("bui/editor",["bui/common","bui/form","bui/editor/editor","bui/editor/record","bui/editor/dialog"],function(require){var e=require("bui/common"),t=(require("bui/form"),e.namespace("Editor"));return e.mix(t,{Editor:require("bui/editor/editor"),RecordEditor:require("bui/editor/record"),DialogEditor:require("bui/editor/dialog")}),t}),define("bui/editor/mixin",function(){function e(e){var t=e,n=t.get("controlCfgField"),i=t.get(n),r=t.addChild(i);t.setInternal(n,r)}var t=function(){e(this)};return t.ATTRS={acceptEvent:{value:"autohide"},preventHide:{value:!0},changeSourceEvent:{value:"show triggerchange"},ignoreInputFields:{value:!1},innerValueField:{},emptyValue:{},controlCfgField:{},focusable:{value:!0},autoUpdate:{value:!0},events:{value:{accept:!1,cancel:!1}}},t.prototype={__bindUI:function(){var e=this,t=e.get("acceptEvent"),n=e.get("changeSourceEvent");t&&e.on(t,function(){return e.accept()?void 0:e.get("preventHide")?!1:void e.cancel()}),n&&e.on(n,function(){e.setValue(e.getSourceValue()),e.get("visible")&&e.focus()})},getInnerControl:function(){var e=this,t=e.get("children");return t[0]},setValue:function(e,t){var n=this,i=n.getInnerControl();n.set("editValue",e),n.clearControlValue(),i.set(n.get("innerValueField"),e),e||n.valid(),t&&n.clearErrors()},getValue:function(){var e=this,t=e.getInnerControl();return t.get(e.get("innerValueField"))},isValid:function(){var e=this,t=e.getInnerControl();return t.isValid?t.isValid():!0},valid:function(){var e=this,t=e.getInnerControl();t.valid&&t.valid()},getErrors:function(){var e=this,t=e.getInnerControl();return t.getErrors?t.getErrors():[]},isChange:function(){var e=this,t=e.get("editValue"),n=e.getValue();return t!==n},clearValue:function(){this.clearControlValue(),this.clearErrors()},clearControlValue:function(){var e=this,t=e.getInnerControl();t.set(e.get("innerValueField"),e.get("emptyValue"))},clearErrors:function(){var e=this,t=e.getInnerControl();t.clearErrors()},getSourceValue:function(){},updateSource:function(){},handleNavEsc:function(){this.cancel()},handleNavEnter:function(e){var t=e.target;"TEXTAREA"!==t.tagName&&("BUTTON"===t.tagName&&$(t).trigger("click"),this.accept())},focus:function(){var e=this,t=e.getInnerControl();t.focus&&t.focus()},accept:function(){var e,t=this;return t.valid(),t.isValid()?(e=t.getValue(),t.get("autoUpdate")&&t.updateSource(e),0!=t.fire("beforeaccept",{value:e})?(t.fire("accept",{value:e,editValue:t.get("editValue")}),t.hide(),!0):void 0):!1},cancel:function(){this.fire("cancel"),this.clearValue(),this.close()}},t}),define("bui/editor/editor",["bui/common","bui/overlay","bui/editor/mixin"],function(require){var e=require("bui/common"),t=require("bui/overlay").Overlay;CLS_TIPS="x-editor-tips",Mixin=require("bui/editor/mixin");var n=t.extend([Mixin],{bindUI:function(){{var e=this;e.getInnerControl()}e.on("validchange",function(){!e.isValid()&&e.get("visible")?e._showError(e.getErrors()):e._hideError()}),e.on("hide",function(){e._hideError()}),e.on("show",function(){e.isValid()||e._showError(e.getErrors())})},_initOverlay:function(){var e=this,n=e.get("tooltip"),i=new t(n);return i.render(),e.set("overlay",i),i},_getErrorList:function(){var e=this,t=e.get("overlay");return t&&t.get("children")[0]},_showError:function(t){var n=this,i=n.get("overlay")||n._initOverlay(),r=n._getErrorList(),a=n.get("errorAlign"),o=e.Array.map(t,function(e){return{error:e}});r.set("items",o),a.node=n.get("el"),i.set("align",a),i.show()},_hideError:function(){var e=this,t=e.get("overlay");t&&t.hide()},getSourceValue:function(){var e=this,t=e.get("curTrigger"),n=e.get("parser"),i=t.text();return n&&(i=n.call(this,i,t)),i},updateSource:function(e){var t=this,n=t.get("curTrigger");n&&n.length&&(e=t._formatText(e),n.text(e))},_formatText:function(e){var t=this,n=t.get("formatter");return n&&(e=n.call(t,e)),e},_uiSetWidth:function(e){var t=this;if(null!=e){var n=t.getInnerControl();n.set&&n.set("width",e)}}},{ATTRS:{innerValueField:{value:"value"},emptyValue:{value:""},autoHide:{value:!0},controlCfgField:{value:"field"},defaultChildCfg:{value:{tpl:"",forceFit:!0,errorTpl:""}},tooltip:{valueFn:function(){return{children:[{xclass:"simple-list",itemTpl:'<li><span class="x-icon x-icon-mini x-icon-error" title="{error}">!</span>&nbsp;<span>{error}</span></li>'}],elCls:CLS_TIPS}}},defaultChildClass:{value:"form-field"},align:{value:{points:["tl","tl"]}},parser:{},formatter:{},errorAlign:{value:{points:["bl","tl"],offset:[0,10]}},overlay:{},field:{value:{}}}},{xclass:"editor"});return n}),define("bui/editor/record",["bui/common","bui/editor/editor"],function(require){var e=require("bui/common"),t=require("bui/editor/editor"),n=t.extend({getSourceValue:function(){return this.get("record")},updateSource:function(t){var n=this,i=n.get("record");e.mix(i,t)},_uiSetRecord:function(e){this.setValue(e)}},{ATTRS:{innerValueField:{value:"record"},acceptEvent:{value:""},emptyValue:{value:{}},autoHide:{value:!1},record:{value:{}},controlCfgField:{value:"form"},form:{value:{}},errorAlign:{value:{points:["tr","tl"],offset:[10,0]}},defaultChildCfg:{valueFn:function(){var e=this;return{xclass:"form",errorTpl:"",showError:!0,showChildError:!0,defaultChildCfg:{elCls:"bui-inline-block",tpl:"",forceFit:!0},buttons:[{btnCls:"button button-primary",text:"\u786e\u5b9a",handler:function(){e.accept()}},{btnCls:"button",text:"\u53d6\u6d88",handler:function(){e.cancel()}}]}}}}},{xclass:"record-editor"});return n}),define("bui/editor/dialog",["bui/overlay","bui/editor/mixin"],function(require){var e=require("bui/overlay").Dialog,t=require("bui/editor/mixin"),n=e.extend([t],{getSourceValue:function(){return this.get("record")},handleNavEnter:function(e){var t=this,n=t.get("success"),i=e.target;"TEXTAREA"!==i.tagName&&("BUTTON"===i.tagName&&$(i).trigger("click"),n?n.call(t):this.accept())},cancel:function(){this.fire("cancel"),this.clearValue(),this.close()},updateSource:function(e){var t=this,n=t.get("record");BUI.mix(n,e)},_uiSetRecord:function(e){this.setValue(e)}},{ATTRS:{innerValueField:{value:"record"},acceptEvent:{value:""},record:{value:{}},emptyValue:{shared:!1,value:{}},controlCfgField:{value:"form"},changeSourceEvent:{value:""},defaultChildCfg:{value:{xclass:"form-horizontal"}},focusable:{value:!1},success:{value:function(){this.accept()}},cancel:{value:function(){this.cancel()}},form:{value:{}}}},{xclass:"dialog-editor"});return n}),define("bui/grid",["bui/common","bui/grid/simplegrid","bui/grid/grid","bui/grid/column","bui/grid/header","bui/grid/format","bui/grid/plugins"],function(require){var e=require("bui/common"),t=e.namespace("Grid");return e.mix(t,{SimpleGrid:require("bui/grid/simplegrid"),Grid:require("bui/grid/grid"),Column:require("bui/grid/column"),Header:require("bui/grid/header"),Format:require("bui/grid/format"),Plugins:require("bui/grid/plugins")}),t}),define("bui/grid/simplegrid",["bui/common","bui/list"],function(require){var e=require("bui/common"),t=require("bui/list"),n=e.Component,i=(n.UIBase,e.prefix),r=i+"grid",a=r+"-row",o=i+"grid-row-odd",l=i+"grid-row-even",s=i+"grid-border",u=t.SimpleListView.extend({setColumns:function(t){var n=this,i=n.get("headerRowEl");t=t||n.get("columns"),i.empty(),e.each(t,function(e){n._createColumn(e,i)})},_createColumn:function(t,n){var i=this,r=e.substitute(i.get("columnTpl"),t);$(r).appendTo(n)},getItemTpl:function(t,n){var i=this,r=i.get("columns"),a=i.get("rowTpl"),s=n%2===0?o:l,u=[];return e.each(r,function(e){var n=e.dataIndex;u.push(i._getCellTpl(e,n,t))}),a=e.substitute(a,{cellsTpl:u.join(""),oddCls:s})},_getCellTpl:function(t,n,i){var r=this,a=t.renderer,o=a?a(i[n],i):i[n],l=r.get("cellTpl");return e.substitute(l,{elCls:t.elCls,text:o})},clearData:function(){var e=this,t=e.get("itemContainer");t.empty()},showData:function(t){var n=this;e.each(t,function(e,t){n._createRow(e,t)})},_uiSetInnerBorder:function(e){var t=this,n=t.get("el");e?n.addClass(s):n.removeClass(s)},_uiSetTableCls:function(e){var t=this,n=t.get("el").find("table");n.attr("class",e)}},{ATTRS:{headerRowEl:{valueFn:function(){var e=this,t=e.get("el").find("thead");return t.children("tr")}},itemContainer:{valueFn:function(){return this.get("el").find("tbody")}},tableCls:{}}},{xclass:"simple-grid-veiw"}),c=e.List.SimpleList.extend({renderUI:function(){this.get("view").setColumns()},bindUI:function(){var e=this,t=e.get("itemCls"),n=t+"-hover",i=e.get("el");i.delegate("."+t,"mouseover",function(e){var t=$(e.currentTarget);t.addClass(n)}).delegate("."+t,"mouseout",function(e){var t=$(e.currentTarget);t.removeClass(n)})},showData:function(e){this.clearData(),this.set("items",e)},clearData:function(){this.get("view").clearData()},_uiSetColumns:function(e){var t=this;t.clearData(),t.get("view").setColumns(e)}},{ATTRS:{itemCls:{view:!0,value:a},tableCls:{view:!0,value:r+"-table"},columns:{view:!0,sync:!1,value:[]},tpl:{view:!0,value:'<table cellspacing="0" class="{tableCls}" cellpadding="0"><thead><tr></tr></thead><tbody></tbody></table>'},innerBorder:{view:!0,value:!0},rowTpl:{view:!0,value:'<tr class="'+a+' {oddCls}">{cellsTpl}</tr>'},cellTpl:{view:!0,value:'<td class="'+r+'-cell {elCls}"><div class="'+r+'-cell-inner"><span class="'+r+'-cell-text">{text}</span></div></td>'},columnTpl:{view:!0,value:'<th class="'+r+'-hd {elCls}" width="{width}"><div class="'+r+'-hd-inner"><span class="'+r+'-hd-title">{title}</span></div></th>'},events:{value:{}},xview:{value:u}}},{xclass:"simple-grid"});return c.View=u,c}),define("bui/grid/column",["bui/common"],function(require){var e=require("bui/common"),t=e.prefix,n=t+"grid-hd-title",i=t+"grid-hd-open",r="sort-",a="ASC",o="DESC",l=t+"grid-hd-menu-trigger",s="grid-hd-menu-trigger",u=e.Component.View.extend({setTplContent:function(e){var t,i=this,r=i.get("sortTpl"),a=i.get("triggerTpl"),o=i.get("el");
u.superclass.setTplContent.call(i,e),t=o.find("."+n),$(r).insertAfter(t),$(a).insertAfter(t)},_setContent:function(){this.setTplContent()},_uiSetShowMenu:function(e){var t=this,i=t.get("triggerTpl"),r=t.get("el"),a=r.find("."+n);e?$(i).insertAfter(a):r.find("."+l).remove()},_uiSetTitle:function(){this.get("rendered")&&this._setContent()},_uiSetDraggable:function(){this.get("rendered")&&this._setContent()},_uiSetSortable:function(){this.get("rendered")&&this._setContent()},_uiSetTpl:function(){this.get("rendered")&&this._setContent()},_uiSetSortState:function(e){var t=this,n=t.get("el"),i=r+"asc",a=r+"desc";n.removeClass(i+" "+a),"ASC"===e?n.addClass(i):"DESC"===e&&n.addClass(a)},_uiSetOpen:function(e){var t=this,n=t.get("el");e?n.addClass(i):n.removeClass(i)}},{ATTRS:{sortTpl:{view:!0,getter:function(){var e=this,n=e.get("sortable");return n?'<span class="'+t+'grid-sort-icon">&nbsp;</span>':""}},tpl:{}}}),c=e.Component.Controller.extend({_toggleSortState:function(){var e=this,t=e.get("sortState"),n=t&&t===a?o:a;e.set("sortState",n)},performActionInternal:function(e){var t=this,n=$(e.target),i=t.get("prefixCls");n.hasClass(i+s)||t.get("sortable")&&t._toggleSortState()},_uiSetWidth:function(e){e&&this.set("originWidth",e)}},{ATTRS:{elTagName:{value:"th"},open:{view:!0,value:!1},dataIndex:{view:!0,value:""},draggable:{sync:!1,view:!0,value:!0},editor:{},focusable:{value:!1},fixed:{value:!1},id:{},renderer:{},resizable:{value:!0},sortable:{sync:!1,view:!0,value:!0},sortState:{view:!0,value:null},title:{sync:!1,view:!0,value:"&#160;"},width:{value:100},showMenu:{view:!0,value:!1},triggerTpl:{view:!0,value:'<span class="'+l+'"></span>'},tpl:{sync:!1,view:!0,value:'<div class="'+t+'grid-hd-inner"><span class="'+n+'">{title}</span></div>'},cellTpl:{value:""},events:{value:{afterWidthChange:!0,afterSortStateChange:!0,afterVisibleChange:!0,click:!0,resize:!0,move:!0}},xview:{value:u}}},{xclass:"grid-hd",priority:1});return c.Empty=c.extend({},{ATTRS:{type:{value:"empty"},sortable:{view:!0,value:!1},width:{view:!0,value:null},tpl:{view:!0,value:'<div class="'+t+'grid-hd-inner"></div>'}}},{xclass:"grid-hd-empty",priority:1}),c}),define("bui/grid/header",["bui/common","bui/grid/column"],function(require){var e=require("bui/common"),t=e.prefix,n=(e.namespace("Grid"),require("bui/grid/column")),i=e.Component.View,r=e.Component.Controller,a=17,o=e.UA,l=i.extend({getContentElement:function(){return this.get("el").find("tr")},scrollTo:function(e){var t=this,n=t.get("el");void 0!==e.top&&n.scrollTop(e.top),void 0!==e.left&&n.scrollLeft(e.left)},_uiSetTableCls:function(e){var t=this,n=t.get("el").find("table");n.attr("class",e)}},{ATTRS:{emptyCellEl:{},tableCls:{}}},{xclass:"header-view"}),s=r.extend({addColumn:function(e,t){var n=this,i=t,r=n.get("columns");return e=n._createColumn(e),void 0===t&&(t=r.length,i=n.get("children").length-1),r.splice(t,0,e),n.addChild(e,i),n.fire("add",{column:e,index:t}),e},removeColumn:function(t){var n,i=this,r=i.get("columns");return t=e.isNumber(t)?r[t]:t,n=e.Array.indexOf(t,r),r.splice(n,1),i.fire("remove",{column:t,index:n}),i.removeChild(t,!0)},bindUI:function(){var e=this;e._bindColumnsEvent()},initializer:function(){var e,t=this,n=t.get("children"),i=t.get("columns");$.each(i,function(e,r){var a=t._createColumn(r);n[e]=a,i[e]=a}),e=t._createEmptyColumn(),n.push(e),t.set("emptyColumn",e)},getColumns:function(){return this.get("columns")},getColumnsWidth:function(){var e=this,t=e.getColumns(),n=0;return $.each(t,function(e,t){t.get("visible")&&(n+=t.get("el").outerWidth())}),n},getColumnOriginWidth:function(){var e=this,t=e.getColumns(),n=0;return $.each(t,function(e,t){if(t.get("visible")){var i=t.get("originWidth")||t.get("width");n+=i}}),n},getColumnByIndex:function(e){var t=this,n=t.getColumns(),i=n[e];return i},getColumn:function(e){var t=this,n=t.getColumns(),i=null;return $.each(n,function(t,n){return e(n)?(i=n,!1):void 0}),i},getColumnById:function(e){var t=this;return t.getColumn(function(t){return t.get("id")===e})},getColumnIndex:function(t){var n=this,i=n.getColumns();return e.Array.indexOf(t,i)},scrollTo:function(e){this.get("view").scrollTo(e)},_bindColumnsEvent:function(){var e=this;e.on("afterWidthChange",function(t){var n=t.target;n!==e&&e.setTableWidth()}),e.on("afterVisibleChange",function(t){var n=t.target;n!==e&&e.setTableWidth()}),e.on("afterSortStateChange",function(t){var n=t.target,i=e.getColumns(),r=t.newVal;r&&$.each(i,function(e,t){t!==n&&t.set("sortState","")})}),e.on("add",function(){e.setTableWidth()}),e.on("remove",function(){e.setTableWidth()})},_createColumn:function(t){return t instanceof n?t:(t.id||(t.id=e.guid("col")),new n(t))},_createEmptyColumn:function(){return new n.Empty},_isAllowScrollLeft:function(){var e=this,t=e.get("parent");return t&&!!t.get("height")},forceFitColumns:function(){function e(e,t){var n=e.get("el");e.set("width",t,{silent:1}),n.width(t)}var t=this,n=t.getColumns(),i=t.get("width"),r=i,o=t.getColumnOriginWidth(),l=0,s=0,u=null,c=t._isAllowScrollLeft();if(i){c&&(i-=a,r=i);var d=0;$.each(n,function(e,t){if(t.get("visible")&&t.get("resizable")&&d++,t.get("visible")&&!t.get("resizable")){var n=t.get("el").outerWidth();r-=n,o-=n}});var f=Math.floor(r/d),g=r/o;if(1===g)return;$.each(n,function(n,i){if(i.get("visible")&&i.get("resizable")){var r=t._getColumnBorderWith(i,n),a=i.get("originWidth");a||(i.set("originWidth",i.get("width")),a=i.get("width")),f=Math.floor((a+r)*g),e(i,f-r),l+=f,u=i}}),u&&(s=r-l,e(u,u.get("width")+s)),t.fire("forceFitWidth")}},_getColumnBorderWith:function(e,t){var n=e.get("el"),i=Math.round(parseFloat(n.css("border-left-width"))||0)+Math.round(parseFloat(n.css("border-right-width"))||0);return i=o.ie&&o.ie<8&&0===t?1:i},setTableWidth:function(){var e=this,t=e.get("width"),n=0,i=null;"auto"!=t&&(e.get("forceFit")?e.forceFitColumns():e._isAllowScrollLeft()&&(n=e.getColumnsWidth(),i=e.get("emptyColumn"),i.get("el").width(n>t?a:"auto")))},_uiSetWidth:function(){var e=this;e.setTableWidth()},_uiSetForceFit:function(e){var t=this;e&&t.setTableWidth()}},{ATTRS:{columns:{value:[]},emptyColumn:{},focusable:{value:!1},forceFit:{sync:!1,view:!0,value:!1},tpl:{view:!0,value:'<table cellspacing="0" class="'+t+'grid-table" cellpadding="0"><thead><tr></tr></thead></table>'},tableCls:{view:!0},xview:{value:l},events:{value:{add:!1,remove:!1}}}},{xclass:"grid-header",priority:1});return s}),define("bui/grid/grid",["bui/common","bui/mask","bui/toolbar","bui/list","bui/grid/header","bui/grid/column"],function(require){function e(e){return n.isString(e)?-1!==e.indexOf("%"):!1}function t(e){return n.isNumber(e)&&(e-=B),e}var n=require("bui/common"),i=(require("bui/mask"),n.UA),r=n.Component,a=(require("bui/toolbar"),require("bui/list")),o=require("bui/grid/header"),l=require("bui/grid/column"),s=n.prefix,u=s+"grid-header-container",c=s+"grid-body",d=s+"grid-width",f=s+"grid-height",g=s+"grid-border",h=s+"grid-tbar",v=s+"grid-bbar",m=s+"grid-button-bar",p=s+"grid-strip",b=s+"grid-row",C=s+"grid-row-odd",x=s+"grid-row-even",y=s+"grid-cell",_=s+"grid-cell-inner",I="grid-td-",T=s+"grid-cell-text",w=s+"grid-cell-empty",S="17",E=s+"hidden",k="data-column-field",B=2,A=a.SimpleListView.extend({renderUI:function(){var e=this,t=e.get("el"),n=t.find("."+c);e.set("bodyEl",n),e._setTableTpl()},getItemTpl:function(e,t){var i=this,r=i._getColumns(),a=(i.get("tbodyEl"),i.get("rowTpl")),o=t%2===0?C:x,l=[];return n.each(r,function(n){var r=n.get("dataIndex");l.push(i._getCellTpl(n,r,e,t))}),i.get("useEmptyCell")&&l.push(i._getEmptyCellTpl()),a=n.substitute(a,{cellsTpl:l.join(""),oddCls:o})},findRow:function(e){var t=this;return $(t.findElement(e))},findCell:function(e,t){var n=I+e;return t.find("."+n)},resetHeaderRow:function(){if(this.get("useHeaderRow")){var e=this,t=e.get("headerRowEl"),n=e.get("tbodyEl");t&&t.remove(),t=e._createHeaderRow(),t.prependTo(n),e.set("headerRowEl",t)}},resetColumnsWidth:function(e,t){var n=this,i=n.get("headerRowEl"),r=n.findCell(e.get("id"),i);t=t||e.get("width"),r&&r.width(t),n.setTableWidth()},setTableWidth:function(t){if(!t&&e(this.get("width")))return void this.get("tableEl").width("100%");{var n=this,r=n._getInnerWidth(),a=n.get("height"),o=n.get("tableEl");n.get("forceFit"),n.get("headerRowEl")}if(!e(t)){if(t=t||n._getColumnsWidth(),!r)return;if(r>=t&&(t=r,a)){var l=6==i.ie||7==i.ie?S+2:S;t=r-l}}o.width(t)},setBodyWidth:function(e){var t=this,n=t.get("bodyEl");e=e||t._getInnerWidth(),n.width(e)},setBodyHeight:function(e){var t=this,i=t.get("bodyEl"),r=e,a=i.siblings();n.each(a,function(e){"none"!==$(e).css("display")&&(r-=$(e).outerHeight())}),i.height(r)},setColumnVisible:function(e){var t=this,n=!e.get("visible"),i=e.get("id"),r=t.get("tbodyEl"),a=$("."+I+i,r);n?a.hide():a.show()},updateItem:function(e){var t=this,i=t.getItems(),r=n.Array.indexOf(e,i),a=t._getColumns(),o=null;return r>=0?(o=t.findElement(e),n.each(a,function(n){var i=t.findCell(n.get("id"),$(o)),a=i.find("."+_),l=t._getCellText(n,e,r);a.html(l)}),o):void 0},showEmptyText:function(){var e=this,t=e.get("bodyEl"),n=e.get("emptyDataTpl"),i=e.get("emptyEl");i&&i.remove();var i=$(n).appendTo(t);e.set("emptyEl",i)},clearEmptyText:function(){var e=this,t=e.get("emptyEl");t&&t.remove()},_createHeaderRow:function(){var e,t=this,i=t._getColumns(),r=t.get("tbodyEl"),a=t.get("headerRowTpl"),o=[];return $.each(i,function(e,n){o.push(t._getHeaderCellTpl(n))}),t.get("useEmptyCell")&&o.push(t._getEmptyCellTpl()),a=n.substitute(a,{cellsTpl:o.join("")}),e=$(a).appendTo(r)},_getColumnsWidth:function(){var e=this,t=e.get("columns"),i=0;return n.each(t,function(e){e.get("visible")&&(i+=e.get("el").outerWidth())}),i},_getColumns:function(){return this.get("columns")},_getCellText:function(e,t,i){var r=this,a=e.get("dataIndex"),o=e.get("cellTpl")||r.get("cellTextTpl"),l=r._getCellInnerText(e,a,t,i);return n.substitute(o,{text:l,tips:r._getTips(e,a,t)})},_getCellInnerText:function(e,t,n,i){try{var r=e.get("renderer"),a=r?r(n[t],n,i):n[t];return null==a?"":a}catch(o){throw"column:"+e.get("title")+" fomat error!"}},_getCellTpl:function(e,t,i,r){var a=this,o=a._getCellText(e,i,r),l=a.get("cellTpl");return n.substitute(l,{elCls:e.get("elCls"),id:e.get("id"),dataIndex:t,cellText:o,hideCls:e.get("visible")?"":E})},_getEmptyCellTpl:function(){return'<td class="'+y+" "+w+'">&nbsp;</td>'},_getHeaderCellTpl:function(e){var t=this,i=t.get("headerCellTpl");return n.substitute(i,{id:e.get("id"),width:e.get("width"),hideCls:e.get("visible")?"":E})},_getInnerWidth:function(){return t(this.get("width"))},_getTips:function(e,t,i){var r=e.get("showTip"),a="";return r&&(a=i[t],n.isFunction(r)&&(a=r(a,i))),a},_uiSetInnerBorder:function(e){var t=this,n=t.get("el");e?n.addClass(g):n.removeClass(g)},_setTableTpl:function(e){var t=this,n=t.get("bodyEl");e=e||t.get("tableTpl"),$(e).appendTo(n);var i=n.find("table"),r=n.find("tbody");t.set("tableEl",i),t.set("tbodyEl",r),t.set("itemContainer",r),t._setTableCls(t.get("tableCls"))},_uiSetTableCls:function(e){this._setTableCls(e)},_uiSetHeight:function(e){{var t=this;t.get("bodyEl")}t.get("el").height(e),t.get("el").addClass(f)},_uiSetWidth:function(e){var t=this;t.get("el").width(e),t.setBodyWidth(t._getInnerWidth(e)),t.get("el").addClass(d)},_uiSetStripeRows:function(e){var t=this,n=e?"addClass":"removeClass";t.get("el")[n](p)},_setTableCls:function(e){var t=this,n=t.get("tableEl");n.attr("class",e)}},{ATTRS:{tableCls:{},bodyEl:{},tbodyEl:{},headerRowEl:{},tableEl:{},emptyEl:{}}},{xclass:"grid-view"}),U=a.SimpleList.extend({createDom:function(){var e=this,t=e.get("render"),n=$(t).width(),i=e.get("width");if(!i&&n){var r=e.getAppendWidth();e.set("width",n-r)}e.get("width")&&e.get("el").addClass(d),e.get("height")&&e.get("el").addClass(f),e.get("innerBorder")&&e.get("el").addClass(g)},renderUI:function(){var e=this;e._initHeader(),e._initBars(),e._initLoadMask(),e.get("view").resetHeaderRow()},bindUI:function(){var e=this;e._bindHeaderEvent(),e._bindBodyEvent(),e._bindItemsEvent()},addColumn:function(e,t){var n=this,i=n.get("header");return i?e=i.addColumn(e,t):(e=new l(e),n.get("columns").splice(t,0,e)),e},clearData:function(){this.clearItems()},getRecords:function(){return this.getItems()},findColumn:function(e){var t=this,i=t.get("header");return n.isNumber(e)?i.getColumnByIndex(e):i.getColumnById(e)},findColumnByField:function(e){var t=this,n=t.get("header");return n.getColumn(function(t){return t.get("dataIndex")===e})},findCell:function(e,t){var n=this,i=null;return i=t instanceof $?t:n.findRow(t),i?n.get("view").findCell(e,i):null},findRow:function(e){var t=this;return t.get("view").findRow(e)},removeColumn:function(e){var t=this;t.get("header").removeColumn(e)},showData:function(e){var t=this;t.set("items",e)},resetColumns:function(){var e=this,t=e.get("store");e.get("view").resetHeaderRow(),t&&e.onLoad()},_bindScrollEvent:function(){var e=this,t=e.get("el"),n=t.find("."+c),i=e.get("header");n.on("scroll",function(){var t=n.scrollLeft(),r=n.scrollTop();i.scrollTo({left:t,top:r}),e.fire("scroll",{scrollLeft:t,scrollTop:r,bodyWidth:n.width(),bodyHeight:n.height()})})},_bindHeaderEvent:function(){var e=this,t=e.get("header"),n=e.get("view"),i=e.get("store");t.on("afterWidthChange",function(e){var i=e.target;i!==t&&n.resetColumnsWidth(i)}),t.on("afterSortStateChange",function(e){var t=e.target,n=e.newVal;n&&i&&i.sort(t.get("dataIndex"),t.get("sortState"))}),t.on("afterVisibleChange",function(i){var r=i.target;r!==t&&(n.setColumnVisible(r),e.fire("columnvisiblechange",{column:r}))}),t.on("click",function(n){var i=n.target;i!==t&&e.fire("columnclick",{column:i,domTarget:n.domTarget})}),t.on("forceFitWidth",function(){e.get("rendered")&&e.resetColumns()}),t.on("add",function(t){e.get("rendered")&&(e.fire("columnadd",{column:t.column,index:t.index}),e.resetColumns())}),t.on("remove",function(t){e.get("rendered")&&(e.resetColumns(),e.fire("columnremoved",{column:t.column,index:t.index}))})},_bindBodyEvent:function(){var e=this;e._bindScrollEvent()},_bindItemsEvent:function(){function e(e){return{record:e.item,row:e.domTarget,domTarget:e.domTarget}}{var t=this;t.get("store")}t.on("itemsshow",function(){t.fire("aftershow")}),t.on("itemsclear",function(){t.fire("clear")}),t.on("itemclick",function(e){var n,i=e.domTarget,r=e.item,a=$(i).closest("."+y),o=$(i).closest("."+b);return a.length&&(n=t.fire("cellclick",{record:r,row:o[0],cell:a[0],field:a.attr(k),domTarget:i,domEvent:e.domEvent})),n===!1?n:t.fire("rowclick",{record:r,row:o[0],domTarget:i})}),t.on("itemunselected",function(n){t.fire("rowunselected",e(n))}),t.on("itemselected",function(n){t.fire("rowselected",e(n))}),t.on("itemrendered",function(n){t.fire("rowcreated",e(n))}),t.on("itemremoved",function(n){t.fire("rowremoved",e(n))}),t.on("itemupdated",function(n){t.fire("rowupdated",e(n))})},_getInnerWidth:function(e){return e=e||this.get("width"),t(e)},_initHeader:function(){var e=this,t=e.get("header"),n=e.get("el").find("."+u);t||(t=new o({columns:e.get("columns"),tableCls:e.get("tableCls"),forceFit:e.get("forceFit"),width:e._getInnerWidth(),render:n,parent:e}).render(),e.set("header",t))},_initBars:function(){var e=this,t=e.get("bbar"),n=e.get("tbar");e._initBar(t,v,"bbar"),e._initBar(n,h,"tbar")},_initBar:function(e,t,i){var a=this,o=null,l=null;if(e){if(e.xclass||e instanceof r.Controller||(e.xclass="bar",e.children=e.children||[],e.items&&(e.children.push({xclass:"bar",defaultChildClass:"bar-item-button",elCls:m,children:e.items}),e.items=null),e.pagingBar&&(o=a.get("store"),l={xclass:"pagingbar",store:o,pageSize:o.pageSize},e.pagingBar!==!0&&(l=n.merge(l,e.pagingBar)),e.children.push(l))),e.xclass){var s=a.get("el").find("."+t);s.show(),e.render=s,e.elTagName="div",e.autoRender=!0,e=a.addChild(e)}a.set(i,e)}return e},_initLoadMask:function(){var e=this,t=e.get("loadMask");t&&!t.show&&(t=new n.Mask.LoadMask({el:e.get("el")}),e.set("loadMask",t))},_uiSetWidth:function(t){var n=this;n.get("rendered")&&(e(t)?n.get("header").set("width","100%"):n.get("header").set("width",n._getInnerWidth(t))),n.get("view").setTableWidth()},_uiSetForceFit:function(e){var t=this;t.get("header").set("forceFit",e)},_uiSetHeight:function(e,t){var n=this,i=n.get("header");n.get("view").setBodyHeight(e),n.get("rendered")&&(n.get("forceFit")&&!t.prevVal&&(i.forceFitColumns(),n.get("view").setTableWidth()),i.setTableWidth())},onLoad:function(){var e=this,t=e.get("store");U.superclass.onLoad.call(this),e.get("emptyDataTpl")&&(t&&0==t.getCount()?e.get("view").showEmptyText():e.get("view").clearEmptyText())}},{ATTRS:{header:{},bbar:{},itemCls:{value:b},columns:{view:!0,value:[]},forceFit:{sync:!1,view:!0,value:!1},emptyDataTpl:{view:!0},headerRowTpl:{view:!0,value:'<tr class="'+s+'grid-header-row">{cellsTpl}</tr>'},headerCellTpl:{view:!0,value:'<td class="{hideCls} '+I+'{id}" width="{width}" style="height:0"></td>'},rowTpl:{view:!0,value:'<tr class="'+b+' {oddCls}">{cellsTpl}</tr>'},cellTpl:{view:!0,value:'<td  class="{elCls} {hideCls} '+y+" "+I+'{id}" data-column-id="{id}" data-column-field = "{dataIndex}" ><div class="'+_+'" >{cellText}</div></td>'},cellTextTpl:{view:!0,value:'<span class="'+T+' " title = "{tips}">{text}</span>'},events:{value:{aftershow:!1,clear:!1,cellclick:!1,columnclick:!1,rowclick:!1,rowcreated:!1,rowremoved:!1,rowselected:!1,rowunselected:!1,scroll:!1}},stripeRows:{view:!0,value:!0},tbar:{},tableCls:{view:!0,sync:!1,value:s+"grid-table"},tableTpl:{view:!0,value:'<table cellspacing="0" cellpadding="0" ><tbody></tbody></table>'},tpl:{value:'<div class="'+h+'" style="display:none"></div><div class="'+u+'"></div><div class="'+c+'"></div><div style="display:none" class="'+v+'"></div>'},innerBorder:{sync:!1,value:!0},useEmptyCell:{view:!0,value:!0},useHeaderRow:{view:!0,value:!0},xview:{value:A}}},{xclass:"grid"});return U.View=A,U}),define("bui/grid/format",function(){function e(e){return 10>e?"0"+e:e}var t={dateRenderer:function(t){if(!t)return"";if(BUI.isString(t))return t;var n=null;try{n=new Date(t)}catch(i){return""}return n&&n.getFullYear?n.getFullYear()+"-"+e(n.getMonth()+1)+"-"+e(n.getDate()):""},datetimeRenderer:function(t){if(!t)return"";if(BUI.isString(t))return t;var n=null;try{n=new Date(t)}catch(i){return""}return n&&n.getFullYear?n.getFullYear()+"-"+e(n.getMonth()+1)+"-"+e(n.getDate())+" "+e(n.getHours())+":"+e(n.getMinutes())+":"+e(n.getSeconds()):""},cutTextRenderer:function(e){return function(t){return t=t||"",t.toString().length>e?t.toString().substring(0,e)+"...":t}},enumRenderer:function(e){return function(t){return e[t]||""}},multipleItemsRenderer:function(e){var n=t.enumRenderer(e);return function(e){var t=[];return e?(BUI.isArray(e)||(e=e.toString().split(",")),$.each(e,function(e,i){t.push(n(i))}),t.join(",")):""}},moneyCentRenderer:function(e){return BUI.isString(e)&&(e=parseFloat(e)),$.isNumberic(e)?(.01*e).toFixed(2):e}};return t}),function(){var e="bui/grid/plugins/";define("bui/grid/plugins",["bui/common",e+"selection",e+"cascade",e+"cellediting",e+"rowediting",e+"autofit",e+"dialogediting",e+"menu",e+"summary",e+"rownumber",e+"columngroup"],function(t){var n=t("bui/common"),i=t(e+"selection"),r={};return n.mix(r,{CheckSelection:i.CheckSelection,RadioSelection:i.RadioSelection,Cascade:t(e+"cascade"),CellEditing:t(e+"cellediting"),RowEditing:t(e+"rowediting"),DialogEditing:t(e+"dialogediting"),AutoFit:t(e+"autofit"),GridMenu:t(e+"menu"),Summary:t(e+"summary"),RowNumber:t(e+"rownumber"),ColumnGroup:t(e+"columngroup")}),r})}(),define("bui/grid/plugins/autofit",["bui/common"],function(require){var e=require("bui/common"),t=(e.UA,function(e){t.superclass.constructor.call(this,e)});return e.extend(t,e.Base),t.ATTRS={},e.augment(t,{bindUI:function(e){var t,n=this;$(window).on("resize",function(){function i(){clearTimeout(t),t=setTimeout(function(){n._autoFit(e)},100),n.set("handler",t)}i()})},_autoFit:function(e){for(var t=($(e.get("render")),$(window).width()),n=0,i=e.get("el").parent();i[0]&&i[0]!=$("body")[0];)n+=i.outerWidth()-i.width(),i=i.parent();e.set("width",t-n)}}),t}),define("bui/grid/plugins/menu",["bui/common","bui/menu"],function(require){var e=require("bui/common"),t=require("bui/menu"),n=e.prefix,i="sort-asc",r="sort-desc",a="column-setting",o=function(e){o.superclass.constructor.call(this,e)};return e.extend(o,e.Base),o.ATTRS={menu:{},activedColumn:{},triggerCls:{value:n+"grid-hd-menu-trigger"},items:{value:[{id:i,text:"\u5347\u5e8f",iconCls:"icon-arrow-up"},{id:r,text:"\u964d\u5e8f",iconCls:"icon-arrow-down"},{xclass:"menu-item-sparator"},{id:a,text:"\u8bbe\u7f6e\u5217",iconCls:"icon-list-alt"}]}},e.augment(o,{initializer:function(e){var t=this;t.set("grid",e)},renderUI:function(t){var n=this,i=t.get("columns");e.each(i,function(e){n._addShowMenu(e)})},bindUI:function(e){var t=this;e.on("columnadd",function(e){t._addShowMenu(e.column)}),e.on("columnclick",function(e){var n,i=$(e.domTarget),r=e.column;t.set("activedColumn",r),i.hasClass(t.get("triggerCls"))&&(n=t.get("menu")||t._initMenu(),n.set("align",{node:i,points:["bl","tl"],offset:[0,0]}),n.show(),t._afterShow(r,n))})},_addShowMenu:function(e){e.get("fixed")||e.set("showMenu",!0)},_afterShow:function(e,t){{var n=this;n.get("grid")}t=t||n.get("menu"),n._resetSortMenuItems(e,t),n._resetColumnsVisible(t)},_resetColumnsVisible:function(e){var t=this,n=e.findItemById(a),i=n.get("subMenu")||t._initColumnsMenu(n),r=t.get("grid").get("columns");i.removeChildren(!0),$.each(r,function(e,t){if(!t.get("fixed")){var n={xclass:"context-menu-item",text:t.get("title"),column:t,iconCls:"icon"},r=i.addChild(n);t.get("visible")&&r.set("selected",!0)}})},_resetSortMenuItems:function(e,t){var n=t.findItemById(i),a=t.findItemById(r);e.get("sortable")?(n.set("disabled",!1),a.set("disabled",!1)):(n.set("disabled",!0),a.set("disabled",!0))},_initMenu:function(){var e,n=this,i=n.get("menu");return i||(e=n.get("items"),$.each(e,function(e,t){t.xclass||(t.xclass="context-menu-item")}),i=new t.ContextMenu({children:e,elCls:"grid-menu"}),n._initMenuEvent(i),n.set("menu",i)),i},_initMenuEvent:function(e){var t=this;e.on("itemclick",function(e){var n=e.item,a=n.get("id"),o=t.get("activedColumn");a===i?o.set("sortState","ASC"):a===r&&o.set("sortState","DESC")}),e.on("afterVisibleChange",function(e){var n=e.newVal,i=t.get("activedColumn");n&&i?i.set("open",!0):i.set("open",!1)})},_initColumnsMenu:function(e){var n=new t.ContextMenu({multipleSelect:!0,elCls:"grid-column-menu"});return e.set("subMenu",n),n.on("itemclick",function(e){var t=e.item,n=t.get("column"),i=t.get("selected");i?n.set("visible",!0):n.set("visible",!1)}),n},destructor:function(){var e=this,t=e.get("menu");t&&t.destroy(),e.off(),e.clearAttrVals()}}),o}),define("bui/grid/plugins/cascade",["bui/common"],function(require){var e=require("bui/common"),t=e.prefix,n="data-record",i=t+"grid-cascade",r=i+"-expand",a=i+"-row",o=i+"-cell",l=i+"-collapse",s=function(e){s.superclass.constructor.call(this,e)};return e.extend(s,e.Base),s.ATTRS={width:{value:40},cellInner:{value:'<span class="'+i+'"><i class="'+i+'-icon"></i></span>'},rowTpl:{value:'<tr class="'+a+'"><td class="'+o+'"></td></tr>'},renderer:{},events:["expand","collapse","removed"]},e.augment(s,{initializer:function(e){{var t=this,n={title:"",elCls:"center",width:t.get("width"),resizable:!1,fixed:!0,sortable:!1,cellTpl:t.get("cellInner")};e.addColumn(n,0)}e.set("innerBorder",!1),t.set("grid",e)},bindUI:function(e){var t=this;e.on("cellclick",function(e){var n=$(e.domTarget),a=n.closest("."+i);a.length&&(a.hasClass(r)?t._onCollapse(e.record,e.row,a):t._onExpand(e.record,e.row,a))}),e.on("columnvisiblechange",function(){t._resetColspan()}),e.on("rowremoved",function(e){t.remove(e.record)}),e.on("clear",function(){t.removeAll()})},expandAll:function(){var e=this,t=e.get("grid"),n=t.getRecords();$.each(n,function(t,n){e.expand(n)})},expand:function(e){var t=this,n=t.get("grid"),i=n.findRow(e);i&&t._onExpand(e,i)},collapse:function(e){var t=this,n=t.get("grid"),i=n.findRow(e);i&&t._onCollapse(e,i)},removeAll:function(){var e=this,t=e._getAllCascadeRows();t.each(function(t,n){e._removeCascadeRow(n)})},remove:function(e){var t=this,n=t._findCascadeRow(e);n&&t._removeCascadeRow(n)},collapseAll:function(){var e=this,t=e.get("grid"),n=t.getRecords();$.each(n,function(t,n){e.collapse(n)})},_getRowRecord:function(e){return $(e).data(n)},_removeCascadeRow:function(e){this.fire("removed",{record:$(e).data(n),row:e}),$(e).remove()},_findCascadeRow:function(e){var t=this,n=t._getAllCascadeRows(),i=null;return $.each(n,function(n,r){return t._getRowRecord(r)===e?(i=r,!1):void 0}),i},_getAllCascadeRows:function(){var e=this,t=e.get("grid");return t.get("el").find("."+a)},_getCascadeRow:function(e){var t=$(e).next();return t.hasClass(a)?t:null},_getRowContent:function(e){var t=this,n=t.get("renderer"),i=n?n(e):"";return i},_createCascadeRow:function(e,t){var i=this,r=i.get("rowTpl"),a=i._getRowContent(e),l=$(r).insertAfter(t);return l.find("."+o).append($(a)),l.data(n,e),l},_onExpand:function(e,t,n){{var a=this,o=a._getCascadeRow(t);a._getColumnCount(t)}n=n||$(t).find("."+i),n.addClass(r),o&&o.length||(o=a._createCascadeRow(e,t)),$(o).removeClass(l),a._setColSpan(o,t),a.fire("expand",{record:e,row:o[0]})},_onCollapse:function(e,t,n){var a=this,o=a._getCascadeRow(t);n=n||$(t).find("."+i),n.removeClass(r),(o||!o.length)&&($(o).addClass(l),a.fire("collapse",{record:e,row:o[0]}))},_getColumnCount:function(e){return $(e).children().filter(function(){return"none"!==$(this).css("display")}).length},_setColSpan:function(e,t){t=t||$(e).prev();var n=this,i=n._getColumnCount(t);$(e).find("."+o).attr("colspan",i)},_resetColspan:function(){var e=this,t=e._getAllCascadeRows();$.each(t,function(t,n){e._setColSpan(n)})},destructor:function(){var e=this;e.removeAll(),e.off(),e.clearAttrVals()}}),s}),define("bui/grid/plugins/selection",["bui/common"],function(require){function e(t){e.superclass.constructor.call(this,t)}var t=require("bui/common"),n=t.prefix,i=n+"grid-checkBox",r="x-grid-checkbox",a=n+"grid-radio";t.extend(e,t.Base),e.ATTRS={width:{value:40},column:{},cellInner:{value:'<div class="'+i+'-container"><span class="'+r+'"></span></div>'}},t.augment(e,{createDom:function(e){var t=this,i={title:"",width:t.get("width"),fixed:!0,resizable:!1,sortable:!1,tpl:'<div class="'+n+'grid-hd-inner">'+t.get("cellInner"),cellTpl:t.get("cellInner")},r=e.addColumn(i,0);e.set("multipleSelect",!0),t.set("column",r)},bindUI:function(e){var t=this,n=t.get("column"),i=n.get("el"),a=i.find("."+r);a.on("click",function(){var t=i.hasClass("checked");t?(e.clearSelection(),i.removeClass("checked")):(e.setAllSelection(),i.addClass("checked"))}),e.on("rowunselected",function(){i.removeClass("checked")}),e.on("clear",function(){i.removeClass("checked")})}});var o=function(e){o.superclass.constructor.call(this,e)};t.extend(o,t.Base),o.ATTRS={width:{value:40},column:{},cellInner:{value:'<div class="'+n+'grid-radio-container"><input  class="'+a+'" type="radio"></div>'}},t.augment(o,{createDom:function(e){var t=this,n={title:"",width:t.get("width"),resizable:!1,fixed:!0,sortable:!1,cellTpl:t.get("cellInner")},i=e.addColumn(n,0);e.set("multipleSelect",!1),t.set("column",i)},bindUI:function(e){var t=this;e.on("rowselected",function(e){t._setRowChecked(e.row,!0)}),e.on("rowunselected",function(e){t._setRowChecked(e.row,!1)})},_setRowChecked:function(e,t){var n=$(e),i=n.find("."+a);i.attr("checked",t)}});var l={CheckSelection:e,RadioSelection:o};return l}),define("bui/grid/plugins/summary",["bui/common"],function(require){function e(e){return e>0?'<td class="'+f+'" colspan="'+e+'">&nbsp;</td>':""}function t(e,t){return'<td class="'+f+" "+c+t+'">'+n(e)+"</td>"}function n(e){return'<div class="'+u+'" ><span class="'+d+' ">'+e+"</span></div>"}function i(){return'<td class="'+f+" "+f+'-empty">&nbsp;</td>'}var r=require("bui/common"),a=r.prefix,o=a+"grid-row",l=a+"grid-body",s=a+"grid-summary-row",u=a+"grid-cell-inner",c="grid-td-",d=a+"grid-cell-text",f=a+"grid-cell",g=function(e){g.superclass.constructor.call(this,e)};return g.ATTRS={footerTpl:{value:"<tfoot></tfoot>"},footerEl:{},summaryTitle:{value:"\u67e5\u8be2\u5408\u8ba1"},pageSummaryTitle:{value:"\u672c\u9875\u5408\u8ba1"},field:{value:"summary"},pageSummaryField:{value:"pageSummary"},summaryField:{value:"summary"},pageSummary:{},summary:{}},r.extend(g,r.Base),r.augment(g,{initializer:function(e){var t=this;t.set("grid",e)},renderUI:function(e){var t=this,n=e.get("el").find("."+l),i=n.find("table"),r=$(t.get("footerTpl")).appendTo(i);t.set("footerEl",r)},bindUI:function(e){var t=this,n=e.get("store");n&&(n.on("beforeprocessload",function(e){t._processSummary(e.data)}),n.on("add",function(){t.resetPageSummary()}),n.on("remove",function(){t.resetPageSummary()}),n.on("update",function(){t.resetPageSummary()})),e.on("aftershow",function(){t.resetSummary()}),e.get("header").on("afterVisibleChange",function(){t.resetSummary()})},_processSummary:function(e){var t=this,n=t.get("footerEl");if(n.empty(),e){var i=e[t.get("pageSummaryField")],r=e[t.get("summaryField")];t.set("pageSummary",i),t.set("summary",r)}},resetPageSummary:function(){var e=this,t=e.get("grid"),n=t.get("columns"),i=e._calculatePageSummary(),a=e.get("pageEl");e.set("pageSummary",i),a&&(r.each(n,function(t){if(t.get("summary")&&t.get("visible")){var n=t.get("id"),r=a.find("."+c+n),o=e._getSummaryCellText(t,i);r.find("."+d).text(o)}}),e._updateFirstRow(a,e.get("pageSummaryTitle")))},resetSummary:function(e,t){var n=this,i=n.get("footerEl"),r=null;i.empty(),e=e||n.get("pageSummary"),e||(e=n._calculatePageSummary(),n.set("pageSummary",e)),t=t||n.get("summary"),r=n._creatSummaryRow(e,n.get("pageSummaryTitle")),n.set("pageEl",r),n._creatSummaryRow(t,n.get("summaryTitle"))},_creatSummaryRow:function(e,t){if(!e)return null;var n=this,i=n.get("footerEl"),r=n._getSummaryTpl(e),a=$(r).appendTo(i);return n._updateFirstRow(a,t),a},_updateFirstRow:function(e,t){var i=e.find("td").first(),r=i.find("."+u);if(r.length){var a=t+": ";text=r.text(),-1===text.indexOf(a)&&(text=a+text),i.html(n(text))}else i.html(n(t+":"))},_getSummaryTpl:function(n){var r=this,a=r.get("grid"),l=a.get("columns"),u=[],c=-1,d=-1,f=null;return $.each(l,function(i,a){if(a.get("visible")&&(d+=1,a.get("summary"))){u.push(e(d-c-1));var o=r._getSummaryCellText(a,n),l=t(o,a.get("id"));u.push(l),c=d}}),c!==d&&u.push(e(d-c)),f=['<tr class="',s," ",o,'">',u.join(""),i(),"</tr>"].join("")},_getSummaryCellText:function(e,t){var n=t[e.get("dataIndex")],i=null==n?"":n,r=e.get("renderer"),a=r?r(i,t):i;return a},_calculatePageSummary:function(){var e=this,t=e.get("grid"),n=t.get("store"),i=t.get("columns"),a={};return r.each(i,function(e){if(e.get("summary")){var t=e.get("dataIndex");a[t]=n.sum(t)}}),a}}),g}),define("bui/grid/plugins/editing",function(){function e(t){e.superclass.constructor.call(this,t)}var t=BUI.prefix+"grid-cell-inner",n=BUI.prefix+"grid-cell-error";return BUI.extend(e,BUI.Base),e.ATTRS={align:{value:{points:["cl","cl"]}},showError:{value:!0},errorTpl:{value:'<span class="x-icon '+n+' x-icon-mini x-icon-error" title="{error}">!</span>'},isInitEditors:{value:!1},record:{},curEditor:{},hasValid:{},editors:{shared:!1,value:[]},triggerCls:{},triggerSelected:{value:!0}},BUI.augment(e,{initializer:function(e){var t=this;t.set("grid",e),t.initEditing(e)},renderUI:function(){var e=this,t=e.get("grid");BUI.use("bui/editor",function(n){e.initEditors(n),e._initGridEvent(t),e.set("isInitEditors",!0),e.fire("editorready")})},initEditing:function(){},_getCurEditor:function(){return this.get("curEditor")},_initGridEvent:function(e){function t(e,t){n.get("hasValid")&&n.validRecord(e,n.getFields(),$(t))}var n=this,i=e.get("header");e.on("cellclick",function(e){var t=null,i=e.domTarget,r=n.get("triggerCls"),a=n._getCurEditor();return a&&a.get("acceptEvent")?(a.accept(),a.hide()):a&&a.cancel(),t=n.getEditor(e.field),t&&$(i).closest("."+r).length&&(n.showEditor(t,e),!n.get("triggerSelected"))?!1:void 0}),e.on("rowcreated",function(e){t(e.record,e.row)}),e.on("rowremoved",function(e){n.get("record")==e.record&&n.cancel()
}),e.on("rowupdated",function(e){t(e.record,e.row)}),e.on("scroll",function(e){var t=n._getCurEditor();if(t){var i=t.get("align"),r=i.node,a=r.position();a.top<0||a.top>e.bodyHeight?t.hide():(t.set("align",i),t.show())}}),i.on("afterVisibleChange",function(e){if(e.target&&e.target!=i){var t=e.target;n.onColumnVisibleChange(t)}})},initEditors:function(e){var t=this,n=t.get("grid"),i=[],r=n.get("columns");BUI.each(r,function(e){var n=t.getFieldConfig(e);n&&(n.name=e.get("dataIndex"),n.id=e.get("id"),n.validator&&(n.validator=t.wrapValidator(n.validator)),i.push(n))});var a=t.getEditorCfgs(i);BUI.each(a,function(n){t.initEidtor(n,e)})},getFieldConfig:function(e){return e.get("editor")},wrapValidator:function(e){var t=this;return function(n){var i=t.get("record");return e(n,i)}},onColumnVisibleChange:function(){},getEditorCfgs:function(){},getEditorConstructor:function(e){return e.Editor},initEidtor:function(e,t){var n=this,i=n.getEditorConstructor(t),r=new i(e);return r.render(),n.get("editors").push(r),n.bindEidtor(r),r},bindEidtor:function(e){var t=this,n=t.get("grid"),i=n.get("store");e.on("accept",function(){var n=t.get("record");t.updateRecord(i,n,e),t.fire("accept",{editor:e,record:n}),t.set("curEditor",null)}),e.on("cancel",function(){t.fire("cancel",{editor:e,record:t.get("record")}),t.set("curEditor",null)})},getEditor:function(){},getAlignNode:function(){},getEditValue:function(){},showEditor:function(e,t){var n=this,i=n.getEditValue(t),r=n.getAlignNode(t);if(n.beforeShowEditor(e,t),n.set("record",t.record),e.setValue(i),r){var a=n.get("align");a.node=r,e.set("align",a)}e.show(),n.focusEditor(e,t.field),n.set("curEditor",e),n.fire("editorshow",{editor:e})},focusEditor:function(e){e.focus()},beforeShowEditor:function(){},_createEditOptions:function(e,t){var n=this,i=n.get("grid"),r=i.findRow(e),a=i.findColumnByField(t),o=i.findCell(a.get("id"),r);return{record:e,field:t,cell:o[0],row:r[0]}},valid:function(){var e=this,t=e.get("grid"),n=t.get("store");if(n){var i=n.getResult();BUI.each(i,function(t){e.validRecord(t,e.getFields())})}e.set("hasValid",!0)},isValid:function(){var e=this,t=e.get("grid");return e.get("hasValid")||e.valid(),!t.get("el").find("."+n).length},clearErrors:function(){var e=this,t=e.get("grid");t.get("el").find("."+n).remove()},getFields:function(){},validRecord:function(e,t,n){var i=this,r=[];i.setInternal("record",e),t=t||i.getFields(),BUI.each(t,function(t){var n=t.get("name"),i=e[n]||"",a=t.getValidError(i);a&&r.push({name:n,error:a,id:t.get("id")})}),i.showRecordError(e,r,n)},showRecordError:function(e,t,n){var i=this,r=i.get("grid");n=n||r.findRow(e),n&&(i._clearRowError(n),BUI.each(t,function(e){var t=r.findCell(e.id,n);i._showCellError(t,e.error)}))},updateRecord:function(){},_clearRowError:function(e){e.find("."+n).remove()},_showCellError:function(e,n){var i=this,r=BUI.substitute(i.get("errorTpl"),{error:n}),a=e.find("."+t);$(r).appendTo(a)},edit:function(e,t){var n=this,i=n._createEditOptions(e,t),r=n.getEditor(t);n.showEditor(r,i)},cancel:function(){var e=this,t=e.get("editors");BUI.each(t,function(e){e.get("visible")&&e.cancel()}),e.set("curEditor",null),e.set("record",null)},destructor:function(){var e=this,t=e.get("editors");BUI.each(t,function(e){e.destroy||e.destroy()}),e.off(),e.clearAttrVals()}}),e}),define("bui/grid/plugins/cellediting",["bui/grid/plugins/editing"],function(require){var e=require("bui/grid/plugins/editing"),t=BUI.prefix+"grid-body",n=BUI.prefix+"grid-cell",i=function(e){i.superclass.constructor.call(this,e)};return i.ATTRS={triggerCls:{value:n}},BUI.extend(i,e),BUI.augment(i,{getEditorCfgs:function(e){var n=this,i=n.get("grid"),r=i.get("el").find("."+t),a=[];return BUI.each(e,function(e){var t={field:e,changeSourceEvent:null,hideExceptNode:r,autoUpdate:!1,preventHide:!1,editableFn:e.editableFn};"checkbox"===e.xtype&&(t.innerValueField="checked"),a.push(t)}),a},getEditor:function(e){if(!e)return null;var t=this,n=t.get("editors"),i=null;return BUI.each(n,function(t){return t.get("field").get("name")===e?(i=t,!1):void 0}),i},beforeShowEditor:function(e,t){var n=this,i=$(t.cell);n.resetWidth(e,i.outerWidth()),n._makeEnable(e,t)},_makeEnable:function(e,t){var n,i,r,a=e.get("editableFn");BUI.isFunction(a)&&(n=t.field,r=t.record,r&&n&&(i=a(r[n],r),i?e.get("field").enable():e.get("field").disable()))},resetWidth:function(e,t){e.set("width",t)},updateRecord:function(e,t,n){var i=n.getValue(),r=n.get("field").get("name"),a=t[r];i=BUI.isDate(i)?i.getTime():i,a!==i&&e.setValue(t,r,i)},getAlignNode:function(e){return $(e.cell)},getFields:function(){var e=[],t=this,n=t.get("editors");return BUI.each(n,function(t){e.push(t.get("field"))}),e},getEditValue:function(e){if(e.record&&e.field){var t=e.record[e.field];return null==t?"":t}return""}}),i}),define("bui/grid/plugins/rowediting",["bui/common","bui/grid/plugins/editing"],function(require){var e=require("bui/common"),t=require("bui/grid/plugins/editing"),n=e.prefix+"grid-row",i=function(e){i.superclass.constructor.call(this,e)};return i.ATTRS={autoSave:{value:!1},align:{value:{points:["tl","tl"],offset:[-2,0]}},triggerCls:{value:n},editor:{}},e.extend(i,t),e.augment(i,{getEditorCfgs:function(t){var n=this,i=n.get("editor"),r=[],a=e.mix(!0,{changeSourceEvent:null,autoUpdate:!1,form:{children:t,buttonBar:{elCls:"centered toolbar"}}},i);return r.push(a),r},wrapValidator:function(e){var t=this;return function(n){var i=t.get("curEditor"),r=t.get("record"),a=i?i.getValue():r;return a?e(n,a,r):void 0}},focusEditor:function(e,t){var n=e.get("form"),i=n.getField(t);i&&i.focus()},getFieldConfig:function(e){var t=e.get("editor");if(t)return"checkbox"===t.xtype&&(t.innerValueField="checked"),t;var n={xtype:"plain"};return e.get("dataIndex")&&e.get("renderer")&&(n.renderer=e.get("renderer")),n},updateRecord:function(t,n,i){var r=this,a=i.getValue();e.each(a,function(t,n){e.isDate(t)&&(a[n]=t.getTime())}),e.mix(n,a),t.update(n),r.get("autoSave")&&t.save(n)},getEditor:function(){var e=this,t=e.get("editors");return t[0]},onColumnVisibleChange:function(e){var t=this,n=e.get("id"),i=t.getEditor(),r=i.getChild(n,!0);r&&r.set("visible",e.get("visible"))},beforeShowEditor:function(t,n){var i=this,r=i.get("grid"),a=r.get("columns"),o=t.get("form"),l=$(n.row);t.set("width",l.width()),e.each(a,function(e){var t=e.get("dataIndex"),n=o.getField(t);if(e.get("visible")){var i=e.get("el").outerWidth()-n.getAppendWidth();n.set("width",i)}else n&&n.set("visible",!1)})},getEditValue:function(e){return e.record},getEditorConstructor:function(e){return e.RecordEditor},getAlignNode:function(e){return $(e.row)},getFields:function(){var e=this,t=e.get("editors");return t[0].get("form").get("children")}}),i}),define("bui/grid/plugins/dialogediting",["bui/common"],function(require){function e(t){e.superclass.constructor.call(this,t)}var t=require("bui/common"),n="add",i="edit";return e.ATTRS={autoSave:{value:!1},record:{},curIndex:{},contentId:{},editor:{},form:{},events:{value:{recordchange:!1}},editType:{}},t.extend(e,t.Base),t.augment(e,{initializer:function(e){var n=this;n.set("grid",e),t.use("bui/editor",function(e){n._initEditor(e),n.fire("editorready")})},bindUI:function(e){var t=this,n=t.get("triggerCls");n&&e.on("cellclick",function(i){var r=$(i.domTarget),a=t.get("editor");return r.hasClass(n)&&a&&(t.edit(i.record),e.get("multipleSelect"))?!1:void 0})},_initEditor:function(e){var n=this,i=n.get("contentId"),r=$("#"+i).find("form"),a=n.get("editor"),o=t.merge(a,{contentId:i,form:{srcNode:r}});a=new e.DialogEditor(o),n._bindEditor(a),n.set("editor",a),n.set("form",a.get("form"))},_bindEditor:function(e){var t=this;e.on("accept",function(){var n=e.get("form"),i=n.serializeToObject();t.saveRecord(i),t.fire("accept",{editor:e,record:t.get("record"),form:n})}),e.on("cancel",function(){t.fire("cancel",{editor:e,record:t.get("record"),form:e.get("form")})})},edit:function(e){var t=this;t.set("editType",i),t.showEditor(e)},add:function(e,t){var i=this;i.set("editType",n),i.set("curIndex",t),i.showEditor(e)},saveRecord:function(e){var i=this,r=i.get("grid"),a=i.get("editType"),o=i.get("curIndex"),l=r.get("store"),s=i.get("record");t.mix(s,e),a==n?null!=o?l.addAt(s,o):l.add(s):l.update(s),i.get("autoSave")&&l.save(s)},showEditor:function(e){var t=this,n=t.get("editor");t.set("record",e),n.show(),n.setValue(e,!0),t.fire("recordchange",{record:e,editType:t.get("editType")}),t.fire("editorshow",{eidtor:n,editType:t.get("editType")})},cancel:function(){var e=this,t=e.get("editor");t.cancel()},destructor:function(){var e=this,t=e.get("editor");t&&t.destroy(),e.off(),e.clearAttrVals()}}),e}),define("bui/grid/plugins/rownumber",function(){function e(t){e.superclass.constructor.call(this,t)}var t="x-grid-rownumber";return BUI.extend(e,BUI.Base),e.ATTRS={width:{value:40},column:{}},BUI.augment(e,{createDom:function(e){var n=this,i={title:"",width:n.get("width"),fixed:!0,resizable:!1,sortable:!1,renderer:function(e,t,n){return n+1},elCls:t},r=e.addColumn(i,0);n.set("column",r)}}),e}),define("bui/grid/plugins/columngroup",["bui/common"],function(require){var e=require("bui/common"),t=e.prefix,n=t+"grid-hd-title",i=t+"grid-column-group",r=t+"grid-group-header",a=t+"grid-db-hd",o=function(e){o.superclass.constructor.call(this,e)};return o.ATTRS={groups:{value:[]},columnTpl:{value:'<th class="bui-grid-hd center" colspan="{colspan}"><div class="'+t+'grid-hd-inner"><span class="'+n+'">{title}</span></div></th>'}},e.extend(o,e.Base),e.augment(o,{renderUI:function(t){var n=this,o=n.get("groups"),l=t.get("header"),s=l.get("el"),u=l.get("children"),c=$('<tr class="'+i+'"></tr>').prependTo(s.find("thead"));s.addClass(r),e.each(o,function(e){var t=n._getGroupTpl(e),i=$(t).appendTo(c);e.el=i;for(var r=e.from;r<=e.to;r++){var a=u[r];a&&a.set("group",e)}});for(var d,f=u.length-1;f>=0;f--){var g=u[f],h=g.get("group");if(h)d=h.el;else{var v=g.get("el");v.addClass(a),v.attr("rowspan",2),d?v.insertBefore(d):v.appendTo(c),d=v}}if(0!==o[0].from){var m=u[o[0].from];m&&m.get("el").css("border-left-width",1)}},_getGroupTpl:function(t){var n=this,i=n.get("columnTpl"),r=t.to-t.from+1;return e.substitute(i,{colspan:r,title:t.title})}}),o}),define("bui/tree",["bui/common","bui/tree/treemixin","bui/tree/treelist","bui/tree/treemenu"],function(require){var e=require("bui/common"),t=e.namespace("Tree");return e.mix(t,{TreeList:require("bui/tree/treelist"),Mixin:require("bui/tree/treemixin"),TreeMenu:require("bui/tree/treemenu")}),t}),define("bui/tree/treemixin",["bui/common","bui/data"],function(require){function e(e,n){return t.isString(n)&&(n=e.findNode(n)),n}var t=require("bui/common"),n=require("bui/data"),i="expanded",r="loading",a="checked",o="partial-checked",l={NONE:"none",ALL:"all",CUSTOM:"custom",ONLY_LEAF:"onlyLeaf"},s="x-tree-icon",u="x-tree-elbow",c="x-tree-show-line",d=u+"-",f=s+"-wraper",g=d+"line",h=d+"end",v=d+"empty",m=d+"expander",p=s+"-checkbox",b=s+"-radio",C=m+"-end",x=function(){};return x.ATTRS={store:{getter:function(e){if(!e){var t=this,i=new n.TreeStore({root:t.get("root"),data:t.get("nodes")});return t.setInternal("store",i),i}return e}},root:{},nodes:{sync:!1},iconContainer:{},iconWraperTpl:{value:'<span class="'+f+'">{icons}</span>'},showLine:{value:!1},showIcons:{value:!0},iconTpl:{value:'<span class="x-tree-icon {cls}"></span>'},leafCls:{value:d+"leaf"},dirCls:{value:d+"dir"},checkType:{value:"custom"},cascadeCheckd:{value:!0},accordion:{value:!1},multipleCheck:{value:!0},checkedField:{valueFn:function(){return this.getStatusField("checked")}},checkableField:{value:"checkable"},itemStatusFields:{value:{expanded:"expanded",disabled:"disabled",checked:"checked"}},dirSelectable:{value:!0},showRoot:{value:!1},events:{value:{expanded:!1,collapsed:!1,checkedchange:!1}},expandEvent:{value:"itemdblclick"},expandAnimate:{value:!1},collapseEvent:{value:"itemdblclick"},startLevel:{value:1}},t.augment(x,{collapseAll:function(){var e=this,n=e.get("view").getAllElements();t.each(n,function(t){var n=e.getItemByElement(t);n&&e._collapseNode(n,t,!0)})},collapseNode:function(e){var n,i=this;t.isString(e)&&(e=i.findNode(e)),e&&(n=i.findElement(e),i._collapseNode(e,n))},expandAll:function(){var e=this,n=e.get("view").getAllElements();t.each(n,function(t){var n=e.getItemByElement(t);e._expandNode(n,t,!0)})},expandNode:function(e,n){var i,r=this;t.isString(e)&&(e=r.findNode(e)),e&&(e.parent&&!r.isExpanded(e.parent)&&r.expandNode(e.parent),i=r.findElement(e),r._expandNode(e,i,n))},expandPath:function(e,t,n){if(e){n=n||0;var i,r,a,o,l=this,s=l.get("store"),u=e.split(",");for(i=l.findNode(u[n]),a=n+1;a<u.length;a++)if(o=u[a],r=l.findNode(o,i),i&&r)l.expandNode(i),i=r;else if(i&&t){s.load({id:i.id},function(){r=l.findNode(o,i),r&&l.expandPath(e,t,a)});break}}},findNode:function(e,t){return this.get("store").findNode(e,t)},getCheckedLeaf:function(e){var t=this,n=t.get("store");return n.findNodesBy(function(e){return e.leaf&&t.isChecked(e)},e)},getCheckedNodes:function(e){var t=this,n=t.get("store");return n.findNodesBy(function(e){return t.isChecked(e)},e)},isItemSelectable:function(e){var t=this,n=t.get("dirSelectable"),i=e;return!i||n||i.leaf?!0:!1},isExpanded:function(e){if(!e||e.leaf)return!1;var n,i=this;return i._isRoot(e)&&!i.get("showRoot")?!0:(t.isString(e)&&(item=i.getItem(e)),n=i.findElement(e),this._isExpanded(e,n))},isChecked:function(e){return e?!!e[this.get("checkedField")]:!1},toggleExpand:function(e){var n,i=this;t.isString(e)&&(item=i.getItem(e)),n=i.findElement(e),i._toggleExpand(e,n)},setNodeChecked:function(n,i,r){if(r=null==r?!0:r,n){var o,l,s=this,u=s.get("multipleCheck"),c=s.get("cascadeCheckd");if(n=e(this,n),n&&(o=n.parent,s.isCheckable(n))){if(s.isChecked(n)!==i||s.hasStatus(n,"checked")!==i){if(l=s.findElement(n),c?(l?(s.setItemStatus(n,a,i,l),u?s._resetPatialChecked(n,i,i,l):i&&o&&s.isChecked(o)!=i&&s.setNodeChecked(o,i,!1)):s.isItemDisabled(n)||s.setStatusValue(n,a,i),o&&(s.isChecked(o)!=i?s._resetParentChecked(o):u&&s._resetPatialChecked(o,null,null,null,!0))):s.isItemDisabled(n)||(l?s.setItemStatus(n,a,i,l):s.setStatusValue(n,a,i)),i&&!u&&(s.isChecked(o)||o==s.get("root")||!c)){var d=o.children;t.each(d,function(e){e!==n&&s.isChecked(e)&&s.setNodeChecked(e,!1)})}s.fire("checkedchange",{node:n,element:l,checked:i})}!n.leaf&&r&&c&&t.each(n.children,function(e,t){(u||!i||!u&&0==t)&&s.setNodeChecked(e,i,r)})}}},setChecked:function(e){this.setNodeChecked(e,!0)},clearAllChecked:function(){var e=this,n=e.getCheckedNodes();t.each(n,function(t){e.setNodeChecked(t,!1)})},_initRoot:function(){var e,n,i=this,r=i.get("store"),a=i.get("showRoot");r&&(e=r.get("root"),i.setInternal("root",e),n=a?[e]:e.children,t.each(n,function(e){i._initChecked(e,!0)}),i.clearItems(),i.addItems(n))},_initChecked:function(e,n){var i,r=this,a=r.get("checkType"),o=r.get("checkedField"),s=r.get("multipleCheck"),u=r.get("checkableField"),c=r.get("cascadeCheckd");return a===l.NONE?(e[u]=!1,void(e[o]=!1)):a===l.ONLY_LEAF?void(e.leaf?e[u]=!0:(e[u]=!1,e[o]=!1,n&&t.each(e.children,function(e){r._initChecked(e,n)}))):(a===l.CUSTOM&&null==e[u]&&(e[u]=null!=e[o]),a===l.ALL&&(e[u]=!0),void(e&&r.isCheckable(e)&&(i=e.parent,!r.isChecked(e)&&c&&(i&&r.isChecked(i)&&(s||!r._hasChildChecked(i))&&r.setStatusValue(e,"checked",!0),(e.children&&e.children.length&&r._isAllChildrenChecked(e)||!s&&r._hasChildChecked(e))&&r.setStatusValue(e,"checked",!0)),n&&t.each(e.children,function(e){r._initChecked(e,n)}))))},_resetPatialChecked:function(e,t,n,i,r){if(!e||e.leaf)return!0;var n,a=this;return(t=null==t?a.isChecked(e):t)?void a.setItemStatus(e,o,!1,i):(n=null==n?a._hasChildChecked(e):n,a.setItemStatus(e,o,n,i),void(r&&e.parent&&a._resetPatialChecked(e.parent,!1,n?n:null,null,r)))},_resetParentChecked:function(e){if(this.isCheckable(e)){var t=this,n=t.get("multipleCheck"),i=n?t._isAllChildrenChecked(e):t._hasChildChecked(e);t.setStatusValue(e,"checked",i),t.setNodeChecked(e,i,!1),n&&t._resetPatialChecked(e,i,null,null,!0)}},__bindUI:function(){var e=this,t=(e.get("el"),e.get("multipleCheck"));e.on("itemclick",function(t){var n=$(t.domTarget),i=t.element,r=t.item;if(n.hasClass(m))return e._toggleExpand(r,i),!1;if(n.hasClass(p)){var a=e.isChecked(r);e.setNodeChecked(r,!a)}else n.hasClass(b)&&e.setNodeChecked(r,!0)}),e.on("itemrendered",function(n){var i=n.item,r=n.domTarget;e._resetIcons(i,r),e.isCheckable(i)&&t&&e.get("cascadeCheckd")&&e._resetPatialChecked(i,null,null,r),e._isExpanded(i,r)&&e._showChildren(i)}),e._initExpandEvent()},_initExpandEvent:function(){function e(e){return function(n){var i=$(n.domTarget),r=n.element,a=n.item;i.hasClass(m)||t[e](a,r)}}var t=this,n=(t.get("el"),t.get("expandEvent")),i=t.get("collapseEvent");n==i?t.on(n,e("_toggleExpand")):(n&&t.on(n,e("_expandNode")),i&&t.on(i,e("_collapseNode")))},_isForceChecked:function(){var e=this,t=e.get("multipleCheck");return t?e._isAllChildrenChecked():_isForceChecked()},_isAllChildrenChecked:function(e){if(!e||e.leaf)return!1;var n=this,i=e.children,r=!0;return t.each(i,function(e){return r=r&&n.isChecked(e),r?void 0:!1}),r},_hasChildChecked:function(e){if(!e||e.leaf)return!1;var t=this;return 0!=t.getCheckedNodes(e).length},_isRoot:function(e){var t=this,n=t.get("store");return n&&n.get("root")==e?!0:!1},_setLoadStatus:function(e,t,n){var i=this;i.setItemStatus(e,r,n,t)},_beforeLoadNode:function(e){var n,i=this;t.isString(e)&&(e=i.findNode(e)),n=i.findElement(e),n?(i._collapseNode(e,n),i._setLoadStatus(e,n,!0)):e&&t.each(e.children,function(e){i._removeNode(e)})},onBeforeLoad:function(e){var t=this,n=e.params,i=n.id,r=t.findNode(i)||t.get("root");t._beforeLoadNode(r)},_addNode:function(e,t){var n,i,r,a=this,o=e.parent;a._initChecked(e,!0),o?(a.isExpanded(o)&&(n=o.children.length,r=a._getInsetIndex(e),a.addItemAt(e,r),t==n-1&&t>0&&(i=o.children[t-1],a._updateIcons(i))),a._updateIcons(o)):(r=a._getInsetIndex(e),a.addItemAt(e,r),i=a.get("nodes")[t-1],a._updateIcons(i))},_getInsetIndex:function(e){var t,n=this;return t=n._getNextItem(e),t?n.indexOfItem(t):n.getItemCount()},_getNextItem:function(e){var n,i,r=this,a=e.parent,o=null;return a?(n=a.children,i=t.Array.indexOf(e,n),o=n[i+1],o||r._getNextItem(a)):null},onAdd:function(e){var t=this,n=e.node,i=e.index;t._addNode(n,i)},_updateNode:function(e){var t=this;t.updateItem(e),t._updateIcons(e)},onUpdate:function(e){var t=this,n=e.node;t._updateNode(n)},_removeNode:function(e,t){var n,i,r=this,a=e.parent;r.collapseNode(e),a&&(r.removeItem(e),r.isExpanded(a)&&(n=a.children.length,n==t&&0!==t&&(i=a.children[t-1],r._updateIcons(i))),r._updateIcons(a),r._resetParentChecked(a))},onRemove:function(e){var t=this,n=e.node,i=e.index;t._removeNode(n,i)},_loadNode:function(e){var t=this;t._initChecked(e,!0),t.expandNode(e),t._updateIcons(e),t.setItemStatus(e,r,!1)},__syncUI:function(){var e=this,t=e.get("store"),n=e.get("showRoot");n&&!t.hasData()&&e._initRoot()},onLoad:function(e){var t=this,n=t.get("store"),i=n.get("root");e&&e.node!=i||t._initRoot(),e&&e.node&&t._loadNode(e.node)},_isExpanded:function(e,t){return this.hasStatus(e,i,t)},_getIconsTpl:function(e){var n,i=this,r=e.level,a=i.get("startLevel"),o=i.get("iconWraperTpl"),l=[];for(n=a;r>n;n+=1)l.push(i._getLevelIcon(e,n));return l.push(i._getExpandIcon(e)),l.push(i._getCheckedIcon(e)),l.push(i._getNodeTypeIcon(e)),t.substitute(o,{icons:l.join("")})},_getCheckedIcon:function(e){var t,n=this,i=n.isCheckable(e);return i?(t=n.get("multipleCheck")?p:b,n._getIcon(t)):""},isCheckable:function(e){return e[this.get("checkableField")]},_getExpandIcon:function(e){var t=this,n=m;return e.leaf?t._getLevelIcon(e):(t._isLastNode(e)&&(n=n+" "+C),t._getIcon(n))},_getNodeTypeIcon:function(e){var t=this,n=e.cls?e.cls:t.get(e.leaf?"leafCls":"dirCls");return t._getIcon(n)},_getLevelIcon:function(e,t){var n,i=this,r=i.get("showLine"),a=v;return r&&(e.level===t||null==t?a=i._isLastNode(e)?h:u:(n=i._getParentNode(e,t),a=i._isLastNode(n)?v:g)),i._getIcon(a)},_getParentNode:function(e,t){var n=e.level,i=e.parent,r=n-1;if(t>=n)return null;for(;r>t;)i=i.parent,r-=1;return i},_getIcon:function(e){var n=this,i=n.get("iconTpl");return t.substitute(i,{cls:e})},_isLastNode:function(e){if(!e)return!1;if(e==this.get("root"))return!0;var t,n=this,i=e.parent,r=i?i.children:n.get("nodes");return t=r.length,r[t-1]===e},_initNodes:function(e,n,i){var r=this;t.each(e,function(e){e.level=n,null==e.leaf&&(e.leaf=e.children?!1:!0),i&&!e.parent&&(e.parent=i),r._initChecked(e),e.children&&r._initNodes(e.children,n+1,e)})},_collapseNode:function(e,t,n){var r=this;e.leaf||r.hasStatus(e,i,t)&&(r.setItemStatus(e,i,!1,t),n?(r._collapseChildren(e,n),r.removeItems(e.children)):r._hideChildrenNodes(e),r.fire("collapsed",{node:e,element:t}))},_hideChildrenNodes:function(e){var n=this,i=e.children,r=[];t.each(i,function(e){var t=n.findElement(e);t&&(r.push(t),n._hideChildrenNodes(e))}),n.get("expandAnimate")?(r=$(r),r.animate({height:0},function(){n.removeItems(i)})):n.removeItems(i)},_collapseChildren:function(e,n){var i=this,r=e.children;t.each(r,function(e){i.collapseNode(e,n)})},_expandNode:function(e,n,r){var a=this,o=a.get("accordion"),l=a.get("store");if(!e.leaf){if(!a.hasStatus(e,i,n)){if(o&&e.parent){var s=e.parent.children;t.each(s,function(t){t!=e&&a.collapseNode(t)})}l&&!l.isLoaded(e)?a._isLoading(e,n)||l.loadNode(e):n&&(a.setItemStatus(e,i,!0,n),a._showChildren(e),a.fire("expanded",{node:e,element:n}))}t.each(e.children,function(e){(r||a.isExpanded(e))&&a.expandNode(e,r)})}},_showChildren:function(e){if(e&&e.children){var t,n=this,i=n.indexOfItem(e),r=e.children.length,a=r-1;for(a=r-1;a>=0;a--)t=e.children[a],n.getItem(t)||(n.get("expandAnimate")?(el=n._addNodeAt(t,i+1),el.hide(),el.slideDown()):n.addItemAt(t,i+1))}},_addNodeAt:function(e,t){var n=this,i=n.get("items");return void 0===t&&(t=i.length),i.splice(t,0,e),n.addItemToView(e,t)},_isLoading:function(e,t){var n=this;return n.hasStatus(e,r,t)},_resetIcons:function(e,t){if(this.get("showIcons")){var n,i=this,r=i.get("iconContainer"),a=i._getIconsTpl(e);$(t).find("."+f).remove(),n=$(t).find(r).first(),r&&n.length?$(a).prependTo(n):$(t).prepend($(a))}},_toggleExpand:function(e,t){var n=this;n._isExpanded(e,t)?n._collapseNode(e,t):n._expandNode(e,t)},_updateIcons:function(e){var n=this,i=n.findElement(e);i&&(n._resetIcons(e,i),n._isExpanded(e,i)&&!e.leaf&&t.each(e.children,function(e){n._updateIcons(e)}))},_uiSetShowRoot:function(){var e=this,t=this.get("showRoot")?0:1;e.set("startLevel",t)},_uiSetNodes:function(e){var t=this,n=t.get("store");n.setResult(e)},_uiSetShowLine:function(e){var t=this,n=t.get("el");e?n.addClass(c):n.removeClass(c)}}),x}),define("bui/tree/selection",["bui/list"],function(require){var e=require("bui/common"),t=require("bui/list").SimpleList,n=function(){};return n.ATTRS={},e.augment(n,{getSelection:function(){var e,n=this,i=n.getStatusField("selected");return i?(e=n.get("store"),e.findNodesBy(function(e){return e[i]})):t.prototype.getSelection.call(this)},getSelected:function(){var e,n=this,i=n.getStatusField("selected");return i?(e=n.get("store"),e.findNodeBy(function(e){return e[i]})):t.prototype.getSelected.call(this)}}),n}),define("bui/tree/treelist",["bui/common","bui/list","bui/tree/treemixin","bui/tree/selection"],function(require){var e=require("bui/common"),t=require("bui/list"),n=require("bui/tree/treemixin"),i=require("bui/tree/selection"),r=t.SimpleList.extend([n,i],{},{ATTRS:{itemCls:{value:e.prefix+"tree-item"},itemTpl:{value:"<li>{text}</li>"},idField:{value:"id"}}},{xclass:"tree-list"});return r}),define("bui/tree/treemenu",["bui/common","bui/list","bui/tree/treemixin","bui/tree/selection"],function(require){var e=require("bui/common"),t=require("bui/list"),n=require("bui/tree/treemixin"),i=require("bui/tree/selection"),r=t.SimpleList.View.extend({getItemTpl:function(t,n){var i=this,r=i.get("itemTplRender"),a=i.get(t.leaf?"leafTpl":"dirTpl");return r?r(t,n):e.substitute(a,t)}},{xclass:"tree-menu-view"}),a=t.SimpleList.extend([n,i],{},{ATTRS:{itemCls:{value:e.prefix+"tree-item"},dirSelectable:{value:!1},expandEvent:{value:"itemclick"},itemStatusFields:{value:{selected:"selected"}},collapseEvent:{value:"itemclick"},xview:{value:r},dirTpl:{view:!0,value:'<li class="{cls}"><a href="#">{text}</a></li>'},leafTpl:{view:!0,value:'<li class="{cls}"><a href="{href}">{text}</a></li>'},idField:{value:"id"}}},{xclass:"tree-menu"});return a.View=r,a}),define("bui/tooltip",["bui/common","bui/tooltip/tip","bui/tooltip/tips"],function(require){var e=require("bui/common"),t=e.namespace("Tooltip"),n=require("bui/tooltip/tip"),i=require("bui/tooltip/tips");return e.mix(t,{Tip:n,Tips:i}),t}),define("bui/tooltip/tip",["bui/common","bui/overlay"],function(require){function e(e,t){return"left"===e?[-1*t,-4]:"right"===e?[t,-4]:e.indexOf("top")?[0,t]:e.indexOf("bottom")?[0,-1*t]:void 0}var t=require("bui/common"),n=require("bui/overlay"),i="x-align-",r={left:["cl","cr"],right:["cr","cl"],top:["tc","bc"],bottom:["bc","tc"],"top-left":["tl","bl"],"top-right":["tr","br"],"bottom-left":["bl","tl"],"bottom-right":["br","tr"]},a=n.OverlayView.extend({renderUI:function(){},_getTitleContainer:function(){return this.get("el")},_uiSetTitle:function(e){var n,i=this,r=i.get("titleTpl"),a=i._getTitleContainer(),o=i.get("titleEl");o&&o.remove(),e=e||"",t.isString(e)&&(e={title:e}),n=t.substitute(r,e),o=$(n).appendTo(a),i.set("titleEl",o)},_uiSetAlignType:function(e,t){var n=this;t&&t.prevVal&&n.get("el").removeClass(i+t.prevVal),e&&n.get("el").addClass(i+e)}},{ATTRS:{title:{},titleEl:{},alignType:{}}},{xclass:"tooltip-view"}),o=n.Overlay.extend({_uiSetAlignType:function(t){var n=this,i=n.get("offset"),a=n.get("align")||{},o=r[t];o&&(a.points=o,i&&(a.offset=e(t,i)),n.set("align",a))}},{ATTRS:{delegateTrigger:{value:!0},alignType:{view:!0},title:{view:!0},showArrow:{value:!0},arrowContainer:{view:!0},autoHide:{value:!0},autoHideType:{value:"leave"},offset:{value:0},triggerEvent:{value:"mouseover"},titleTpl:{view:!0,value:"<span>{title}</span>"},xview:{value:a}}},{xclass:"tooltip"});return o.View=a,o}),define("bui/tooltip/tips",["bui/common","bui/tooltip/tip"],function(require){function e(e){return/^{.*}$/.test(e)}var t=require("bui/common"),n=require("bui/tooltip/tip"),i=function(e){i.superclass.constructor.call(this,e)};return i.ATTRS={tip:{},defaultAlignType:{}},t.extend(i,t.Base),t.augment(i,{_init:function(){this._initDom(),this._initEvent()},_initDom:function(){var e,t=this,i=t.get("tip");i&&!i.isController&&(e=i.alignType,i=new n(i),i.render(),t.set("tip",i),e&&t.set("defaultAlignType",e))},_initEvent:function(){var e=this,t=e.get("tip");t.on("triggerchange",function(n){var i=n.curTrigger;e._replaceTitle(i),e._setTitle(i,t)})},_replaceTitle:function(e){var t=e.attr("title");t&&(e.attr("data-title",t),e[0].removeAttribute("title"))},_setTitle:function(n,i){var r=this,a=n.attr("data-title"),o=n.attr("data-align")||r.get("defaultAlignType");e(a)&&(a=t.JSON.looseParse(a)),i.set("title",a),o&&i.set("alignType",o)},render:function(){return this._init(),this}}),i}),function(){"false"!=BUI.loaderScript.getAttribute("data-auto-use")&&BUI.use(["bui/common","bui/data","bui/list","bui/picker","bui/menu","bui/toolbar","bui/progressbar","bui/cookie","bui/form","bui/mask","bui/select","bui/tab","bui/calendar","bui/overlay","bui/editor","bui/grid","bui/tree","bui/tooltip"])}();