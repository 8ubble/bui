!function(e,t){function i(e){return function(t){return{}.toString.call(t)=="[object "+e+"]"}}function n(){return S++}function r(e){return e.match(E)[0]}function o(e){for(e=e.replace(U,"/");e.match(A);)e=e.replace(A,"/");return e=e.replace(R,"$1/")}function a(e){var t=e.length-1,i=e.charAt(t);return"#"===i?e.substring(0,t):".js"===e.substring(t-2)||e.indexOf("?")>0||".css"===e.substring(t-3)||"/"===i?e:e+".js"}function u(e){var t=I.alias;return t&&T(t[e])?t[e]:e}function s(e){var t,i=I.paths;return i&&(t=e.match(D))&&T(i[t[1]])&&(e=i[t[1]]+t[2]),e}function l(e){var t=I.vars;return t&&e.indexOf("{")>-1&&(e=e.replace(j,function(e,i){return T(t[i])?t[i]:e})),e}function c(e){var t=I.map,i=e;if(t)for(var n=0,r=t.length;r>n;n++){var o=t[n];if(i=w(o)?o(e)||e:e.replace(o[0],o[1]),i!==e)break}return i}function d(e,t){var i,n=e.charAt(0);if(F.test(e))i=e;else if("."===n)i=o((t?r(t):I.cwd)+e);else if("/"===n){var a=I.cwd.match(V);i=a?a[0]+e.substring(1):e}else i=I.base+e;return 0===i.indexOf("//")&&(i=location.protocol+i),i}function f(e,t){if(!e)return"";e=u(e),e=s(e),e=l(e),e=a(e);var i=d(e,t);return i=c(i)}function m(e){return e.hasAttribute?e.src:e.getAttribute("src",4)}function g(e,t,i){var n=X.test(e),r=M.createElement(n?"link":"script");if(i){var o=w(i)?i(e):i;o&&(r.charset=o)}h(r,t,n,e),n?(r.rel="stylesheet",r.href=e):(r.async=!0,r.src=e),O=r,z?W.insertBefore(r,z):W.appendChild(r),O=null}function h(e,t,i,n){function r(){e.onload=e.onerror=e.onreadystatechange=null,i||I.debug||W.removeChild(e),e=null,t()}var o="onload"in e;return!i||!Y&&o?void(o?(e.onload=r,e.onerror=function(){B("error",{uri:n,node:e}),r()}):e.onreadystatechange=function(){/loaded|complete/.test(e.readyState)&&r()}):void setTimeout(function(){v(e,t)},1)}function v(e,t){var i,n=e.sheet;if(Y)n&&(i=!0);else if(n)try{n.cssRules&&(i=!0)}catch(r){"NS_ERROR_DOM_SECURITY_ERR"===r.name&&(i=!0)}setTimeout(function(){i?t():v(e,t)},20)}function b(){if(O)return O;if(H&&"interactive"===H.readyState)return H;for(var e=W.getElementsByTagName("script"),t=e.length-1;t>=0;t--){var i=e[t];if("interactive"===i.readyState)return H=i}}function p(e){var t=[];return e.replace(G,"").replace(J,function(e,i,n){n&&t.push(n)}),t}function y(e,t){this.uri=e,this.dependencies=t||[],this.exports=null,this.status=0,this._waitings={},this._remain=0}if(!e.seajs){var x=e.seajs={version:"2.2.1"},I=x.data={},C=i("Object"),T=i("String"),_=Array.isArray||i("Array"),w=i("Function"),S=0,k=I.events={};x.on=function(e,t){var i=k[e]||(k[e]=[]);return i.push(t),x},x.off=function(e,t){if(!e&&!t)return k=I.events={},x;var i=k[e];if(i)if(t)for(var n=i.length-1;n>=0;n--)i[n]===t&&i.splice(n,1);else delete k[e];return x};var B=x.emit=function(e,t){var i,n=k[e];if(n)for(n=n.slice();i=n.shift();)i(t);return x},E=/[^?#]*\//,U=/\/\.\//g,A=/\/[^/]+\/\.\.\//,R=/([^:/])\/\//g,D=/^([^/:]+)(\/.+)$/,j=/{([^{]+)}/g,F=/^\/\/.|:\//,V=/^.*?\/\/.*?\//,M=document,P=r(M.URL),N=M.scripts,q=M.getElementById("seajsnode")||N[N.length-1],L=r(m(q)||P);x.resolve=f;var O,H,W=M.head||M.getElementsByTagName("head")[0]||M.documentElement,z=W.getElementsByTagName("base")[0],X=/\.css(?:\?|$)/i,Y=+navigator.userAgent.replace(/.*(?:AppleWebKit|AndroidWebKit)\/(\d+).*/,"$1")<536;x.request=g;var K,J=/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|\/\*[\S\s]*?\*\/|\/(?:\\\/|[^\/\r\n])+\/(?=[^\/])|\/\/.*|\.\s*require|(?:^|[^$])\brequire\s*\(\s*(["'])(.+?)\1\s*\)/g,G=/\\\\/g,$=x.cache={},Z={},Q={},et={},tt=y.STATUS={FETCHING:1,SAVED:2,LOADING:3,LOADED:4,EXECUTING:5,EXECUTED:6};y.prototype.resolve=function(){for(var e=this,t=e.dependencies,i=[],n=0,r=t.length;r>n;n++)i[n]=y.resolve(t[n],e.uri);return i},y.prototype.load=function(){var e=this;if(!(e.status>=tt.LOADING)){e.status=tt.LOADING;var t=e.resolve();B("load",t);for(var i,n=e._remain=t.length,r=0;n>r;r++)i=y.get(t[r]),i.status<tt.LOADED?i._waitings[e.uri]=(i._waitings[e.uri]||0)+1:e._remain--;if(0===e._remain)return void e.onload();var o={};for(r=0;n>r;r++)i=$[t[r]],i.status<tt.FETCHING?i.fetch(o):i.status===tt.SAVED&&i.load();for(var a in o)o.hasOwnProperty(a)&&o[a]()}},y.prototype.onload=function(){var e=this;e.status=tt.LOADED,e.callback&&e.callback();var t,i,n=e._waitings;for(t in n)n.hasOwnProperty(t)&&(i=$[t],i._remain-=n[t],0===i._remain&&i.onload());delete e._waitings,delete e._remain},y.prototype.fetch=function(e){function t(){x.request(o.requestUri,o.onRequest,o.charset)}function i(){delete Z[a],Q[a]=!0,K&&(y.save(r,K),K=null);var e,t=et[a];for(delete et[a];e=t.shift();)e.load()}var n=this,r=n.uri;n.status=tt.FETCHING;var o={uri:r};B("fetch",o);var a=o.requestUri||r;return!a||Q[a]?void n.load():Z[a]?void et[a].push(n):(Z[a]=!0,et[a]=[n],B("request",o={uri:r,requestUri:a,onRequest:i,charset:I.charset}),void(o.requested||(e?e[o.requestUri]=t:t())))},y.prototype.exec=function(){function e(t){return y.get(e.resolve(t)).exec()}var i=this;if(i.status>=tt.EXECUTING)return i.exports;i.status=tt.EXECUTING;var r=i.uri;e.resolve=function(e){return y.resolve(e,r)},e.async=function(t,i){return y.use(t,i,r+"_async_"+n()),e};var o=i.factory,a=w(o)?o(e,i.exports={},i):o;return a===t&&(a=i.exports),delete i.factory,i.exports=a,i.status=tt.EXECUTED,B("exec",i),a},y.resolve=function(e,t){var i={id:e,refUri:t};return B("resolve",i),i.uri||x.resolve(i.id,t)},y.define=function(e,i,n){var r=arguments.length;1===r?(n=e,e=t):2===r&&(n=i,_(e)?(i=e,e=t):i=t),!_(i)&&w(n)&&(i=p(n.toString()));var o={id:e,uri:y.resolve(e),deps:i,factory:n};if(!o.uri&&M.attachEvent){var a=b();a&&(o.uri=a.src)}B("define",o),o.uri?y.save(o.uri,o):K=o},y.save=function(e,t){var i=y.get(e);i.status<tt.SAVED&&(i.id=t.id||e,i.dependencies=t.deps||[],i.factory=t.factory,i.status=tt.SAVED)},y.get=function(e,t){return $[e]||($[e]=new y(e,t))},y.use=function(t,i,n){var r=y.get(n,_(t)?t:[t]);r.callback=function(){for(var t=[],n=r.resolve(),o=0,a=n.length;a>o;o++)t[o]=$[n[o]].exec();i&&i.apply(e,t),delete r.callback},r.load()},y.preload=function(e){var t=I.preload,i=t.length;i?y.use(t,function(){t.splice(0,i),y.preload(e)},I.cwd+"_preload_"+n()):e()},x.use=function(e,t){return y.preload(function(){y.use(e,t,I.cwd+"_use_"+n())}),x},y.define.cmd={},e.define=y.define,x.Module=y,I.fetchedList=Q,I.cid=n,x.require=function(e){var t=y.get(y.resolve(e));return t.status<tt.EXECUTING&&(t.onload(),t.exec()),t.exports};var it=/^(.+?\/)(\?\?)?(seajs\/)+/;I.base=(L.match(it)||["",L])[1],I.dir=L,I.cwd=P,I.charset="utf-8",I.preload=function(){var e=[],t=location.search.replace(/(seajs-\w+)(&|$)/g,"$1=1$2");return t+=" "+M.cookie,t.replace(/(seajs-\w+)=1/g,function(t,i){e.push(i)}),e}(),x.config=function(e){for(var t in e){var i=e[t],n=I[t];if(n&&C(n))for(var r in i)n[r]=i[r];else _(n)?i=n.concat(i):"base"===t&&("/"!==i.slice(-1)&&(i+="/"),i=d(i)),I[t]=i}return B("config",e),x}}}(this),function(){var e,t;!function(i,n){function r(e){return function(t){return{}.toString.call(t)=="[object "+e+"]"}}function o(){}var a=r("Function"),u={};o.prototype.exec=function(){function e(e){return o.get(e).exec()}var t=this;if(this.execed)return t.exports;this.execed=!0;var i=t.factory,r=a(i)?i(e,t.exports={},t):i;return r===n&&(r=t.exports),delete t.factory,t.exports=r,r},e=function(e,t,i){var n={id:e,deps:t,factory:i};o.save(n)},o.save=function(e){var t=o.get(e.id);t.id=e.id,t.dependencies=e.deps,t.factory=e.factory},o.get=function(e){return u[e]||(u[e]=new o)},t=function(e){var t=o.get(e);return t.execed||t.exec(),t.exports}}(this),e("bui/config",[],function(){function e(e){return e.hasAttribute?e.src:e.getAttribute("src",4)}var t=window.BUI=window.BUI||{};t.use=seajs.use,t.config=seajs.config;var i=document.getElementsByTagName("script"),n=i[i.length-1],r=e(n),o=r.substring(0,r.lastIndexOf("/")),a="true"===n.getAttribute("data")?!0:!1;t.loaderScript=n,seajs.config({paths:{bui:o}}),t.setDebug=function(e){if(t.debug=e,!e){var i=new RegExp("^("+o+"\\S*).js$");seajs.config({map:[[i,"$1-min.js"]]})}},t.setDebug(a),window.jQuery&&window.define("jquery",[],function(){return window.jQuery})}),t("bui/config")}(),define("bui/common",["bui/common/util","bui/common/ua","bui/common/json","bui/common/date","bui/common/array","bui/common/keycode","bui/common/observable","bui/common/base","bui/common/component/component","jquery","bui/common/component/manage","bui/common/component/uibase/uibase","bui/common/component/view","bui/common/component/controller","bui/common/component/uibase/base","bui/common/component/uibase/align","bui/common/component/uibase/autoshow","bui/common/component/uibase/autohide","bui/common/component/uibase/close","bui/common/component/uibase/collapsable","bui/common/component/uibase/drag","bui/common/component/uibase/keynav","bui/common/component/uibase/list","bui/common/component/uibase/listitem","bui/common/component/uibase/mask","bui/common/component/uibase/position","bui/common/component/uibase/selection","bui/common/component/uibase/stdmod","bui/common/component/uibase/decorate","bui/common/component/uibase/tpl","bui/common/component/uibase/childcfg","bui/common/component/uibase/bindable","bui/common/component/uibase/depends","bui/common/component/loader"],function(e,t,i){var n=e("bui/common/util");n.mix(n,{UA:e("bui/common/ua"),JSON:e("bui/common/json"),Date:e("bui/common/date"),Array:e("bui/common/array"),KeyCode:e("bui/common/keycode"),Observable:e("bui/common/observable"),Base:e("bui/common/base"),Component:e("bui/common/component/component")}),i.exports=n}),define("bui/common/util",["jquery"],function(e,t,i){function n(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=e[i]||{},r(e[i],t[i]))}function r(e,t){for(var i in t)t.hasOwnProperty(i)&&("value"==i?BUI.isObject(t[i])?(e[i]=e[i]||{},BUI.mix(e[i],t[i])):BUI.isArray(t[i])?(e[i]=e[i]||[],e[i]=e[i].concat(t[i])):e[i]=t[i]:e[i]=t[i])}var o=e("jquery");!function(e){e.fn&&(e.fn.on=e.fn.on||e.fn.bind,e.fn.off=e.fn.off||e.fn.unbind)}(o);var a=window,u=document,s=Object.prototype,l=s.toString,c="body",d="documentElement",f="scroll",m=f+"Width",g=f+"Height",h="ATTRS",v="PARSER",b="guid";window.BUI=window.BUI||{},o.extend(BUI,{version:"1.1.0",isFunction:function(e){return"function"==typeof e},isArray:"isArray"in Array?Array.isArray:function(e){return"[object Array]"===l.call(e)},isDate:function(e){return"[object Date]"===l.call(e)},isObject:"[object Object]"===l.call(null)?function(e){return null!==e&&void 0!==e&&"[object Object]"===l.call(e)&&void 0===e.ownerDocument}:function(e){return"[object Object]"===l.call(e)},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},augment:function(e){if(!BUI.isFunction(e))return e;for(var t=1;t<arguments.length;t++)BUI.mix(e.prototype,arguments[t].prototype||arguments[t]);return e},cloneObject:function(e){var t=BUI.isArray(e)?[]:{};return BUI.mix(!0,t,e)},error:function(e){if(BUI.debug)throw e},extend:function(e,t,i,n){BUI.isFunction(t)||(i=t,t=e,e=function(){});var r=Object.create?function(e,t){return Object.create(e,{constructor:{value:t}})}:function(e,t){function i(){}i.prototype=e;var n=new i;return n.constructor=t,n},o=r(t.prototype,e);return e.prototype=BUI.mix(o,e.prototype),e.superclass=r(t.prototype,t),BUI.mix(o,i),BUI.mix(e,n),e},guid:function(){var e={};return function(t){return t=t||BUI.prefix+b,e[t]?e[t]+=1:e[t]=1,t+e[t]}}(),isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isBoolean:function(e){return"boolean"==typeof e},log:function(e){BUI.debug&&a.console&&a.console.log&&a.console.log(e)},merge:function(){var e=o.makeArray(arguments),t=e[0];return BUI.isBoolean(t)?(e.shift(),e.unshift({}),e.unshift(t)):e.unshift({}),BUI.mix.apply(null,e)},mix:function(){return o.extend.apply(null,arguments)},app:function(e){return window[e]||(window[e]={namespace:function(t){return BUI.namespace(t,window[e])}}),window[e]},mixAttrs:n,mixAttr:r,mixin:function(e,t,i){i=i||[h,v];var r=t;if(r){e.mixins=r;var o={},a=r.concat(e);BUI.each(a,function(e){e&&BUI.each(i,function(t){e[t]&&(o[t]=o[t]||{},"ATTRS"==t?n(o[t],e[t]):BUI.mix(o[t],e[t]))})}),BUI.each(o,function(t,i){e[i]=t});var u={};BUI.each(a,function(e){if(e){var t=e.prototype;for(var i in t)t.hasOwnProperty(i)&&(u[i]=t[i])}}),BUI.each(u,function(t,i){e.prototype[i]=t})}return e},namespace:function(e,t){if(t=t||BUI,!e)return t;for(var i=e.split("."),n=t,r=0;r<i.length;r++){var o=i[r];n[o]||(n[o]={}),n=n[o]}return n},prefix:"bui-",substitute:function(e,t,i){return BUI.isString(e)&&(BUI.isObject(t)||BUI.isArray(t))?e.replace(i||/\\?\{([^{}]+)\}/g,function(e,i){return"\\"===e.charAt(0)?e.slice(1):void 0===t[i]?"":t[i]}):e},unparam:function(e){if("string"!=typeof e||!(e=o.trim(decodeURIComponent(e))))return{};for(var t,i=e.split("&"),n={},r=i.length-1;r>=0;r--)t=i[r].split("="),n[t[0]]=t[1];return n},ucfirst:function(e){return e+="",e.charAt(0).toUpperCase()+e.substring(1)},isInView:function(e){var t=e.left,i=e.top,n=BUI.viewportWidth(),r=BUI.viewportHeight(),o=BUI.scrollTop(),a=BUI.scrollLeft();return a>t||t>a+n?!1:o>i||i>o+r?!1:!0},isInVerticalView:function(e){var t=BUI.viewportHeight(),i=BUI.scrollTop();return i>e||e>i+t?!1:!0},isInHorizontalView:function(e){var t=BUI.viewportWidth(),i=BUI.scrollLeft();return i>e||e>i+t?!1:!0},viewportWidth:function(){return o(window).width()},viewportHeight:function(){return o(window).height()},scrollLeft:function(){return o(window).scrollLeft()},scrollTop:function(){return o(window).scrollTop()},docWidth:function(){return Math.max(this.viewportWidth(),u[d][m],u[c][m])},docHeight:function(){return Math.max(this.viewportHeight(),u[d][g],u[c][g])},each:function(e,t){e&&o.each(e,function(e,i){return t(i,e)})},wrapBehavior:function(e,t){return e["__bui_wrap_"+t]=function(i){e.get("disabled")||e[t](i)}},getWrapBehavior:function(e,t){return e["__bui_wrap_"+t]},getControl:function(e){return BUI.Component.Manager.getComponent(e)}});var p={serializeToObject:function(e){var t=o(e).serializeArray(),i={};return BUI.each(t,function(e){var t=e.name;i[t]?(BUI.isArray(i[t])||(i[t]=[i[t]]),i[t].push(e.value)):i[t]=e.value}),i},setFields:function(e,t){for(var i in t)t.hasOwnProperty(i)&&BUI.FormHelper.setField(e,i,t[i])},clear:function(e){var t=o.makeArray(e.elements);BUI.each(t,function(e){"checkbox"===e.type||"radio"===e.type?o(e).attr("checked",!1):o(e).val(""),o(e).change()})},setField:function(e,t,i){var n=e.elements[t];n&&n.type?formHelper._setFieldValue(n,i):(BUI.isArray(n)||n&&n.length)&&BUI.each(n,function(e){formHelper._setFieldValue(e,i)})},_setFieldValue:function(e,t){"checkbox"===e.type?e.value==""+t||BUI.isArray(t)&&-1!==BUI.Array.indexOf(e.value,t)?o(e).attr("checked",!0):o(e).attr("checked",!1):"radio"===e.type?e.value==""+t?o(e).attr("checked",!0):o(e).attr("checked",!1):o(e).val(t)},getField:function(e,t){return BUI.FormHelper.serializeToObject(e)[t]}};BUI.FormHelper=p,i.exports=BUI}),define("bui/common/ua",["jquery"],function(e,t,i){function n(e){var t=0;return parseFloat(e.replace(/\./g,function(){return 0===t++?".":""}))}function r(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[],i={browser:t[1]||"",version:t[2]||"0"},n={};return i.browser&&(n[i.browser]=!0,n.version=i.version),n.chrome?n.webkit=!0:n.webkit&&(n.safari=!0),n}var o=e("jquery"),a=o.UA||function(){var e=o.browser||r(navigator.userAgent),t=n(e.version),i={ie:e.msie&&t,webkit:e.webkit&&t,opera:e.opera&&t,mozilla:e.mozilla&&t};return i}();i.exports=a}),define("bui/common/json",["jquery","bui/common/ua"],function(e,t,i){function n(e){return 10>e?"0"+e:e}function r(e){return g.lastIndex=0,g.test(e)?'"'+e.replace(g,function(e){var t=h[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function o(e,t){var i,n,a,u,s,l=d,c=t[e];switch(c&&"object"==typeof c&&"function"==typeof c.toJSON&&(c=c.toJSON(e)),"function"==typeof m&&(c=m.call(t,e,c)),typeof c){case"string":return r(c);case"number":return isFinite(c)?String(c):"null";case"boolean":case"null":return String(c);case"object":if(!c)return"null";if(d+=f,s=[],"[object Array]"===Object.prototype.toString.apply(c)){for(u=c.length,i=0;u>i;i+=1)s[i]=o(i,c)||"null";return a=0===s.length?"[]":d?"[\n"+d+s.join(",\n"+d)+"\n"+l+"]":"["+s.join(",")+"]",d=l,a}if(m&&"object"==typeof m)for(u=m.length,i=0;u>i;i+=1)n=m[i],"string"==typeof n&&(a=o(n,c),a&&s.push(r(n)+(d?": ":":")+a));else for(n in c)Object.hasOwnProperty.call(c,n)&&(a=o(n,c),a&&s.push(r(n)+(d?": ":":")+a));return a=0===s.length?"{}":d?"{\n"+d+s.join(",\n"+d)+"\n"+l+"}":"{"+s.join(",")+"}",d=l,a}}function a(e){try{return new Function("return "+e+";")()}catch(t){throw"Json parse error!"}}var u=e("jquery"),s=e("bui/common/ua"),l=window,c=l.JSON;(!c||s.ie<9)&&(c=l.JSON={}),"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+n(this.getUTCMonth()+1)+"-"+n(this.getUTCDate())+"T"+n(this.getUTCHours())+":"+n(this.getUTCMinutes())+":"+n(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var d,f,m,g=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,h={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};"function"!=typeof c.stringify&&(c.stringify=function(e,t,i){var n;if(d="",f="","number"==typeof i)for(n=0;i>n;n+=1)f+=" ";else"string"==typeof i&&(f=i);if(m=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return o("",{"":e})});var c={parse:u.parseJSON,looseParse:a,stringify:c.stringify};i.exports=c}),define("bui/common/date",[],function(e,t,i){function n(e,t){if(e instanceof Date)return e;if("undefined"==typeof t||null==t||""==t){for(var i=new Array("y-m-d","yyyy-mm-dd","yyyy-mm-dd HH:MM:ss","H:M:s"),r=0;r<i.length;r++){var o=n(e,i[r]);if(null!=o)return o}return null}e+="";var a,u,s=0,l=0,c="",d="",f=new Date,m=f.getYear(),g=f.getMonth()+1,h=1,v=0,b=0,p=0;for(this.isInteger=function(e){return/^\d*$/.test(e)},this.getInt=function(e,t,i,n){for(var r=n;r>=i;r--){var o=e.substring(t,t+r);if(o.length<i)return null;if(this.isInteger(o))return o}return null};l<t.length;){for(c=t.charAt(l),d="";t.charAt(l)==c&&l<t.length;)d+=t.charAt(l++);if("yyyy"==d||"yy"==d||"y"==d){if("yyyy"==d&&(a=4,u=4),"yy"==d&&(a=2,u=2),"y"==d&&(a=2,u=4),m=this.getInt(e,s,a,u),null==m)return null;s+=m.length,2==m.length&&(m=m>70?1900+(m-0):2e3+(m-0))}else if("mm"==d||"m"==d){if(g=this.getInt(e,s,d.length,2),null==g||1>g||g>12)return null;s+=g.length}else if("dd"==d||"d"==d){if(h=this.getInt(e,s,d.length,2),null==h||1>h||h>31)return null;s+=h.length}else if("hh"==d||"h"==d){if(v=this.getInt(e,s,d.length,2),null==v||1>v||v>12)return null;s+=v.length}else if("HH"==d||"H"==d){if(v=this.getInt(e,s,d.length,2),null==v||0>v||v>23)return null;s+=v.length}else if("MM"==d||"M"==d){if(b=this.getInt(e,s,d.length,2),null==b||0>b||b>59)return null;s+=b.length}else if("ss"==d||"s"==d){if(p=this.getInt(e,s,d.length,2),null==p||0>p||p>59)return null;s+=p.length}else{if(e.substring(s,s+d.length)!=d)return null;s+=d.length}}if(s!=e.length)return null;if(2==g)if(m%4==0&&m%100!=0||m%400==0){if(h>29)return null}else if(h>28)return null;return(4==g||6==g||9==g||11==g)&&h>30?null:new Date(m,g-1,h,v,b,p)}function r(e,t,i){var n=new Date(i);switch(isNaN(n)&&(n=new Date),t=parseInt(t,10),e){case"s":n=new Date(n.getTime()+1e3*t);break;case"n":n=new Date(n.getTime()+6e4*t);break;case"h":n=new Date(n.getTime()+36e5*t);break;case"d":n=new Date(n.getTime()+864e5*t);break;case"w":n=new Date(n.getTime()+6048e5*t);break;case"m":n=new Date(n.getFullYear(),n.getMonth()+t,n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds());break;case"y":n=new Date(n.getFullYear()+t,n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds())}return n}var o=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]?)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/,a=function(){var e=/w{1}|d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,t=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,i=/[^-+\dA-Z]/g,n=function(e,t){for(e=String(e),t=t||2;e.length<t;)e="0"+e;return e},r={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUTCDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",localShortDate:"yy\u5e74mm\u6708dd\u65e5",localShortDateTime:"yy\u5e74mm\u6708dd\u65e5 hh:MM:ss TT",localLongDate:"yyyy\u5e74mm\u6708dd\u65e5",localLongDateTime:"yyyy\u5e74mm\u6708dd\u65e5 hh:MM:ss TT",localFullDate:"yyyy\u5e74mm\u6708dd\u65e5 w",localFullDateTime:"yyyy\u5e74mm\u6708dd\u65e5 w hh:MM:ss TT"},o={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","\u661f\u671f\u65e5","\u661f\u671f\u4e00","\u661f\u671f\u4e8c","\u661f\u671f\u4e09","\u661f\u671f\u56db","\u661f\u671f\u4e94","\u661f\u671f\u516d"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]};return function(a,u,s){if(1!==arguments.length||"[object String]"!==Object.prototype.toString.call(a)||/\d/.test(a)||(u=a,a=void 0),a=a?new Date(a):new Date,isNaN(a))throw SyntaxError("invalid date");u=String(r[u]||u||r["default"]),"UTC:"===u.slice(0,4)&&(u=u.slice(4),s=!0);var l=s?"getUTC":"get",c=a[l+"Date"](),d=a[l+"Day"](),f=a[l+"Month"](),m=a[l+"FullYear"](),g=a[l+"Hours"](),h=a[l+"Minutes"](),v=a[l+"Seconds"](),b=a[l+"Milliseconds"](),p=s?0:a.getTimezoneOffset(),y={d:c,dd:n(c,void 0),ddd:o.dayNames[d],dddd:o.dayNames[d+7],w:o.dayNames[d+14],m:f+1,mm:n(f+1,void 0),mmm:o.monthNames[f],mmmm:o.monthNames[f+12],yy:String(m).slice(2),yyyy:m,h:g%12||12,hh:n(g%12||12,void 0),H:g,HH:n(g,void 0),M:h,MM:n(h,void 0),s:v,ss:n(v,void 0),l:n(b,3),L:n(b>99?Math.round(b/10):b,void 0),t:12>g?"a":"p",tt:12>g?"am":"pm",T:12>g?"A":"P",TT:12>g?"AM":"PM",Z:s?"UTC":(String(a).match(t)||[""]).pop().replace(i,""),o:(p>0?"-":"+")+n(100*Math.floor(Math.abs(p)/60)+Math.abs(p)%60,4),S:["th","st","nd","rd"][c%10>3?0:(c%100-c%10!==10)*c%10]};return u.replace(e,function(e){return e in y?y[e]:e.slice(1,e.length-1)})}}(),u={add:function(e,t,i){return r(e,t,i)},addHour:function(e,t){return r("h",e,t)},addMinute:function(e,t){return r("n",e,t)},addSecond:function(e,t){return r("s",e,t)},addDay:function(e,t){return r("d",e,t)},addWeek:function(e,t){return r("w",e,t)},addMonths:function(e,t){return r("m",e,t)},addYear:function(e,t){return r("y",e,t)},isDateEquals:function(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()},isEquals:function(e,t){return e==t?!0:e&&t&&e.getTime&&t.getTime?e.getTime()==t.getTime():!1},isDateString:function(e){return o.test(e)},format:function(e,t,i){return a(e,t,i)},parse:function(e,t){return BUI.isString(e)&&(e=e.replace("/","-")),n(e,t)},today:function(){var e=new Date;return new Date(e.getFullYear(),e.getMonth(),e.getDate())},getDate:function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())}};i.exports=u}),define("bui/common/array",["bui/common/util","jquery"],function(e,t,i){var n=e("bui/common/util"),r={peek:function(e){return e[e.length-1]},indexOf:function(e,t,i){for(var n=null==i?0:0>i?Math.max(0,t.length+i):i,r=n;r<t.length;r++)if(r in t&&t[r]===e)return r;return-1},contains:function(e,t){return r.indexOf(e,t)>=0},each:n.each,equals:function(e,t){if(e==t)return!0;if(!e||!t)return!1;if(e.length!=t.length)return!1;for(var i=!0,n=0;n<e.length;n++)if(e[n]!==t[n]){i=!1;break}return i},filter:function(e,t){var i=[];return r.each(e,function(e,n){t(e,n)&&i.push(e)}),i},map:function(e,t){var i=[];return r.each(e,function(e,n){i.push(t(e,n))}),i},find:function(e,t){var i=r.findIndex(e,t);return 0>i?null:e[i]},findIndex:function(e,t){var i=-1;return r.each(e,function(e,n){return t(e,n)?(i=n,!1):void 0}),i},isEmpty:function(e){return 0==e.length},add:function(e,t){e.push(t)},addAt:function(e,t,i){r.splice(e,i,0,t)},empty:function(e){if(!(e instanceof Array))for(var t=e.length-1;t>=0;t--)delete e[t];e.length=0},remove:function(e,t){var i,n=r.indexOf(t,e);return(i=n>=0)&&r.removeAt(e,n),i},removeAt:function(e,t){return 1==r.splice(e,t,1).length},slice:function(e,t,i){return arguments.length<=2?Array.prototype.slice.call(e,t):Array.prototype.slice.call(e,t,i)},splice:function(e){return Array.prototype.splice.apply(e,r.slice(arguments,1))}};i.exports=r}),define("bui/common/keycode",[],function(e,t,i){var n={BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,RETURN:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123};i.exports=n}),define("bui/common/observable",["jquery","bui/common/util","bui/common/array"],function(e,t,i){function n(){return new u}var r=e("jquery"),o=e("bui/common/util"),a=e("bui/common/array"),u=function(){this._init()};o.augment(u,{_functions:null,_init:function(){var e=this;e._functions=[]},add:function(e){this._functions.push(e)},remove:function(e){var t=this._functions;index=a.indexOf(e,t),index>=0&&t.splice(index,1)},empty:function(){var e=this._functions.length;this._functions.splice(0,e)},pause:function(){this._paused=!0},resume:function(){this._paused=!1},fireWith:function(e,t){var i,n=this;if(!n._paused)return o.each(n._functions,function(n){return i=n.apply(e,t),i===!1?!1:void 0}),i}});var s=function(e){this._events=[],this._eventMap={},this._bubblesEvents=[],this._initEvents(e)};o.augment(s,{_events:[],_eventMap:{},_bubblesEvents:[],_bubbleTarget:null,_getCallbacks:function(e){var t=this,i=t._eventMap;return i[e]},_initEvents:function(e){var t=this,i=null;if(e&&(i=e.listeners||{},e.handler&&(i.click=e.handler),i))for(var n in i)i.hasOwnProperty(n)&&t.on(n,i[n])},_isBubbles:function(e){return a.indexOf(e,this._bubblesEvents)>=0},addTarget:function(e){this._bubbleTarget=e},addEvents:function(e){function t(e){-1===a.indexOf(e,r)&&(u[e]=n(),r.push(e))}var i=this,r=i._events,u=i._eventMap;o.isArray(e)?o.each(e,function(e){t(e)}):t(e)},clearListeners:function(){var e=this,t=e._eventMap;for(var i in t)t.hasOwnProperty(i)&&t[i].empty()},fire:function(e,t){var i,n=this,o=n._getCallbacks(e),a=r.makeArray(arguments);if(t||(t={},a.push(t)),t.target||(t.target=n),o&&(i=o.fireWith(n,Array.prototype.slice.call(a,1))),n._isBubbles(e)){var u=n._bubbleTarget;u&&u.fire&&u.fire(e,t)}return i},pauseEvent:function(e){var t=this,i=t._getCallbacks(e);i&&i.pause()},resumeEvent:function(e){var t=this,i=t._getCallbacks(e);i&&i.resume()},on:function(e,t){var i=e.split(" "),n=this,r=null;return i.length>1?o.each(i,function(e){n.on(e,t)}):(r=n._getCallbacks(e),r?r.add(t):(n.addEvents(e),n.on(e,t))),n},off:function(e,t){if(!e&&!t)return this.clearListeners(),this;var i=this,n=i._getCallbacks(e);return n&&(t?n.remove(t):n.empty()),i},publish:function(e,t){var i=this,n=i._bubblesEvents;if(t.bubbles)-1===o.Array.indexOf(e,n)&&n.push(e);else{var r=o.Array.indexOf(e,n);-1!==r&&n.splice(r,1)}}}),i.exports=s}),define("bui/common/base",["jquery","bui/common/observable","bui/common/util","bui/common/array"],function(e,t,i){function n(e,t,i){var n=e[t]||{};return i&&(e[t]=n),n}function r(e,t){return BUI.isString(t)?e[t]:t}function o(e,t,i,n,r){var o=i;return e.fire(t+BUI.ucfirst(i)+"Change",{attrName:o,prevVal:n,newVal:r})}function a(e,t,i,n){n=n||{};var r,a;return a=e.get(t),s.isPlainObject(i)||BUI.isArray(i)||a!==i?n.silent||!1!==o(e,"before",t,a,i)?(r=e._set(t,i,n),r===!1?r:(n.silent||(i=e.__attrVals[t],o(e,"after",t,a,i)),e)):!1:void 0}function u(e){if(!e._attrs&&e!=d){var t=e.superclass.constructor;t&&!t._attrs&&u(t),e._attrs={},BUI.mixAttrs(e._attrs,t._attrs),BUI.mixAttrs(e._attrs,e.ATTRS)}}var s=e("jquery"),l={},c=e("bui/common/observable"),d=function(e){var t=this,i=t.constructor,n=[];for(this.__attrs={},this.__attrVals={},c.apply(this,arguments);i;)n.push(i),i.extensions&&(BUI.mixin(i,i.extensions),delete i.extensions),i=i.superclass?i.superclass.constructor:null;var r=t.constructor;u(r),t._initStaticAttrs(r._attrs),t._initAttrs(e)};d.INVALID=l,BUI.extend(d,c),BUI.augment(d,{_initStaticAttrs:function(e){var t,i=this;t=i.__attrs={};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];r.shared===!1||r.valueFn?(t[n]={},BUI.mixAttr(t[n],e[n])):t[n]=e[n]}},addAttr:function(e,t){var i=this,n=i.__attrs,r=n[e];r||(r=n[e]={});for(var o in t)t.hasOwnProperty(o)&&("value"==o?BUI.isObject(t[o])?(r[o]=r[o]||{},BUI.mix(r[o],t[o])):BUI.isArray(t[o])?(r[o]=r[o]||[],BUI.mix(r[o],t[o])):r[o]=t[o]:r[o]=t[o]);return i},addAttrs:function(e,t,i){var n=this;return e?("boolean"==typeof t&&(i=t,t=null),BUI.each(e,function(e,t){n.addAttr(t,e,i)}),t&&n.set(t),n):n},hasAttr:function(e){return e&&this.__attrs.hasOwnProperty(e)},getAttrs:function(){return this.__attrs},getAttrVals:function(){return this.__attrVals},get:function(e){var t,i,o,a=this,u=a.__attrVals;return t=n(a.__attrs,e),i=t.getter,o=e in u?u[e]:a._getDefAttrVal(e),i&&(i=r(a,i))&&(o=i.call(a,o,e)),o},clearAttrVals:function(){this.__attrVals={}},removeAttr:function(e){var t=this;return t.hasAttr(e)&&(delete t.__attrs[e],delete t.__attrVals[e]),t},set:function(e,t,i){var n=this;if(s.isPlainObject(e)){i=t;var r=Object(e);for(e in r)r.hasOwnProperty(e)&&a(n,e,r[e],i);return n}return a(n,e,t,i)},setInternal:function(e,t,i){return this._set(e,t,i)},_getDefAttrVal:function(e){var t,i=this,o=i.__attrs,a=n(o,e),u=a.valueFn;return u&&(u=r(i,u))&&(t=u.call(i),void 0!==t&&(a.value=t),delete a.valueFn,o[e]=a),a.value},_set:function(e,t){var i,o=this,a=n(o.__attrs,e,!0),u=a.setter;return u&&(u=r(o,u))&&(i=u.call(o,t,e)),i===l?!1:(void 0!==i&&(t=i),o.__attrVals[e]=t,o)},_initAttrs:function(e){var t=this;if(e)for(var i in e)e.hasOwnProperty(i)&&t._set(i,e[i])}}),i.exports=d}),define("bui/common/component/component",["bui/common/component/manage","bui/common/component/uibase/uibase","bui/common/component/view","bui/common/component/controller","jquery","bui/common/component/uibase/base","bui/common/component/uibase/align","bui/common/component/uibase/autoshow","bui/common/component/uibase/autohide","bui/common/component/uibase/close","bui/common/component/uibase/collapsable","bui/common/component/uibase/drag","bui/common/component/uibase/keynav","bui/common/component/uibase/list","bui/common/component/uibase/listitem","bui/common/component/uibase/mask","bui/common/component/uibase/position","bui/common/component/uibase/selection","bui/common/component/uibase/stdmod","bui/common/component/uibase/decorate","bui/common/component/uibase/tpl","bui/common/component/uibase/childcfg","bui/common/component/uibase/bindable","bui/common/component/uibase/depends","bui/common/base","bui/common/observable","bui/common/util","bui/common/array","bui/common/ua","bui/common/keycode","bui/common/json","bui/common/component/loader"],function(e,t,i){function n(e,t){var i,n;return e&&(n=e.xclass)&&(t&&!e.prefixCls&&(e.prefixCls=t.get("prefixCls")),i=r.Manager.getConstructorByXClass(n),i||BUI.error("can not find class by xclass desc : "+n),e=new i(e)),e
}var r={};BUI.mix(r,{Manager:e("bui/common/component/manage"),UIBase:e("bui/common/component/uibase/uibase"),View:e("bui/common/component/view"),Controller:e("bui/common/component/controller")}),r.create=n,i.exports=r}),define("bui/common/component/manage",["jquery"],function(e,t,i){function n(e){for(var t,i=e.split(/\s+/),n=-1,r=null,o=0;o<i.length;o++){var a=s[i[o]];a&&(t=a.priority)>n&&(n=t,r=a.constructor)}return r}function r(e){for(var t in s){var i=s[t];if(i.constructor==e)return t}return 0}function o(e,t){BUI.isFunction(t)?s[e]={constructor:t,priority:0}:(t.priority=t.priority||0,s[e]=t)}function a(e){for(var t=u.trim(e).split(/\s+/),i=0;i<t.length;i++)t[i]&&(t[i]=this.get("prefixCls")+t[i]);return t.join(" ")}var u=e("jquery"),s={},l={},c={__instances:l,addComponent:function(e,t){l[e]=t},removeComponent:function(e){delete l[e]},eachComponent:function(e){BUI.each(l,e)},getComponent:function(e){return l[e]},getCssClassWithPrefix:a,getXClassByConstructor:r,getConstructorByXClass:n,setConstructorByXClass:o};i.exports=c}),define("bui/common/component/uibase/uibase",["bui/common/component/uibase/base","bui/common/component/uibase/align","bui/common/component/uibase/autoshow","bui/common/component/uibase/autohide","bui/common/component/uibase/close","bui/common/component/uibase/collapsable","bui/common/component/uibase/drag","bui/common/component/uibase/keynav","bui/common/component/uibase/list","bui/common/component/uibase/listitem","bui/common/component/uibase/mask","bui/common/component/uibase/position","bui/common/component/uibase/selection","bui/common/component/uibase/stdmod","bui/common/component/uibase/decorate","bui/common/component/uibase/tpl","bui/common/component/uibase/childcfg","bui/common/component/uibase/bindable","bui/common/component/uibase/depends","jquery","bui/common/component/manage","bui/common/base","bui/common/observable","bui/common/util","bui/common/array","bui/common/ua","bui/common/keycode","bui/common/json"],function(e,t,i){var n=e("bui/common/component/uibase/base");BUI.mix(n,{Align:e("bui/common/component/uibase/align"),AutoShow:e("bui/common/component/uibase/autoshow"),AutoHide:e("bui/common/component/uibase/autohide"),Close:e("bui/common/component/uibase/close"),Collapsable:e("bui/common/component/uibase/collapsable"),Drag:e("bui/common/component/uibase/drag"),KeyNav:e("bui/common/component/uibase/keynav"),List:e("bui/common/component/uibase/list"),ListItem:e("bui/common/component/uibase/listitem"),Mask:e("bui/common/component/uibase/mask"),Position:e("bui/common/component/uibase/position"),Selection:e("bui/common/component/uibase/selection"),StdMod:e("bui/common/component/uibase/stdmod"),Decorate:e("bui/common/component/uibase/decorate"),Tpl:e("bui/common/component/uibase/tpl"),ChildCfg:e("bui/common/component/uibase/childcfg"),Bindable:e("bui/common/component/uibase/bindable"),Depends:e("bui/common/component/uibase/depends")}),BUI.mix(n,{CloseView:n.Close.View,CollapsableView:n.Collapsable.View,ChildList:n.List.ChildList,ListItemView:n.ListItem.View,MaskView:n.Mask.View,PositionView:n.Position.View,StdModView:n.StdMod.View,TplView:n.Tpl.View}),i.exports=n}),define("bui/common/component/view",["jquery","bui/common/component/manage","bui/common/component/uibase/uibase","bui/common/component/uibase/base","bui/common/component/uibase/align","bui/common/component/uibase/autoshow","bui/common/component/uibase/autohide","bui/common/component/uibase/close","bui/common/component/uibase/collapsable","bui/common/component/uibase/drag","bui/common/component/uibase/keynav","bui/common/component/uibase/list","bui/common/component/uibase/listitem","bui/common/component/uibase/mask","bui/common/component/uibase/position","bui/common/component/uibase/selection","bui/common/component/uibase/stdmod","bui/common/component/uibase/decorate","bui/common/component/uibase/tpl","bui/common/component/uibase/childcfg","bui/common/component/uibase/bindable","bui/common/component/uibase/depends","bui/common/base","bui/common/observable","bui/common/util","bui/common/array","bui/common/ua","bui/common/keycode","bui/common/json"],function(e,t,i){var n=e("jquery"),r=e("bui/common/component/manage"),o=e("bui/common/component/uibase/uibase"),a=document,u=o.extend([o.TplView],{getComponentCssClassWithState:function(e){var t=this,i=t.get("ksComponentCss");return e=e||"",t.getCssClassWithPrefix(i.split(/\s+/).join(e+" ")+e)},getCssClassWithPrefix:r.getCssClassWithPrefix,getKeyEventTarget:function(){return this.get("el")},getContentElement:function(){return this.get("contentEl")||this.get("el")},getStatusCls:function(e){var t=this,i=t.get("statusCls"),n=i[e];return n||(n=t.getComponentCssClassWithState("-"+e)),n},renderUI:function(){var e=this;if(!e.get("srcNode")){var t=e.get("render"),i=e.get("el"),n=e.get("elBefore");n?i.insertBefore(n,void 0):t?i.appendTo(t,void 0):i.appendTo(a.body,void 0)}},createDom:function(){var e=this,t=e.get("contentEl"),i=e.get("el");e.get("srcNode")||(i=n("<"+e.get("elTagName")+">"),t&&i.append(t),e.setInternal("el",i)),i.addClass(e.getComponentCssClassWithState()),t||e.setInternal("contentEl",i)},_uiSetHighlighted:function(e){var t=this,i=t.getStatusCls("hover"),n=t.get("el");n[e?"addClass":"removeClass"](i)},_uiSetDisabled:function(e){var t=this,i=t.getStatusCls("disabled"),n=t.get("el");n[e?"addClass":"removeClass"](i).attr("aria-disabled",e),e&&t.get("highlighted")&&t.set("highlighted",!1),t.get("focusable")&&t.getKeyEventTarget().attr("tabIndex",e?-1:0)},_uiSetActive:function(e){var t=this,i=t.getStatusCls("active");t.get("el")[e?"addClass":"removeClass"](i).attr("aria-pressed",!!e)},_uiSetFocused:function(e){var t=this,i=t.get("el"),n=t.getStatusCls("focused");i[e?"addClass":"removeClass"](n)},_uiSetElAttrs:function(e){this.get("el").attr(e)},_uiSetElCls:function(e){this.get("el").addClass(e)},_uiSetElStyle:function(e){this.get("el").css(e)},_uiSetRole:function(e){e&&this.get("el").attr("role",e)},_uiSetWidth:function(e){this.get("el").width(e)},_uiSetHeight:function(e){var t=this;t.get("el").height(e)},_uiSetContent:function(e){var t,i=this;i.get("srcNode")&&!i.get("rendered")||(t=i.get("contentEl"),"string"==typeof e?t.html(e):e&&t.empty().append(e))},_uiSetVisible:function(e){var t=this,i=t.get("el"),n=t.get("visibleMode");"visibility"===n?i.css("visibility",e?"visible":"hidden"):i.css("display",e?"":"none")},set:function(e,t){var i,r,o,a=this,s=a.__attrs[e];if(!s||!a.get("binded"))return u.superclass.set.call(this,e,t),a;var l=u.superclass.get.call(this,e);return n.isPlainObject(t)||BUI.isArray(t)||l!==t?(u.superclass.set.call(this,e,t),t=a.__attrVals[e],i={attrName:e,prevVal:l,newVal:t},r=BUI.ucfirst(e),o="_uiSet"+r,a[o]&&a[o](t,i),a):a},destructor:function(){var e=this.get("el");e&&e.remove()}},{xclass:"view",priority:0});u.ATTRS={el:{setter:function(e){return n(e)}},elCls:{},elStyle:{},role:{},width:{},height:{},statusCls:{value:{}},elTagName:{value:"div"},elAttrs:{},content:{},elBefore:{},render:{},visible:{value:!0},visibleMode:{value:"display"},cachePosition:{},contentEl:{valueFn:function(){return this.get("el")}},prefixCls:{value:BUI.prefix},focusable:{value:!0},focused:{},active:{},disabled:{},highlighted:{}},i.exports=u}),define("bui/common/component/controller",["jquery","bui/common/component/uibase/uibase","bui/common/component/manage","bui/common/component/view","bui/common/component/loader","bui/common/component/uibase/base","bui/common/component/uibase/align","bui/common/component/uibase/autoshow","bui/common/component/uibase/autohide","bui/common/component/uibase/close","bui/common/component/uibase/collapsable","bui/common/component/uibase/drag","bui/common/component/uibase/keynav","bui/common/component/uibase/list","bui/common/component/uibase/listitem","bui/common/component/uibase/mask","bui/common/component/uibase/position","bui/common/component/uibase/selection","bui/common/component/uibase/stdmod","bui/common/component/uibase/decorate","bui/common/component/uibase/tpl","bui/common/component/uibase/childcfg","bui/common/component/uibase/bindable","bui/common/component/uibase/depends","bui/common/base","bui/common/observable","bui/common/util","bui/common/array","bui/common/ua","bui/common/keycode","bui/common/json"],function(e,t,i){"use strict";function n(e,t,i){e.create();var n=e.getContentElement(),r=e.get("defaultChildClass");return t.xclass||t instanceof g||(t.xclass=t.xtype?r+"-"+t.xtype:r),t=BUI.Component.create(t,e),t.setInternal("parent",e),t.set("render",n),t.set("elBefore",i),t.create(void 0),t}function r(e){var t,i,n,r,a={},u=e.get("xview");t=e.getAttrs();for(n in t)t.hasOwnProperty(n)&&(i=t[n],i.view&&void 0!==(r=e.get(n))&&(a[n]=r));return delete a.autoRender,a.ksComponentCss=o(e),new u(a)}function o(e){for(var t,i=e.constructor,n=[];i&&i!==g;)t=l.getXClassByConstructor(i),t&&n.push(t),i=i.superclass&&i.superclass.constructor;return n.join(" ")}function a(e,t){var i=e.relatedTarget;return i&&(i===t[0]||u.contains(t,i))}var u=e("jquery"),s=e("bui/common/component/uibase/uibase"),l=e("bui/common/component/manage"),c=e("bui/common/component/view"),d=e("bui/common/component/loader"),f=BUI.wrapBehavior,m=BUI.getWrapBehavior,g=s.extend([s.Decorate,s.Tpl,s.ChildCfg,s.KeyNav,s.Depends],{isController:!0,getCssClassWithPrefix:l.getCssClassWithPrefix,initializer:function(){var e=this;e.get("id")||e.set("id",e.getNextUniqueId()),l.addComponent(e.get("id"),e);var t=r(e);e.setInternal("view",t),e.__view=t},getNextUniqueId:function(){var e=this,t=l.getXClassByConstructor(e.constructor);return BUI.guid(t)},createDom:function(){var e=this,t=e.get("view");t.create(void 0)},renderUI:function(){var e=this,t=e.get("loader");e.get("view").render(),e._initChildren(),t&&e.setInternal("loader",t)},_initChildren:function(e){var t,e,i,n=this;for(e=e||n.get("children").concat(),n.get("children").length=0,t=0;t<e.length;t++)i=n.addChild(e[t]),i.render()},bindUI:function(){var e=this,t=e.get("events");this.on("afterVisibleChange",function(e){this.fire(e.newVal?"show":"hide")}),BUI.each(t,function(t,i){e.publish(i,{bubbles:t})})},containsElement:function(e){var t=this,i=t.get("el"),n=t.get("children"),r=!1;return t.get("rendered")?(u.contains(i[0],e)||i[0]===e?r=!0:BUI.each(n,function(t){return t.containsElement(e)?(r=!0,!1):void 0}),r):!1},isChildrenElement:function(e){var t=this,i=t.get("children"),n=!1;return BUI.each(i,function(t){return t.containsElement(e)?(n=!0,!1):void 0}),n},show:function(){var e=this;return e.render(),e.set("visible",!0),e},hide:function(){var e=this;return e.set("visible",!1),e},toggle:function(){return this.set("visible",!this.get("visible")),this},_uiSetFocusable:function(e){var t,i=this,n=i.getKeyEventTarget();e?n.attr("tabIndex",0).attr("hideFocus",!0).on("focus",f(i,"handleFocus")).on("blur",f(i,"handleBlur")).on("keydown",f(i,"handleKeydown")).on("keyup",f(i,"handleKeyUp")):(n.removeAttr("tabIndex"),(t=m(i,"handleFocus"))&&n.off("focus",t),(t=m(i,"handleBlur"))&&n.off("blur",t),(t=m(i,"handleKeydown"))&&n.off("keydown",t),(t=m(i,"handleKeyUp"))&&n.off("keyup",t))},_uiSetHandleMouseEvents:function(e){var t,i=this,n=i.get("el");e?n.on("mouseenter",f(i,"handleMouseEnter")).on("mouseleave",f(i,"handleMouseLeave")).on("contextmenu",f(i,"handleContextMenu")).on("mousedown",f(i,"handleMouseDown")).on("mouseup",f(i,"handleMouseUp")).on("dblclick",f(i,"handleDblClick")):(t=m(i,"handleMouseEnter")&&n.off("mouseenter",t),t=m(i,"handleMouseLeave")&&n.off("mouseleave",t),t=m(i,"handleContextMenu")&&n.off("contextmenu",t),t=m(i,"handleMouseDown")&&n.off("mousedown",t),t=m(i,"handleMouseUp")&&n.off("mouseup",t),t=m(i,"handleDblClick")&&n.off("dblclick",t))},_uiSetFocused:function(e){e&&this.getKeyEventTarget()[0].focus()},_uiSetVisible:function(e){var t=this,i=(t.get("el"),t.get("visibleMode"));if("visibility"===i){if(e){var n=t.get("cachePosition");n&&t.set("xy",n)}if(!e){var n=[t.get("x"),t.get("y")];t.set("cachePosition",n),t.set("xy",[-999,-999])}}},_uiSetChildren:function(e){var t=this,i=BUI.cloneObject(e);t._initChildren(i)},enable:function(){return this.set("disabled",!1),this},disable:function(){return this.set("disabled",!0),this},focus:function(){this.get("focusable")&&this.set("focused",!0)},getContentElement:function(){return this.get("view").getContentElement()},getKeyEventTarget:function(){return this.get("view").getKeyEventTarget()},addChild:function(e,t){var i,r=this,o=r.get("children");return void 0===t&&(t=o.length),r.fire("beforeAddChild",{child:e,index:t}),i=o[t]&&o[t].get("el")||null,e=n(r,e,i),o.splice(t,0,e),r.get("rendered")&&e.render(),r.fire("afterAddChild",{child:e,index:t}),e},remove:function(e){var t=this,i=t.get("parent");return i?i.removeChild(t,e):e&&t.destroy(),t},removeChild:function(e,t){var i=this,n=i.get("children"),r=BUI.Array.indexOf(e,n);if(-1!==r)return i.fire("beforeRemoveChild",{child:e,destroy:t}),-1!==r&&n.splice(r,1),t&&e.destroy&&e.destroy(),i.fire("afterRemoveChild",{child:e,destroy:t}),e},removeChildren:function(e){var t,i=this,n=[].concat(i.get("children"));for(t=0;t<n.length;t++)i.removeChild(n[t],e)},getChildAt:function(e){var t=this.get("children");return t[e]||null},getChild:function(e,t){return this.getChildBy(function(t){return t.get("id")===e},t)},getChildBy:function(e,t){return this.getChildrenBy(e,t)[0]||null},getAppendHeight:function(){var e=this.get("el");return e.outerHeight()-e.height()},getAppendWidth:function(){var e=this.get("el");return e.outerWidth()-e.width()},getChildrenBy:function(e,t){var i=this,n=[];return e?(i.eachChild(function(i){e(i)?n.push(i):t&&(n=n.concat(i.getChildrenBy(e,t)))}),n):n},eachChild:function(e){BUI.each(this.get("children"),e)},handleDblClick:function(e){this.performActionInternal(e),this.isChildrenElement(e.target)||this.fire("dblclick",{domTarget:e.target,domEvent:e})},handleMouseOver:function(e){var t=this,i=t.get("el");a(e,i)||t.handleMouseEnter(e)},handleMouseOut:function(e){var t=this,i=t.get("el");a(e,i)||t.handleMouseLeave(e)},handleMouseEnter:function(e){var t=this;this.set("highlighted",!!e),t.fire("mouseenter",{domTarget:e.target,domEvent:e})},handleMouseLeave:function(e){var t=this;t.set("active",!1),t.set("highlighted",!e),t.fire("mouseleave",{domTarget:e.target,domEvent:e})},handleMouseDown:function(e){var t,i,n=this,r=(u(e.target),1===e.which);r&&(i=n.getKeyEventTarget(),n.get("activeable")&&n.set("active",!0),n.get("focusable")&&n.setInternal("focused",!0),n.get("allowTextSelection")||(t=e.target.nodeName,t=t&&t.toLowerCase(),"input"!==t&&"textarea"!==t&&e.preventDefault()),n.isChildrenElement(e.target)||n.fire("mousedown",{domTarget:e.target,domEvent:e}))},handleMouseUp:function(e){var t=this,i=t.isChildrenElement(e.target);t.get("active")&&1===e.which&&(t.performActionInternal(e),t.set("active",!1),i||t.fire("click",{domTarget:e.target,domEvent:e})),i||t.fire("mouseup",{domTarget:e.target,domEvent:e})},handleContextMenu:function(){},handleFocus:function(e){this.set("focused",!!e),this.fire("focus",{domEvent:e,domTarget:e.target})},handleBlur:function(e){this.set("focused",!e),this.fire("blur",{domEvent:e,domTarget:e.target})},handleKeyEventInternal:function(e){var t=this,i=t.isChildrenElement(e.target);return 13===e.which?(i||t.fire("click",{domTarget:e.target,domEvent:e}),this.performActionInternal(e)):void(i||t.fire("keydown",{domTarget:e.target,domEvent:e}))},handleKeydown:function(e){var t=this;return t.handleKeyEventInternal(e)?(e.halt(),!0):void 0},handleKeyUp:function(e){var t=this;t.isChildrenElement(e.target)||t.fire("keyup",{domTarget:e.target,domEvent:e})},performActionInternal:function(){},destructor:function(){var e,t,i=this,n=i.get("children");for(e=i.get("id"),t=0;t<n.length;t++)n[t].destroy&&n[t].destroy();i.get("view").destroy(),l.removeComponent(e)},set:function(e,t,i){var n,r,o,a=this,s=a.__view,l=a.__attrs[e];if(BUI.isObject(e)&&(i=t,BUI.each(e,function(e,t){a.set(t,e,i)})),!s||!l||i&&i.silent)return g.superclass.set.call(this,e,t,i),a;var c=g.superclass.get.call(this,e);return u.isPlainObject(t)||BUI.isArray(t)||c!==t?(n=BUI.ucfirst(e),o="_uiSet"+n,a.fire("before"+n+"Change",{attrName:e,prevVal:c,newVal:t}),a.setInternal(e,t),t=a.__attrVals[e],s&&l.view&&s.set(e,t),r={attrName:e,prevVal:c,newVal:t},a.fire("after"+n+"Change",r),a.get("binded")&&a[o]&&a[o](t,r),a):a},get:function(e){var t=this,i=t.__view,n=t.__attrs[e],r=g.superclass.get.call(this,e);return void 0!==r?r:i&&n&&n.view?i.get(e):r}},{ATTRS:{content:{view:1},elTagName:{view:!0,value:"div"},defaultChildClass:{},xtype:{},id:{view:!0},width:{view:1},height:{view:1},elCls:{view:1},elStyle:{view:1},elAttrs:{view:1},elBefore:{view:1},el:{view:1},events:{value:{click:!0,dblclick:!0,mouseenter:!0,mouseleave:!0,keydown:!0,keyup:!0,focus:!1,blur:!1,mousedown:!0,mouseup:!0,show:!1,hide:!1}},render:{view:1},role:{view:1},statusCls:{view:!0,value:{}},visibleMode:{view:1,value:"display"},visible:{value:!0,view:1},handleMouseEvents:{value:!0},focusable:{value:!1,view:1},defaultLoaderCfg:{value:{property:"content",autoLoad:!0}},loader:{getter:function(e){var t,i=this;return e&&!e.isLoader&&(e.target=i,t=i.get("defaultLoaderCfg"),e=new d(BUI.merge(t,e)),i.setInternal("loader",e)),e}},allowTextSelection:{value:!0},activeable:{value:!0},focused:{view:1},active:{view:1},highlighted:{view:1},children:{sync:!1,shared:!1,value:[]},prefixCls:{value:BUI.prefix,view:1},parent:{setter:function(e){this.addTarget(e)}},disabled:{view:1,value:!1},xview:{value:c}},PARSER:{visible:function(e){var t=this,i=e.css("display"),n=e.css("visibility"),r=t.get("visibleMode");return"none"==i&&"display"==r||"hidden"==n&&"visibility"==r?!1:!0}}},{xclass:"controller",priority:0});i.exports=g}),define("bui/common/component/uibase/base",["jquery","bui/common/component/manage","bui/common/base","bui/common/observable","bui/common/util","bui/common/array"],function(e,t,i){function n(e){r(e,"initializer","constructor")}function r(e,t,i){for(var n,r,o,a,u=e.constructor,s=[];u;){if(a=[],o=u.mixins)for(var l=0;l<o.length;l++)n=o[l],n&&("constructor"!=i&&(n=n.prototype.hasOwnProperty(i)?n.prototype[i]:null),n&&a.push(n));u.prototype.hasOwnProperty(t)&&(r=u.prototype[t])&&a.push(r),a.length&&s.push.apply(s,a.reverse()),u=u.superclass&&u.superclass.constructor}for(l=s.length-1;l>=0;l--)s[l]&&s[l].call(e)}function o(e){for(var t,i,n,r=e.constructor;r;){if(r.prototype.hasOwnProperty("destructor")&&r.prototype.destructor.apply(e),t=r.mixins)for(n=t.length-1;n>=0;n--)i=t[n]&&t[n].prototype.__destructor,i&&i.apply(e);r=r.superclass&&r.superclass.constructor}}function a(e){e&&BUI.each(e,function(t,i){BUI.isFunction(t)&&(e[i]=new t)})}function u(e,t,i){t&&BUI.each(t,function(t){t[i]&&t[i](e)})}function s(){}function l(e){var t,i,n=e.getAttrs();for(var r in n)if(n.hasOwnProperty(r)){var o=m+g(r);(i=e[o])&&n[r].sync!==!1&&void 0!==(t=e.get(r))&&i.call(e,t)}}function c(e){for(var t=[];e.base;)t.push(e),e=e.base;for(var i=t.length-1;i>=0;i--){var n=t[i];BUI.mix(n.prototype,n.px),BUI.mix(n,n.sx),n.base=null,n.px=null,n.sx=null}}var d=e("jquery"),f=e("bui/common/component/manage"),m="_uiSet",g=BUI.ucfirst,h=d.noop,v=e("bui/common/base"),b=function(e){var t=this;v.apply(t,arguments),t.setInternal("userConfig",e),n(t,e);var i=t.get("plugins");a(i);var r=t.get("xclass");r&&(t.__xclass=r),u(t,i,"initializer"),e&&e.autoRender&&t.render()};b.ATTRS={userConfig:{},autoRender:{value:!1},listeners:{value:{}},plugins:{},rendered:{value:!1},xclass:{valueFn:function(){return f.getXClassByConstructor(this.constructor)}}},BUI.extend(b,v),BUI.augment(b,{create:function(){var e=this;return e.get("created")||(e.fire("beforeCreateDom"),r(e,"createDom","__createDom"),e._set("created",!0),e.fire("afterCreateDom"),u(e,e.get("plugins"),"createDom")),e},render:function(){var e=this;if(!e.get("rendered")){var t=e.get("plugins");e.create(void 0),e.set("created",!0),e.fire("beforeRenderUI"),r(e,"renderUI","__renderUI"),e.fire("afterRenderUI"),u(e,t,"renderUI"),e.fire("beforeBindUI"),s(e),r(e,"bindUI","__bindUI"),e.set("binded",!0),e.fire("afterBindUI"),u(e,t,"bindUI"),e.fire("beforeSyncUI"),l(e),r(e,"syncUI","__syncUI"),e.fire("afterSyncUI"),u(e,t,"syncUI"),e._set("rendered",!0)}return e},createDom:h,renderUI:h,bindUI:h,syncUI:h,destroy:function(){var e=this;return e.destroyed?e:(e.fire("beforeDestroy"),u(e,e.get("plugins"),"destructor"),o(e),e.fire("afterDestroy"),e.off(),e.clearAttrVals(),e.destroyed=!0,e)}}),BUI.mix(b,{define:function(e,t,i,n){function r(){var e=this.constructor;e.base&&c(e),b.apply(this,arguments)}return d.isPlainObject(t)&&(n=i,i=t,t=[]),BUI.extend(r,e),r.base=e,r.px=i,r.sx=n,t.length&&(r.extensions=t),r},extend:function p(){var e,t=d.makeArray(arguments),i=t[t.length-1];if(t.unshift(this),i.xclass&&(t.pop(),t.push(i.xclass)),e=b.define.apply(b,t),i.xclass){var n=i.priority||(this.priority?this.priority+1:1);f.setConstructorByXClass(i.xclass,{constructor:e,priority:n}),e.__xclass=i.xclass,e.priority=n,e.toString=function(){return i.xclass}}return e.extend=p,e}}),i.exports=b}),define("bui/common/component/uibase/align",["jquery","bui/common/ua"],function(e,t,i){function n(e){var t,i=e.ownerDocument,n=i.body,r=h(e).css("position"),o="fixed"==r||"absolute"==r;if(!o)return"html"==e.nodeName.toLowerCase()?null:e.parentNode;for(t=e.parentNode;t&&t!=n;t=t.parentNode)if(r=h(t).css("position"),"static"!=r)return t;return null}function r(e){var t,i,r,o,a={left:0,right:1/0,top:0,bottom:1/0},u=e.ownerDocument,s=u.body,l=u.documentElement;for(t=e;t=n(t);)if((!v.ie||0!=t.clientWidth)&&t!=s&&t!=l&&"visible"!=h(t).css("overflow")){var c=h(t).offset();c.left+=t.clientLeft,c.top+=t.clientTop,a.top=Math.max(a.top,c.top),a.right=Math.min(a.right,c.left+t.clientWidth),a.bottom=Math.min(a.bottom,c.top+t.clientHeight),a.left=Math.max(a.left,c.left)}return i=h(p).scrollLeft(),r=h(p).scrollTop(),a.left=Math.max(a.left,i),a.top=Math.max(a.top,r),o={width:BUI.viewportWidth(),height:BUI.viewportHeight()},a.right=Math.min(a.right,i+o.width),a.bottom=Math.min(a.bottom,r+o.height),a.top>=0&&a.left>=0&&a.bottom>a.top&&a.right>a.left?a:null}function o(e,t,i,n){var r,o,a,u;return r={left:e.left,top:e.top},a=m(t,i[0]),u=m(e,i[1]),o=[u.left-a.left,u.top-a.top],{left:r.left-o[0]+ +n[0],top:r.top-o[1]+ +n[1]}}function a(e,t,i){return e.left<i.left||e.left+t.width>i.right}function u(e,t,i){return e.top<i.top||e.top+t.height>i.bottom}function s(e,t,i,n){var r=BUI.cloneObject(e),o={width:t.width,height:t.height};return n.adjustX&&r.left<i.left&&(r.left=i.left),n.resizeWidth&&r.left>=i.left&&r.left+o.width>i.right&&(o.width-=r.left+o.width-i.right),n.adjustX&&r.left+o.width>i.right&&(r.left=Math.max(i.right-o.width,i.left)),n.adjustY&&r.top<i.top&&(r.top=i.top),n.resizeHeight&&r.top>=i.top&&r.top+o.height>i.bottom&&(o.height-=r.top+o.height-i.bottom),n.adjustY&&r.top+o.height>i.bottom&&(r.top=Math.max(i.bottom-o.height,i.top)),BUI.mix(r,o)}function l(e,t,i){var n=[];return h.each(e,function(e,r){n.push(r.replace(t,function(e){return i[e]}))}),n}function c(e,t){return e[t]=-e[t],e}function d(){}function f(e){var t,i,n;return e.length&&!h.isWindow(e[0])?(t=e.offset(),i=e.outerWidth(),n=e.outerHeight()):(t={left:BUI.scrollLeft(),top:BUI.scrollTop()},i=BUI.viewportWidth(),n=BUI.viewportHeight()),t.width=i,t.height=n,t}function m(e,t){var i,n,r=t.charAt(0),o=t.charAt(1),a=e.width,u=e.height;return i=e.left,n=e.top,"c"===r?n+=u/2:"b"===r&&(n+=u),"c"===o?i+=a/2:"r"===o&&(i+=a),{left:i,top:n}}function g(e){var t=e.attr("class"),i=new RegExp("s?"+b+"[a-z]{2}-[a-z]{2}","ig"),n=i.exec(t);n&&e.removeClass(n.join(" "))}var h=e("jquery"),v=e("bui/common/ua"),b="x-align-",p=window;d.__getOffsetParent=n,d.__getVisibleRectForElement=r,d.ATTRS={align:{shared:!1,value:{}}},d.prototype={_uiSetAlign:function(e){var t,i,n="";e&&e.points&&(this.align(e.node,e.points,e.offset,e.overflow),this.set("cachePosition",null),t=this.get("el"),g(t),i=e.points.join("-"),n=b+i,t.addClass(n))},__bindUI:function(){var e=this,t=BUI.wrapBehavior(e,"handleWindowResize");e.on("show",function(){h(window).on("resize",t)}),e.on("hide",function(){h(window).off("resize",t)})},handleWindowResize:function(){var e=this,t=e.get("align");e.set("align",t)},align:function(e,t,i,n){e=h(e||p),i=i&&[].concat(i)||[0,0],n=n||{};var d=this,m=d.get("el"),g=0,v=r(m[0]),b=f(m),y=f(e),x=o(b,y,t,i),I=BUI.merge(b,x);if(v&&(n.adjustX||n.adjustY)){a(x,b,v)&&(g=1,t=l(t,/[lr]/gi,{l:"r",r:"l"}),i=c(i,0)),u(x,b,v)&&(g=1,t=l(t,/[tb]/gi,{t:"b",b:"t"}),i=c(i,1)),g&&(x=o(b,y,t,i),BUI.mix(I,x));var C={};C.adjustX=n.adjustX&&a(x,b,v),C.adjustY=n.adjustY&&u(x,b,v),(C.adjustX||C.adjustY)&&(I=s(x,b,v,C))}return I.left!=b.left&&(d.setInternal("x",null),d.get("view").setInternal("x",null),d.set("x",I.left)),I.top!=b.top&&(d.setInternal("y",null),d.get("view").setInternal("y",null),d.set("y",I.top)),I.width!=b.width&&m.width(m.width()+I.width-b.width),I.height!=b.height&&m.height(m.height()+I.height-b.height),d},center:function(e){var t=this;return t.set("align",{node:e,points:["cc","cc"],offset:[0,0]}),t}},i.exports=d}),define("bui/common/component/uibase/autoshow",["jquery"],function(e,t,i){function n(){}var r=e("jquery");n.ATTRS={trigger:{},delegateTigger:{getter:function(){this.get("delegateTrigger")},setter:function(e){this.set("delegateTrigger",e)}},delegateTrigger:{value:!1},autoAlign:{value:!0},autoFocused:{value:!0},triggerActiveCls:{},curTrigger:{},triggerCallback:{},triggerEvent:{value:"click"},triggerHideEvent:{},events:{value:{triggerchange:!1}}},n.prototype={__createDom:function(){this._setTrigger()},__bindUI:function(){var e=this,t=e.get("triggerActiveCls");t&&e.on("hide",function(){var i=e.get("curTrigger");i&&i.removeClass(t)})},_setTrigger:function(){function e(e){if(!i.get("disabled")){var t=i.get("curTrigger"),n=r(l?e.currentTarget:this),o=i.get("align");t&&t[0]==n[0]||(t&&t.removeClass(u),i.set("curTrigger",n),i.fire("triggerchange",{prevTrigger:t,curTrigger:n})),n.addClass(u),i.get("autoAlign")&&(o.node=n),i.set("align",o),i.show(),a&&a(e)}}function t(e){var t=e.toElement||e.relatedTarget;t&&i.containsElement(t)||i.hide()}var i=this,n=i.get("triggerEvent"),o=i.get("triggerHideEvent"),a=i.get("triggerCallback"),u=i.get("triggerActiveCls")||"",s=i.get("trigger"),l=i.get("delegateTrigger"),c=r(s);n&&(l&&BUI.isString(s)?r(document).delegate(s,n,e):c.on(n,e)),o&&(l&&BUI.isString(s)?r(document).delegate(s,o,t):c.on(o,t))},__renderUI:function(){var e=this,t=e.get("align");t&&!t.node&&(t.node=e.get("render")||e.get("trigger"))}},i.exports=n}),define("bui/common/component/uibase/autohide",["jquery"],function(e,t,i){function n(e,t){var i=e.get("hideExceptNode");return i&&i.length?o.contains(i[0],t):!1}function r(){}var o=e("jquery"),a=BUI.wrapBehavior,u=BUI.getWrapBehavior;r.ATTRS={autoHideType:{value:"click"},autoHide:{value:!1},hideExceptNode:{},events:{value:{autohide:!1}}},r.prototype={__bindUI:function(){var e=this;e.on("afterVisibleChange",function(t){var i=t.newVal;e.get("autoHide")&&(i?e._bindHideEvent():e._clearHideEvent())})},handleMoveOuter:function(e){var t=this,i=e.toElement||e.relatedTarget;t.containsElement(i)||n(t,i)||t.fire("autohide")!==!1&&t.hide()},handleDocumentClick:function(e){var t=this,i=e.target;t.containsElement(i)||n(t,i)||t.fire("autohide")!==!1&&t.hide()},_bindHideEvent:function(){var e=this,t=e.get("curTrigger"),i=e.get("autoHideType");"click"===i?o(document).on("mousedown",a(e,"handleDocumentClick")):(e.get("el").on("mouseleave",a(e,"handleMoveOuter")),t&&o(t).on("mouseleave",a(e,"handleMoveOuter")))},_clearHideEvent:function(){var e=this,t=e.get("curTrigger"),i=e.get("autoHideType");"click"===i?o(document).off("mousedown",u(e,"handleDocumentClick")):(e.get("el").off("mouseleave",u(e,"handleMoveOuter")),t&&o(t).off("mouseleave",u(e,"handleMoveOuter")))}},i.exports=r}),define("bui/common/component/uibase/close",["jquery"],function(e,t,i){function n(e){return a(e.get("closeTpl"))}function r(){}function o(){}var a=e("jquery"),u=BUI.prefix+"ext-";r.ATTRS={closeTpl:{value:'<a tabindex="0" href=\'javascript:void("\u5173\u95ed")\' role="button" class="'+u+'close"><span class="'+u+'close-x">\u5173\u95ed</span></a>'},closeable:{value:!0},closeBtn:{}},r.prototype={_uiSetCloseable:function(e){var t=this,i=t.get("closeBtn");e?(i||t.setInternal("closeBtn",i=n(t)),i.appendTo(t.get("el"),void 0)):i&&i.remove()}};var s="hide";o.ATTRS={closeTpl:{view:!0},closeable:{view:1},closeBtn:{view:1},closeAction:{value:s}};var l={hide:s,destroy:"destroy",remove:"remove"};o.prototype={_uiSetCloseable:function(e){var t=this;e&&!t.__bindCloseEvent&&(t.__bindCloseEvent=1,t.get("closeBtn").on("click",function(e){t.fire("closeclick",{domTarget:e.target})!==!1&&t.close(),e.preventDefault()}))},__destructor:function(){var e=this.get("closeBtn");e&&e.detach()},close:function(){var e=this,t=l[e.get("closeAction")||s];e.fire("closing",{action:t})!==!1&&(e.fire("beforeclosed",{action:t}),"remove"==t?e[t](!0):e[t](),e.fire("closed",{action:t}))}},o.View=r,i.exports=o}),define("bui/common/component/uibase/collapsable",[],function(e,t,i){var n=function(){};n.ATTRS={collapsed:{}},n.prototype={_uiSetCollapsed:function(e){var t=this,i=t.getStatusCls("collapsed"),n=t.get("el");e?n.addClass(i):n.removeClass(i)}};var r=function(){};r.ATTRS={collapsable:{value:!1},collapsed:{view:!0,value:!1},events:{value:{expanded:!0,collapsed:!0}}},r.prototype={_uiSetCollapsed:function(e){var t=this;t.fire(e?"collapsed":"expanded")}},r.View=n,i.exports=r}),define("bui/common/component/uibase/drag",["jquery"],function(e,t,i){function n(){var e=r(u).css("opacity",0).prependTo("body");return e}var r=e("jquery"),o=BUI.guid("drag"),a=function(){};a.ATTRS={dragNode:{},draging:{setter:function(e){return e===!0?{}:void 0},value:null},constraint:{},dragBackEl:{getter:function(){return r("#"+o)}}};var u='<div id="'+o+'" style="background-color: red; position: fixed; left: 0px; width: 100%; height: 100%; top: 0px; cursor: move; z-index: 999999; display: none; "></div>';a.prototype={__bindUI:function(){function e(e){var t=o.get("draging");t&&(e.preventDefault(),o._dragMoveTo(e.pageX,e.pageY,t,a))}function t(e){if(1==e.which){o.set("draging",!1);var t=o.get("dragBackEl");t&&t.hide(),n()}}function i(){r(document).on("mousemove",e),r(document).on("mouseup",t)}function n(){r(document).off("mousemove",e),r(document).off("mouseup",t)}var o=this,a=o.get("constraint"),u=o.get("dragNode");u&&u.on("mousedown",function(e){1==e.which&&(e.preventDefault(),o.set("draging",{elX:o.get("x"),elY:o.get("y"),startX:e.pageX,startY:e.pageY}),i())})},_dragMoveTo:function(e,t,i,r){var o=this,a=o.get("dragBackEl"),i=i||o.get("draging"),u=i.startX-e,s=i.startY-t;a.length||(a=n()),a.css({cursor:"move",display:"block"}),o.set("xy",[o._getConstrainX(i.elX-u,r),o._getConstrainY(i.elY-s,r)])},_getConstrainX:function(e,t){var i=this,n=i.get("el").outerWidth(),r=e+n,o=i.get("x");if(t){var a=t.offset();return a.left>=e?a.left:a.left+t.width()<r?a.left+t.width()-n:e}return BUI.isInHorizontalView(e)&&BUI.isInHorizontalView(r)?e:o},_getConstrainY:function(e,t){var i=this,n=i.get("el").outerHeight(),r=e+n,o=i.get("y");if(t){var a=t.offset();return a.top>e?a.top:a.top+t.height()<r?a.top+t.height()-n:e}return BUI.isInVerticalView(e)&&BUI.isInVerticalView(r)?e:o}},i.exports=a}),define("bui/common/component/uibase/keynav",["jquery","bui/common/keycode"],function(e,t,i){var n=e("jquery"),r=e("bui/common/keycode"),o=BUI.wrapBehavior,a=BUI.getWrapBehavior,u=function(){};u.ATTRS={allowKeyNav:{value:!0},navEvent:{value:"keydown"},ignoreInputFields:{value:!0}},u.prototype={__bindUI:function(){},_uiSetAllowKeyNav:function(e){var t=this,i=t.get("navEvent"),n=t.get("el");e?n.on(i,o(t,"_handleKeyDown")):n.off(i,a(t,"_handleKeyDown"))},_handleKeyDown:function(e){var t=this,i=t.get("ignoreInputFields"),o=e.which;if(!i||!n(e.target).is("input,select,textarea"))switch(o){case r.UP:e.preventDefault(),t.handleNavUp(e);break;case r.DOWN:e.preventDefault(),t.handleNavDown(e);break;case r.RIGHT:e.preventDefault(),t.handleNavRight(e);break;case r.LEFT:e.preventDefault(),t.handleNavLeft(e);break;case r.ENTER:t.handleNavEnter(e);
break;case r.ESC:t.handleNavEsc(e);break;case r.TAB:t.handleNavTab(e)}},handleNavUp:function(){},handleNavDown:function(){},handleNavLeft:function(){},handleNavRight:function(){},handleNavEnter:function(){},handleNavEsc:function(){},handleNavTab:function(){}},i.exports=u}),define("bui/common/component/uibase/list",["jquery","bui/common/component/uibase/selection"],function(e,t,i){function n(e,t){var i=t.isController?t.getAttrVals():t,n=e.get("itemTpl"),o=e.get("itemStatusCls"),a=e.get("itemTplRender");if(n&&!i.tpl&&r(t,"tpl",n),a&&!i.tplRender&&r(t,"tplRender",a),o){var u=i.statusCls||t.isController?t.get("statusCls"):{};BUI.each(o,function(e,t){e&&!u[t]&&(u[t]=e)}),r(t,"statusCls",u)}}function r(e,t,i){e.isController?e.set(t,i):e[t]=i}var o=e("jquery"),a=e("bui/common/component/uibase/selection"),u=function(){};u.ATTRS={items:{shared:!1,view:!0},idField:{value:"id"},itemTpl:{view:!0},itemTplRender:{view:!0},itemStatusCls:{view:!0,value:{}},events:{value:{itemclick:!0}}},u.prototype={getItemCount:function(){return this.getItems().length},getValueByField:function(){},getItems:function(){},getFirstItem:function(){return this.getItemAt(0)},getLastItem:function(){return this.getItemAt(this.getItemCount()-1)},getItemAt:function(e){return this.getItems()[e]||null},getItem:function(e){var t=this.get("idField");return this.findItemByField(t,e)},indexOfItem:function(e){return BUI.Array.indexOf(e,this.getItems())},addItems:function(e){var t=this;BUI.each(e,function(e){t.addItem(e)})},addItemsAt:function(e,t){var i=this;BUI.each(e,function(e,n){i.addItemAt(e,t+n)})},updateItem:function(){},addItem:function(e){return this.addItemAt(e,this.getItemCount())},addItemAt:function(){},findItemByField:function(){},getItemText:function(){},clearItems:function(){var e=this,t=e.getItems();t.splice(0),e.clearControl()},removeItem:function(){},removeItems:function(e){var t=this;BUI.each(e,function(e){t.removeItem(e)})},removeItemAt:function(e){this.removeItem(this.getItemAt(e))},clearControl:function(){}};var s=function(){this.__init()};s.ATTRS=BUI.merge(!0,u.ATTRS,a.ATTRS,{items:{sync:!1},autoInitItems:{value:!0},isDecorateChild:{value:!0},defaultLoaderCfg:{value:{property:"children",dataType:"json"}}}),BUI.augment(s,u,a,{__init:function(){var e=this,t=e.get("items");t&&e.get("autoInitItems")&&e.addItems(t),e.on("beforeRenderUI",function(){e._beforeRenderUI()})},_uiSetItems:function(e){var t=this;t.clearControl(),t.addItems(e)},_beforeRenderUI:function(){{var e=this,t=e.get("children");e.get("items")}BUI.each(t,function(t){n(e,t)})},__bindUI:function(){var e=this,t=e.get("selectedEvent");e.on(t,function(t){var i=t.target;i.get("selectable")&&(i.get("selected")?e.get("multipleSelect")&&e.clearSelected(i):e.setSelected(i))}),e.on("click",function(t){t.target!==e&&e.fire("itemclick",{item:t.target,domTarget:t.domTarget,domEvent:t})}),e.on("beforeAddChild",function(t){n(e,t.child)}),e.on("beforeRemoveChild",function(t){var i=t.child,n=i.get("selected");n&&(e.get("multipleSelect")?e.clearSelected(i):e.setSelected(null)),i.set("selected",!1)})},clearControl:function(){this.removeChildren(!0)},getItems:function(){return this.get("children")},updateItem:function(e){var t=this,i=t.get("idField"),n=t.findItemByField(i,e[i]);return n&&n.setTplContent(),n},removeItem:function(e){var t=this,i=t.get("idField");e instanceof BUI.Component.Controller||(e=t.findItemByField(i,e[i])),this.removeChild(e,!0)},addItemAt:function(e,t){return this.addChild(e,t)},findItemByField:function(e,t,i){i=i||this;var n=this,r=i.get("children"),a=null;return o(r).each(function(i,r){return r.get(e)==t?a=r:r.get("children").length&&(a=n.findItemByField(e,t,r)),a?!1:void 0}),a},getItemText:function(e){return e.get("el").text()},getValueByField:function(e,t){return e&&e.get(t)},setItemSelectedStatus:function(e,t){var i=this,n=null;e&&(e.set("selected",t),n=e.get("el")),i.afterSelected(e,t,n)},isItemSelected:function(e){return e?e.get("selected"):!1},setAllSelection:function(){var e=this,t=e.getItems();e.setSelection(t)},getSelection:function(){var e=this,t=e.getItems(),i=[];return BUI.each(t,function(t){e.isItemSelected(t)&&i.push(t)}),i}}),u.ChildList=s,i.exports=u}),define("bui/common/component/uibase/listitem",[],function(e,t,i){function n(){}function r(){}n.ATTRS={selected:{}},n.prototype={_uiSetSelected:function(e){var t=this,i=t.getStatusCls("selected"),n=t.get("el");e?n.addClass(i):n.removeClass(i)}},r.ATTRS={selectable:{value:!0},selected:{view:!0,sync:!1,value:!1}},r.prototype={},r.View=n,i.exports=r}),define("bui/common/component/uibase/mask",["jquery","bui/common/ua"],function(e,t,i){function n(e){return e.get("prefixCls")+"ext-mask"}function r(){return f?BUI.docWidth()+"px":"100%"}function o(){return f?BUI.docHeight()+"px":"100%"}function a(e){var t=l('<div  style="width:'+r()+";left:0;top:0;height:"+o()+";position:"+(f?"absolute":"fixed")+';" class="'+e+'">'+(f?'<iframe style="position:absolute;left:0;top:0;background:white;width: expression(this.parentNode.offsetWidth);height: expression(this.parentNode.offsetHeight);filter:alpha(opacity=0);z-index:-1;"></iframe>':"")+"</div>").prependTo("body");return t.on("mousedown",function(e){e.preventDefault()}),t}function u(){}function s(){}var l=e("jquery"),c=e("bui/common/ua"),d={},f=6==c.ie;u.ATTRS={maskShared:{value:!0}},u.prototype={_maskExtShow:function(){var e,t=this,i=n(t),r=d[i],o=t.get("maskShared"),u=t.get("maskNode");u||(o?r?u=r.node:(u=a(i),r=d[i]={num:0,node:u}):u=a(i),t.setInternal("maskNode",u)),(e=t.get("zIndex"))&&u.css("z-index",e-1),o&&r.num++,o&&1!=r.num||u.show(),l("body").addClass("x-masked-relative")},_maskExtHide:function(){var e=this,t=n(e),i=d[t],r=e.get("maskShared"),o=e.get("maskNode");r&&i?(i.num=Math.max(i.num-1,0),0==i.num&&o.hide()):o&&o.hide(),l("body").removeClass("x-masked-relative")},__destructor:function(){var e=this,t=e.get("maskShared"),i=e.get("maskNode");e.get("maskNode")&&(t?e.get("visible")&&e._maskExtHide():i.remove())}},s.ATTRS={mask:{value:!1},maskNode:{view:1},maskShared:{view:1}},s.prototype={__bindUI:function(){{var e=this,t=e.get("view");t._maskExtShow,t._maskExtHide}e.get("mask")&&(e.on("show",function(){t._maskExtShow()}),e.on("hide",function(){t._maskExtHide()}))}},s=s,s.View=u,i.exports=s}),define("bui/common/component/uibase/position",["jquery"],function(e,t,i){function n(){}function r(){}var o=e("jquery");n.ATTRS={x:{valueFn:function(){var e=this;return e.get("el")&&e.get("el").offset().left}},y:{valueFn:function(){var e=this;return e.get("el")&&e.get("el").offset().top}},zIndex:{},visibleMode:{value:"visibility"}},n.prototype={__createDom:function(){this.get("el").addClass(BUI.prefix+"ext-position")},_uiSetZIndex:function(e){this.get("el").css("z-index",e)},_uiSetX:function(e){null!=e&&this.get("el").offset({left:e})},_uiSetY:function(e){null!=e&&this.get("el").offset({top:e})},_uiSetLeft:function(e){null!=e&&this.get("el").css({left:e})},_uiSetTop:function(e){null!=e&&this.get("el").css({top:e})}},r.ATTRS={x:{view:1},y:{view:1},left:{view:1},top:{view:1},xy:{setter:function(e){var t=this,i=o.makeArray(e);return i.length&&(i[0]&&t.set("x",i[0]),i[1]&&t.set("y",i[1])),e},getter:function(){return[this.get("x"),this.get("y")]}},zIndex:{view:1},visible:{view:!0,value:!0}},r.prototype={move:function(e,t){var i=this;return BUI.isArray(e)&&(t=e[1],e=e[0]),i.set("xy",[e,t]),i},_uiSetX:function(e){if(null!=e){var t=this,i=t.get("el");t.setInternal("left",i.position().left),-999!=e&&this.set("cachePosition",null)}},_uiSetY:function(e){if(null!=e){var t=this,i=t.get("el");t.setInternal("top",i.position().top),-999!=e&&this.set("cachePosition",null)}},_uiSetLeft:function(e){var t=this,i=t.get("el");null!=e&&t.setInternal("x",i.offset().left)},_uiSetTop:function(e){var t=this,i=t.get("el");null!=e&&t.setInternal("y",i.offset().top)}},r.View=n,i.exports=r}),define("bui/common/component/uibase/selection",["jquery"],function(e,t,i){var n=e("jquery"),r=function(){};r.ATTRS={selectedEvent:{value:"click"},events:{value:{selectedchange:!1,beforeselectedchange:!1,itemselected:!1,itemunselected:!1}},idField:{value:"id"},multipleSelect:{value:!1}},r.prototype={clearSelection:function(){var e=this,t=e.getSelection();BUI.each(t,function(t){e.clearSelected(t)})},getSelection:function(){},getSelected:function(){return this.getSelection()[0]},getSelectedValue:function(){var e=this,t=e.get("idField"),i=e.getSelected();return e.getValueByField(i,t)},getSelectionValues:function(){var e=this,t=e.get("idField"),i=e.getSelection();return n.map(i,function(i){return e.getValueByField(i,t)})},getSelectionText:function(){var e=this,t=e.getSelection();return n.map(t,function(t){return e.getItemText(t)})},clearSelected:function(e){var t=this;e=e||t.getSelected(),e&&t.setItemSelected(e,!1)},getSelectedText:function(){var e=this,t=e.getSelected();return e.getItemText(t)},setSelection:function(e){var t=this;e=BUI.isArray(e)?e:[e],BUI.each(e,function(e){t.setSelected(e)})},setSelected:function(e){var t=this,i=t.get("multipleSelect");if(t.isItemSelectable(e)){if(!i){var n=t.getSelected();e!=n&&t.clearSelected(n)}t.setItemSelected(e,!0)}},isItemSelected:function(){},isItemSelectable:function(){return!0},setItemSelected:function(e,t){var i,n=this;e&&(i=n.isItemSelected(e),i==t)||n.fire("beforeselectedchange",{item:e,selected:t})!==!1&&n.setItemSelectedStatus(e,t)},setItemSelectedStatus:function(){},setAllSelection:function(){},setSelectedByField:function(e,t){t||(t=e,e=this.get("idField"));var i=this,n=i.findItemByField(e,t);i.setSelected(n)},setSelectionByField:function(e,t){t||(t=e,e=this.get("idField"));var i=this;BUI.each(t,function(t){i.setSelectedByField(e,t)})},afterSelected:function(e,t,i){var n=this;t?(n.fire("itemselected",{item:e,domTarget:i}),n.fire("selectedchange",{item:e,domTarget:i,selected:t})):(n.fire("itemunselected",{item:e,domTarget:i}),n.get("multipleSelect")&&n.fire("selectedchange",{item:e,domTarget:i,selected:t}))}},i.exports=r}),define("bui/common/component/uibase/stdmod",["jquery"],function(e,t,i){function n(){}function r(e,t){var i=e.get("contentEl"),n=e.get(t);n||(n=u('<div class="'+s+t+'"  ></div>'),n.appendTo(i),e.setInternal(t,n))}function o(e,t,i){t=e.get(t),BUI.isString(i)?t.html(i):t.html("").append(i)}function a(){}var u=e("jquery"),s=BUI.prefix+"stdmod-";n.ATTRS={header:{},body:{},footer:{},bodyStyle:{},footerStyle:{},headerStyle:{},headerContent:{},bodyContent:{},footerContent:{}},n.PARSER={header:function(e){return e.one("."+s+"header")},body:function(e){return e.one("."+s+"body")},footer:function(e){return e.one("."+s+"footer")}},n.prototype={__renderUI:function(){r(this,"header"),r(this,"body"),r(this,"footer")},_uiSetBodyStyle:function(e){this.get("body").css(e)},_uiSetHeaderStyle:function(e){this.get("header").css(e)},_uiSetFooterStyle:function(e){this.get("footer").css(e)},_uiSetBodyContent:function(e){o(this,"body",e)},_uiSetHeaderContent:function(e){o(this,"header",e)},_uiSetFooterContent:function(e){o(this,"footer",e)}},a.ATTRS={header:{view:1},body:{view:1},footer:{view:1},bodyStyle:{view:1},footerStyle:{view:1},headerStyle:{view:1},headerContent:{view:1},bodyContent:{view:1},footerContent:{view:1}},a.View=n,i.exports=a}),define("bui/common/component/uibase/decorate",["jquery","bui/common/array","bui/common/json","bui/common/component/manage","bui/common/util","bui/common/ua"],function(e,t,i){function n(e,t){if(t[e])return!0;var i=new RegExp("^"+h);return e!==v&&i.test(e)?!0:!1}function r(e){for(var t=[],i=e.constructor;i;)t.push(i),i=i.superclass&&i.superclass.constructor;return t}function o(e){return e.toLowerCase().replace(y,function(e,t){return(t+"").toUpperCase()})}function a(e){if(e=f.trim(e),"false"===e.toLowerCase())e=!1;else if("true"===e.toLowerCase())e=!0;else if(x.test(e))e=m.looseParse(e);else if(/\d/.test(e)&&/[^a-z]/i.test(e)){var t=parseFloat(e);t+""===e&&(e=t)}return e}function u(e,t){var i=e.userConfig||{};for(var n in t)n in i||e.setInternal(n,t[n])}function s(e,t){var i,n,r=this,o=r.userConfig||{};for(i in t)i in o||(n=t[i],BUI.isFunction(n)?r.setInternal(i,n.call(r,e)):"string"==typeof n?r.setInternal(i,e.find(n)):BUI.isArray(n)&&n[0]&&r.setInternal(i,e.find(n[0])))}function l(e,t){var i,n,o,a=e.constructor;for(o=r(e),i=o.length-1;i>=0;i--)a=o[i],(n=a[b])&&s.call(e,t,n)}function c(e){var t,i,n=e,r=n.get("srcNode");r&&(r=f(r),n.setInternal("el",r),n.setInternal("srcNode",r),t=n.get("userConfig"),i=n.getDecorateConfig(r),u(e,i),n.get("isDecorateChild")&&n.decorateInternal&&n.decorateInternal(r),l(e,r))}function d(){c(this)}var f=e("jquery"),m=(e("bui/common/array"),e("bui/common/json")),g=BUI.prefix,h="data-",v=h+"cfg",b="PARSER",p=e("bui/common/component/manage"),y=/-([a-z])/g,x=/^[\{\[]/;d.ATTRS={srcNode:{view:!0},isDecorateChild:{value:!1},decorateCfgFields:{value:{id:!0,name:!0,value:!0,title:!0}}},d.prototype={getDecorateConfig:function(e){if(!e.length)return null;var t=this,i=e[0],r=i.attributes,u=t.get("decorateCfgFields"),s={},l=t._getStautsCfg(e);return BUI.each(r,function(e){var t=e.nodeName;try{if(t===v){var i=a(e.nodeValue);BUI.mix(s,i)}else if(n(t,u)){var r=e.nodeValue;-1!==t.indexOf(h)&&(t=t.replace(h,""),t=o(t),r=a(r)),s[t]&&BUI.isObject(r)?BUI.mix(s[t],r):s[t]=r}}catch(l){BUI.log("parse field error,the attribute is:"+t)}}),BUI.mix(s,l)},_getStautsCfg:function(e){var t=this,i={},n=t.get("statusCls");return BUI.each(n,function(t,n){e.hasClass(t)&&(i[n]=!0)}),i},getDecorateElments:function(){var e=this,t=e.get("el"),i=e.get("childContainer");return i?t.find(i).children():t.children()},decorateInternal:function(e){var t=this;t.decorateChildren(e)},findXClassByNode:function(e,t){var i=this,n=e.attr("class")||"",r=i.get("defaultChildClass");n=n.replace(new RegExp("\\b"+g,"ig"),"");var o=p.getConstructorByXClass(n)||p.getConstructorByXClass(r);return o||t||(BUI.log(e),BUI.error("can not find ui "+n+" from this markup")),p.getXClassByConstructor(o)},decorateChildrenInternal:function(e,t){var i=this,n=i.get("children");n.push({xclass:e,srcNode:t})},decorateChildren:function(){var e=this,t=e.getDecorateElments();BUI.each(t,function(t){var i=e.findXClassByNode(f(t));e.decorateChildrenInternal(i,f(t))})}},i.exports=d}),define("bui/common/component/uibase/tpl",["jquery"],function(e,t,i){function n(){}function r(){}e("jquery");n.ATTRS={tpl:{},tplEl:{}},n.prototype={__renderUI:function(){var e,t=this,i=t.get("childContainer");i&&(e=t.get("el").find(i),e.length&&t.set("contentEl",e))},getTpl:function(e){var t=this,i=t.get("tpl"),n=t.get("tplRender");return e=e||t.getAttrVals(),n?n(e):i?BUI.substitute(i,e):""},setTplContent:function(e){var t=this,i=t.get("el"),n=t.get("content"),r=(t.get("tplEl"),t.getTpl(e));!n&&r&&(i.empty(),i.html(r))}},r.ATTRS={tpl:{view:!0,sync:!1},tplRender:{view:!0,value:null},childContainer:{view:!0}},r.prototype={__renderUI:function(){this.get("srcNode")||this.setTplContent()},updateContent:function(){this.setTplContent()},setTplContent:function(){var e=this,t=e.getAttrVals();e.get("view").setTplContent(t)},_uiSetTpl:function(){this.setTplContent()}},r.View=n,i.exports=r}),define("bui/common/component/uibase/childcfg",["jquery"],function(e,t,i){var n=e("jquery"),r=function(){this._init()};r.ATTRS={defaultChildCfg:{}},r.prototype={_init:function(){var e=this,t=e.get("defaultChildCfg");t&&e.on("beforeAddChild",function(e){var i=e.child;n.isPlainObject(i)&&BUI.each(t,function(e,t){null==i[t]&&(i[t]=e)})})}},i.exports=r}),define("bui/common/component/uibase/bindable",[],function(e,t,i){function n(){}n.ATTRS={store:{},loadMask:{value:!1}},BUI.augment(n,{__bindUI:function(){var e=this,t=e.get("store"),i=e.get("loadMask");t&&(t.on("beforeload",function(t){e.onBeforeLoad(t),i&&i.show&&i.show()}),t.on("load",function(t){e.onLoad(t),i&&i.hide&&i.hide()}),t.on("exception",function(t){e.onException(t),i&&i.hide&&i.hide()}),t.on("add",function(t){e.onAdd(t)}),t.on("remove",function(t){e.onRemove(t)}),t.on("update",function(t){e.onUpdate(t)}),t.on("localsort",function(t){e.onLocalSort(t)}),t.on("filtered",function(t){e.onFiltered(t)}))},__syncUI:function(){var e=this,t=e.get("store");t&&t.hasData()&&e.onLoad()},onBeforeLoad:function(){},onLoad:function(){},onException:function(){},onAdd:function(){},onRemove:function(){},onUpdate:function(){},onLocalSort:function(){},onFiltered:function(){}}),i.exports=n}),define("bui/common/component/uibase/depends",["jquery","bui/common/component/manage"],function(e,t,i){function n(e){var t=l.exec(e),i=t[1],n=t[2],r=a(i);return{source:r,eventType:n}}function r(e,t,i){var r,o=n(t),a=o.source,u=o.eventType;return a&&i&&u&&(BUI.isFunction(i)?r=i:BUI.isArray(i)&&(r=function(){BUI.each(i,function(t){e[t]&&e[t]()})})),r?(o.callbak=r,a.on(u,r),o):null}function o(e){var t=e.source,i=e.eventType,n=e.callbak;t.off(i,n)}function a(e){var t=c.getComponent(e);return t||(t=s("#"+e),t.length||(t=null)),t}function u(){}var s=e("jquery"),l=/^#(.*):(.*)$/,c=e("bui/common/component/manage");u.ATTRS={depends:{},dependencesMap:{shared:!1,value:{}}},u.prototype={__syncUI:function(){this.initDependences()},initDependences:function(){var e=this,t=e.get("depends");BUI.each(t,function(t,i){e.addDependence(i,t)})},addDependence:function(e,t){var i,n=this,o=n.get("dependencesMap");n.removeDependence(e),i=r(n,e,t),i&&(o[e]=i)},removeDependence:function(e){var t=this,i=t.get("dependencesMap"),n=i[e];n&&(o(n),delete i[e])},clearDependences:function(){var e=this,t=e.get("dependencesMap");BUI.each(t,function(e){o(e)}),e.set("dependencesMap",{})},__destructor:function(){this.clearDependences()}},i.exports=u}),define("bui/common/component/loader",["jquery","bui/common/util","bui/common/base","bui/common/observable","bui/common/array"],function(e,t,i){"use strict";var n=e("jquery"),r=e("bui/common/util"),o=e("bui/common/base"),a=function(e){a.superclass.constructor.call(this,e),this._init()};a.ATTRS={url:{},target:{},hasLoad:{value:!1},autoLoad:{},lazyLoad:{},property:{},renderer:{value:function(e){return e}},loadMask:{value:!1},dataType:{value:"text"},ajaxOptions:{value:{type:"get",cache:!1}},params:{},appendParams:{},lastParams:{shared:!1,value:{}},callback:{},failure:{}},r.extend(a,o),r.augment(a,{isLoader:!0,_init:function(){var e=this,t=e.get("autoLoad"),i=e.get("params");e._initMask(),t?e.load(i):(e._initParams(),e._initLazyLoad())},_initLazyLoad:function(){var e=this,t=e.get("target"),i=e.get("lazyLoad");t&&i&&i.event&&t.on(i.event,function(){(!e.get("hasLoad")||i.repeat)&&e.load()})},_initMask:function(){var t=this,i=t.get("target"),o=t.get("loadMask");i&&o&&e.async("bui/mask",function(e){var a=n.isPlainObject(o)?o:{};o=new e.LoadMask(r.mix({el:i.get("el")},a)),t.set("loadMask",o)})},_initParams:function(){var e=this,t=e.get("lastParams"),i=e.get("params");r.mix(t,i)},load:function(e){var t=this,i=t.get("url"),o=t.get("ajaxOptions"),a=t.get("lastParams"),u=t.get("appendParams");e=e||a,e=r.merge(u,e),t.set("lastParams",e),i&&(t.onBeforeLoad(),t.set("hasLoad",!0),n.ajax(r.mix({dataType:t.get("dataType"),data:e,url:i,success:function(i){t.onload(i,e)},error:function(i,n,r){t.onException({jqXHR:i,textStatus:n,errorThrown:r},e)}},o)))},onBeforeLoad:function(){var e=this,t=e.get("loadMask");t&&t.show&&t.show()},onload:function(e,t){var i=this,n=i.get("loadMask"),o=i.get("property"),a=i.get("callback"),u=i.get("renderer"),s=i.get("target");r.isString(e)&&s.set(o,""),s.set(o,u.call(i,e)),n&&n.hide&&n.hide(),a&&a.call(this,e,t)},onException:function(e,t){var i=this,n=i.get("failure");n&&n.call(this,e,t)}}),i.exports=a}),define("bui/data",["jquery","bui/common","bui/data/sortable","bui/data/proxy","bui/data/abstractstore","bui/data/store","bui/data/node","bui/data/treestore"],function(e,t,i){var n=e("bui/common"),r=n.namespace("Data");n.mix(r,{Sortable:e("bui/data/sortable"),Proxy:e("bui/data/proxy"),AbstractStore:e("bui/data/abstractstore"),Store:e("bui/data/store"),Node:e("bui/data/node"),TreeStore:e("bui/data/treestore")}),i.exports=r}),define("bui/data/sortable",[],function(e,t,i){var n="ASC",r=function(){};r.ATTRS={compareFunction:{value:function(e,t){return void 0===e&&(e=""),void 0===t&&(t=""),BUI.isString(e)?e.localeCompare(t):e>t?1:e===t?0:-1}},sortField:{},sortDirection:{value:"ASC"},sortInfo:{getter:function(){var e=this,t=e.get("sortField");return{field:t,direction:e.get("sortDirection")}},setter:function(e){var t=this;t.set("sortField",e.field),t.set("sortDirection",e.direction)}}},BUI.augment(r,{compare:function(e,t,i,r){var o,a=this;return i=i||a.get("sortField"),r=r||a.get("sortDirection"),i&&r?(o=r===n?1:-1,a.get("compareFunction")(e[i],t[i])*o):1},getSortData:function(){},sortData:function(e,t,i){var n=this,i=i||n.getSortData();return BUI.isArray(e)&&(i=e,e=null),e=e||n.get("sortField"),t=t||n.get("sortDirection"),n.set("sortField",e),n.set("sortDirection",t),e&&t?(i.sort(function(i,r){return n.compare(i,r,e,t)}),i):i}}),i.exports=r}),define("bui/data/proxy",["jquery","bui/data/sortable"],function(e,t,i){var n=e("jquery"),r=e("bui/data/sortable"),o=function(e){o.superclass.constructor.call(this,e)};o.ATTRS={},BUI.extend(o,BUI.Base),BUI.augment(o,{_read:function(){},read:function(e,t,i){var n=this;i=i||n,n._read(e,function(e){t.call(i,e)})},_save:function(){},save:function(e,t,i,n){var r=this;n=n||r,r._save(e,t,function(e){i.call(n,e)})}});var a={READ:"read",ADD:"add",UPDATE:"update",REMOVE:"remove",SAVE_ALL:"all"},u=function(e){u.superclass.constructor.call(this,e)};u.ATTRS=BUI.mix(!0,o.ATTRS,{limitParam:{value:"limit"},startParam:{value:"start"},pageIndexParam:{value:"pageIndex"},saveTypeParam:{value:"saveType"},saveDataParam:{},pageStart:{value:0},dataType:{value:"json"},method:{value:"GET"},ajaxOptions:{value:{}},cache:{value:!1},save:{},url:{}}),BUI.extend(u,o),BUI.augment(u,{_processParams:function(e){var t=this,i=t.get("pageStart"),n=["start","limit","pageIndex"];null!=e.pageIndex&&(e.pageIndex=e.pageIndex+i),BUI.each(n,function(i){var n=t.get(i+"Param");n!==i&&(e[n]=e[i],delete e[i])})},_getUrl:function(e){var t,i=this,n=i.get("save");return e===a.READ?i.get("url"):n?BUI.isString(n)?n:(t=n[e+"Url"],t||(t=i.get("url")),t):i.get("url")},_getAppendParams:function(e){var t,i,n=this,r=null;return e==a.READ?r:(t=n.get("save"),i=n.get("saveTypeParam"),t&&!t[e+"Url"]&&(r={},r[i]=e),r)},_read:function(e,t){var i,n=this;e=BUI.cloneObject(e),n._processParams(e),i=n._getAjaxOptions(a.READ,e),n._ajax(i,t)},_getAjaxOptions:function(e,t){var i,n=this,r=n.get("ajaxOptions"),o=n._getUrl(e);return BUI.mix(t,n._getAppendParams(e)),i=BUI.merge({url:o,type:n.get("method"),dataType:n.get("dataType"),data:t,cache:n.get("cache")},r)},_ajax:function(e,t){var i=e.success,r=e.error;e.success=function(e){i&&i(e),t(e)},e.error=function(e,i,n){r&&r(e,i,n);var o={exception:{status:i,errorThrown:n,jqXHR:e}};t(o)},n.ajax(e)},_save:function(e,t,i){var n,r=this;n=r._getAjaxOptions(e,t),r._ajax(n,i)}});var s=function(e){s.superclass.constructor.call(this,e)};s.ATTRS={matchFields:{value:[]}},BUI.extend(s,o),BUI.mixin(s,[r]),BUI.augment(s,{_read:function(e,t){var i=this,n=(e.pageable,e.start),r=e.sortField,o=e.sortDirection,a=e.limit,u=i.get("data"),s=[];u=i._getMatches(e),i.sortData(r,o),a?(s=u.slice(n,n+a),t({rows:s,results:u.length})):(s=u.slice(n),t(s))},_getMatchFn:function(e,t){return function(i){var n=!0;return BUI.each(t,function(t){return null!=e[t]&&e[t]!==i[t]?(n=!1,!1):void 0}),n}},_getMatches:function(e){var t,i=this,n=i.get("matchFields"),r=i.get("data")||[];return e&&n.length&&(t=i._getMatchFn(e,n),r=BUI.Array.filter(r,t)),r},_save:function(e,t){var i=this,n=i.get("data");e==a.ADD?n.push(t):e==a.REMOVE?BUI.Array.remove(n,t):e==a.SAVE_ALL&&(BUI.each(t.add,function(e){n.push(e)}),BUI.each(t.remove,function(e){BUI.Array.remove(n,e)}))}}),o.Ajax=u,o.Memery=s,i.exports=o}),define("bui/data/abstractstore",["jquery","bui/common","bui/data/proxy","bui/data/sortable"],function(e,t,i){function n(e){n.superclass.constructor.call(this,e),this._init()}var r=e("bui/common"),o=e("bui/data/proxy");n.ATTRS={autoLoad:{value:!1},remoteFilter:{value:!1},lastParams:{shared:!1,value:{}},params:{},proxy:{shared:!1,value:{}},url:{},events:{value:["acceptchanges","load","beforeload","beforeprocessload","add","exception","remove","update","localsort","filtered"]},data:{setter:function(e){var t=this,i=t.get("proxy");i.set?i.set("data",e):i.data=e,t.set("autoLoad",!0)}}},r.extend(n,r.Base),r.augment(n,{isStore:!0,_init:function(){var e=this;e.beforeInit(),e._initParams(),e._initProxy(),e._initData()},beforeInit:function(){},_initData:function(){var e=this,t=e.get("autoLoad");t&&e.load()},_initParams:function(){var e=this,t=e.get("lastParams"),i=e.get("params");r.mix(t,i)},_initProxy:function(){var e=this,t=e.get("url"),i=e.get("proxy");i instanceof o||(t&&(i.url=t),i="ajax"===i.type||i.url?new o.Ajax(i):new o.Memery(i),e.set("proxy",i))},load:function(e,t){var i=this,n=i.get("proxy"),o=i.get("lastParams");r.mix(o,i.getAppendParams(),e),i.fire("beforeload",{params:o}),e=r.cloneObject(o),n.read(o,function(n){i.onLoad(n,e),t&&t(n,e)},i)},onFiltered:function(e,t){var i=this;i.fire("filtered",{data:e,filter:t})},onLoad:function(e,t){var i=this,n=i.processLoad(e,t);n&&i.afterProcessLoad(e,t)},getResult:function(){},filter:function(e){var t,i=this,n=i.get("remoteFilter");e=e||i.get("filter"),n?i.load({filter:e}):e&&(i.set("filter",e),i.getResult().length>0&&(t=i._filterLocal(e),i.onFiltered(t,e)))},_filterLocal:function(){},getFilterResult:function(){var e=this.get("filter");return e?this._filterLocal(e):this.getResult()},_clearLocalFilter:function(){this.set("filter",null)},clearFilter:function(){var e,t=this,i=t.get("remoteFilter");i?t.load({filter:""}):(t._clearLocalFilter(),e=t.getFilterResult(),t.onFiltered(e,null))},processLoad:function(e){var t=this,i=t.get("hasErrorProperty");return t.fire("beforeprocessload",{data:e}),t.fire("beforeProcessLoad",e),e[i]||e.exception?(t.onException(e),!1):!0},afterProcessLoad:function(){},onException:function(e){var t=this,i=t.get("errorProperty"),n={};e.exception?(n.type="exception",n[i]=e.exception):(n.type="error",n[i]=e[i]),t.fire("exception",n)},hasData:function(){},getAppendParams:function(){return{}}}),i.exports=n}),define("bui/data/store",["jquery","bui/data/proxy","bui/data/abstractstore","bui/data/sortable","bui/common"],function(e,t,i){function n(e,t){if(!(0>e)){var i=t,n=i[e];return i.splice(e,1),n}}function r(e,t){var i=BUI.Array.indexOf(e,t);i>=0&&n(i,t)}function o(e,t){return-1!==BUI.Array.indexOf(e,t)}var a=e("jquery"),u=e("bui/data/proxy"),s=e("bui/data/abstractstore"),l=e("bui/data/sortable"),c=function(e){c.superclass.constructor.call(this,e)};c.ATTRS={autoSync:{value:!1},currentPage:{value:0},deletedRecords:{shared:!1,value:[]},errorProperty:{value:"error"},hasErrorProperty:{value:"hasError"},matchFunction:{value:function(e,t){return e==t}},modifiedRecords:{shared:!1,value:[]},newRecords:{shared:!1,value:[]},remoteSort:{value:!1},resultMap:{shared:!1,value:{}},root:{value:"rows"},rowCount:{value:0},totalProperty:{value:"results"},start:{value:0},pageSize:{}},BUI.extend(c,s),BUI.mixin(c,[l]),BUI.augment(c,{add:function(e,t,i){var n=this,r=n.getCount();n.addAt(e,r,t,i)},addAt:function(e,t,i,n){var o=this;n=n||o._getDefaultMatch(),BUI.isArray(e)||(e=[e]),a.each(e,function(e,a){i&&o.contains(a,n)||(o._addRecord(a,e+t),o.get("newRecords").push(a),r(a,o.get("deletedRecords")),r(a,o.get("modifiedRecords")))})},contains:function(e,t){return-1!==this.findIndexBy(e,t)},find:function(e,t){var i=this,n=null,r=i.getResult();return a.each(r,function(i,r){return r[e]===t?(n=r,!1):void 0}),n},findAll:function(e,t){var i=this,n=[],r=i.getResult();return a.each(r,function(i,r){r[e]===t&&n.push(r)}),n},findByIndex:function(e){return this.getResult()[e]},findIndexBy:function(e,t){var i=this,n=-1,r=i.getResult();return t=t||i._getDefaultMatch(),null===e||void 0===e?-1:(a.each(r,function(i,r){return t(e,r)?(n=i,!1):void 0}),n)},findNextRecord:function(e){var t=this,i=t.findIndexBy(e);return i>=0?t.findByIndex(i+1):void 0},getCount:function(){return this.getResult().length},getTotalCount:function(){var e=this,t=e.get("resultMap"),i=e.get("totalProperty");return parseInt(t[i],10)||0},getResult:function(){var e=this,t=e.get("resultMap"),i=e.get("root");return t[i]},hasData:function(){return 0!==this.getCount()},setResult:function(e){var t=this,i=t.get("proxy");i instanceof u.Memery?(t.set("data",e),t.load({start:0})):(t._setResult(e),t.get("filter")&&t.filter())},remove:function(e,t){var i=this;t=t||i._getDefaultMatch(),BUI.isArray(e)||(e=[e]),a.each(e,function(e,a){var e=i.findIndexBy(a,t),u=n(e,i.getResult());o(u,i.get("newRecords"))||o(u,i.get("deletedRecords"))||i.get("deletedRecords").push(u),r(u,i.get("newRecords")),r(u,i.get("modifiedRecords")),i.fire("remove",{record:u})})},save:function(e,t,i){var n=this,r=n.get("proxy");BUI.isFunction(e)&&(i=e,e=void 0),BUI.isObject(e)&&(i=t,t=e,e=void 0),e||(e=n._getSaveType(t)),"all"!=e||t||(t=n._getDirtyData()),n.fire("beforesave",{type:e,saveData:t}),r.save(e,t,function(r){n.onSave(e,t,r),i&&i(r,t)},n)},_getSaveType:function(e){var t=this;return e?BUI.Array.contains(e,t.get("newRecords"))?"add":BUI.Array.contains(e,t.get("modifiedRecords"))?"update":BUI.Array.contains(e,t.get("deletedRecords"))?"remove":"custom":"all"},_getDirtyData:function(){var e=this,t=e.get("proxy");return t.get("url")?{add:BUI.JSON.stringify(e.get("newRecords")),update:BUI.JSON.stringify(e.get("modifiedRecords")),remove:BUI.JSON.stringify(e.get("deletedRecords"))}:{add:e.get("newRecords"),update:e.get("modifiedRecords"),remove:e.get("deletedRecords")}},onSave:function(e,t,i){var n=this,r=n.get("hasErrorProperty");return i[r]||i.exception?void n.onException(i):(n._clearDirty(e,t),n.fire("saved",{type:e,saveData:t,data:i}),void(n.get("autoSync")&&n.load()))},_clearDirty:function(e,t){function i(e,t){BUI.Array.remove(n.get(t),e)}var n=this;switch(e){case"all":n._clearChanges();break;case"add":i(t,"newRecords");break;case"update":i(t,"modifiedRecords");break;case"remove":i(t,"deletedRecords")}},sort:function(e,t){var i=this,n=i.get("remoteSort");n?(i.set("sortField",e),i.set("sortDirection",t),i.load(i.get("sortInfo"))):i._localSort(e,t)},sum:function(e,t){var i=this,n=t||i.getResult(),r=0;return BUI.each(n,function(t){var i=t[e];isNaN(i)||(r+=parseFloat(i))}),r},setValue:function(e,t,i){var n=e,r=this;n[t]=i,o(n,r.get("newRecords"))||o(n,r.get("modifiedRecords"))||r.get("modifiedRecords").push(n),r.fire("update",{record:n,field:t,value:i})},update:function(e,t,i){var n=e,r=this,i=null,a=null;t&&(i=i||r._getDefaultMatch(),a=r.findIndexBy(e,i),a>=0&&(n=r.getResult()[a])),n=BUI.mix(n,e),o(n,r.get("newRecords"))||o(n,r.get("modifiedRecords"))||r.get("modifiedRecords").push(n),r.fire("update",{record:n})},_addRecord:function(e,t){var i=this.getResult();void 0==t&&(t=i.length),i.splice(t,0,e),this.fire("add",{record:e,index:t})},_clearChanges:function(){var e=this;BUI.Array.empty(e.get("newRecords")),BUI.Array.empty(e.get("modifiedRecords")),BUI.Array.empty(e.get("deletedRecords"))},_filterLocal:function(e,t){var i=this,n=[];return t=t||i.getResult(),e?(BUI.each(t,function(t){e(t)&&n.push(t)}),n):t},_getDefaultMatch:function(){return this.get("matchFunction")},_getPageParams:function(){var e=this,t=e.get("sortInfo"),i=e.get("start"),n=e.get("pageSize"),r=e.get("pageIndex")||(n?i/n:0);return params={start:i,limit:n,pageIndex:r},e.get("remoteSort")&&BUI.mix(params,t),params},getAppendParams:function(){return this._getPageParams()},beforeInit:function(){this._setResult([])},_localSort:function(e,t){var i=this;i._sortData(e,t),i.fire("localsort",{field:e,direction:t})},_sortData:function(e,t,i){var n=this;i=i||n.getResult(),n.sortData(e,t,i)},afterProcessLoad:function(e,t){var i=this,n=i.get("root"),r=t.start,o=t.limit,a=i.get("totalProperty");BUI.isArray(e)?i._setResult(e):i._setResult(e[n],e[a]),i.set("start",r),o&&i.set("pageIndex",r/o),i.get("remoteSort")||i._sortData(),i.fire("load",{params:t}),!i.get("remoteFilter")&&i.get("filter")&&i.filter(i.get("filter"))},_setResult:function(e,t){var i=this,n=i.get("resultMap");
t=t||e.length,n[i.get("root")]=e,n[i.get("totalProperty")]=t,i._clearChanges()}}),i.exports=c}),define("bui/data/node",["jquery","bui/common"],function(e,t,i){function n(e,t){var i={};return t?(o.each(e,function(e,n){var r=t[n]||n;i[r]=e}),i.record=e):i=e,i}function r(e,t){e=n(e,t),o.mix(this,e)}var o=e("bui/common");o.augment(r,{root:!1,leaf:null,text:"",id:null,loaded:!1,path:null,parent:null,level:0,record:null,children:null,isNode:!0}),i.exports=r}),define("bui/data/treestore",["jquery","bui/common","bui/data/node","bui/data/proxy","bui/data/abstractstore","bui/data/sortable"],function(e,t,i){function n(e){n.superclass.constructor.call(this,e)}var r=e("bui/common"),o=e("bui/data/node"),a=e("bui/data/proxy"),u=e("bui/data/abstractstore");n.ATTRS={root:{},map:{},pidField:{},dataProperty:{value:"nodes"},events:{value:["add","update","remove","load"]}},r.extend(n,u),r.augment(n,{beforeInit:function(){this.initRoot()},_initData:function(){var e=this,t=e.get("autoLoad"),i=e.get("pidField"),n=e.get("proxy"),r=e.get("root");!n.get("url")&&i&&n.get("matchFields").push(i),t&&!r.children&&e.loadNode(r)},initRoot:function(){var e=this,t=e.get("map"),i=e.get("root");i||(i={}),i.isNode||(i=new o(i,t)),i.path=[i.id],i.level=0,i.children&&e.setChildren(i,i.children),e.set("root",i)},add:function(e,t,i){var n=this;return e=n._add(e,t,i),n.fire("add",{node:e,record:e,index:i}),e},_add:function(e,t,i){t=t||this.get("root");var n,a=this,u=a.get("map"),s=t.children;return e.isNode||(e=new o(e,u)),n=e.children||[],0==n.length&&null==e.leaf&&(e.leaf=!0),t&&(t.leaf=!1),e.parent=t,e.level=t.level+1,e.path=t.path.concat(e.id),i=null==i?t.children.length:i,r.Array.addAt(s,e,i),a.setChildren(e,n),e},remove:function(e){var t=e.parent||_self.get("root"),i=r.Array.indexOf(e,t.children);return r.Array.remove(t.children,e),0===t.children.length&&(t.leaf=!0),this.fire("remove",{node:e,record:e,index:i}),e.parent=null,e},setValue:function(e,t,i){var n=this;e[t]=i,n.fire("update",{node:e,record:e,field:t,value:i})},update:function(e){this.fire("update",{node:e,record:e})},getResult:function(){return this.get("root").children},setResult:function(e){var t=this,i=t.get("proxy"),n=t.get("root");i instanceof a.Memery?(t.set("data",e),t.load({id:n.id})):t.setChildren(n,e)},setChildren:function(e,t){var i=this;e.children=[],t.length&&r.each(t,function(t){i._add(t,e)})},findNode:function(e,t,i){return this.findNodeBy(function(t){return t.id===e},t,i)},findNodeBy:function(e,t,i){var n=this;if(i=null==i?!0:i,!t){var o=n.get("root");return e(o)?o:n.findNodeBy(e,o)}var a=t.children,u=null;return r.each(a,function(t){return e(t)?u=t:i&&(u=n.findNodeBy(e,t)),u?!1:void 0}),u},findNodesBy:function(e,t){var i=this,n=[];return t||(t=i.get("root")),r.each(t.children,function(t){e(t)&&n.push(t),n=n.concat(i.findNodesBy(e,t))}),n},findNodeByPath:function(e){if(!e)return null;var t,i,n=this,r=n.get("root"),o=e.split(","),a=o[0];if(!a)return null;if(t=r.id==a?r:n.findNode(a,r,!1)){for(i=1;i<o.length;i+=1){var a=o[i];if(t=n.findNode(a,t,!1),!t)break}return t}},contains:function(e,t){var i=this,n=i.findNode(e.id,t);return!!n},afterProcessLoad:function(e,t){var i=this,n=i.get("pidField"),o=t.id||t[n],a=i.get("dataProperty"),u=i.findNode(o)||i.get("root");r.isArray(e)?i.setChildren(u,e):i.setChildren(u,e[a]),u.loaded=!0,i.fire("load",{node:u,params:t})},hasData:function(){return this.get("root").children&&0!==this.get("root").children.length},isLoaded:function(e){var t=this.get("root");return e!=t||t.children?this.get("url")||this.get("pidField")?e.loaded||e.leaf||!(!e.children||!e.children.length):!0:!1},loadNode:function(e,t){var i,n=this,r=n.get("pidField");(t||!n.isLoaded(e))&&(i={id:e.id},r&&(i[r]=e.id),n.load(i))},reloadNode:function(e){var t=this;e=e||t.get("root"),e.loaded=!1,t.loadNode(e,!0)},loadPath:function(e){var t=this,i=e.split(","),n=i[0];t.findNodeByPath(e)||t.load({id:n,path:e})}}),i.exports=n}),define("bui/list",["jquery","bui/common","bui/list/list","bui/list/listitem","bui/list/simplelist","bui/list/listbox","bui/list/domlist","bui/list/keynav","bui/list/sortable","bui/data"],function(e,t,i){var n=e("bui/common"),r=n.namespace("List");n.mix(r,{List:e("bui/list/list"),ListItem:e("bui/list/listitem"),SimpleList:e("bui/list/simplelist"),Listbox:e("bui/list/listbox")}),n.mix(r,{ListItemView:r.ListItem.View,SimpleListView:r.SimpleList.View}),i.exports=r}),define("bui/list/list",["jquery","bui/common"],function(e,t,i){var n=(e("jquery"),e("bui/common")),r=n.Component,o=r.UIBase,a=r.Controller.extend([o.ChildList],{},{ATTRS:{elTagName:{view:!0,value:"ul"},idField:{value:"id"},defaultChildClass:{value:"list-item"}}},{xclass:"list"});i.exports=a}),define("bui/list/listitem",["jquery","bui/common"],function(e,t,i){var n=(e("jquery"),e("bui/common")),r=n.Component,o=r.UIBase,a=r.View.extend([o.ListItemView],{}),u=r.Controller.extend([o.ListItem],{},{ATTRS:{elTagName:{view:!0,value:"li"},xview:{value:a},tpl:{view:!0,value:"<span>{text}</span>"}}},{xclass:"list-item"});u.View=a,i.exports=u}),define("bui/list/simplelist",["jquery","bui/common","bui/list/domlist","bui/list/keynav","bui/list/sortable","bui/data"],function(e,t,i){var n=e("jquery"),r=e("bui/common"),o=r.Component.UIBase,a=r.UA,u=e("bui/list/domlist"),s=e("bui/list/keynav"),l=e("bui/list/sortable"),c=r.prefix+"list-item",d=r.Component.View.extend([u.View],{setElementHover:function(e,t){var i=this;i.setItemStatusCls("hover",e,t)}},{ATTRS:{itemContainer:{valueFn:function(){return this.get("el").find(this.get("listSelector"))}}}},{xclass:"simple-list-view"}),f=r.Component.Controller.extend([u,o.Bindable,s,l],{bindUI:function(){var e=this,t=e.get("itemCls"),i=e.get("view").getItemContainer();i.delegate("."+t,"mouseover",function(t){if(!e.get("disabled")){var i=t.currentTarget,n=e.getItemByElement(i);e.isItemDisabled(t.item,t.currentTarget)||(a.ie&&a.ie<8||!e.get("focusable")||"hover"!==e.get("highlightedStatus")?e.setItemStatus(n,"hover",!0,i):e.setHighlighted(n,i))}}).delegate("."+t,"mouseout",function(t){if(!e.get("disabled")){var i=n(t.currentTarget);e.get("view").setElementHover(i,!1)}})},onAdd:function(e){var t=this,i=t.get("store"),n=e.record;0==t.getCount()?t.setItems(i.getResult()):t.addItemToView(n,e.index)},onRemove:function(e){var t=this,i=e.record;t.removeItem(i)},onUpdate:function(e){this.updateItem(e.record)},onLocalSort:function(e){this.get("frontSortable")?this.sort(e.field,e.direction):this.onLoad(e)},onLoad:function(){var e=this,t=e.get("store"),i=t.getResult();e.set("items",i)},onFiltered:function(e){var t=this,i=e.data;t.set("items",i)}},{ATTRS:{frontSortable:{value:!1},focusable:{value:!1},items:{view:!0,value:[]},itemCls:{view:!0,value:c},idField:{value:"value"},listSelector:{view:!0,value:"ul"},itemTpl:{view:!0,value:'<li role="option" class="'+c+'">{text}</li>'},tpl:{value:"<ul></ul>"},xview:{value:d}}},{xclass:"simple-list",prority:0});f.View=d,i.exports=f}),define("bui/list/listbox",["jquery","bui/list/simplelist","bui/common","bui/list/domlist","bui/list/keynav","bui/list/sortable","bui/data"],function(e,t,i){var n=e("jquery"),r=e("bui/list/simplelist"),o=r.extend({bindUI:function(){var e=this;e.on("selectedchange",function(e){var t=e.item,i=n(e.domTarget),r=i.find("input");t&&r.attr("checked",e.selected)})}},{ATTRS:{itemTpl:{value:'<li><span class="x-checkbox"></span>{text}</li>'},multipleSelect:{value:!0}}},{xclass:"listbox"});i.exports=o}),define("bui/list/domlist",["jquery","bui/common"],function(e,t,i){"use strict";function n(e,t){var i=t,n=i.get("itemCls"),r=i.get("itemStatusCls");return r&&r[e]?r[e]:n+"-"+e}function r(e,t){var i=e.attributes,r=t.get("itemStatusFields"),u={};return a.each(i,function(e){var t=e.nodeName;-1!==t.indexOf(s)&&(t=t.replace(s,""),u[t]=e.nodeValue)}),u.text=o(e).text(),a.each(r,function(i,r){var a=n(r,t);o(e).hasClass(a)&&(u[i]=!0)}),u}var o=e("jquery"),a=e("bui/common"),u=a.Component.UIBase.Selection,s="data-",l=a.Component.UIBase.List,c=function(){};c.ATTRS={items:{}},c.prototype={clearControl:function(){var e=this,t=e.getItemContainer(),i=e.get("itemCls");t.find("."+i).remove()},addItem:function(e,t){return this._createItem(e,t)},getItems:function(){var e=this,t=e.getAllElements(),i=[];return a.each(t,function(t){i.push(e.getItemByElement(t))}),i},updateItem:function(e){var t,i=this,n=i.getItems(),r=a.Array.indexOf(e,n),u=null;return r>=0&&(u=i.findElement(e),t=i.getItemTpl(e,r),u&&o(u).html(o(t).html())),u},removeItem:function(e,t){t=t||this.findElement(e),o(t).remove()},getItemContainer:function(){var e=this.get("itemContainer");return e.length?e:this.get("el")},getItemTpl:function(e,t){var i=this,n=i.get("itemTplRender"),r=i.get("itemTpl");return n?n(e,t):a.substitute(r,e)},_createItem:function(e,t){var i=this,n=i.getItemContainer(),r=i.get("itemCls"),a=i.get("dataField"),u=i.getItemTpl(e,t),s=o(u);if(void 0!==t){var l=n.find("."+r)[t];l?s.insertBefore(l):s.appendTo(n)}else s.appendTo(n);return s.addClass(r),s.data(a,e),s},getItemStatusCls:function(e){return n(e,this)},setItemStatusCls:function(e,t,i){var n=this,r=n.getItemStatusCls(e),a=i?"addClass":"removeClass";t&&o(t)[a](r)},hasStatus:function(e,t){var i=this,n=i.getItemStatusCls(e);return o(t).hasClass(n)},setItemSelected:function(e,t,i){var n=this;i=i||n.findElement(e),n.setItemStatusCls("selected",i,t)},getAllElements:function(){var e=this,t=e.get("itemCls"),i=e.get("el");return i.find("."+t)},getItemByElement:function(e){var t=this,i=t.get("dataField");return o(e).data(i)},getFirstElementByStatus:function(e){var t=this,i=t.getItemStatusCls(e),n=t.get("el");return n.find("."+i)[0]},getElementsByStatus:function(e){var t=this,i=t.getItemStatusCls(e),n=t.get("el");return n.find("."+i)},getSelectedElements:function(){var e=this,t=e.getItemStatusCls("selected"),i=e.get("el");return i.find("."+t)},findElement:function(e){var t=this,i=t.getAllElements(),n=null;return a.each(i,function(i){return t.getItemByElement(i)==e?(n=i,!1):void 0}),n},isElementSelected:function(e){var t=this,i=t.getItemStatusCls("selected");return e&&o(e).hasClass(i)}};var d=function(){};d.ATTRS=a.merge(!0,l.ATTRS,u.ATTRS,{dataField:{view:!0,value:"data-item"},itemContainer:{view:!0},itemStatusFields:{value:{}},itemCls:{view:!0},cancelSelected:{value:!1},textGetter:{},defaultLoaderCfg:{value:{property:"items",dataType:"json"}},events:{value:{itemrendered:!0,itemremoved:!0,itemupdated:!0,itemsshow:!1,beforeitemsshow:!1,itemsclear:!1,itemdblclick:!1,beforeitemsclear:!1}}}),d.PARSER={items:function(e){var t=this,i=[],n=t.get("itemCls"),u=t.get("dataField"),s=e.find("."+n);return s.length||(s=e.children(),s.addClass(n)),a.each(s,function(e){var n=r(e,t);i.push(n),o(e).data(u,n)}),i}},a.augment(d,l,u,{_uiSetItems:function(e){var t=this;(!t.get("srcNode")||t.get("rendered"))&&this.setItems(e)},__bindUI:function(){function e(e,i){var n,r=t.get("multipleSelect");n=t.isItemSelected(e,i),n?r?t.setItemSelected(e,!1,i):t.get("cancelSelected")&&t.setSelected(null):(r||t.clearSelected(),t.setItemSelected(e,!0,i))}var t=this,i=t.get("selectedEvent"),n=t.get("itemCls"),r=t.get("view").getItemContainer();r.delegate("."+n,"click",function(n){if(!t.get("disabled")){var r=o(n.currentTarget),a=t.getItemByElement(r);if(!t.isItemDisabled(a,r)){var u=t.fire("itemclick",{item:a,element:r[0],domTarget:n.target,domEvent:n});u!==!1&&"click"==i&&t.isItemSelectable(a)&&e(a,r)}}}),"click"!==i&&r.delegate("."+n,i,function(i){if(!t.get("disabled")){var n=o(i.currentTarget),r=t.getItemByElement(n);t.isItemDisabled(r,n)||t.isItemSelectable(r)&&e(r,n)}}),r.delegate("."+n,"dblclick",function(e){if(!t.get("disabled")){var i=o(e.currentTarget),n=t.getItemByElement(i);t.isItemDisabled(n,i)||t.fire("itemdblclick",{item:n,element:i[0],domTarget:e.target})}}),t.on("itemrendered itemupdated",function(e){var i=e.item,n=e.element;t._syncItemStatus(i,n)})},getValueByField:function(e,t){return e&&e[t]},_syncItemStatus:function(e,t){var i=this,n=i.get("itemStatusFields");a.each(n,function(n,r){null!=e[n]&&i.get("view").setItemStatusCls(r,t,e[n])})},getStatusValue:function(e,t){var i=this,n=i.get("itemStatusFields"),r=n[t];return e[r]},getCount:function(){var e=this.getItems();return e?e.length:0},getStatusField:function(e){var t=this,i=t.get("itemStatusFields");return i[e]},setStatusValue:function(e,t,i){var n=this,r=n.get("itemStatusFields"),o=r[t];o&&(e[o]=i)},getItemText:function(e){var t=this,i=t.get("textGetter");return e?i?i(e):o(t.findElement(e)).text():""},removeItem:function(e){var t,i=this,n=i.get("items"),r=i.findElement(e);t=a.Array.indexOf(e,n),-1!==t&&n.splice(t,1),i.get("view").removeItem(e,r),i.fire("itemremoved",{item:e,domTarget:o(r)[0],element:r})},addItemAt:function(e,t){var i=this,n=i.get("items");return void 0===t&&(t=n.length),n.splice(t,0,e),i.addItemToView(e,t),e},addItemToView:function(e,t){var i=this,n=i.get("view").addItem(e,t);return i.fire("itemrendered",{item:e,domTarget:o(n)[0],element:n}),n},updateItem:function(e){var t=this,i=t.get("view").updateItem(e);t.fire("itemupdated",{item:e,domTarget:o(i)[0],element:i})},setItems:function(e){var t=this;e!=t.getItems()&&t.setInternal("items",e),t.clearControl(),t.fire("beforeitemsshow"),a.each(e,function(e,i){t.addItemToView(e,i)}),t.fire("itemsshow")},getItems:function(){return this.get("items")},getItemByElement:function(e){return this.get("view").getItemByElement(e)},getSelected:function(){var e=this,t=e.get("view").getFirstElementByStatus("selected");return e.getItemByElement(t)||null},getItemsByStatus:function(e){var t=this,i=t.get("view").getElementsByStatus(e),n=[];return a.each(i,function(e){n.push(t.getItemByElement(e))}),n},findElement:function(e){var t=this;return a.isString(e)&&(e=t.getItem(e)),this.get("view").findElement(e)},findItemByField:function(e,t){var i=this,n=i.get("items"),r=null;return a.each(n,function(i){return null!=i[e]&&i[e]==t?(r=i,!1):void 0}),r},setItemSelectedStatus:function(e,t,i){var n=this;i=i||n.findElement(e),n.setItemStatus(e,"selected",t,i)},setAllSelection:function(){var e=this,t=e.getItems();e.setSelection(t)},isItemSelected:function(e,t){var i=this;return t=t||i.findElement(e),i.get("view").isElementSelected(t)},isItemDisabled:function(e,t){return this.hasStatus(e,"disabled",t)},setItemDisabled:function(e,t){var i=this;i.setItemStatus(e,"disabled",t)},getSelection:function(){var e=this,t=e.get("view").getSelectedElements(),i=[];return a.each(t,function(t){i.push(e.getItemByElement(t))}),i},clearControl:function(){this.fire("beforeitemsclear"),this.get("view").clearControl(),this.fire("itemsclear")},hasStatus:function(e,t,i){if(!e)return!1;{var n=this;n.getStatusField(t)}return i=i||n.findElement(e),n.get("view").hasStatus(t,i)},setItemStatus:function(e,t,i,n){var r=this;e&&(n=n||r.findElement(e)),r.isItemDisabled(e,n)&&"disabled"!==t||(e&&("disabled"===t&&i&&r.clearItemStatus(e),r.setStatusValue(e,t,i),r.get("view").setItemStatusCls(t,n,i),r.fire("itemstatuschange",{item:e,status:t,value:i,element:n})),"selected"===t&&r.afterSelected(e,i,n))},clearItemStatus:function(e,t,i){var n=this,r=n.get("itemStatusFields");i=i||n.findElement(e),t?n.setItemStatus(e,t,!1,i):(a.each(r,function(t,r){n.setItemStatus(e,r,!1,i)}),r.selected||n.setItemSelected(e,!1),n.setItemStatus(e,"hover",!1))}}),d.View=c,i.exports=d}),define("bui/list/keynav",["jquery","bui/common"],function(e,t,i){"use strict";var n=e("jquery"),r=e("bui/common"),o=function(){};o.ATTRS={highlightedStatus:{value:"hover"}},r.augment(o,{setHighlighted:function(e,t){if(!this.hasStatus(e,"hover",t)){var i=this,n=i.get("highlightedStatus"),r=i._getHighLightedElement(),o=r?i.getItemByElement(r):null;o!==e&&(o&&this.setItemStatus(o,n,!1,r),this.setItemStatus(e,n,!0,t),i._scrollToItem(e,t))}},_getHighLightedElement:function(){var e=this,t=e.get("highlightedStatus"),i=e.get("view").getFirstElementByStatus(t);return i},getHighlighted:function(){var e=this,t=e.get("highlightedStatus"),i=e.get("view").getFirstElementByStatus(t);return e.getItemByElement(i)||null},getColumnCount:function(){var e=this,t=e.getFirstItem(),i=e.findElement(t),r=n(i);return i?parseInt(r.parent().width()/r.outerWidth(),10):1},getRowCount:function(e){var t=this;return e=e||t.getColumnCount(),(this.getCount()+e-1)/e},_getNextItem:function(e,t,i){var n,r=this,o=r._getCurrentIndex(),a=r.getCount(),u=e?1:-1;return-1===o?e?r.getFirstItem():r.getLastItem():(e||(t*=u),n=(o+t+i)%i,n>a-1&&(e?n-=a-1:n+=t),r.getItemAt(n))},_getLeftItem:function(){var e=this,t=e.getCount(),i=e.getColumnCount();return!t||1>=i?null:e._getNextItem(!1,1,t)},_getCurrentItem:function(){return this.getHighlighted()},_getCurrentIndex:function(){var e=this,t=e._getCurrentItem();return this.indexOfItem(t)},_getRightItem:function(){var e=this,t=e.getCount(),i=e.getColumnCount();return!t||1>=i?null:this._getNextItem(!0,1,t)},_getDownItem:function(){var e=this,t=e.getColumnCount(),i=e.getRowCount(t);return 1>=i?null:this._getNextItem(!0,t,t*i)},getScrollContainer:function(){return this.get("el")},isScrollVertical:function(){var e=this,t=e.get("el"),i=e.get("view").getItemContainer();return t.height()<i.height()},_scrollToItem:function(e,t){var i=this;if(i.isScrollVertical()){t=t||i.findElement(e);var r=i.getScrollContainer(),o=n(t).position().top,a=r.position().top,u=r.height(),s=o-a,l=n(t).height(),c=r.scrollTop();(0>s||s>u-l)&&r.scrollTop(c+s)}},_getUpperItem:function(){var e=this,t=e.getColumnCount(),i=e.getRowCount(t);return 1>=i?null:this._getNextItem(!1,t,t*i)},handleNavUp:function(){var e=this,t=e._getUpperItem();e.setHighlighted(t)},handleNavDown:function(){this.setHighlighted(this._getDownItem())},handleNavLeft:function(){this.setHighlighted(this._getLeftItem())},handleNavRight:function(){this.setHighlighted(this._getRightItem())},handleNavEnter:function(){var e,t=this,i=t._getCurrentItem();i&&(e=t.findElement(i),n(e).trigger("click"))},handleNavEsc:function(){this.setHighlighted(null)},handleNavTab:function(){this.setHighlighted(this._getRightItem())}}),i.exports=o}),define("bui/list/sortable",["jquery","bui/common","bui/data"],function(e,t,i){var n=e("jquery"),r=e("bui/common"),o=e("bui/data").Sortable,a=function(){};a.ATTRS=r.merge(!0,o.ATTRS,{}),r.augment(a,o,{compare:function(e,t,i,r){var o,a=this;return i=i||a.get("sortField"),r=r||a.get("sortDirection"),i&&r?(o="ASC"===r?1:-1,n.isPlainObject(e)||(e=a.getItemByElement(e)),n.isPlainObject(t)||(t=a.getItemByElement(t)),a.get("compareFunction")(e[i],t[i])*o):1},getSortData:function(){return n.makeArray(this.get("view").getAllElements())},sort:function(e,t){var i=this,o=i.sortData(e,t),a=i.get("view").getItemContainer();i.get("store")||i.sortData(e,t,i.get("items")),r.each(o,function(e){n(e).appendTo(a)})}}),i.exports=a}),define("bui/mask",["jquery","bui/common","bui/mask/mask","bui/mask/loadmask"],function(e,t,i){var n=(e("bui/common"),e("bui/mask/mask"));n.LoadMask=e("bui/mask/loadmask"),i.exports=n}),define("bui/mask/mask",["jquery","bui/common"],function(e,t,i){var n=e("jquery"),r=e("bui/common"),o=r.namespace("Mask"),a=r.UA,u=r.prefix+"ext-mask",s=u+"-msg";r.mix(o,{maskElement:function(e,t,i){var o=n(e),l=o.children("."+u),c=null,d=null,f=null,m=null;if(!l.length&&(l=n('<div class="'+u+'"></div>').appendTo(o),o.addClass("x-masked-relative x-masked"),"body"==e?6==a.ie?l.height(r.docHeight()):l.css("position","fixed"):6===a.ie&&l.height(o.height()),t)){c=['<div class="'+s+'"><div>',t,"</div></div>"].join(""),d=n(c).appendTo(o),i&&d.addClass(i);try{"body"==e&&6!=a.ie?(f="50%",m="50%",d.css("position","fixed")):(f=(l.height()-d.height())/2,m=(l.width()-d.width())/2),d.css({left:m,top:f})}catch(g){r.log("mask error occurred")}}return l},unmaskElement:function(e){var t=n(e),i=t.children("."+s),r=t.children("."+u);i&&i.remove(),r&&r.remove(),t.removeClass("x-masked-relative x-masked")}}),i.exports=o}),define("bui/mask/loadmask",["jquery","bui/mask/mask","bui/common"],function(e,t,i){function n(e){var t=this;n.superclass.constructor.call(t,e)}var r=(e("jquery"),e("bui/mask/mask"));BUI.extend(n,BUI.Base),n.ATTRS={el:{},msg:{value:"Loading..."},msgCls:{value:"x-mask-loading"},disabled:{value:!1}},BUI.augment(n,{disable:function(){this.set("disabled",!0)},onLoad:function(){r.unmaskElement(this.get("el"))},onBeforeLoad:function(){var e=this;e.get("disabled")||r.maskElement(e.get("el"),e.get("msg"),this.get("msgCls"))},show:function(){this.onBeforeLoad()},hide:function(){this.onLoad()},destroy:function(){this.hide(),this.clearAttrVals(),this.off()}}),i.exports=n}),define("bui/overlay",["jquery","bui/common","bui/overlay/overlay","bui/overlay/dialog","bui/overlay/message"],function(e,t,i){var n=e("bui/common"),r=n.namespace("Overlay");n.mix(r,{Overlay:e("bui/overlay/overlay"),Dialog:e("bui/overlay/dialog"),Message:e("bui/overlay/message")}),n.mix(r,{OverlayView:r.Overlay.View,DialogView:r.Dialog.View}),n.Message=n.Overlay.Message,i.exports=r}),define("bui/overlay/overlay",["jquery","bui/common"],function(e,t,i){var n=e("jquery"),r=e("bui/common"),o=r.Component,a="x-align-arrow",u=o.UIBase,s=o.View.extend([u.PositionView,u.CloseView]),l=o.Controller.extend([u.Position,u.Align,u.Close,u.AutoShow,u.AutoHide],{renderUI:function(){var e=this,t=e.get("el"),i=e.get("arrowContainer"),r=i?t.one(i):t;e.get("showArrow")&&n(e.get("arrowTpl")).appendTo(r)},show:function(){function e(){"visibility"===r?n.css({display:"block"}):t.set("visible",!0),i.callback&&i.callback.call(t);var e=t.get("autoHideDelay"),o=t.get("delayHandler");e&&(o&&clearTimeout(o),o=setTimeout(function(){t.hide(),t.set("delayHandler",null)},e),t.set("delayHandler",o))}var t=this,i=t.get("effect"),n=t.get("el"),r=t.get("visibleMode"),o=i.effect,a=i.duration;switch(t.get("rendered")||(t.set("visible",!0),t.render(),t.set("visible",!1),n=t.get("el")),"visibility"===r&&(t.set("visible",!0),n.css({display:"none"})),o){case"linear":n.show(a,e);break;case"fade":n.fadeIn(a,e);break;case"slide":n.slideDown(a,e);break;default:e()}},hide:function(){function e(){"visibility"===t.get("visibleMode")&&n.css({display:"block"}),t.set("visible",!1),i.callback&&i.callback.call(t)}var t=this,i=t.get("effect"),n=t.get("el"),r=i.effect,o=i.duration;switch(r){case"linear":n.hide(o,e);break;case"fade":n.fadeOut(o,e);break;case"slide":n.slideUp(o,e);break;default:e()}}},{ATTRS:{effect:{value:{effect:"none",duration:0,callback:null}},autoHideDelay:{},closeable:{value:!1},showArrow:{value:!1},arrowContainer:{view:!0},arrowTpl:{value:'<s class="'+a+'"><s class="'+a+'-inner"></s></s>'},visibleMode:{value:"visibility"},visible:{value:!1},xview:{value:s}}},{xclass:"overlay"});l.View=s,i.exports=l}),define("bui/overlay/dialog",["jquery","bui/overlay/overlay","bui/common"],function(e,t,i){var n=e("jquery"),r=e("bui/overlay/overlay"),o=BUI.Component.UIBase,a="header-title",u=BUI.prefix,s=20,l=r.View.extend([o.StdModView,o.MaskView],{getContentElement:function(){return this.get("body")},_uiSetTitle:function(e){var t=this,i=t.get("el");i.find("."+a).html(e)},_uiSetContentId:function(e){var t=this,i=t.get("body"),r=n("#"+e).children();r.appendTo(i)},_uiSetHeight:function(e){var t=this,i=e,n=t.get("header"),r=t.get("body"),o=t.get("footer");i-=n.outerHeight()+o.outerHeight(),i-=2*s,r.height(i)},_removeContent:function(){var e=this,t=e.get("body"),i=e.get("contentId");i?t.children().appendTo(n("#"+i)):t.children().remove()}},{xclass:"dialog-view"}),c=r.extend([o.StdMod,o.Mask,o.Drag],{show:function(){var e=this;align=e.get("align"),c.superclass.show.call(this),e.set("align",align)},bindUI:function(){var e=this;e.on("closeclick",function(){return e.onCancel()})},onCancel:function(){var e=this,t=e.get("cancel");return t.call(this)},_uiSetButtons:function(e){var t=this,i=t.get("footer");i.children().remove(),BUI.each(e,function(e){t._createButton(e,i)})},_createButton:function(e,t){var i=this,r='<button class="'+e.elCls+'">'+e.text+"</button>",o=n(r).appendTo(t);o.on("click",function(){e.handler.call(i,i,this)})},destructor:function(){var e=this,t=e.get("contentId"),i=e.get("body"),n=e.get("closeAction");"destroy"==n&&(e.hide(),t&&i.children().appendTo("#"+t))}},{ATTRS:{closeTpl:{view:!0,value:'<a tabindex="0" href=javascript:void("\u5173\u95ed") role="button" class="'+u+'ext-close" style=""><span class="'+u+'ext-close-x x-icon x-icon-normal">\xd7</span></a>'},buttons:{value:[{text:"\u786e\u5b9a",elCls:"button button-primary",handler:function(){var e=this,t=e.get("success");t&&t.call(e)}},{text:"\u53d6\u6d88",elCls:"button button-primary",handler:function(){this.onCancel()!==!1&&this.close()}}]},contentId:{view:!0},success:{value:function(){this.close()}},cancel:{value:function(){}},dragNode:{valueFn:function(){return this.get("header")}},defaultLoaderCfg:{valueFn:function(){var e=this;return{property:"bodyContent",autoLoad:!1,lazyLoad:{event:"show"},loadMask:{el:e.get("body")}}}},title:{view:!0,value:""},align:{value:{node:window,points:["cc","cc"]}},mask:{value:!0},maskShared:{value:!1},headerContent:{value:'<div class="'+a+'">\u6807\u9898</div>'},footerContent:{},closeable:{value:!0},xview:{value:l}}},{xclass:"dialog"});c.View=l,i.exports=c}),define("bui/overlay/message",["jquery","bui/overlay/dialog","bui/overlay/overlay","bui/common"],function(e,t,i){function n(e,t){return function(i,n,o){return BUI.isString(n)&&(o=n,n=null),o=o||t,n=n||a,r({buttons:e,icon:o,msg:i,success:n}),u}}function r(e){u||(u=new f({icon:"info",title:""})),u.set(e),u.show()}function o(){var e=this,t=e.get("success");t&&(t.call(e),e.hide())}function a(){this.hide()}var u,s=e("jquery"),l=e("bui/overlay/dialog"),c=BUI.prefix,d={info:"i",error:"\xd7",success:'<i class="icon-ok icon-white"></i>',question:"?",warning:"!"},f=l.extend({renderUI:function(){this._setContent()},bindUI:function(){var e=this,t=e.get("body");e.on("afterVisibleChange",function(i){if(i.newVal&&BUI.UA.ie<8){var n=t.outerWidth();6==BUI.UA.ie&&(n=n>350?350:n),e.get("header").width(n-20),e.get("footer").width(n)}})},_setContent:function(){var e=this,t=e.get("body"),i=BUI.substitute(e.get("contentTpl"),{msg:e.get("msg"),iconTpl:e.get("iconTpl")});t.empty(),s(i).appendTo(t)},_uiSetIcon:function(){this.get("rendered")&&this._setContent()},_uiSetMsg:function(){this.get("rendered")&&this._setContent()}},{ATTRS:{icon:{},msg:{},iconTpl:{getter:function(){var e=this,t=e.get("icon");return'<div class="x-icon x-icon-'+t+'">'+d[t]+"</div>"}},contentTpl:{value:'{iconTpl}<div class="'+c+'message-content">{msg}</div>'}}},{xclass:"message",priority:0}),m=n([{text:"\u786e\u5b9a",elCls:"button button-primary",handler:o}],"info"),g=n([{text:"\u786e\u5b9a",elCls:"button button-primary",handler:o},{text:"\u53d6\u6d88",elCls:"button",handler:a}],"question");f.Alert=m,f.Confirm=g,f.Show=r,i.exports=f}),define("bui/picker",["jquery","bui/common","bui/picker/mixin","bui/picker/picker","bui/picker/listpicker","bui/overlay","bui/data","bui/list"],function(e,t,i){var n=e("bui/common"),r=n.namespace("Picker");n.mix(r,{Mixin:e("bui/picker/mixin"),Picker:e("bui/picker/picker"),ListPicker:e("bui/picker/listpicker")}),i.exports=r}),define("bui/picker/mixin",["jquery"],function(e,t,i){var n=e("jquery"),r=function(){};r.ATTRS={innerControl:{getter:function(){return this.get("children")[0]}},triggerEvent:{value:"click"},autoSetValue:{value:!0},changeEvent:{value:"selectedchange"},autoHide:{value:!0},hideEvent:{value:"itemclick"},textField:{},align:{value:{points:["bl","tl"],offset:[0,0]}},valueField:{}},r.prototype={__bindUI:function(){{var e=this;e.get("hideEvent"),n(e.get("trigger"))}e.on("show",function(){if(e.get("isInit")||e._initControl(),e.get("autoSetValue")){var t=e.get("valueField")||e.get("textField")||e.get("curTrigger"),i=n(t).val();e.setSelectedValue(i)}})},_initControl:function(){var e=this;if(!e.get("isInit")){if(!e.get("innerControl")){var t=e.createControl();e.get("children").push(t)}e.initControlEvent(),e.set("isInit",!0)}},initControl:function(){this._initControl()},createControl:function(){},initControlEvent:function(){var e=this,t=e.get("innerControl"),i=n(e.get("trigger")),r=e.get("hideEvent");t.on(e.get("changeEvent"),function(t){var r=e.get("curTrigger"),o=e.get("textField")||r||i,a=e.get("valueField"),u=e.getSelectedValue(),s=!1;if(o){var l=e.getSelectedText(),c=n(o).val();l!=c&&(n(o).val(l),s=!0,n(o).trigger("change"))}if(a&&e.get("autoSetValue")){var d=n(a).val();a!=d&&(n(a).val(u),s=!0,n(a).trigger("change"))}s&&e.onChange(l,u,t)}),r&&t.on(e.get("hideEvent"),function(){var t=e.get("curTrigger");try{t&&t.focus()}catch(i){BUI.log(i)}e.hide()})},setSelectedValue:function(){},getSelectedValue:function(){},getSelectedText:function(){},focus:function(){this.get("innerControl").focus()},onChange:function(e,t){var i=this,n=i.get("curTrigger");i.fire("selectedchange",{value:t,text:e,curTrigger:n})},handleNavEsc:function(){this.hide()},_uiSetValueField:function(e){var t=this;null!=e&&""!==e&&t.get("autoSetValue")&&t.setSelectedValue(n(e).val())},_getTextField:function(){var e=this;return e.get("textField")||e.get("curTrigger")}},i.exports=r}),define("bui/picker/picker",["jquery","bui/common","bui/overlay","bui/picker/mixin"],function(e,t,i){var n=(e("jquery"),e("bui/overlay").Overlay),r=e("bui/picker/mixin"),o=n.extend([r],{},{ATTRS:{}},{xclass:"picker"});i.exports=o}),define("bui/picker/listpicker",["jquery","bui/common","bui/data","bui/list","bui/picker/picker","bui/overlay","bui/picker/mixin"],function(e,t,i){var n=(e("jquery"),e("bui/list"),e("bui/picker/picker")),r=n.extend({initializer:function(){var e=this,t=e.get("children"),i=e.get("list");i||t.push({})},setSelectedValue:function(e){e=e?e.toString():"",this.get("isInit")||this._initControl();var t=this,i=t.get("list"),n=t.getSelectedValue();e!==n&&i.getCount()&&(i.get("multipleSelect")&&i.clearSelection(),i.setSelectionByField(e.split(",")))},onChange:function(e,t,i){var n=this,r=n.get("curTrigger");n.fire("selectedchange",{value:t,text:e,curTrigger:r,item:i.item})},getSelectedValue:function(){return this.get("isInit")||this._initControl(),this.get("list").getSelectionValues().join(",")},getSelectedText:function(){return this.get("isInit")||this._initControl(),this.get("list").getSelectionText().join(",")}},{ATTRS:{defaultChildClass:{value:"simple-list"},list:{getter:function(){return this.get("children")[0]}}}},{xclass:"list-picker"});i.exports=r}),define("bui/toolbar",["jquery","bui/common","bui/toolbar/baritem","bui/toolbar/bar","bui/toolbar/pagingbar","bui/toolbar/numberpagingbar"],function(e,t,i){var n=e("bui/common"),r=n.namespace("Toolbar");n.mix(r,{BarItem:e("bui/toolbar/baritem"),Bar:e("bui/toolbar/bar"),PagingBar:e("bui/toolbar/pagingbar"),NumberPagingBar:e("bui/toolbar/numberpagingbar")}),i.exports=r}),define("bui/toolbar/baritem",["jquery","bui/common"],function(e,t,i){var n=(e("jquery"),e("bui/common")),r=n.prefix,o=n.Component,a=o.UIBase,u=o.View.extend([a.ListItemView]),s=o.Controller.extend([a.ListItem],{renderUI:function(){var e=this.get("el");e.addClass(r+"inline-block"),e.attr("id")||e.attr("id",this.get("id"))}},{ATTRS:{elTagName:{view:!0,value:"li"},selectable:{value:!1},focusable:{value:!1},xview:{value:u}}},{xclass:"bar-item",priority:1}),l=s.extend({_uiSetDisabled:function(e){var t=this,i=t.get("el"),n=e?"addClass":"removeClass";i.find("button").attr("disabled",e)[n](r+"button-disabled")},_uiSetChecked:function(e){var t=this,i=t.get("el"),n=e?"addClass":"removeClass";i.find("button")[n](r+"button-checked")},_uiSetText:function(e){var t=this,i=t.get("el");i.find("button").text(e)},_uiSetbtnCls:function(e){var t=this,i=t.get("el");i.find("button").addClass(e)}},{ATTRS:{checked:{value:!1},tpl:{view:!0,value:'<button type="button" class="{btnCls}">{text}</button>'},btnCls:{sync:!1},text:{sync:!1,value:""}}},{xclass:"bar-item-button",priority:2}),c=s.extend({renderUI:function(){var e=this.get("el");e.attr("role","separator")}},{xclass:"bar-item-separator",priority:2}),d=s.extend({},{ATTRS:{width:{view:!0,value:2}}},{xclass:"bar-item-spacer",priority:2}),f=s.extend({_uiSetText:function(e){var t=this,i=t.get("el");i.html(e)}},{ATTRS:{text:{value:""}}},{xclass:"bar-item-text",priority:2});
s.types={button:l,separator:c,spacer:d,text:f},i.exports=s}),define("bui/toolbar/bar",["jquery","bui/common"],function(e,t,i){var n=(e("jquery"),e("bui/common")),r=n.Component,o=r.UIBase,a=r.View.extend({renderUI:function(){var e=this.get("el");e.attr("role","toolbar"),e.attr("id")||e.attr("id",n.guid("bar"))}}),u=r.Controller.extend([o.ChildList],{getItem:function(e){return this.getChild(e)}},{ATTRS:{elTagName:{view:!0,value:"ul"},defaultChildClass:{value:"bar-item"},focusable:{value:!1},xview:{value:a}}},{xclass:"bar",priority:1});i.exports=u}),define("bui/toolbar/pagingbar",["jquery","bui/common","bui/toolbar/bar"],function(e,t,i){var n=(e("jquery"),e("bui/common")),r=e("bui/toolbar/bar"),o=n.Component,a=o.UIBase.Bindable,u=n.prefix,s="first",l="prev",c="next",d="last",f="skip",m="refresh",g="totalPage",h="curPage",v="totalCount",b=[s,l,c,d,f,m],p=[g,h,v],y=r.extend([a],{initializer:function(){var e=this,t=e.get("children"),i=e.get("items"),r=e.get("store");i?n.each(i,function(i){n.isString(i)&&(i=n.Array.contains(i,b)?e._getButtonItem(i):n.Array.contains(i,p)?e._getTextItem(i):{xtype:i}),t.push(i)}):(i=e._getItems(),n.each(i,function(e){t.push(e)})),r&&r.get("pageSize")&&e.set("pageSize",r.get("pageSize"))},bindUI:function(){var e=this;e._bindButtonEvent()},jumpToPage:function(e){if(!(0>=e||e>this.get("totalPage"))){var t=this,i=t.get("store"),n=t.get("pageSize"),r=e-1,o=r*n,a=t.fire("beforepagechange",{from:t.get("curPage"),to:e});i&&a!==!1&&i.load({start:o,limit:n,pageIndex:r})}},_afterStoreLoad:function(e){var t,i,n,r,o=this,a=o.get("pageSize"),u=0;u=e.get("start"),i=e.getTotalCount(),t=i-u>a?u+e.getCount()-1:i,r=parseInt((i+a-1)/a,10),r=r>0?r:1,n=parseInt(u/a,10)+1,o.set("start",u),o.set("end",t),o.set("totalCount",i),o.set("curPage",n),o.set("totalPage",r),o._setAllButtonsState(),o._setNumberPages()},_bindButtonEvent:function(){function e(){var e=parseInt(t._getCurrentPageValue(),10);t._isPageAllowRedirect(e)?t.jumpToPage(e):t._setCurrentPageValue(t.get("curPage"))}var t=this;t._bindButtonItemEvent(s,function(){t.jumpToPage(1)}),t._bindButtonItemEvent(l,function(){t.jumpToPage(t.get("curPage")-1)}),t._bindButtonItemEvent(c,function(){t.jumpToPage(t.get("curPage")+1)}),t._bindButtonItemEvent(d,function(){t.jumpToPage(t.get("totalPage"))}),t._bindButtonItemEvent(f,function(){e()}),t._bindButtonItemEvent(m,function(){t.jumpToPage(t.get("curPage"))});var i=t.getItem(h);i&&i.get("el").on("keyup",function(t){t.stopPropagation(),13===t.keyCode&&e()})},_bindButtonItemEvent:function(e,t){var i=this,n=i.getItem(e);n&&n.on("click",t)},onLoad:function(e){var t=this,i=t.get("store");t._afterStoreLoad(i,e)},_getItems:function(){var e=this,t=e.get("items");return t&&t.length?t:(t=[],t.push(e._getButtonItem(s)),t.push(e._getButtonItem(l)),t.push(e._getSeparator()),t.push(e._getTextItem(g)),t.push(e._getTextItem(h)),t.push(e._getButtonItem(f)),t.push(e._getSeparator()),t.push(e._getButtonItem(c)),t.push(e._getButtonItem(d)),t.push(e._getSeparator()),t.push(e._getTextItem(v)),t)},_getButtonItem:function(e){var t=this;return{id:e,xclass:"bar-item-button",text:t.get(e+"Text"),disabled:!0,elCls:t.get(e+"Cls")}},_getSeparator:function(){return{xclass:"bar-item-separator"}},_getTextItem:function(e){var t=this;return{id:e,xclass:"bar-item-text",text:t._getTextItemTpl(e)}},_getTextItemTpl:function(e){var t=this,i=t.getAttrVals();return n.substitute(this.get(e+"Tpl"),i)},_isPageAllowRedirect:function(e){var t=this;return e&&e>0&&e<=t.get("totalPage")&&e!==t.get("curPage")},_setAllButtonsState:function(){var e=this,t=e.get("store");t&&e._setButtonsState([l,c,s,d,f],!0),1===e.get("curPage")&&e._setButtonsState([l,s],!1),e.get("curPage")===e.get("totalPage")&&e._setButtonsState([c,d],!1)},_setButtonsState:function(e,t){var i=this,r=i.get("children");n.each(r,function(i){-1!==n.Array.indexOf(i.get("id"),e)&&i.set("disabled",!t)})},_setNumberPages:function(){var e=this,t=e.getItems();n.each(t,function(t){"bar-item-text"===t.__xclass&&t.set("content",e._getTextItemTpl(t.get("id")))})},_getCurrentPageValue:function(e){var t=this;if(e=e||t.getItem(h)){var i=e.get("el").find("input");return i.val()}},_setCurrentPageValue:function(e,t){var i=this;if(t=t||i.getItem(h)){var n=t.get("el").find("input");n.val(e)}}},{ATTRS:{firstText:{value:"\u9996 \u9875"},firstCls:{value:u+"pb-first"},prevText:{value:"\u4e0a\u4e00\u9875"},prevCls:{value:u+"pb-prev"},nextText:{value:"\u4e0b\u4e00\u9875"},nextCls:{value:u+"pb-next"},lastText:{value:"\u672b \u9875"},lastCls:{value:u+"pb-last"},skipText:{value:"\u786e\u5b9a"},skipCls:{value:u+"pb-skip"},refreshText:{value:"\u5237\u65b0"},refreshCls:{value:u+"pb-refresh"},totalPageTpl:{value:"\u5171 {totalPage} \u9875"},curPageTpl:{value:'\u7b2c <input type="text" autocomplete="off" class="'+u+'pb-page" size="20" value="{curPage}" name="inputItem"> \u9875'},totalCountTpl:{value:"\u5171{totalCount}\u6761\u8bb0\u5f55"},autoInitItems:{value:!1},curPage:{value:0},totalPage:{value:0},totalCount:{value:0},pageSize:{value:30},store:{}},ID_FIRST:s,ID_PREV:l,ID_NEXT:c,ID_LAST:d,ID_SKIP:f,ID_REFRESH:m,ID_TOTAL_PAGE:g,ID_CURRENT_PAGE:h,ID_TOTAL_COUNT:v},{xclass:"pagingbar",priority:2});i.exports=y}),define("bui/toolbar/numberpagingbar",["jquery","bui/common","bui/toolbar/pagingbar","bui/toolbar/bar"],function(e,t,i){var n=(e("jquery"),e("bui/common")),r=(n.Component,e("bui/toolbar/pagingbar")),o=n.prefix,a=o+"button-number",u=r.extend({_getItems:function(){var e=this,t=e.get("items");return t?t:(t=[],t.push(e._getButtonItem(r.ID_PREV)),t.push(e._getButtonItem(r.ID_NEXT)),t)},_getButtonItem:function(e){var t=this;return{id:e,content:'<a href="javascript:;">'+t.get(e+"Text")+"</a>",disabled:!0}},_bindButtonEvent:function(){var e=this,t=e.get("numberButtonCls");e.constructor.superclass._bindButtonEvent.call(this),e.get("el").delegate("a","click",function(e){e.preventDefault()}),e.on("click",function(i){var n=i.target;if(n&&n.get("el").hasClass(t)){var r=n.get("id");e.jumpToPage(r)}})},_setNumberPages:function(){var e=this;e._setNumberButtons()},_setNumberButtons:function(){var e,t=this,i=t.get("curPage"),r=t.get("totalPage"),o=t._getNumberItems(i,r);t._clearNumberButtons(),n.each(o,function(e){t._appendNumberButton(e)}),e=t.getItem(i),e&&e.set("selected",!0)},_appendNumberButton:function(e){{var t=this,i=t.getItemCount();t.addItemAt(e,i-1)}},_clearNumberButtons:function(){for(var e=this,t=(e.getItems(),e.getItemCount());t>2;)e.removeItemAt(t-2),t=e.getItemCount()},_getNumberItems:function(e,t){function i(e,t){for(var i=e;t>=i;i++)a.push(o._getNumberItem(i))}function n(){a.push(o._getEllipsisItem())}var r,o=this,a=[],u=o.get("maxLimitCount"),s=o.get("showRangeCount");if(u>t)r=t,i(1,t);else{var l=u>=e?1:e-s,c=e+s,d=t>c?c>u?c:u:t;l>1&&(i(1,1),l>2&&n()),r=d,i(l,d)}return t>r&&(t-1>r&&n(),i(t,t)),a},_getEllipsisItem:function(){var e=this;return{disabled:!0,content:e.get("ellipsisTpl")}},_getNumberItem:function(e){var t=this;return{id:e,elCls:t.get("numberButtonCls")}}},{ATTRS:{itemStatusCls:{value:{selected:"active",disabled:"disabled"}},itemTpl:{value:'<a href="">{id}</a>'},prevText:{value:"<<"},nextText:{value:">>"},maxLimitCount:{value:4},showRangeCount:{value:1},numberButtonCls:{value:a},ellipsisTpl:{value:'<a href="#">...</a>'}}},{xclass:"pagingbar-number",priority:3});i.exports=u}),define("bui/calendar",["jquery","bui/common","bui/calendar/calendar","bui/calendar/monthpicker","bui/calendar/datepicker","bui/data","bui/list","bui/overlay","bui/picker","bui/calendar/header","bui/calendar/panel","bui/toolbar"],function(e,t,i){var n=e("bui/common"),r=n.namespace("Calendar");n.mix(r,{Calendar:e("bui/calendar/calendar"),MonthPicker:e("bui/calendar/monthpicker"),DatePicker:e("bui/calendar/datepicker")}),i.exports=r}),define("bui/calendar/calendar",["jquery","bui/common","bui/data","bui/list","bui/overlay","bui/picker","bui/calendar/monthpicker","bui/calendar/header","bui/calendar/panel","bui/toolbar"],function(e,t,i){function n(){var e=new Date;return new Date(e.getFullYear(),e.getMonth(),e.getDate())}function r(e){return 10>e?"0"+e:e.toString()}function o(e){for(var t=[],i=0;e>i;i++)t.push({text:r(i),value:r(i)});return t}function a(e,t,i){var n=e.get("el").find("."+t);u.isNumber(i)&&(i=r(i)),n.val(i)}var u=e("bui/common"),s=u.prefix,l="x-datepicker-time",c="x-datepicker-hour",d="x-datepicker-minute",f="x-datepicker-second",m="x-timepicker",g=e("bui/picker").ListPicker,h=e("bui/calendar/monthpicker"),v=e("bui/calendar/header"),b=e("bui/calendar/panel"),p=e("bui/toolbar"),y=u.Component,x=u.Date,I=y.Controller.extend({initializer:function(){var e=this,t=e.get("children"),i=new v,n=new b,r=e.get("footer")||e._createFooter();t.push(i),t.push(n),t.push(r),e.set("header",i),e.set("panel",n),e.set("footer",r)},renderUI:function(){var e=this,t=e.get("children");if(e.get("showTime")){var i=e.get("timepicker")||e._initTimePicker();t.push(i),e.set("timepicker",i)}},bindUI:function(){var e=this,t=e.get("header"),i=e.get("panel");i.on("selectedchange",function(t){var i=t.date;x.isDateEquals(i,e.get("selectedDate"))||e.set("selectedDate",i)}),e.get("showTime")?e._initTimePickerEvent():i.on("click",function(){e.fire("accept")}),t.on("monthchange",function(t){e._setYearMonth(t.year,t.month)}),t.on("headerclick",function(){var i=e.get("monthpicker")||e._createMonthPicker();i.set("year",t.get("year")),i.set("month",t.get("month")),i.show()})},_initTimePicker:function(){var e=this,t=e.get("lockTime"),i={hour:c,minute:d,second:f};if(t)for(var n in t){var r=i[n.toLowerCase()];e.set(n,t[n]),t.editable||e.get("el").find("."+r).attr("disabled","")}var o=new g({elCls:m,children:[{itemTpl:'<li><a href="#">{text}</a></li>'}],autoAlign:!1,align:{node:e.get("el"),points:["bl","bl"],offset:[0,-30]},trigger:e.get("el").find("."+l)});return o.render(),e._initTimePickerEvent(o),o},_initTimePickerEvent:function(e){var t=this,e=t.get("timepicker");e&&(e.get("el").delegate("a","click",function(e){e.preventDefault()}),e.on("triggerchange",function(t){var i=t.curTrigger;i.hasClass(c)?e.get("list").set("items",o(24)):e.get("list").set("items",o(60))}),e.on("selectedchange",function(e){var i=e.curTrigger,n=e.value;i.hasClass(c)?t.setInternal("hour",n):i.hasClass(d)?t.setInternal("minute",n):t.setInternal("second",n)}))},_setYearMonth:function(e,t){var i=this,n=i.get("selectedDate"),r=n.getDate();if(e!==n.getFullYear()||t!==n.getMonth()){var o=new Date(e,t,r);o.getMonth()!=t&&(o=x.addDay(-1,new Date(e,t+1))),i.set("selectedDate",o)}},_createMonthPicker:function(){var e,t=this;return e=new h({render:t.get("el"),effect:{effect:"slide",duration:300},visibleMode:"display",success:function(){var e=this;t._setYearMonth(e.get("year"),e.get("month")),e.hide()},cancel:function(){this.hide()}}),t.set("monthpicker",e),t.get("children").push(e),e},_createFooter:function(){var e=this,t=this.get("showTime"),i=[];return t?(i.push({content:e.get("timeTpl")}),i.push({xclass:"bar-item-button",text:"\u786e\u5b9a",btnCls:"button button-small button-primary",listeners:{click:function(){e.fire("accept")}}})):(i.push({xclass:"bar-item-button",text:"\u4eca\u5929",btnCls:"button button-small",id:"todayBtn",listeners:{click:function(){var t=n();e.set("selectedDate",t),e.fire("accept")}}}),i.push({xclass:"bar-item-button",text:"\u6e05\u9664",btnCls:"button button-small",id:"clsBtn",listeners:{click:function(){e.fire("clear")}}})),new p.Bar({elCls:s+"calendar-footer",children:i})},_updateTodayBtnAble:function(){var e=this;if(!e.get("showTime")){var t=e.get("footer"),i=e.get("panel").get("view"),r=n(),o=t.getItem("todayBtn");i._isInRange(r)?o.enable():o.disable()}},_uiSetSelectedDate:function(e){var t=this,i=e.getFullYear(),n=e.getMonth();t.get("header").setMonth(i,n),t.get("panel").set("selected",e),t.fire("datechange",{date:e})},_uiSetHour:function(e){a(this,c,e)},_uiSetMinute:function(e){a(this,d,e)},_uiSetSecond:function(e){a(this,f,e)},_uiSetMaxDate:function(e){var t=this;t.get("panel").set("maxDate",e),t._updateTodayBtnAble()},_uiSetMinDate:function(e){var t=this;t.get("panel").set("minDate",e),t._updateTodayBtnAble()}},{ATTRS:{header:{},panel:{},maxDate:{},minDate:{},monthPicker:{},timepicker:{},width:{value:180},events:{value:{click:!1,accept:!1,datechange:!1,monthchange:!1}},showTime:{value:!1},lockTime:{},timeTpl:{value:'<input type="text" readonly class="'+l+" "+c+'" />:<input type="text" readonly class="'+l+" "+d+'" />:<input type="text" readonly class="'+l+" "+f+'" />'},selectedDate:{value:n()},hour:{value:(new Date).getHours()},minute:{value:(new Date).getMinutes()},second:{value:0}}},{xclass:"calendar",priority:0});i.exports=I}),define("bui/calendar/monthpicker",["jquery","bui/common","bui/overlay","bui/data","bui/list","bui/toolbar"],function(e,t,i){function n(){return r.map(g,function(e,t){return{text:e,value:t}})}var r=e("jquery"),o=e("bui/common"),a=(o.Component,e("bui/overlay").Overlay),u=e("bui/list").SimpleList,s=e("bui/toolbar"),l=o.prefix,c="x-monthpicker-month",d="x-monthpicker-year",f="x-monthpicker-yearnav",m="x-monthpicker-item",g=["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"],h=u.extend({bindUI:function(){var e=this;e.get("el").delegate("a","click",function(e){e.preventDefault()}).delegate("."+c,"dblclick",function(){e.fire("monthdblclick")})}},{ATTRS:{itemTpl:{view:!0,value:'<li class="'+m+' x-monthpicker-month"><a href="#" hidefocus="on">{text}</a></li>'},itemCls:{value:m},items:{view:!0,value:n()},elCls:{view:!0,value:"x-monthpicker-months"}}},{xclass:"calendar-month-panel"}),v=u.extend({bindUI:function(){var e=this,t=e.get("el");t.delegate("a","click",function(e){e.preventDefault()}),t.delegate("."+d,"dblclick",function(){e.fire("yeardblclick")}),t.delegate(".x-icon","click",function(t){var i=r(t.currentTarget);i.hasClass(f+"-prev")?e._prevPage():i.hasClass(f+"-next")&&e._nextPage()}),e.on("itemselected",function(t){t.item&&e.setInternal("year",t.item.value)})},_prevPage:function(){var e=this,t=e.get("start"),i=e.get("yearCount");e.set("start",t-i)},_nextPage:function(){var e=this,t=e.get("start"),i=e.get("yearCount");e.set("start",t+i)},_uiSetStart:function(){var e=this;e._setYearsContent()},_uiSetYear:function(e){var t=this,i=t.findItemByField("value",e);i?t.setSelectedByField(e):t.set("start",e)},_setYearsContent:function(){for(var e=this,t=e.get("year"),i=e.get("start"),n=e.get("yearCount"),r=[],o=i;i+n>o;o++){var a=o.toString();r.push({text:a,value:o})}e.set("items",r),e.setSelectedByField(t)}},{ATTRS:{items:{view:!0,value:[]},elCls:{view:!0,value:"x-monthpicker-years"},itemCls:{value:m},year:{},start:{value:(new Date).getFullYear()},yearCount:{value:10},itemTpl:{view:!0,value:'<li class="'+m+" "+d+'"><a href="#" hidefocus="on">{text}</a></li>'},tpl:{view:!0,value:'<div class="'+f+'"><span class="'+f+'-prev x-icon x-icon-normal x-icon-small"><span class="icon icon-caret icon-caret-left"></span></span><span class="'+f+'-next x-icon x-icon-normal x-icon-small"><span class="icon icon-caret icon-caret-right"></span></span></div><ul></ul>'}}},{xclass:"calendar-year-panel"}),b=a.extend({initializer:function(){var e=this,t=e.get("children"),i=new h,n=new v,r=e._createFooter();t.push(i),t.push(n),t.push(r),e.set("yearPanel",n),e.set("monthPanel",i)},bindUI:function(){var e=this;e.get("monthPanel").on("itemselected",function(t){t.item&&e.setInternal("month",t.item.value)}).on("monthdblclick",function(){e._successCall()}),e.get("yearPanel").on("itemselected",function(t){t.item&&e.setInternal("year",t.item.value)}).on("yeardblclick",function(){e._successCall()})},_successCall:function(){var e=this,t=e.get("success");t&&t.call(e)},_createFooter:function(){var e=this;return new s.Bar({elCls:l+"clear x-monthpicker-footer",children:[{xclass:"bar-item-button",text:"\u786e\u5b9a",btnCls:"button button-small button-primary",handler:function(){e._successCall()}},{xclass:"bar-item-button",text:"\u53d6\u6d88",btnCls:"button button-small last",handler:function(){var t=e.get("cancel");t&&t.call(e)}}]})},_uiSetYear:function(e){this.get("yearPanel").set("year",e)},_uiSetMonth:function(e){this.get("monthPanel").setSelectedByField(e)}},{ATTRS:{footer:{},align:{value:{}},year:{},success:{value:function(){}},cancel:{value:function(){}},width:{value:180},month:{},yearPanel:{},monthPanel:{}}},{xclass:"monthpicker"});i.exports=b}),define("bui/calendar/datepicker",["jquery","bui/common","bui/data","bui/list","bui/overlay","bui/picker","bui/calendar/calendar","bui/calendar/monthpicker","bui/calendar/header","bui/calendar/panel","bui/toolbar"],function(e,t,i){var n=e("bui/common"),r=e("bui/picker").Picker,o=e("bui/calendar/calendar"),a=n.Date,u=r.extend({initializer:function(){},createControl:function(){var e=this,t=e.get("children"),i=new o({render:e.get("el"),showTime:e.get("showTime"),lockTime:e.get("lockTime"),minDate:e.get("minDate"),maxDate:e.get("maxDate"),autoRender:!0});return i.on("clear",function(){var t=e.get("curTrigger"),i=t.val();i&&(t.val(""),t.trigger("change"))}),e.get("dateMask")||(e.get("showTime")?e.set("dateMask","yyyy-mm-dd HH:MM:ss"):e.set("dateMask","yyyy-mm-dd")),t.push(i),e.set("calendar",i),i},setSelectedValue:function(e){if(this.get("calendar")){var t=this,i=this.get("calendar"),n=a.parse(e,t.get("dateMask"));if(n=n||t.get("selectedDate"),i.set("selectedDate",a.getDate(n)),t.get("showTime")){var r=this.get("lockTime"),o=n.getHours(),u=n.getMinutes(),s=n.getSeconds();r&&(e&&r.editable||(o=null!=r.hour?r.hour:o,u=null!=r.minute?r.minute:u,s=null!=r.second?r.second:s)),i.set("hour",o),i.set("minute",u),i.set("second",s)}}},getSelectedValue:function(){if(!this.get("calendar"))return null;var e=this,t=e.get("calendar"),i=a.getDate(t.get("selectedDate"));return e.get("showTime")&&(i=a.addHour(t.get("hour"),i),i=a.addMinute(t.get("minute"),i),i=a.addSecond(t.get("second"),i)),i},getSelectedText:function(){return this.get("calendar")?a.format(this.getSelectedValue(),this._getFormatType()):""},_getFormatType:function(){return this.get("dateMask")},_uiSetMaxDate:function(e){if(!this.get("calendar"))return null;var t=this;t.get("calendar").set("maxDate",e)},_uiSetMinDate:function(e){if(!this.get("calendar"))return null;var t=this;t.get("calendar").set("minDate",e)}},{ATTRS:{showTime:{value:!1},lockTime:{},maxDate:{},minDate:{},dateMask:{},changeEvent:{value:"accept"},hideEvent:{value:"accept clear"},calendar:{},selectedDate:{value:new Date((new Date).setSeconds(0))}}},{xclass:"datepicker",priority:0});i.exports=u}),define("bui/calendar/header",["jquery","bui/common"],function(e,t,i){var n=e("jquery"),r=e("bui/common"),o=r.prefix,a=r.Component,u="year-text",s="month-text",l="x-datepicker-arrow",c="x-datepicker-prev",d="x-datepicker-next",f=a.Controller.extend({bindUI:function(){var e=this,t=e.get("el");t.delegate("."+l,"click",function(t){t.preventDefault();var i=n(t.currentTarget);i.hasClass(d)?e.nextMonth():i.hasClass(c)&&e.prevMonth()}),t.delegate(".x-datepicker-month","click",function(){e.fire("headerclick")})},setMonth:function(e,t){var i=this,n=i.get("year"),r=i.get("month");(e!==n||t!==r)&&(i.set("year",e),i.set("month",t),i.fire("monthchange",{year:e,month:t}))},nextMonth:function(){var e=this,t=new Date(e.get("year"),e.get("month")+1);e.setMonth(t.getFullYear(),t.getMonth())},prevMonth:function(){var e=this,t=new Date(e.get("year"),e.get("month")-1);e.setMonth(t.getFullYear(),t.getMonth())},_uiSetYear:function(e){var t=this;t.get("el").find("."+u).text(e)},_uiSetMonth:function(e){var t=this;t.get("el").find("."+s).text(e+1)}},{ATTRS:{year:{sync:!1},month:{sync:!1,setter:function(e){this.set("monthText",e+1)}},monthText:{},tpl:{view:!0,value:'<div class="'+l+" "+c+'"><span class="icon icon-white icon-caret  icon-caret-left"></span></div><div class="x-datepicker-month"><div class="month-text-container"><span><span class="year-text">{year}</span>\u5e74 <span class="month-text">{monthText}</span>\u6708</span><span class="'+o+"caret "+o+'caret-down"></span></div></div><div class="'+l+" "+d+'"><span class="icon icon-white icon-caret  icon-caret-right"></span></div>'},elCls:{view:!0,value:"x-datepicker-header"},events:{value:{monthchange:!0}}}},{xclass:"calendar-header"});i.exports=f}),define("bui/calendar/panel",["jquery","bui/common"],function(e,t,i){var n=e("jquery"),r=e("bui/common"),o=r.Component,a=r.Date,u="x-datepicker-date",s="x-datepicker-today",l="x-datepicker-disabled",c="isoDate",d="x-datepicker-selected",f=6,m={deactive:"prevday",active:"active",disabled:"disabled"},g=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],h=o.View.extend({renderUI:function(){this.updatePanel()},updatePanel:function(){var e=this,t=e.get("el"),i=t.find("tbody"),r=e._getPanelInnerTpl();i.empty(),n(r).appendTo(i)},_getPanelInnerTpl:function(){for(var e=this,t=e._getFirstDate(),i=[],n=0;f>n;n++){var r=a.addWeek(n,t);i.push(e._getWeekTpl(r))}return i.join("")},_getWeekTpl:function(e){for(var t=this,i=t.get("weekTpl"),n=[],o=0;o<g.length;o++){var u=a.addDay(o,e);n.push(t._getDayTpl(u))}return r.substitute(i,{daysTpl:n.join("")})},_getDayTpl:function(e){var t=this,i=t.get("dayTpl"),n=e.getDay(),o=t._isToday(e)?s:"",u=g[n],l=e.getDate(),d=t._isInRange(e)?t._isCurrentMonth(e)?m.active:m.deactive:m.disabled;return r.substitute(i,{dayOfWeek:u,dateType:d,dateNumber:l,todayCls:o,date:a.format(e,c)})},_getFirstDate:function(e,t){var i=this,n=i._getMonthFirstDate(e,t),r=n.getDay();return a.addDay(-1*r,n)},_getMonthFirstDate:function(e,t){var i=this,e=e||i.get("year"),t=t||i.get("month");return new Date(e,t)},_isCurrentMonth:function(e){return e.getMonth()===this.get("month")},_isToday:function(e){var t=new Date;return t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate()},_isInRange:function(e){var t=this,i=t.get("maxDate"),n=t.get("minDate");return n&&n>e?!1:i&&e>i?!1:!0},_clearSelectedDate:function(){var e=this;e.get("el").find("."+d).removeClass(d)},_findDateElement:function(e){var t=this,i=a.format(e,c),r=t.get("el").find("."+u),o=null;return i&&r.each(function(e,t){return n(t).attr("title")===i?(o=n(t),!1):void 0}),o},_setSelectedDate:function(e){var t=this,i=t._findDateElement(e);t._clearSelectedDate(),i&&i.addClass(d)}},{ATTRS:{}}),v=o.Controller.extend({initializer:function(){var e=this,t=new Date;e.get("year")||e.set("year",t.getFullYear()),e.get("month")||e.set("month",t.getMonth())},bindUI:function(){var e=this,t=e.get("el");t.delegate("."+u,"click",function(e){e.preventDefault()}),t.delegate("."+l,"mouseup",function(e){e.stopPropagation()})},performActionInternal:function(e){var t=this,i=n(e.target).closest("."+u);if(i){var r=i.attr("title");r&&(r=a.parse(r),t.get("view")._isInRange(r)&&t.set("selected",r))}},setMonth:function(e,t){var i=this,n=i.get("year"),r=i.get("month");(e!==n||t!==r)&&(i.set("year",e),i.set("month",t),i.get("view").updatePanel())},_uiSetSelected:function(e,t){var i=this;t&&t.prevVal&&a.isDateEquals(e,t.prevVal)||(i.setMonth(e.getFullYear(),e.getMonth()),i.get("view")._setSelectedDate(e),i.fire("selectedchange",{date:e}))},_uiSetMaxDate:function(e){e&&this.get("view").updatePanel()},_uiSetMinDate:function(e){e&&this.get("view").updatePanel()}},{ATTRS:{year:{view:!0},month:{view:!0},selected:{},focusable:{value:!0},dayTpl:{view:!0,value:'<td class="x-datepicker-date x-datepicker-{dateType} {todayCls} day-{dayOfWeek}" title="{date}"><a href="#" hidefocus="on" tabindex="1"><em><span>{dateNumber}</span></em></a></td>'},events:{value:{click:!1,selectedchange:!0}},maxDate:{view:!0,setter:function(e){return e?r.isString(e)?a.parse(e):e:void 0}},minDate:{view:!0,setter:function(e){return e?r.isString(e)?a.parse(e):e:void 0}},weekTpl:{view:!0,value:"<tr>{daysTpl}</tr>"},tpl:{view:!0,value:'<table class="x-datepicker-inner" cellspacing="0"><thead><tr><th  title="Sunday"><span>\u65e5</span></th><th  title="Monday"><span>\u4e00</span></th><th  title="Tuesday"><span>\u4e8c</span></th><th  title="Wednesday"><span>\u4e09</span></th><th  title="Thursday"><span>\u56db</span></th><th  title="Friday"><span>\u4e94</span></th><th  title="Saturday"><span>\u516d</span></th></tr></thead><tbody class="x-datepicker-body"></tbody></table>'},xview:{value:h}}},{xclass:"calendar-panel",priority:0});i.exports=v}),define("bui/select",["jquery","bui/common","bui/select/select","bui/select/combox","bui/select/suggest","bui/data","bui/list","bui/overlay","bui/picker","bui/select/tag"],function(e,t,i){var n=e("bui/common"),r=n.namespace("Select");n.mix(r,{Select:e("bui/select/select"),Combox:e("bui/select/combox"),Suggest:e("bui/select/suggest")}),i.exports=r}),define("bui/select/select",["jquery","bui/common","bui/data","bui/list","bui/overlay","bui/picker"],function(e,t,i){"use strict";function n(e){if(r.isPlainObject(e)){var t=[];return o.each(e,function(e,i){t.push({value:i,text:e})}),t}var i=[];return o.each(e,function(e){i.push(o.isString(e)?{value:e,text:e}:e)}),i}var r=e("jquery"),o=e("bui/common"),a=e("bui/picker").ListPicker,u=o.prefix,s=o.Component,l=a,c=u+"select-input",d=s.Controller.extend({initializer:function(){var e,t=this,i=t.get("multipleSelect"),r=t.get("picker");r?t.get("valueField")&&r.set("valueField",t.get("valueField")):(e=i?"listbox":"simple-list",r=new l({children:[{xclass:e,elCls:u+"select-list",store:t.get("store"),items:n(t.get("items"))}],valueField:t.get("valueField")}),t.set("picker",r)),i&&r.set("hideEvent","")},renderUI:function(){var e=this,t=e.get("picker"),i=e._getTextEl();t.set("trigger",e.getTrigger()),t.set("triggerEvent",e.get("triggerEvent")),t.set("autoSetValue",e.get("autoSetValue")),t.set("textField",i),t.render(),e.set("list",t.get("list"))},bindUI:function(){{var e=this,t=e.get("picker"),i=t.get("list");i.get("store")}t.on("selectedchange",function(t){e.fire("change",{text:t.text,value:t.value,item:t.item})}),i.on("itemsshow",function(){e._syncValue()}),t.on("show",function(){e.get("forceFit")&&t.set("width",e.get("el").outerWidth())})},containsElement:function(e){var t=this,i=t.get("picker");return s.Controller.prototype.containsElement.call(this,e)||i.containsElement(e)},getTrigger:function(){return this.get("el")},_uiSetItems:function(e){if(e){var t=this,i=t.get("picker"),r=i.get("list");r.set("items",n(e)),t._syncValue()}},_syncValue:function(){var e=this,t=e.get("picker"),i=e.get("valueField");i&&t.setSelectedValue(r(i).val())},_uiSetName:function(e){var t=this,i=t._getTextEl();e&&i.attr("name",e)},_uiSetWidth:function(e){var t=this;if(null!=e){if(t.get("inputForceFit")){var i=t._getTextEl(),n=t.get("el").find(".x-icon"),r=i.outerWidth()-i.width(),o=e-n.outerWidth()-r;i.width(o)}if(t.get("forceFit")){var a=t.get("picker");a.set("width",e)}}},_uiSetDisabled:function(e){var t=this,i=t.get("picker"),n=t._getTextEl();i.set("disabled",e),n&&n.attr("disabled",e)},_getTextEl:function(){var e=this,t=e.get("el");return t.is("input")?t:t.find("input")},destructor:function(){var e=this,t=e.get("picker");t&&t.destroy()},_getList:function(){var e=this,t=e.get("picker"),i=t.get("list");return i},getSelectedValue:function(){return this.get("picker").getSelectedValue()},setSelectedValue:function(e){var t=this,i=t.get("picker");i.setSelectedValue(e)},getSelectedText:function(){return this.get("picker").getSelectedText()}},{ATTRS:{picker:{},list:{},valueField:{},store:{},focusable:{value:!0},autoSetValue:{value:!0},multipleSelect:{value:!1},inputForceFit:{value:!0},name:{},items:{sync:!1},inputCls:{value:c},forceFit:{value:!0},events:{value:{change:!1}},tpl:{view:!0,value:'<input type="text" readonly="readonly" class="'+c+'"/><span class="x-icon x-icon-normal"><i class="icon icon-caret icon-caret-down"></i></span>'},triggerEvent:{value:"click"}}},{xclass:"select"});i.exports=d}),define("bui/select/combox",["jquery","bui/common","bui/select/select","bui/select/tag","bui/data","bui/list","bui/overlay","bui/picker"],function(e,t,i){var n=e("jquery"),r=e("bui/common"),o=e("bui/select/select"),a=e("bui/select/tag"),u=r.prefix+"combox-input",s=o.extend([a],{renderUI:function(){var e=this,t=e.get("picker");t.set("autoFocused",!1)},_uiSetItems:function(e){for(var t=this,i=0;i<e.length;i++){var n=e[i];r.isString(n)&&(e[i]={value:n,text:n})}s.superclass._uiSetItems.call(t,e)},bindUI:function(){var e=this,t=e.get("picker"),i=t.get("list"),r=t.get("textField");n(r).on("keyup",function(){var e=i.getSelected();e&&i.clearItemStatus(e)}),t.on("show",function(){i.clearSelected()})},_uiSetValueField:function(){},getTrigger:function(){return this._getTextEl()}},{ATTRS:{tpl:{view:!0,value:'<input type="text" class="'+u+'"/>'},inputCls:{value:u},autoSetValue:{value:!1}}},{xclass:"combox"});i.exports=s}),define("bui/select/suggest",["jquery","bui/common","bui/select/combox","bui/select/select","bui/select/tag","bui/data","bui/list","bui/overlay","bui/picker"],function(e,t,i){"use strict";var n=e("jquery"),r=e("bui/common"),o=e("bui/select/combox"),a=200,u="",s=o.extend({bindUI:function(){var e=this,t=e.get("el").find("input"),i="keyup"===e.get("triggerEvent")?"keyup":"keyup click";t.on(i,function(){e._start()})},_start:function(){var e=this;e._timer=e.later(function(){e._updateContent()},a)},_updateContent:function(){var e,t=this,i=t.get("data"),n=t.get("el").find("input");if((i||n.val()!==t.get("query"))&&(t.set("query",n.val()),e=n.val(),i||e)){var r=t.get("cacheable"),o=t.get("url"),a=t.get("data");if(r&&o){var u=t.get("dataCache");void 0!==u[e]?t._handleResponse(u[e]):t._requestData()}else o?t._requestData():a&&t._handleResponse(a,!0)}},_getStore:function(){var e=this,t=e.get("picker"),i=t.get("list");return i?i.get("store"):void 0},_requestData:function(){var e=this,t=e.get("el").find("input"),i=e.get("callback"),r=e.get("store"),o={};o[t.attr("name")]=t.val(),r?(o.start=0,r.load(o,i)):n.ajax({url:e.get("url"),type:"post",dataType:e.get("dataType"),data:o,success:function(t){e._handleResponse(t),i&&i(t)}})},_handleResponse:function(e,t){var i=this,n=t?i._getFilterItems(e):e;i.set("items",n),i.get("cacheable")&&(i.get("dataCache")[i.get("query")]=n)},_getItemText:function(e){var t=this,i=t.get("picker"),n=i.get("list");return n?n.getItemText(e):""},_getFilterItems:function(e){function t(e,t){o.push(r.isString(t)?e:t)}var i=this,o=[],a=i.get("el").find("input"),u=a.val(),s=i.get("data");return e=e||[],r.each(e,function(e){var o=r.isString(e)?e:i._getItemText(e);s?-1!==o.indexOf(n.trim(u))&&t(o,e):t(o,e)}),o},later:function(e,t,i){t=t||0;var n=i?setInterval(e,t):setTimeout(e,t);return{id:n,interval:i,cancel:function(){this.interval?clearInterval(n):clearTimeout(n)}}}},{ATTRS:{data:{value:null},query:{value:u},cacheable:{value:!1},dataCache:{shared:!1,value:{}},dataType:{value:"jsonp"},url:{},callback:{},triggerEvent:{valueFn:function(){return this.get("data")?"click":"keyup"}},autoSetValue:{value:!1}}},{xclass:"suggest"});i.exports=s}),define("bui/select/tag",["jquery","bui/common","bui/data","bui/list"],function(e,t,i){var n=e("jquery"),r=e("bui/common"),o=e("bui/list"),a=r.KeyCode,u="warn",s=function(){};s.ATTRS={showTag:{value:!1},tagItemTpl:{value:"<li>{value}<button>\xd7</button></li>"},tagList:{value:null},tagPlaceholder:{value:"\u8f93\u5165\u6807\u7b7e"},separator:{value:";"}},r.augment(s,{__renderUI:function(){var e=this,t=e.get("showTag"),i=e.get("tagPlaceholder"),n=e.getTagInput();t&&!n.attr("placeholder")&&(n.attr("placeholder",i),e.set("inputForceFit",!1))},__bindUI:function(){var e=this,t=e.get("showTag"),i=e.getTagInput();t&&(i.on("keydown",function(t){if(!i.val()){var n=e.get("tagList"),r=n.getLastItem(),o=e.get("picker");t.which==a.DELETE||t.which==a.BACKSPACE?(n.hasStatus(r,u)?e._delTag(r):n.setItemStatus(r,u,!0),o.hide()):n.setItemStatus(r,u,!1)}}),i.on("change",function(){setTimeout(function(){var t=i.val();t&&e._addTag(t)})}))},__syncUI:function(){var e=this,t=e.get("showTag"),i=e.get("valueField");t&&i&&e._setTags(n(i).val())},_setTags:function(e){var t=this,i=t.get("tagList"),n=t.get("separator"),o=e.split(n);i||(i=t._initTagList()),e&&r.each(o,function(e){i.addItem({value:e})
})},_addTag:function(e){var t=this,i=t.get("tagList"),n=t.getTagInput(),r=i.getItem(e);r?t._blurItem(i,r):(i.addItem({value:e}),t._synTagsValue()),n.val("")},_blurItem:function(e,t){e.setItemStatus(t,"active",!0),setTimeout(function(){e.setItemStatus(t,"active",!1)},400)},_delTag:function(e){var t=this,i=t.get("tagList");i.removeItem(e),t._synTagsValue()},getTagsValue:function(){var e=this,t=e.get("tagList"),i=t.getItems(),n=[];return r.each(i,function(e){n.push(e.value)}),n.join(e.get("separator"))},_initTagList:function(){var e=this,t=e.getTagInput(),i=new o.SimpleList({elBefore:t,itemTpl:e.get("tagItemTpl"),idField:"value"});return i.render(),e._initTagEvent(i),e.set("tagList",i),i},_initTagEvent:function(e){var t=this;e.on("itemclick",function(e){var i=n(e.domTarget);i.is("button")&&t._delTag(e.item)})},getTagInput:function(){var e=this,t=e.get("el");return t.is("input")?t:t.find("input")},_synTagsValue:function(){var e=this,t=e.get("valueField");t&&n(t).val(e.getTagsValue())}}),i.exports=s}),define("bui/form",["jquery","bui/common","bui/form/tips","bui/form/fieldcontainer","bui/form/form","bui/form/row","bui/form/fieldgroup","bui/form/hform","bui/form/rules","bui/form/field","bui/overlay","bui/form/groupvalid","bui/form/fields/base","bui/form/fields/text","bui/form/fields/date","bui/form/fields/select","bui/form/fields/hidden","bui/form/fields/number","bui/form/fields/check","bui/form/fields/radio","bui/form/fields/checkbox","bui/form/fields/plain","bui/form/fields/list","bui/form/fields/textarea","bui/form/fields/uploader","bui/form/fields/checklist","bui/form/fields/radiolist","bui/form/valid","bui/form/remote","bui/form/rule","bui/data","bui/list","bui/form/group/base","bui/form/group/range","bui/form/group/check","bui/form/group/select"],function(e,t,i){var n=e("bui/common"),r=n.namespace("Form"),o=e("bui/form/tips");n.mix(r,{Tips:o,TipItem:o.Item,FieldContainer:e("bui/form/fieldcontainer"),Form:e("bui/form/form"),Row:e("bui/form/row"),Group:e("bui/form/fieldgroup"),HForm:e("bui/form/hform"),Rules:e("bui/form/rules"),Field:e("bui/form/field"),FieldGroup:e("bui/form/fieldgroup")}),i.exports=r}),define("bui/form/tips",["jquery","bui/common","bui/overlay"],function(e,t,i){var n=e("jquery"),r=e("bui/common"),o=r.prefix,a=e("bui/overlay").Overlay,u="data-tip",s=o+"form-tip-container",l=a.extend({initializer:function(){var e=this,t=e.get("render");if(!t){var i=n(e.get("trigger")).parent();e.set("render",i)}},renderUI:function(){var e=this;e.resetVisible()},resetVisible:function(){var e=this,t=n(e.get("trigger"));t.val()?e.set("visible",!1):(e.set("align",{node:n(e.get("trigger")),points:["cl","cl"]}),e.set("visible",!0))},bindUI:function(){var e=this,t=n(e.get("trigger"));e.get("el").on("click",function(){e.hide(),t.focus()}),t.on("click focus",function(){e.hide()}),t.on("blur",function(){e.resetVisible()})}},{ATTRS:{trigger:{},text:{},iconCls:{},tpl:{value:'<span class="{iconCls}"></span><span class="tip-text">{text}</span>'}}},{xclass:"form-tip"}),c=function(e){return this.constructor!==c?new c(e):(c.superclass.constructor.call(this,e),void this._init())};c.ATTRS={form:{},items:{valueFn:function(){return[]}}},r.extend(c,r.Base),r.augment(c,{_init:function(){var e=this,t=n(e.get("form"));t.length&&(r.each(n.makeArray(t[0].elements),function(t){var i=n(t).attr(u);i&&e._initFormElement(t,n.parseJSON(i))}),t.addClass(s))},_initFormElement:function(e,t){t&&(t.trigger=e);var i=this,n=i.get("items"),r=new l(t);n.push(r)},getItem:function(e){var t=this,i=t.get("items"),o=null;return r.each(i,function(t){return n(t.get("trigger")).attr("name")===e?(o=t,!1):void 0}),o},resetVisible:function(){var e=this,t=e.get("items");r.each(t,function(e){e.resetVisible()})},render:function(){var e=this,t=e.get("items");r.each(t,function(e){e.render()})},destroy:function(){var e=this,t=e.get(t);r.each(t,function(e){e.destroy()})}}),c.Item=l,i.exports=c}),define("bui/form/fieldcontainer",["jquery","bui/common","bui/form/field","bui/form/groupvalid","bui/form/fields/base","bui/form/fields/text","bui/form/fields/date","bui/form/fields/select","bui/form/fields/hidden","bui/form/fields/number","bui/form/fields/check","bui/form/fields/radio","bui/form/fields/checkbox","bui/form/fields/plain","bui/form/fields/list","bui/form/fields/textarea","bui/form/fields/uploader","bui/form/fields/checklist","bui/form/fields/radiolist","bui/form/tips","bui/form/valid","bui/form/remote","bui/overlay","bui/form/rules","bui/form/rule","bui/data","bui/list"],function(e,t,i){function n(e){return e.is(m)}function r(e,t){if(e!=t){if(n(e))return[e];var i=e.attr("class");if(i&&(-1!==i.indexOf(f)||-1!==i.indexOf(d)))return[e]}var u=[],s=e.children();return a.each(s,function(e){u=u.concat(r(o(e),t))}),u}var o=e("jquery"),a=e("bui/common"),u=e("bui/form/field"),s=e("bui/form/groupvalid"),l=a.prefix,c="form-field",d=l+c,f=l+"form-group",m="input,select,textarea",g=a.Component.View.extend([s.View]),h=a.Component.Controller.extend([s],{syncUI:function(){var e=this,t=e.getFields(),i=e.get("validators");a.each(t,function(e){var t=e.get("name");i[t]&&e.set("validator",i[t])}),a.each(i,function(t,i){if(0==i.indexOf("#")){var n=i.replace("#",""),r=e.getChild(n,!0);r&&r.set("validator",t)}})},getDecorateElments:function(){var e=this,t=e.get("el"),i=r(t,t);return i},findXClassByNode:function(e,t){return"checkbox"===e.attr("type")?c+"-checkbox":"radio"===e.attr("type")?c+"-radio":"number"===e.attr("type")?c+"-number":e.hasClass("calendar")?c+"-date":"SELECT"==e[0].tagName?c+"-select":n(e)?c:a.Component.Controller.prototype.findXClassByNode.call(this,e,t)},getRecord:function(){var e=this,t={},i=e.getFields();return a.each(i,function(i){var n=i.get("name"),r=e._getFieldValue(i);if(t[n]){if(a.isArray(t[n])&&null!=r)t[n].push(r);else if(null!=r){var o=[t[n]];o.push(r),t[n]=o}}else t[n]=r}),t},getFields:function(e){var t=this,i=[],n=t.get("children");return a.each(n,function(t){t instanceof u?e&&t.get("name")!=e||i.push(t):t.getFields&&(i=i.concat(t.getFields(e)))}),i},getField:function(e){var t=this,i=t.getFields(),n=null;return a.each(i,function(t){return t.get("name")===e?(n=t,!1):void 0}),n},getFieldAt:function(e){return this.getFields()[e]},setFieldValue:function(e,t){var i=this,n=i.getFields(e);a.each(n,function(e){i._setFieldValue(e,t)})},_setFieldValue:function(e,t){if(!e.get("disabled"))if(e instanceof u.Check){var i=e.get("value");t&&(i===t||a.isArray(t)&&a.Array.contains(i,t))?e.set("checked",!0):e.set("checked",!1)}else null==t&&(t=""),e.clearErrors(!0),e.set("value",t)},getFieldValue:function(e){var t=this,i=t.getFields(e),n=[];return a.each(i,function(e){var i=t._getFieldValue(e);i&&n.push(i)}),0===n.length?null:1===n.length?n[0]:n},_getFieldValue:function(e){return e instanceof u.Check&&!e.get("checked")?null:e.get("value")},clearFields:function(){this.clearErrors(!0),this.setRecord({})},setRecord:function(e){var t=this,i=t.getFields();a.each(i,function(i){var n=i.get("name");t._setFieldValue(i,e[n])})},updateRecord:function(e){var t=this,i=t.getFields();a.each(i,function(i){var n=i.get("name");e.hasOwnProperty(n)&&t._setFieldValue(i,e[n])})},focus:function(){var e=this,t=e.getFields(),i=t[0];i&&i.focus()},_uiSetDisabled:function(e){var t=this,i=t.get("children");a.each(i,function(t){t.set("disabled",e)})}},{ATTRS:{record:{setter:function(e){this.setRecord(e)},getter:function(){return this.getRecord()}},validators:{value:{}},defaultLoaderCfg:{value:{property:"children",dataType:"json"}},disabled:{sync:!1},isDecorateChild:{value:!0},xview:{value:g}}},{xclass:"form-field-container"});h.View=g,i.exports=h}),define("bui/form/form",["jquery","bui/common","bui/form/fieldcontainer","bui/form/field","bui/form/groupvalid","bui/form/fields/base","bui/form/fields/text","bui/form/fields/date","bui/form/fields/select","bui/form/fields/hidden","bui/form/fields/number","bui/form/fields/check","bui/form/fields/radio","bui/form/fields/checkbox","bui/form/fields/plain","bui/form/fields/list","bui/form/fields/textarea","bui/form/fields/uploader","bui/form/fields/checklist","bui/form/fields/radiolist","bui/form/tips","bui/form/valid","bui/form/remote","bui/overlay","bui/form/rules","bui/form/rule","bui/data","bui/list"],function(e,t,i){var n=e("jquery"),r=e("bui/common"),o=e("bui/form/fieldcontainer"),a=(r.Component,{NORMAL:"normal",AJAX:"ajax",IFRAME:"iframe"}),u=o.View.extend({_uiSetMethod:function(e){this.get("el").attr("method",e)},_uiSetAction:function(e){this.get("el").attr("action",e)}},{ATTRS:{method:{},action:{}}},{xclass:"form-view"}),s=o.extend({renderUI:function(){var e,t=this,i=t.get("buttonBar");n.isPlainObject(i)&&t.get("buttons")&&(e=r.merge(t.getDefaultButtonBarCfg(),i),t._initButtonBar(e)),t._initSubmitMask()},_initButtonBar:function(t){var i=this;e.async("bui/toolbar",function(e){buttonBar=new e.Bar(t),i.set("buttonBar",buttonBar)})},bindUI:function(){var e=this,t=e.get("el");t.on("submit",function(t){return e.valid(),e.isValid()&&e.onBeforeSubmit()!==!1?void(e.isValid()&&e.get("submitType")===a.AJAX&&(t.preventDefault(),e.ajaxSubmit())):(t.preventDefault(),void e.focusError())})},getDefaultButtonBarCfg:function(){var e=this,t=e.get("buttons");return{autoRender:!0,elCls:"toolbar",render:e.get("el"),items:t,defaultChildClass:"bar-item-button"}},focusError:function(){var e=this,t=e.getFields();r.each(t,function(e){if(e.get("visible")&&!e.get("disabled")&&!e.isValid()){try{e.focus()}catch(t){r.log(t)}return!1}})},submit:function(e){var t=this,i=t.get("submitType");if(t.valid(),t.isValid()){if(0==t.onBeforeSubmit())return;i===a.NORMAL?t.get("el")[0].submit():i===a.AJAX&&t.ajaxSubmit(e)}else t.focusError()},ajaxSubmit:function(e){var t,i=this,o=i.get("method"),a=i.get("action"),u=i.get("callback"),s=i.get("submitMask"),l=i.serializeToObject(),c=r.merge(!0,{url:a,type:o,dataType:"json",data:l},e);e&&e.success&&(t=e.success),c.success=function(e){s&&s.hide&&s.hide(),t&&t(e),u&&u.call(i,e)},s&&s.show&&s.show(),n.ajax(c)},_initSubmitMask:function(){var e=this,t=e.get("submitType"),i=e.get("submitMask");t===a.AJAX&&i&&r.use("bui/mask",function(t){var o=n.isPlainObject(i)?i:{};i=new t.LoadMask(r.mix({el:e.get("el")},o)),e.set("submitMask",i)})},serializeToObject:function(){return r.FormHelper.serializeToObject(this.get("el")[0])},toObject:function(){return this.serializeToObject()},onBeforeSubmit:function(){return this.fire("beforesubmit")},reset:function(){var e=this,t=e.get("initRecord");e.setRecord(t)},resetTips:function(){var e=this,t=e.getFields();r.each(t,function(e){e.resetTip()})},destructor:function(){var e=this,t=e.get("buttonBar"),i=e.get("submitMask");t&&t.destroy&&t.destroy(),i&&i.destroy&&i.destroy()},_uiSetInitRecord:function(e){this.setRecord(e)}},{ATTRS:{action:{view:!0,value:""},allowTextSelection:{value:!0},events:{value:{beforesubmit:!1}},method:{view:!0,value:"get"},defaultLoaderCfg:{value:{autoLoad:!0,property:"record",dataType:"json"}},submitMask:{value:{msg:"\u6b63\u5728\u63d0\u4ea4\u3002\u3002\u3002"}},submitType:{value:"normal"},focusError:{value:!0},callback:{},decorateCfgFields:{value:{method:!0,action:!0}},defaultChildClass:{value:"form-field"},elTagName:{value:"form"},buttons:{},buttonBar:{shared:!1,value:{}},childContainer:{value:".x-form-fields"},initRecord:{},showError:{value:!1},xview:{value:u},tpl:{value:'<div class="x-form-fields"></div>'}}},{xclass:"form"});s.View=u,i.exports=s}),define("bui/form/row",["jquery","bui/common","bui/form/fieldcontainer","bui/form/field","bui/form/groupvalid","bui/form/fields/base","bui/form/fields/text","bui/form/fields/date","bui/form/fields/select","bui/form/fields/hidden","bui/form/fields/number","bui/form/fields/check","bui/form/fields/radio","bui/form/fields/checkbox","bui/form/fields/plain","bui/form/fields/list","bui/form/fields/textarea","bui/form/fields/uploader","bui/form/fields/checklist","bui/form/fields/radiolist","bui/form/tips","bui/form/valid","bui/form/remote","bui/overlay","bui/form/rules","bui/form/rule","bui/data","bui/list"],function(e,t,i){var n=(e("bui/common"),e("bui/form/fieldcontainer")),r=n.extend({},{ATTRS:{elCls:{value:"row"},defaultChildCfg:{value:{tpl:' <label class="control-label">{label}</label>              <div class="controls">              </div>',childContainer:".controls",showOneError:!0,controlContainer:".controls",elCls:"control-group span8",errorTpl:'<span class="valid-text"><span class="estate error"><span class="x-icon x-icon-mini x-icon-error">!</span><em>{error}</em></span></span>'}},defaultChildClass:{value:"form-field-text"}}},{xclass:"form-row"});i.exports=r}),define("bui/form/fieldgroup",["jquery","bui/common","bui/form/group/base","bui/form/group/range","bui/form/group/check","bui/form/group/select","bui/form/fieldcontainer","bui/form/field","bui/form/groupvalid","bui/form/fields/base","bui/form/fields/text","bui/form/fields/date","bui/form/fields/select","bui/form/fields/hidden","bui/form/fields/number","bui/form/fields/check","bui/form/fields/radio","bui/form/fields/checkbox","bui/form/fields/plain","bui/form/fields/list","bui/form/fields/textarea","bui/form/fields/uploader","bui/form/fields/checklist","bui/form/fields/radiolist","bui/form/tips","bui/form/valid","bui/form/remote","bui/overlay","bui/form/rules","bui/form/rule","bui/data","bui/list"],function(e){var t=e("bui/common"),i=e("bui/form/group/base");return t.mix(i,{Range:e("bui/form/group/range"),Check:e("bui/form/group/check"),Select:e("bui/form/group/select")}),i}),define("bui/form/hform",["jquery","bui/common","bui/form/form","bui/form/fieldcontainer","bui/form/field","bui/form/groupvalid","bui/form/fields/base","bui/form/fields/text","bui/form/fields/date","bui/form/fields/select","bui/form/fields/hidden","bui/form/fields/number","bui/form/fields/check","bui/form/fields/radio","bui/form/fields/checkbox","bui/form/fields/plain","bui/form/fields/list","bui/form/fields/textarea","bui/form/fields/uploader","bui/form/fields/checklist","bui/form/fields/radiolist","bui/form/tips","bui/form/valid","bui/form/remote","bui/overlay","bui/form/rules","bui/form/rule","bui/data","bui/list"],function(e,t,i){var n=(e("jquery"),e("bui/common"),e("bui/form/form")),r=n.extend({getDefaultButtonBarCfg:function(){var e=this,t=e.get("buttons");return{autoRender:!0,elCls:"actions-bar toolbar row",tpl:'<div class="form-actions span21 offset3"></div>',childContainer:".form-actions",render:e.get("el"),items:t,defaultChildClass:"bar-item-button"}}},{ATTRS:{defaultChildClass:{value:"form-row"},errorTpl:{value:'<span class="valid-text"><span class="estate error"><span class="x-icon x-icon-mini x-icon-error">!</span><em>{error}</em></span></span>'},elCls:{value:"form-horizontal"}},PARSER:{}},{xclass:"form-horizontal"});i.exports=r}),define("bui/form/rules",["jquery","bui/form/rule","bui/common"],function(e,t,i){function n(e){return parseFloat(e)}function r(e){return BUI.Date.parse(e)}function o(e,t,i){var n=e&&e.equals!==!1;return n?t>=i:t>i}function a(e){return""==e||null==e}function u(e,t,i,n){for(var r=n.getFields(),u=!0,s=1;s<r.length;s++){var l,c,d=r[s],f=r[s-1];if(d&&f&&(l=d.get("value"),c=f.get("value"),!a(l)&&!a(c)&&!o(t,l,c))){u=!1;break}}return u?null:i}function s(e){var t=e.getFieldAt(0);return t?t.get("name"):""}function l(e,t){if(BUI.isArray(t)||(t=[t]),!e||!t.length)return!1;var i=e?BUI.isArray(e)?e.length:1:0;if(1==t.length){var n=t[0];if(!n)return!0;if(n>i)return!1}else{var r=t[0],o=t[1];if(r>i||i>o)return!1}return!0}{var c=e("jquery"),d=e("bui/form/rule"),f={},m={add:function(e){var t;return c.isPlainObject(e)?(t=e.name,f[t]=new d(e)):e.get&&(t=e.get("name"),f[t]=e),f[t]},remove:function(e){delete f[e]},get:function(e){return f[e]},valid:function(e,t,i,n,r){var o=m.get(e);return o?o.valid(t,i,n,r):null},isValid:function(e,t,i,n){return null==m.valid(e,t,i,n)}};m.add({name:"required",msg:"\u4e0d\u80fd\u4e3a\u7a7a\uff01",validator:function(e,t,i){return t!==!1&&/^\s*$/.test(e)?i:void 0}}),m.add({name:"equalTo",msg:"\u4e24\u6b21\u8f93\u5165\u4e0d\u4e00\u81f4\uff01",validator:function(e,t,i){var n=c(t);return n.length&&(t=n.val()),e===t?void 0:i}}),m.add({name:"min",msg:"\u8f93\u5165\u503c\u4e0d\u80fd\u5c0f\u4e8e{0}\uff01",validator:function(e,t,i){return BUI.isString(e)&&(e=e.replace(/\,/g,"")),""!==e&&n(e)<n(t)?i:void 0}}),m.add({name:"max",msg:"\u8f93\u5165\u503c\u4e0d\u80fd\u5927\u4e8e{0}\uff01",validator:function(e,t,i){return BUI.isString(e)&&(e=e.replace(/\,/g,"")),""!==e&&n(e)>n(t)?i:void 0}}),m.add({name:"length",msg:"\u8f93\u5165\u503c\u957f\u5ea6\u4e3a{0}\uff01",validator:function(e,t,i){return null!=e&&(e=c.trim(e.toString()),t!=e.length)?i:void 0}}),m.add({name:"minlength",msg:"\u8f93\u5165\u503c\u957f\u5ea6\u4e0d\u5c0f\u4e8e{0}\uff01",validator:function(e,t,i){if(null!=e){e=c.trim(e.toString());var n=e.length;if(t>n)return i}}}),m.add({name:"maxlength",msg:"\u8f93\u5165\u503c\u957f\u5ea6\u4e0d\u5927\u4e8e{0}\uff01",validator:function(e,t,i){if(e){e=c.trim(e.toString());var n=e.length;if(n>t)return i}}}),m.add({name:"regexp",msg:"\u8f93\u5165\u503c\u4e0d\u7b26\u5408{0}\uff01",validator:function(e,t,i){return t?t.test(e)?void 0:i:void 0}}),m.add({name:"email",msg:"\u4e0d\u662f\u6709\u6548\u7684\u90ae\u7bb1\u5730\u5740\uff01",validator:function(e,t,i){return e=c.trim(e),e?/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e)?void 0:i:void 0}}),m.add({name:"date",msg:"\u4e0d\u662f\u6709\u6548\u7684\u65e5\u671f\uff01",validator:function(e,t,i){return BUI.isNumber(e)||BUI.isDate(e)?void 0:(e=c.trim(e),e?BUI.Date.isDateString(e)?void 0:i:void 0)}}),m.add({name:"minDate",msg:"\u8f93\u5165\u65e5\u671f\u4e0d\u80fd\u5c0f\u4e8e{0}\uff01",validator:function(e,t,i){if(e){var n=r(e);if(n&&n<r(t))return i}}}),m.add({name:"maxDate",msg:"\u8f93\u5165\u65e5\u671f\u4e0d\u80fd\u5927\u4e8e{0}\uff01",validator:function(e,t,i){if(e){var n=r(e);if(n&&n>r(t))return i}}}),m.add({name:"mobile",msg:"\u4e0d\u662f\u6709\u6548\u7684\u624b\u673a\u53f7\u7801\uff01",validator:function(e,t,i){return e=c.trim(e),e?/^\d{11}$/.test(e)?void 0:i:void 0}}),m.add({name:"number",msg:"\u4e0d\u662f\u6709\u6548\u7684\u6570\u5b57\uff01",validator:function(e,t,i){return BUI.isNumber(e)?void 0:(e=e.replace(/\,/g,""),isNaN(e)?i:void 0)}}),m.add({name:"dateRange",msg:"\u7ed3\u675f\u65e5\u671f\u4e0d\u80fd\u5c0f\u4e8e\u8d77\u59cb\u65e5\u671f\uff01",validator:u}),m.add({name:"numberRange",msg:"\u7ed3\u675f\u6570\u5b57\u4e0d\u80fd\u5c0f\u4e8e\u5f00\u59cb\u6570\u5b57\uff01",validator:u}),m.add({name:"checkRange",msg:"\u5fc5\u987b\u9009\u4e2d{0}\u9879\uff01",validator:function(e,t,i,n){var r,o=s(n),a=t;return o&&a&&(r=e[o],!l(r,a))?i:null}})}i.exports=m}),define("bui/form/field",["jquery","bui/common","bui/form/fields/base","bui/form/fields/text","bui/form/fields/date","bui/form/fields/select","bui/form/fields/hidden","bui/form/fields/number","bui/form/fields/check","bui/form/fields/radio","bui/form/fields/checkbox","bui/form/fields/plain","bui/form/fields/list","bui/form/fields/textarea","bui/form/fields/uploader","bui/form/fields/checklist","bui/form/fields/radiolist","bui/form/tips","bui/form/valid","bui/form/remote","bui/overlay","bui/form/rules","bui/form/rule","bui/data","bui/list"],function(e,t,i){var n=e("bui/common"),r=e("bui/form/fields/base");n.mix(r,{Text:e("bui/form/fields/text"),Date:e("bui/form/fields/date"),Select:e("bui/form/fields/select"),Hidden:e("bui/form/fields/hidden"),Number:e("bui/form/fields/number"),Check:e("bui/form/fields/check"),Radio:e("bui/form/fields/radio"),Checkbox:e("bui/form/fields/checkbox"),Plain:e("bui/form/fields/plain"),List:e("bui/form/fields/list"),TextArea:e("bui/form/fields/textarea"),Uploader:e("bui/form/fields/uploader"),CheckList:e("bui/form/fields/checklist"),RadioList:e("bui/form/fields/radiolist")}),i.exports=r}),define("bui/form/groupvalid",["jquery","bui/form/valid","bui/common","bui/form/rules","bui/form/rule"],function(e,t,i){function n(){}function r(){}var o=e("jquery"),a="x-form-error",u=e("bui/form/valid");BUI.augment(n,u.View,{showError:function(e,t,i){var n=BUI.substitute(t,{error:e}),r=o(n);r.appendTo(i),r.addClass(a)},clearErrors:function(){var e=this,t=e.getErrorsContainer();t.children("."+a).remove()}}),r.ATTRS=ATTRS=BUI.merge(!0,u.ATTRS,{events:{value:{validchange:!0,change:!0}}}),BUI.augment(r,u,{__bindUI:function(){var e=this,t="validchange change";e.on(t,function(t){var i=t.target;if(i!=this&&e.get("showError")){var n=i.isValid();e._hasAllChildrenValid()&&(n=n&&e.isChildrenValid(),n&&(e.validControl(e.getRecord()),n=e.isSelfValid())),n?e.clearErrors():e.showErrors()}})},isValid:function(){if(this.get("disabled"))return!0;var e=this,t=e.isChildrenValid();return t&&e.isSelfValid()},valid:function(){var e=this,t=e.get("children");e.get("disabled")||BUI.each(t,function(e){e.get("disabled")||e.valid()})},_hasAllChildrenValid:function(){var e=this,t=e.get("children"),i=!0;return BUI.each(t,function(e){return e.get("disabled")||e.get("hasValid")!==!1?void 0:(i=!1,!1)}),i},isChildrenValid:function(){var e=this,t=e.get("children"),i=!0;return BUI.each(t,function(e){return e.get("disabled")||e.isValid()?void 0:(i=!1,!1)}),i},isSelfValid:function(){return!this.get("error")},validControl:function(e){var t=this,i=t.getValidError(e);t.set("error",i)},getErrors:function(){var e=this,t=e.get("children"),i=e.get("showChildError"),n=null,r=[];return i&&BUI.each(t,function(e){e.getErrors&&(r=r.concat(e.getErrors()))}),e._hasAllChildrenValid()&&e.isChildrenValid()&&(n=e.get("error"),n&&r.push(n)),r},_uiSetErrorTpl:function(e){var t=this,i=t.get("children");BUI.each(i,function(t){t.get("userConfig").errorTpl||t.set("errorTpl",e)})}}),r.View=n,i.exports=r}),define("bui/form/fields/base",["jquery","bui/common","bui/form/tips","bui/form/valid","bui/form/remote","bui/overlay","bui/form/rules","bui/form/rule"],function(e,t,i){var n=e("jquery"),r=e("bui/common"),o=r.Component,a=e("bui/form/tips").Item,u=e("bui/form/valid"),s=e("bui/form/remote"),l=r.prefix+"form-field-error",c="bui-form-tip-container",d=o.View.extend([s.View,u.View],{renderUI:function(){var e=this,t=e.get("control");if(t)e.set("controlContainer",t.parent());else{var i=e.get("controlTpl"),r=e.getControlContainer();if(i){var t=n(i).appendTo(r);e.set("control",t)}}},clearErrors:function(){var e=this,t=e.get("msgEl");t&&(t.remove(),e.set("msgEl",null)),e.get("el").removeClass(l)},showError:function(e,t){var i=this,o=i.get("control"),a=r.substitute(t,{error:e}),u=n(a);u.appendTo(o.parent()),i.set("msgEl",u),i.get("el").addClass(l)},getControlContainer:function(){var e=this,t=e.get("el"),i=e.get("controlContainer");return i&&r.isString(i)&&(i=t.find(i)),i&&i.length?i:t},getLoadingContainer:function(){return this.getControlContainer()},_uiSetName:function(e){var t=this;t.get("control").attr("name",e)}},{ATTRS:{error:{},controlContainer:{},msgEl:{},control:{}}}),f=o.Controller.extend([s,u],{isField:!0,initializer:function(){var e=this;e.on("afterRenderUI",function(){var t=e.get("tip");if(t){var i=e.getTipTigger();i&&i.parent().addClass(c),t.trigger=i,t.autoRender=!0,t=new a(t),e.set("tip",t)}})},bindUI:function(){var e=this,t=e.get("validEvent"),i=e.get("changeEvent"),n=e.get("firstValidEvent"),r=e.getInnerControl();r.is("select")&&(t="change"),r.on(t,function(){var t=e.getControlValue(r);e.validControl(t)}),n&&r.on(n,function(){if(!e.get("hasValid")){var t=e.getControlValue(r);e.validControl(t)}}),e.on(i,function(){e.onValid()}),e.on("remotecomplete",function(t){e._setError(t.error)})},onValid:function(){var e=this,t=e.getControlValue();t=e.parseValue(t),e.isCurrentValue(t)||(e.setInternal("value",t),e.onChange())},onChange:function(){this.fire("change")},isCurrentValue:function(e){return e==this.get("value")},_clearError:function(){this.set("error",null),this.get("view").clearErrors()},_setError:function(e){this.set("error",e),this.showErrors()},getControlValue:function(e){var t=this;return e=e||t.getInnerControl(),e.val()},getControlContainer:function(){return this.get("view").getControlContainer()},getRemoteParams:function(){var e=this,t={};return t[e.get("name")]=e.getControlValue(),t},setControlValue:function(e){var t=this,i=t.getInnerControl();i.val(e)},parseValue:function(e){return e},valid:function(){var e=this;e.validControl()},validControl:function(e){var t,i=this;return e=e||i.getControlValue(),preError=i.get("error"),t=i.getValidError(e),i.setInternal("hasValid",!0),t?(i._setError(t),i.fire("error",{msg:t,value:e}),preError!==t&&i.fire("validchange",{valid:!1})):(i._clearError(),i.fire("valid"),preError&&i.fire("validchange",{valid:!0})),!t},focus:function(){this.getInnerControl().focus()},change:function(){var e=this.getInnerControl();e.change()},blur:function(){this.getInnerControl().blur()},isValid:function(){var e=this;return e.get("hasValid")||e.validControl(),!e.get("error")},getError:function(){return this.get("error")},getErrors:function(){var e=this.getError();return e?[e]:[]},clearErrors:function(e){var t=this;t._clearError(),e&&t.getControlValue()!=t.get("value")&&t.setControlValue(t.get("value"))},getInnerControl:function(){return this.get("view").get("control")},getTipTigger:function(){return this.getInnerControl()},destructor:function(){var e=this,t=e.get("tip");t&&t.destroy&&t.destroy()},setInnerWidth:function(e){var t=this,i=t.getInnerControl(),o=i.siblings(),a=i.outerWidth()-i.width();r.each(o,function(e){a+=n(e).outerWidth()}),i.width(e-a)},_resetTip:function(){var e=this,t=e.get("tip");t&&t.resetVisible()},resetTip:function(){this._resetTip()},_uiSetValue:function(e){var t=this;t.setControlValue(e),t.get("rendered")&&(t.validControl(),t.onChange()),t._resetTip()},_uiSetDisabled:function(e){var t=this,i=t.getInnerControl(),n=t.get("children");i.attr("disabled",e),t.get("rendered")&&(e&&t.clearErrors(),e||t.valid()),r.each(n,function(t){t.set("disabled",e)})},_uiSetWidth:function(e){var t=this;null!=e&&t.get("forceFit")&&t.setInnerWidth(e)}},{ATTRS:{hasValid:{value:!1},forceFit:{value:!1},tip:{},changeEvent:{value:"valid"},firstValidEvent:{value:"blur"},validEvent:{value:"keyup change"},name:{view:!0},showError:{view:!0,value:!0},value:{view:!0},label:{},controlContainer:{view:!0},control:{view:!0},controlTpl:{view:!0,value:'<input type="text"/>'},events:{value:{error:!1,valid:!1,change:!0,validchange:!0}},tpl:{value:"<label>{label}</label>"},xview:{value:d}},PARSER:{control:function(e){var t=e.find("input,select,textarea");return t.length?t:e},disabled:function(e){return!!e.attr("disabled")},value:function(e){var t=this,i="select,input,textarea",n=t.get("value");return n||(e.is(i)?(n=e.val(),!n&&e.is("select")&&(n=e.attr("value"))):n=e.find(i).val()),n},name:function(e){var t=this,i="select,input,textarea",n=t.get("name");return n||(n=e.is(i)?e.attr("name"):e.find(i).attr("name")),n}}},{xclass:"form-field"});f.View=d,i.exports=f}),define("bui/form/fields/text",["bui/form/fields/base","jquery","bui/common","bui/form/tips","bui/form/valid","bui/form/remote","bui/overlay","bui/form/rules","bui/form/rule"],function(e,t,i){var n=e("bui/form/fields/base"),r=n.extend({},{xclass:"form-field-text"});i.exports=r}),define("bui/form/fields/date",["jquery","bui/common","bui/form/fields/base","bui/form/tips","bui/form/valid","bui/form/remote","bui/overlay","bui/form/rules","bui/form/rule"],function(e,t,i){var n=e("jquery"),r=e("bui/common"),o=e("bui/form/fields/base"),a=r.Date,u=o.extend({renderUI:function(){var e=this,t=e.get("datePicker");n.isPlainObject(t)&&e.initDatePicker(t),(t.get&&t.get("showTime")||t.showTime)&&e.getInnerControl().addClass("calendar-time")},initDatePicker:function(e){var t=this;seajs.use("bui-calendar",function(i){e.trigger=t.getInnerControl(),e.autoRender=!0,e=new i.DatePicker(e),t.set("datePicker",e),t.set("isCreatePicker",!0),t.get("children").push(e)})},setControlValue:function(e){var t=this,i=t.getInnerControl();r.isDate(e)&&(e=a.format(e,t._getFormatMask())),i.val(e)},_getFormatMask:function(){var e=this,t=e.get("datePicker");return t.showTime||t.get&&t.get("showTime")?"yyyy-mm-dd HH:MM:ss":"yyyy-mm-dd"},parseValue:function(e){return r.isNumber(e)?new Date(e):a.parse(e)},isCurrentValue:function(e){return a.isEquals(e,this.get("value"))},_uiSetMax:function(e){this.addRule("max",e);var t=this,i=t.get("datePicker");i&&(i.set?i.set("maxDate",e):i.maxDate=e)},_uiSetMin:function(e){this.addRule("min",e);var t=this,i=t.get("datePicker");i&&(i.set?i.set("minDate",e):i.minDate=e)}},{ATTRS:{controlTpl:{value:'<input type="text" class="calendar"/>'},defaultRules:{value:{date:!0}},max:{},min:{},value:{setter:function(e){return r.isNumber(e)?new Date(e):e}},datePicker:{shared:!1,value:{}},isCreatePicker:{value:!0}},PARSER:{datePicker:function(e){var t=this,i=t.get("datePicker")||{};return e.hasClass("calendar-time")&&r.mix(i,{showTime:!0}),i}}},{xclass:"form-field-date"});i.exports=u}),define("bui/form/fields/select",["jquery","bui/common","bui/form/fields/base","bui/form/tips","bui/form/valid","bui/form/remote","bui/overlay","bui/form/rules","bui/form/rule"],function(e,t,i){function n(e,t,i){e.children().remove();var n=i.get("emptyText");n&&i.get("showBlank")&&r("",n,e),a.each(t,function(t){r(t.value,t.text,e)})}function r(e,t,i){var n=new Option(t,e),r=i[0].options;r[r.length]=n}var o=e("jquery"),a=e("bui/common"),u=e("bui/form/fields/base"),s=u.extend({renderUI:function(){var e=this,t=e.getInnerControl(),i=e.get("select");e.get("srcNode")&&t.is("select")||o.isPlainObject(i)&&e._initSelect(i)},_initSelect:function(t){{var i=this;i.get("items")}e.async("bui/select",function(e){t.render=i.getControlContainer(),t.valueField=i.getInnerControl(),t.autoRender=!0,t=new e.Select(t),i.set("select",t),i.set("isCreate",!0),i.get("children").push(t),t.on("change",function(){var e=t.getSelectedValue();i.set("value",e)})})},setItems:function(e){var t=this,i=t.get("select");if(o.isPlainObject(e)){var r=[];a.each(e,function(e,t){r.push({value:t,text:e})}),e=r}var u=t.getInnerControl();u.is("select")&&(n(u,e,t),t.setControlValue(t.get("value")),t.getControlValue()||t.setInternal("value","")),i&&(i.set?i.set("items",e):i.items=e)},setControlValue:function(e){var t=this,i=t.get("select"),n=t.getInnerControl();n.val(e),i&&i.set&&i.getSelectedValue()!==e&&i.setSelectedValue(e)},getSelectedText:function(){var e=this,t=e.get("select"),i=e.getInnerControl();if(i.is("select")){var n=i[0],r=n.options[n.selectedIndex];return r?r.text:""}return t.getSelectedText()},getTipTigger:function(){var e=this,t=e.get("select");return t&&t.rendered?t.get("el").find("input"):e.get("el")},_uiSetItems:function(e){e&&this.setItems(e)},setInnerWidth:function(e){var t=this,i=t.getInnerControl(),n=t.get("select"),r=i.outerWidth()-i.width();i.width(e-r),n&&n.set&&n.set("width",e)}},{ATTRS:{items:{},controlTpl:{value:'<input type="hidden"/>'},showBlank:{value:!0},emptyText:{value:"\u8bf7\u9009\u62e9"},select:{shared:!1,value:{}}},PARSER:{emptyText:function(e){if(!this.get("showBlank"))return"";var t=e.find("option"),i=this.get("emptyText");return t.length&&(i=o(t[0]).text()),i}}},{xclass:"form-field-select"});i.exports=s}),define("bui/form/fields/hidden",["bui/form/fields/base","jquery","bui/common","bui/form/tips","bui/form/valid","bui/form/remote","bui/overlay","bui/form/rules","bui/form/rule"],function(e,t,i){var n=e("bui/form/fields/base"),r=n.extend({},{ATTRS:{controlTpl:{value:'<input type="hidden"/>'},tpl:{value:""}}},{xclass:"form-field-hidden"});i.exports=r}),define("bui/form/fields/number",["bui/form/fields/base","jquery","bui/common","bui/form/tips","bui/form/valid","bui/form/remote","bui/overlay","bui/form/rules","bui/form/rule"],function(e,t,i){var n=e("bui/form/fields/base"),r=n.extend({parseValue:function(e){if(""==e||null==e)return null;if(BUI.isNumber(e))return e;var t=this,i=t.get("allowDecimals");return e=e.replace(/\,/g,""),i?parseFloat(parseFloat(e).toFixed(t.get("decimalPrecision"))):parseInt(e,10)},_uiSetMax:function(e){this.addRule("max",e)},_uiSetMin:function(e){this.addRule("min",e)}},{ATTRS:{max:{},min:{},decorateCfgFields:{value:{min:!0,max:!0}},validEvent:{value:"keyup change"},defaultRules:{value:{number:!0}},allowDecimals:{value:!0},decimalPrecision:{value:2},step:{value:1}}},{xclass:"form-field-number"});
i.exports=r}),define("bui/form/fields/check",["jquery","bui/form/fields/base","bui/common","bui/form/tips","bui/form/valid","bui/form/remote","bui/overlay","bui/form/rules","bui/form/rule"],function(e,t,i){var n=(e("jquery"),e("bui/form/fields/base")),r=n.extend({onValid:function(){var e=this,t=e._getControlChecked();e.setInternal("checked",t),e.fire("change"),e.fire(t?"checked":"unchecked")},_setControlChecked:function(e){var t=this,i=t.getInnerControl();i.attr("checked",!!e)},_getControlChecked:function(){var e=this,t=e.getInnerControl();return!!t.attr("checked")},_uiSetValue:function(e){this.setControlValue(e)},_uiSetWidth:function(){},_uiSetChecked:function(e){var t=this;t._setControlChecked(e),t.get("rendered")&&t.onValid()}},{ATTRS:{validEvent:{value:"click"},checked:{value:!1},events:{value:{checked:!1,unchecked:!1}}},PARSER:{checked:function(e){return!!e.attr("checked")}}},{xclass:"form-check-field"});i.exports=r}),define("bui/form/fields/radio",["bui/form/fields/check","jquery","bui/form/fields/base","bui/common","bui/form/tips","bui/form/valid","bui/form/remote","bui/overlay","bui/form/rules","bui/form/rule"],function(e,t,i){var n=e("bui/form/fields/check"),r=n.extend({bindUI:function(){var e=this,t=e.get("parent"),i=e.get("name");t&&e.getInnerControl().on("click",function(){var n=t.getFields(i);BUI.each(n,function(t){t!=e&&t.set("checked",!1)})})}},{ATTRS:{controlTpl:{view:!0,value:'<input type="radio"/>'},controlContainer:{value:".radio"},tpl:{value:'<label><span class="radio"></span>{label}</label>'}}},{xclass:"form-field-radio"});i.exports=r}),define("bui/form/fields/checkbox",["bui/form/fields/check","jquery","bui/form/fields/base","bui/common","bui/form/tips","bui/form/valid","bui/form/remote","bui/overlay","bui/form/rules","bui/form/rule"],function(e,t,i){var n=e("bui/form/fields/check"),r=n.extend({},{ATTRS:{controlTpl:{view:!0,value:'<input type="checkbox"/>'},controlContainer:{value:".checkbox"},tpl:{value:'<label><span class="checkbox"></span>{label}</label>'}}},{xclass:"form-field-checkbox"});i.exports=r}),define("bui/form/fields/plain",["jquery","bui/form/fields/base","bui/common","bui/form/tips","bui/form/valid","bui/form/remote","bui/overlay","bui/form/rules","bui/form/rule"],function(e,t,i){var n=e("jquery"),r=e("bui/form/fields/base"),o=r.View.extend({_uiSetValue:function(e){var t,i=this,r=i.get("textEl"),o=i.getControlContainer(),a=i.get("renderer"),u=a?a(e):e,s=i.get("width"),l=0;r&&r.remove(),u=u||"&nbsp;",t=BUI.substitute(i.get("textTpl"),{text:u}),r=n(t).appendTo(o),l=r.outerWidth()-r.width(),r.width(s-l),i.set("textEl",r)}},{ATTRS:{textEl:{},value:{}}},{xclass:"form-field-plain-view"}),a=r.extend({},{ATTRS:{controlTpl:{value:'<input type="hidden"/>'},textTpl:{view:!0,value:'<span class="x-form-text">{text}</span>'},renderer:{view:!0,value:function(e){return e}},tpl:{value:""},xview:{value:o}}},{xclass:"form-field-plain"});i.exports=a}),define("bui/form/fields/list",["jquery","bui/common","bui/data","bui/list","bui/form/fields/base","bui/form/tips","bui/form/valid","bui/form/remote","bui/overlay","bui/form/rules","bui/form/rule"],function(e,t,i){function n(e){var t=e;return r.isPlainObject(e)&&(t=[],o.each(e,function(e,i){t.push({text:e,value:i})})),t}var r=e("jquery"),o=e("bui/common"),a=e("bui/list"),u=e("bui/form/fields/base"),a=u.extend({initializer:function(){var e=this;e._initList()},_getList:function(){var e=this,t=e.get("children");return t[0]},bindUI:function(){var e=this,t=e._getList();t&&t.on("selectedchange",function(){var i=e._getListValue(t);e.set("value",i)})},_getListValue:function(e){var t=this;return e=e||t._getList(),e.getSelectionValues().join(",")},setControlValue:function(e){var t=this,i=t.getInnerControl(),n=t._getList();i.val(e),t._getListValue(n)!==e&&n.getCount()&&(n.get("multipleSelect")&&n.clearSelection(),n.setSelectionByField(e.split(",")))},syncUI:function(){this.set("list",this._getList())},_initList:function(){var e=this,t=e.get("defaultListCfg"),i=e.get("children"),n=e.get("list")||{};i[0]||(r.isPlainObject(n)&&o.mix(n,t),i.push(n))},setItems:function(e){var t=this,i=t.get("value"),r=t._getList();r.set("items",n(e)),r.setSelectionByField(i.split(","))},_uiSetItems:function(e){e&&this.setItems(e)}},{ATTRS:{controlTpl:{value:'<input type="hidden"/>'},defaultListCfg:{value:{xclass:"simple-list"}},items:{setter:function(e){if(r.isPlainObject(e)){var t=[];o.each(e,function(e,i){t.push({value:i,text:e})}),e=t}return e}},list:{}},PARSER:{list:function(e){var t=e.find(".bui-simple-list");return t.length?{srcNode:t}:void 0}}},{xclass:"form-field-list"});i.exports=a}),define("bui/form/fields/textarea",["bui/form/fields/base","jquery","bui/common","bui/form/tips","bui/form/valid","bui/form/remote","bui/overlay","bui/form/rules","bui/form/rule"],function(e,t,i){var n=e("bui/form/fields/base"),r=n.extend({_uiSetRows:function(e){var t=this,i=t.getInnerControl();e&&i.attr("rows",e)},_uiSetCols:function(e){var t=this,i=t.getInnerControl();e&&i.attr("cols",e)}},{ATTRS:{controlTpl:{value:"<textarea></textarea>"},rows:{},cols:{},decorateCfgFields:{value:{rows:!0,cols:!0}}}},{xclass:"form-field-textarea"});i.exports=r}),define("bui/form/fields/uploader",["jquery","bui/common","bui/form/fields/base","bui/form/rules","bui/form/tips","bui/form/valid","bui/form/remote","bui/overlay","bui/form/rule"],function(e,t,i){var n=e("bui/common"),r=n.JSON,o=e("bui/form/fields/base"),a=e("bui/form/rules"),u=o.extend({renderUI:function(){var e=this,t=e.getInnerControl();e.get("srcNode")&&"file"===t.get(0).type||(e._initControlValue(),e._initUpload())},_initUpload:function(){var e=this,t=(e.get("children"),e.get("uploader")||{});n.use("bui/uploader",function(i){t.render=e.getControlContainer(),t.autoRender=!0,t=new i.Uploader(t),e.set("uploader",t),e.set("isCreate",!0),e.get("children").push(t),e._initQueue(t.get("queue")),t.on("success",function(){var t=e._getUploaderResult();e.setControlValue(t)}),t.get("queue").on("itemremoved",function(){var t=e._getUploaderResult();e.setControlValue(t)})})},_getUploaderResult:function(){var e=this,t=e.get("uploader"),i=t.get("queue"),r=i.getItems(),o=[];return n.each(r,function(e){e.result&&o.push(e.result)}),o},setControlValue:function(e){var t=this,i=t.getInnerControl();i.val(r.stringify(e))},_initControlValue:function(){var e,t=this,i=t.getControlValue();i&&(e=n.JSON.parse(i),t.set("value",e))},_initQueue:function(e){var t=this,i=t.get("value"),r=[];n.each(i,function(e){var t=n.cloneObject(e);t.success=!0,t.result=e,r.push(t)}),e&&e.setItems(r)}},{ATTRS:{controlTpl:{value:'<input type="hidden"/>'},uploader:{setter:function(e){var t=this.get("disabled");return e&&e.isController&&e.set("disabled",t),e}},disabled:{setter:function(e){var t=this,i=t.get("uploader");i&&i.isController&&i.set("disabled",e)}},value:{shared:!1,value:[]},defaultRules:function(){}}},{xclass:"form-field-uploader"});a.add({name:"uploader",msg:"\u4e0a\u4f20\u6587\u4ef6\u9009\u62e9\u6709\u8bef\uff01",validator:function(e,t,i,n){var r=n.get("uploader");return r&&!r.isValid()?i:void 0}}),i.exports=u}),define("bui/form/fields/checklist",["jquery","bui/common","bui/form/fields/list","bui/data","bui/list","bui/form/fields/base","bui/form/tips","bui/form/valid","bui/form/remote","bui/overlay","bui/form/rules","bui/form/rule"],function(e,t,i){"use strict";var n=(e("bui/common"),e("bui/form/fields/list")),r=n.extend({},{ATTRS:{defaultListCfg:{value:{itemTpl:'<li><span class="x-checkbox"></span>{text}</li>',multipleSelect:!0,allowTextSelection:!1}}}},{xclass:"form-field-checklist"});i.exports=r}),define("bui/form/fields/radiolist",["jquery","bui/common","bui/form/fields/list","bui/data","bui/list","bui/form/fields/base","bui/form/tips","bui/form/valid","bui/form/remote","bui/overlay","bui/form/rules","bui/form/rule"],function(e,t,i){"use strict";var n=(e("bui/common"),e("bui/form/fields/list")),r=n.extend({},{ATTRS:{defaultListCfg:{value:{itemTpl:'<li><span class="x-radio"></span>{text}</li>',allowTextSelection:!1}}}},{xclass:"form-field-radiolist"});i.exports=r}),define("bui/form/valid",["jquery","bui/common","bui/form/rules","bui/form/rule"],function(e,t,i){var n=e("bui/common"),r=e("bui/form/rules"),o=function(){};o.prototype={getErrorsContainer:function(){var e=this,t=e.get("errorContainer");return t?n.isString(t)?e.get("el").find(t):t:e.getContentElement()},showErrors:function(e){var t=this,i=t.getErrorsContainer(),r=t.get("errorTpl");return t.clearErrors(),t.get("showError")?t.get("showOneError")?void(e&&e.length&&t.showError(e[0],r,i)):void n.each(e,function(e){e&&t.showError(e,r,i)}):void 0},showError:function(){},clearErrors:function(){}};var a=function(){};a.ATTRS={defaultRules:{value:{}},defaultMessages:{value:{}},rules:{shared:!1,value:{}},messages:{shared:!1,value:{}},validator:{},errorContainer:{view:!0},errorTpl:{view:!0,value:'<span class="x-field-error"><span class="x-icon x-icon-mini x-icon-error">!</span><label class="x-field-error-text">{error}</label></span>'},showError:{view:!0,value:!0},showOneError:{},error:{},pauseValid:{value:!1}},a.prototype={__bindUI:function(){var e=this;e.on("afterDisabledChange",function(t){var i=t.newVal;i?e.clearErrors(!1,!1):e.valid()})},isValid:function(){},valid:function(){},validControl:function(){},validRules:function(e,t){if(!e)return null;if(this.get("pauseValid"))return null;var i=this,n=i._getValidMessages(),o=null;for(var a in e)if(e.hasOwnProperty(a)){var u=e[a];if(o=r.valid(a,t,u,n[a],i))break}return o},_getValidMessages:function(){var e=this,t=e.get("defaultMessages"),i=e.get("messages");return n.merge(t,i)},getValidError:function(e){var t=this,i=t.get("validator"),n=null;return n=t.validRules(t.get("defaultRules"),e)||t.validRules(t.get("rules"),e),n||this.get("pauseValid")||(t.parseValue&&(e=t.parseValue(e)),n=i?i.call(this,e):""),n},getErrors:function(){},showErrors:function(e){var t=this,e=e||t.getErrors();t.get("view").showErrors(e)},clearErrors:function(e,t){t=null==t?!0:t;var i=this,r=i.get("children");t&&n.each(r,function(i){i.clearErrors&&(i.field?i.clearErrors(e):i.clearErrors(e,t))}),i.set("error",null),i.get("view").clearErrors()},addRule:function(e,t,i){var n=this,r=n.get("rules"),o=n.get("messages");r[e]=t,i&&(o[e]=i)},addRules:function(e,t){var i=this;n.each(e,function(e,n){var r=t?t[n]:null;i.addRule(n,e,r)})},removeRule:function(e){var t=this,i=t.get("rules");delete i[e]},clearRules:function(){var e=this;e.set("rules",{})}},a.View=o,i.exports=a}),define("bui/form/remote",["jquery","bui/common"],function(e,t,i){var n=e("jquery"),r=e("bui/common"),o=function(){};o.ATTRS={isLoading:{},loadingEl:{}},o.prototype={getLoadingContainer:function(){},_setLoading:function(){var e=this,t=e.get("loadingEl"),i=e.get("loadingTpl");i&&!t&&(t=n(i).appendTo(e.getLoadingContainer()),e.setInternal("loadingEl",t))},_clearLoading:function(){var e=this,t=e.get("loadingEl");t&&(t.remove(),e.setInternal("loadingEl",null))},_uiSetIsLoading:function(e){var t=this;e?t._setLoading():t._clearLoading()}};var a=function(){};a.ATTRS={defaultRemote:{value:{method:"GET",cache:!0,callback:function(e){return e}}},remoteDaly:{value:500},cacheMap:{value:{}},loadingTpl:{view:!0,value:'<img src="http://img02.taobaocdn.com/tps/i2/T1NU8nXCVcXXaHNz_X-16-16.gif" alt="loading"/>'},isLoading:{view:!0,value:!1},remote:{setter:function(e){return r.isString(e)&&(e={url:e}),e}},remoteHandler:{},events:{value:{remotecomplete:!1,remotestart:!1}}},a.prototype={__bindUI:function(){var e=this;e.on("valid",function(){if(e.get("remote")&&e.isValid()&&!e.get("pauseValid")){var t=e.getControlValue(),i=e.getRemoteParams();e._startRemote(i,t)}}),e.on("error",function(){e.get("remote")&&e._cancelRemote()})},_startRemote:function(e,t){function i(){n._remoteValid(e,r,t),n.set("isLoading",!0)}var n=this,r=n.get("remoteHandler"),o=n.get("cacheMap"),a=n.get("remoteDaly");return r&&n._cancelRemote(r),null!=o[t]?void n._validResult(n._getCallback(),o[t]):(r=setTimeout(i,a),void n.setInternal("remoteHandler",r))},_validResult:function(e,t){var i=this,n=e(t);i.onRemoteComplete(n,t)},onRemoteComplete:function(e,t,i){var n=this;i==n.get("remoteHandler")&&(n.fire("remotecomplete",{error:e,data:t}),n.set("isLoading",!1),n.setInternal("remoteHandler",null))},_getOptions:function(e){var t=this,i=t.get("remote"),n=t.get("defaultRemote"),o=r.merge(n,i,{data:e});return o},_getCallback:function(){return this._getOptions().callback},_remoteValid:function(e,t,i){var r=this,o=r.get("cacheMap"),a=r._getOptions(e);a.success=function(e){var n=a.callback,u=n(e);o[i]=e,r.onRemoteComplete(u,e,t)},a.error=function(e,i,n){r.onRemoteComplete(n,null,t)},r.fire("remotestart",{data:e}),n.ajax(a)},getRemoteParams:function(){},clearCache:function(){this.set("cacheMap",{})},_cancelRemote:function(e){var t=this;e=e||t.get("remoteHandler"),e&&(clearTimeout(e),t.setInternal("remoteHandler",null)),t.set("isLoading",!1)}},a.View=o,i.exports=a}),define("bui/form/rule",["jquery","bui/common"],function(e,t,i){function n(e,t,i,n,r){u.isArray(i)&&u.isString(i[1])&&(i[1]&&(n=i[1]),i=i[0]);var a=e,s=a.get("validator"),l=o(e,i,n);return t=null==t?"":t,s.call(a,t,i,l,r)}function r(e){if(null==e)return{};if(a.isPlainObject(e))return e;var t=e,i={};if(u.isArray(e)){for(var n=0;n<t.length;n++)i[n]=t[n];return i}return{0:e}}function o(e,t,i){var n=r(t);return i=i||e.get("msg"),u.substitute(i,n)}var a=e("jquery"),u=e("bui/common"),s=function(e){s.superclass.constructor.call(this,e)};u.extend(s,u.Base),s.ATTRS={name:{},msg:{},validator:{value:function(){}}},u.augment(s,{valid:function(e,t,i,r){var o=this;return n(o,e,t,i,r)}}),i.exports=s}),define("bui/form/group/base",["jquery","bui/common","bui/form/fieldcontainer","bui/form/field","bui/form/groupvalid","bui/form/fields/base","bui/form/fields/text","bui/form/fields/date","bui/form/fields/select","bui/form/fields/hidden","bui/form/fields/number","bui/form/fields/check","bui/form/fields/radio","bui/form/fields/checkbox","bui/form/fields/plain","bui/form/fields/list","bui/form/fields/textarea","bui/form/fields/uploader","bui/form/fields/checklist","bui/form/fields/radiolist","bui/form/tips","bui/form/valid","bui/form/remote","bui/overlay","bui/form/rules","bui/form/rule","bui/data","bui/list"],function(e,t,i){var n=(e("bui/common"),e("bui/form/fieldcontainer")),r=n.extend({},{ATTRS:{label:{view:!0},defaultChildClass:{value:"form-field"}}},{xclass:"form-group"});i.exports=r}),define("bui/form/group/range",["bui/form/group/base","jquery","bui/common","bui/form/fieldcontainer","bui/form/field","bui/form/groupvalid","bui/form/fields/base","bui/form/fields/text","bui/form/fields/date","bui/form/fields/select","bui/form/fields/hidden","bui/form/fields/number","bui/form/fields/check","bui/form/fields/radio","bui/form/fields/checkbox","bui/form/fields/plain","bui/form/fields/list","bui/form/fields/textarea","bui/form/fields/uploader","bui/form/fields/checklist","bui/form/fields/radiolist","bui/form/tips","bui/form/valid","bui/form/remote","bui/overlay","bui/form/rules","bui/form/rule","bui/data","bui/list"],function(e,t,i){function n(e,t,i){var n=e.get("allowEqual");return n?t>=i:t>i}var r=e("bui/form/group/base"),o=r.extend({},{ATTRS:{rangeText:{value:"\u5f00\u59cb\u4e0d\u80fd\u5927\u4e8e\u7ed3\u675f\uff01"},allowEqual:{value:!0},validator:{value:function(){for(var e=this,t=e.getFields(),i=!0,r=1;r<t.length;r++){var o,a,u=t[r],s=t[r-1];if(u&&s&&(o=u.get("value"),a=s.get("value"),!n(e,o,a))){i=!1;break}}return i?null:e.get("rangeText")}}}},{xclass:"form-group-range"});i.exports=o}),define("bui/form/group/check",["bui/form/group/base","jquery","bui/common","bui/form/fieldcontainer","bui/form/field","bui/form/groupvalid","bui/form/fields/base","bui/form/fields/text","bui/form/fields/date","bui/form/fields/select","bui/form/fields/hidden","bui/form/fields/number","bui/form/fields/check","bui/form/fields/radio","bui/form/fields/checkbox","bui/form/fields/plain","bui/form/fields/list","bui/form/fields/textarea","bui/form/fields/uploader","bui/form/fields/checklist","bui/form/fields/radiolist","bui/form/tips","bui/form/valid","bui/form/remote","bui/overlay","bui/form/rules","bui/form/rule","bui/data","bui/list"],function(e,t,i){function n(e){var t=e.getFieldAt(0);return t?t.get("name"):""}var r=e("bui/form/group/base"),o=r.extend({bindUI:function(){var e=this;e.on("change",function(){var t=n(e),i=e.get("range"),r=e.getRecord(),o=r[t],a=i[1];o&&o.length>=a?e._setFieldsEnable(t,!1):e._setFieldsEnable(t,!0)})},_setFieldsEnable:function(e,t){var i=this,n=i.getFields(e);BUI.each(n,function(e){t?e.enable():e.get("checked")||e.disable()})},_uiSetRange:function(e){this.addRule("checkRange",e)}},{ATTRS:{range:{setter:function(e){return(BUI.isString(e)||BUI.isNumber(e))&&(e=[parseInt(e,10)]),e}}}},{xclass:"form-group-check"});i.exports=o}),define("bui/form/group/select",["bui/form/group/base","jquery","bui/common","bui/data","bui/form/fieldcontainer","bui/form/field","bui/form/groupvalid","bui/form/fields/base","bui/form/fields/text","bui/form/fields/date","bui/form/fields/select","bui/form/fields/hidden","bui/form/fields/number","bui/form/fields/check","bui/form/fields/radio","bui/form/fields/checkbox","bui/form/fields/plain","bui/form/fields/list","bui/form/fields/textarea","bui/form/fields/uploader","bui/form/fields/checklist","bui/form/fields/radiolist","bui/form/tips","bui/form/valid","bui/form/remote","bui/overlay","bui/form/rules","bui/form/rule","bui/list"],function(e,t,i){function n(e){var t=[];return BUI.each(e,function(e){t.push({text:e.text,value:e.id})}),t}var r=e("bui/form/group/base"),o=e("bui/data"),a=BUI.Component.UIBase.Bindable,u=r.extend([a],{initializer:function(){var e=this,t=e.get("url"),i=e.get("store")||e._getStore();i.isStore||(i.autoLoad=!0,t&&(i.url=t),i=new o.TreeStore(i)),e.set("store",i)},bindUI:function(){var e=this;e.on("change",function(t){var i=t.target;if(i!=e){var n=i,r=n.get("value"),o=e._getFieldIndex(n)+1;e._valueChange(r,o)}})},onLoad:function(e){var t=this,i=e?e.node:t.get("store").get("root");t._setFieldItems(i.level,i.children)},_getStore:function(){var e=this,t=e.get("type");return t&&s[t]?s[t]:{}},_valueChange:function(e,t){var i=this,n=i.get("store");if(e){var r=n.findNode(e);if(!r)return;n.isLoaded(r)?i._setFieldItems(t,r.children):n.loadNode(r)}else i._setFieldItems(t,[])},_setFieldItems:function(e,t){var i=this,r=i.getFieldAt(e),o=n(t);r&&(r.setItems(o),i._valueChange(r.get("value"),e+1))},_getFieldIndex:function(e){var t=this,i=t.getFields();return BUI.Array.indexOf(e,i)}},{ATTRS:{type:{},store:{}}},{xclass:"form-group-select"}),s={};u.addType=function(e,t){s[e]=t},u.addType("city",{proxy:{url:"http://lp.taobao.com/go/rgn/citydistrictdata.php",dataType:"jsonp"},map:{isleaf:"leaf",value:"text"}}),i.exports=u});