define("bui/select",["bui/common","bui/select/select","bui/select/combox","bui/select/suggest"],function(require){var e=require("bui/common"),t=e.namespace("Select");return e.mix(t,{Select:require("bui/select/select"),Combox:require("bui/select/combox"),Suggest:require("bui/select/suggest")}),t}),define("bui/select/select",["bui/common","bui/picker"],function(require){"use strict";function e(e){if($.isPlainObject(e)){var i=[];return t.each(e,function(e,t){i.push({value:t,text:e})}),i}var n=[];return t.each(e,function(e){n.push(t.isString(e)?{value:e,text:e}:e)}),n}var t=require("bui/common"),i=require("bui/picker").ListPicker,n=t.prefix,a=t.Component,l=i,s=n+"select-input",u=a.Controller.extend({initializer:function(){var t,i=this,a=i.get("multipleSelect"),s=i.get("picker");s?i.get("valueField")&&s.set("valueField",i.get("valueField")):(t=a?"listbox":"simple-list",s=new l({children:[{xclass:t,elCls:n+"select-list",store:i.get("store"),items:e(i.get("items"))}],valueField:i.get("valueField")}),i.set("picker",s)),a&&s.set("hideEvent","")},renderUI:function(){var e=this,t=e.get("picker"),i=e.get("el"),n=i.find("."+e.get("inputCls"));t.set("trigger",i),t.set("triggerEvent",e.get("triggerEvent")),t.set("autoSetValue",e.get("autoSetValue")),t.set("textField",n),t.render(),e.set("list",t.get("list"))},bindUI:function(){{var e=this,t=e.get("picker"),i=t.get("list");i.get("store")}t.on("selectedchange",function(t){e.fire("change",{text:t.text,value:t.value,item:t.item})}),i.on("itemsshow",function(){e._syncValue()}),t.on("show",function(){e.get("forceFit")&&t.set("width",e.get("el").outerWidth())})},containsElement:function(e){var t=this,i=t.get("picker");return a.Controller.prototype.containsElement.call(this,e)||i.containsElement(e)},_uiSetItems:function(t){if(t){var i=this,n=i.get("picker"),a=n.get("list");a.set("items",e(t)),i._syncValue()}},_syncValue:function(){var e=this,t=e.get("picker"),i=e.get("valueField");i&&t.setSelectedValue($(i).val())},_uiSetName:function(e){var t=this,i=t._getTextEl();e&&i.attr("name",e)},_uiSetWidth:function(e){var t=this;if(null!=e){var i=t._getTextEl(),n=t.get("el").find(".x-icon"),a=i.outerWidth()-i.width(),l=t.get("picker"),s=e-n.outerWidth()-a;i.width(s),t.get("forceFit")&&l.set("width",e)}},_uiSetDisabled:function(e){var t=this,i=t.get("picker"),n=t._getTextEl();i.set("disabled",e),n&&n.attr("disabled",e)},_getTextEl:function(){var e=this,t=e.get("el");return t.find("."+e.get("inputCls"))},destructor:function(){var e=this,t=e.get("picker");t&&t.destroy()},_getList:function(){var e=this,t=e.get("picker"),i=t.get("list");return i},getSelectedValue:function(){return this.get("picker").getSelectedValue()},setSelectedValue:function(e){var t=this,i=t.get("picker");i.setSelectedValue(e)},getSelectedText:function(){return this.get("picker").getSelectedText()}},{ATTRS:{picker:{},list:{},valueField:{},store:{},focusable:{value:!0},multipleSelect:{value:!1},name:{},items:{sync:!1},inputCls:{value:s},forceFit:{value:!0},events:{value:{change:!1}},tpl:{view:!0,value:'<input type="text" readonly="readonly" class="'+s+'"/><span class="x-icon x-icon-normal"><i class="icon icon-caret icon-caret-down"></i></span>'},triggerEvent:{value:"click"}}},{xclass:"select"});return u}),define("bui/select/combox",["bui/common","bui/select/select"],function(require){var e=require("bui/common"),t=require("bui/select/select"),i=e.prefix+"combox-input",n=t.extend({renderUI:function(){var e=this,t=e.get("picker");t.set("autoFocused",!1)},_uiSetItems:function(t){for(var i=this,a=0;a<t.length;a++){var l=t[a];e.isString(l)&&(t[a]={value:l,text:l})}n.superclass._uiSetItems.call(i,t)},bindUI:function(){var e=this,t=e.get("picker"),i=t.get("list"),n=t.get("textField");$(n).on("keyup",function(){var e=i.getSelected();e&&i.clearItemStatus(e)})}},{ATTRS:{tpl:{view:!0,value:'<input type="text" class="'+i+'"/>'},inputCls:{value:i}}},{xclass:"combox"});return n}),define("bui/select/suggest",["bui/common","bui/select/combox"],function(require){"use strict";var e=require("bui/common"),t=require("bui/select/combox"),i=200,n="",a=t.extend({bindUI:function(){var e=this,t=e.get("el").find("input"),i="keyup"===e.get("triggerEvent")?"keyup":"keyup click";t.on(i,function(){e._start()})},_start:function(){var e=this;e._timer=e.later(function(){e._updateContent()},i)},_updateContent:function(){var e,t=this,i=t.get("data"),n=t.get("el").find("input");if((i||n.val()!==t.get("query"))&&(t.set("query",n.val()),e=n.val(),i||e)){var a=t.get("cacheable"),l=t.get("url"),s=t.get("data");if(a&&l){var u=t.get("dataCache");void 0!==u[e]?t._handleResponse(u[e]):t._requestData()}else l?t._requestData():s&&t._handleResponse(s,!0)}},_getStore:function(){var e=this,t=e.get("picker"),i=t.get("list");return i?i.get("store"):void 0},_requestData:function(){var e=this,t=e.get("el").find("input"),i=e.get("callback"),n=e.get("store"),a={};a[t.attr("name")]=t.val(),n?(a.start=0,n.load(a,i)):$.ajax({url:e.get("url"),type:"post",dataType:e.get("dataType"),data:a,success:function(t){e._handleResponse(t),i&&i(t)}})},_handleResponse:function(e,t){var i=this,n=t?i._getFilterItems(e):e;i.set("items",n),i.get("cacheable")&&(i.get("dataCache")[i.get("query")]=n)},_getItemText:function(e){var t=this,i=t.get("picker"),n=i.get("list");return n?n.getItemText(e):""},_getFilterItems:function(t){function i(t,i){a.push(e.isString(i)?t:i)}var n=this,a=[],l=n.get("el").find("input"),s=l.val(),u=n.get("data");return t=t||[],e.each(t,function(t){var a=e.isString(t)?t:n._getItemText(t);u?-1!==a.indexOf($.trim(s))&&i(a,t):i(a,t)}),a},later:function(e,t,i){t=t||0;var n=i?setInterval(e,t):setTimeout(e,t);return{id:n,interval:i,cancel:function(){this.interval?clearInterval(n):clearTimeout(n)}}}},{ATTRS:{data:{value:null},query:{value:n},cacheable:{value:!1},dataCache:{shared:!1,value:{}},dataType:{value:"jsonp"},url:{},callback:{},triggerEvent:{valueFn:function(){return this.get("data")?"click":"keyup"}},autoSetValue:{value:!1}}},{xclass:"suggest"});return a});