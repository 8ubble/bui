!function(){var t="bui/list/";define("bui/list",["bui/common",t+"list",t+"listitem",t+"simplelist",t+"listbox"],function(e){var i=e("bui/common"),n=i.namespace("List");return i.mix(n,{List:e(t+"list"),ListItem:e(t+"listitem"),SimpleList:e(t+"simplelist"),Listbox:e(t+"listbox")}),i.mix(n,{ListItemView:n.ListItem.View,SimpleListView:n.SimpleList.View}),n})}(),define("bui/list/domlist",["bui/common"],function(require){"use strict";function t(t,e){var i=e,n=i.get("itemCls"),s=i.get("itemStatusCls");return s&&s[t]?s[t]:n+"-"+t}function e(e,n){var l=e.attributes,r=n.get("itemStatusFields"),a={};return i.each(l,function(t){var e=t.nodeName;-1!==e.indexOf(s)&&(e=e.replace(s,""),a[e]=t.nodeValue)}),a.text=$(e).text(),i.each(r,function(i,s){var l=t(s,n);$(e).hasClass(l)&&(a[i]=!0)}),a}var i=require("bui/common"),n=i.Component.UIBase.Selection,s="data-",l=i.Component.UIBase.List,r=function(){};r.ATTRS={items:{}},r.prototype={clearControl:function(){var t=this,e=t.getItemContainer(),i=t.get("itemCls");e.find("."+i).remove()},addItem:function(t,e){return this._createItem(t,e)},getItems:function(){var t=this,e=t.getAllElements(),n=[];return i.each(e,function(e){n.push(t.getItemByElement(e))}),n},updateItem:function(t){var e,n=this,s=n.getItems(),l=i.Array.indexOf(t,s),r=null;return l>=0&&(r=n.findElement(t),e=n.getItemTpl(t,l),r&&$(r).html($(e).html())),r},removeItem:function(t,e){e=e||this.findElement(t),$(e).remove()},getItemContainer:function(){var t=this.get("itemContainer");return t.length?t:this.get("el")},getItemTpl:function(t,e){var n=this,s=n.get("itemTplRender"),l=n.get("itemTpl");return s?s(t,e):i.substitute(l,t)},_createItem:function(t,e){var i=this,n=i.getItemContainer(),s=i.get("itemCls"),l=i.get("dataField"),r=i.getItemTpl(t,e),a=$(r);if(void 0!==e){var u=n.find("."+s)[e];u?a.insertBefore(u):a.appendTo(n)}else a.appendTo(n);return a.addClass(s),a.data(l,t),a},getItemStatusCls:function(e){return t(e,this)},setItemStatusCls:function(t,e,i){var n=this,s=n.getItemStatusCls(t),l=i?"addClass":"removeClass";e&&$(e)[l](s)},hasStatus:function(t,e){var i=this,n=i.getItemStatusCls(t);return $(e).hasClass(n)},setItemSelected:function(t,e,i){var n=this;i=i||n.findElement(t),n.setItemStatusCls("selected",i,e)},getAllElements:function(){var t=this,e=t.get("itemCls"),i=t.get("el");return i.find("."+e)},getItemByElement:function(t){var e=this,i=e.get("dataField");return $(t).data(i)},getFirstElementByStatus:function(t){var e=this,i=e.getItemStatusCls(t),n=e.get("el");return n.find("."+i)[0]},getElementsByStatus:function(t){var e=this,i=e.getItemStatusCls(t),n=e.get("el");return n.find("."+i)},getSelectedElements:function(){var t=this,e=t.getItemStatusCls("selected"),i=t.get("el");return i.find("."+e)},findElement:function(t){var e=this,n=e.getAllElements(),s=null;return i.each(n,function(i){return e.getItemByElement(i)==t?(s=i,!1):void 0}),s},isElementSelected:function(t){var e=this,i=e.getItemStatusCls("selected");return t&&$(t).hasClass(i)}};var a=function(){};return a.ATTRS=i.merge(!0,l.ATTRS,n.ATTRS,{dataField:{view:!0,value:"data-item"},itemContainer:{view:!0},itemStatusFields:{value:{}},itemCls:{view:!0},cancelSelected:{value:!1},textGetter:{},defaultLoaderCfg:{value:{property:"items",dataType:"json"}},events:{value:{itemrendered:!0,itemremoved:!0,itemupdated:!0,itemsshow:!1,beforeitemsshow:!1,itemsclear:!1,itemdblclick:!1,beforeitemsclear:!1}}}),a.PARSER={items:function(t){var n=this,s=[],l=n.get("itemCls"),r=n.get("dataField"),a=t.find("."+l);return a.length||(a=t.children(),a.addClass(l)),i.each(a,function(t){var i=e(t,n);s.push(i),$(t).data(r,i)}),s}},i.augment(a,l,n,{_uiSetItems:function(t){var e=this;(!e.get("srcNode")||e.get("rendered"))&&this.setItems(t)},__bindUI:function(){function t(t,i){var n,s=e.get("multipleSelect");n=e.isItemSelected(t,i),n?s?e.setItemSelected(t,!1,i):e.get("cancelSelected")&&e.setSelected(null):(s||e.clearSelected(),e.setItemSelected(t,!0,i))}var e=this,i=e.get("selectedEvent"),n=e.get("itemCls"),s=e.get("view").getItemContainer();s.delegate("."+n,"click",function(n){if(!e.get("disabled")){var s=$(n.currentTarget),l=e.getItemByElement(s);if(!e.isItemDisabled(l,s)){var r=e.fire("itemclick",{item:l,element:s[0],domTarget:n.target,domEvent:n});r!==!1&&"click"==i&&e.isItemSelectable(l)&&t(l,s)}}}),"click"!==i&&s.delegate("."+n,i,function(i){if(!e.get("disabled")){var n=$(i.currentTarget),s=e.getItemByElement(n);e.isItemDisabled(s,n)||e.isItemSelectable(s)&&t(s,n)}}),s.delegate("."+n,"dblclick",function(t){if(!e.get("disabled")){var i=$(t.currentTarget),n=e.getItemByElement(i);e.isItemDisabled(n,i)||e.fire("itemdblclick",{item:n,element:i[0],domTarget:t.target})}}),e.on("itemrendered itemupdated",function(t){var i=t.item,n=t.element;e._syncItemStatus(i,n)})},getValueByField:function(t,e){return t&&t[e]},_syncItemStatus:function(t,e){var n=this,s=n.get("itemStatusFields");i.each(s,function(i,s){null!=t[i]&&n.get("view").setItemStatusCls(s,e,t[i])})},getStatusValue:function(t,e){var i=this,n=i.get("itemStatusFields"),s=n[e];return t[s]},getCount:function(){var t=this.getItems();return t?t.length:0},getStatusField:function(t){var e=this,i=e.get("itemStatusFields");return i[t]},setStatusValue:function(t,e,i){var n=this,s=n.get("itemStatusFields"),l=s[e];l&&(t[l]=i)},getItemText:function(t){var e=this,i=e.get("textGetter");return t?i?i(t):$(e.findElement(t)).text():""},removeItem:function(t){var e,n=this,s=n.get("items"),l=n.findElement(t);e=i.Array.indexOf(t,s),-1!==e&&s.splice(e,1),n.get("view").removeItem(t,l),n.fire("itemremoved",{item:t,domTarget:$(l)[0],element:l})},addItemAt:function(t,e){var i=this,n=i.get("items");return void 0===e&&(e=n.length),n.splice(e,0,t),i.addItemToView(t,e),t},addItemToView:function(t,e){var i=this,n=i.get("view").addItem(t,e);return i.fire("itemrendered",{item:t,domTarget:$(n)[0],element:n}),n},updateItem:function(t){var e=this,i=e.get("view").updateItem(t);e.fire("itemupdated",{item:t,domTarget:$(i)[0],element:i})},setItems:function(t){var e=this;t!=e.getItems()&&e.setInternal("items",t),e.clearControl(),e.fire("beforeitemsshow"),i.each(t,function(t,i){e.addItemToView(t,i)}),e.fire("itemsshow")},getItems:function(){return this.get("items")},getItemByElement:function(t){return this.get("view").getItemByElement(t)},getSelected:function(){var t=this,e=t.get("view").getFirstElementByStatus("selected");return t.getItemByElement(e)||null},getItemsByStatus:function(t){var e=this,n=e.get("view").getElementsByStatus(t),s=[];return i.each(n,function(t){s.push(e.getItemByElement(t))}),s},findElement:function(t){var e=this;return i.isString(t)&&(t=e.getItem(t)),this.get("view").findElement(t)},findItemByField:function(t,e){var n=this,s=n.get("items"),l=null;return i.each(s,function(i){return null!=i[t]&&i[t]==e?(l=i,!1):void 0}),l},setItemSelectedStatus:function(t,e,i){var n=this;i=i||n.findElement(t),n.setItemStatus(t,"selected",e,i)},setAllSelection:function(){var t=this,e=t.getItems();t.setSelection(e)},isItemSelected:function(t,e){var i=this;return e=e||i.findElement(t),i.get("view").isElementSelected(e)},isItemDisabled:function(t,e){return this.hasStatus(t,"disabled",e)},setItemDisabled:function(t,e){var i=this;i.setItemStatus(t,"disabled",e)},getSelection:function(){var t=this,e=t.get("view").getSelectedElements(),n=[];return i.each(e,function(e){n.push(t.getItemByElement(e))}),n},clearControl:function(){this.fire("beforeitemsclear"),this.get("view").clearControl(),this.fire("itemsclear")},hasStatus:function(t,e,i){if(!t)return!1;{var n=this;n.getStatusField(e)}return i=i||n.findElement(t),n.get("view").hasStatus(e,i)},setItemStatus:function(t,e,i,n){var s=this;t&&(n=n||s.findElement(t)),s.isItemDisabled(t,n)&&"disabled"!==e||(t&&("disabled"===e&&i&&s.clearItemStatus(t),s.setStatusValue(t,e,i),s.get("view").setItemStatusCls(e,n,i),s.fire("itemstatuschange",{item:t,status:e,value:i,element:n})),"selected"===e&&s.afterSelected(t,i,n))},clearItemStatus:function(t,e,n){var s=this,l=s.get("itemStatusFields");n=n||s.findElement(t),e?s.setItemStatus(t,e,!1,n):(i.each(l,function(e,i){s.setItemStatus(t,i,!1,n)}),l.selected||s.setItemSelected(t,!1),s.setItemStatus(t,"hover",!1))}}),a.View=r,a}),define("bui/list/keynav",["bui/common"],function(require){"use strict";var t=require("bui/common"),e=function(){};return e.ATTRS={highlightedStatus:{value:"hover"}},t.augment(e,{setHighlighted:function(t,e){if(!this.hasStatus(t,"hover",e)){var i=this,n=i.get("highlightedStatus"),s=i._getHighLightedElement(),l=s?i.getItemByElement(s):null;l!==t&&(l&&this.setItemStatus(l,n,!1,s),this.setItemStatus(t,n,!0,e),i._scrollToItem(t,e))}},_getHighLightedElement:function(){var t=this,e=t.get("highlightedStatus"),i=t.get("view").getFirstElementByStatus(e);return i},getHighlighted:function(){var t=this,e=t.get("highlightedStatus"),i=t.get("view").getFirstElementByStatus(e);return t.getItemByElement(i)||null},getColumnCount:function(){var t=this,e=t.getFirstItem(),i=t.findElement(e),n=$(i);return i?parseInt(n.parent().width()/n.outerWidth(),10):1},getRowCount:function(t){var e=this;return t=t||e.getColumnCount(),(this.getCount()+t-1)/t},_getNextItem:function(t,e,i){var n,s=this,l=s._getCurrentIndex(),r=s.getCount(),a=t?1:-1;return-1===l?t?s.getFirstItem():s.getLastItem():(t||(e*=a),n=(l+e+i)%i,n>r-1&&(t?n-=r-1:n+=e),s.getItemAt(n))},_getLeftItem:function(){var t=this,e=t.getCount(),i=t.getColumnCount();return!e||1>=i?null:t._getNextItem(!1,1,e)},_getCurrentItem:function(){return this.getHighlighted()},_getCurrentIndex:function(){var t=this,e=t._getCurrentItem();return this.indexOfItem(e)},_getRightItem:function(){var t=this,e=t.getCount(),i=t.getColumnCount();return!e||1>=i?null:this._getNextItem(!0,1,e)},_getDownItem:function(){var t=this,e=t.getColumnCount(),i=t.getRowCount(e);return 1>=i?null:this._getNextItem(!0,e,e*i)},getScrollContainer:function(){return this.get("el")},isScrollVertical:function(){var t=this,e=t.get("el"),i=t.get("view").getItemContainer();return e.height()<i.height()},_scrollToItem:function(t,e){var i=this;if(i.isScrollVertical()){e=e||i.findElement(t);var n=i.getScrollContainer(),s=$(e).position().top,l=n.position().top,r=n.height(),a=s-l,u=$(e).height(),o=n.scrollTop();(0>a||a>r-u)&&n.scrollTop(o+a)}},_getUpperItem:function(){var t=this,e=t.getColumnCount(),i=t.getRowCount(e);return 1>=i?null:this._getNextItem(!1,e,e*i)},handleNavUp:function(){var t=this,e=t._getUpperItem();t.setHighlighted(e)},handleNavDown:function(){this.setHighlighted(this._getDownItem())},handleNavLeft:function(){this.setHighlighted(this._getLeftItem())},handleNavRight:function(){this.setHighlighted(this._getRightItem())},handleNavEnter:function(){var t,e=this,i=e._getCurrentItem();i&&(t=e.findElement(i),$(t).trigger("click"))},handleNavEsc:function(){this.setHighlighted(null)},handleNavTab:function(){this.setHighlighted(this._getRightItem())}}),e}),define("bui/list/sortable",["bui/common","bui/data"],function(require){var t=require("bui/common"),e=require("bui/data").Sortable,i=function(){};return i.ATTRS=t.merge(!0,e.ATTRS,{}),t.augment(i,e,{compare:function(t,e,i,n){var s,l=this;return i=i||l.get("sortField"),n=n||l.get("sortDirection"),i&&n?(s="ASC"===n?1:-1,$.isPlainObject(t)||(t=l.getItemByElement(t)),$.isPlainObject(e)||(e=l.getItemByElement(e)),l.get("compareFunction")(t[i],e[i])*s):1},getSortData:function(){return $.makeArray(this.get("view").getAllElements())},sort:function(e,i){var n=this,s=n.sortData(e,i),l=n.get("view").getItemContainer();n.get("store")||n.sortData(e,i,n.get("items")),t.each(s,function(t){$(t).appendTo(l)})}}),i}),define("bui/list/simplelist",["bui/common","bui/list/domlist","bui/list/keynav","bui/list/sortable"],function(require){var t=require("bui/common"),e=t.Component.UIBase,i=t.UA,n=require("bui/list/domlist"),s=require("bui/list/keynav"),l=require("bui/list/sortable"),r=t.prefix+"list-item",a=t.Component.View.extend([n.View],{setElementHover:function(t,e){var i=this;i.setItemStatusCls("hover",t,e)}},{ATTRS:{itemContainer:{valueFn:function(){return this.get("el").find(this.get("listSelector"))}}}},{xclass:"simple-list-view"}),u=t.Component.Controller.extend([n,e.Bindable,s,l],{bindUI:function(){var t=this,e=t.get("itemCls"),n=t.get("view").getItemContainer();n.delegate("."+e,"mouseover",function(e){if(!t.get("disabled")){var n=e.currentTarget,s=t.getItemByElement(n);t.isItemDisabled(e.item,e.currentTarget)||(i.ie&&i.ie<8||!t.get("focusable")||"hover"!==t.get("highlightedStatus")?t.setItemStatus(s,"hover",!0,n):t.setHighlighted(s,n))}}).delegate("."+e,"mouseout",function(e){if(!t.get("disabled")){var i=$(e.currentTarget);t.get("view").setElementHover(i,!1)}})},onAdd:function(t){var e=this,i=e.get("store"),n=t.record;0==e.getCount()?e.setItems(i.getResult()):e.addItemToView(n,t.index)},onRemove:function(t){var e=this,i=t.record;e.removeItem(i)},onUpdate:function(t){this.updateItem(t.record)},onLocalSort:function(t){this.get("frontSortable")?this.sort(t.field,t.direction):this.onLoad(t)},onLoad:function(){var t=this,e=t.get("store"),i=e.getResult();t.set("items",i)},onFiltered:function(t){var e=this,i=t.data;e.set("items",i)}},{ATTRS:{frontSortable:{value:!1},focusable:{value:!1},items:{view:!0,value:[]},itemCls:{view:!0,value:r},idField:{value:"value"},listSelector:{view:!0,value:"ul"},itemTpl:{view:!0,value:'<li role="option" class="'+r+'">{text}</li>'},tpl:{value:"<ul></ul>"},xview:{value:a}}},{xclass:"simple-list",prority:0});return u.View=a,u}),define("bui/list/listbox",["bui/list/simplelist"],function(require){var t=require("bui/list/simplelist"),e=t.extend({bindUI:function(){var t=this;t.on("selectedchange",function(t){var e=t.item,i=$(t.domTarget),n=i.find("input");e&&n.attr("checked",t.selected)})}},{ATTRS:{itemTpl:{value:'<li><span class="x-checkbox"></span>{text}</li>'},multipleSelect:{value:!0}}},{xclass:"listbox"});return e}),define("bui/list/listitem",["bui/common"],function(require){var t=require("bui/common"),e=t.Component,i=e.UIBase,n=e.View.extend([i.ListItemView],{}),s=e.Controller.extend([i.ListItem],{},{ATTRS:{elTagName:{view:!0,value:"li"},xview:{value:n},tpl:{view:!0,value:"<span>{text}</span>"}}},{xclass:"list-item"});return s.View=n,s}),define("bui/list/list",["bui/common"],function(require){var t=require("bui/common"),e=t.Component,i=e.UIBase,n=e.Controller.extend([i.ChildList],{},{ATTRS:{elTagName:{view:!0,value:"ul"},idField:{value:"id"},defaultChildClass:{value:"list-item"}}},{xclass:"list"});return n});