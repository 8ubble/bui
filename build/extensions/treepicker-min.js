define("bui/extensions/treepicker",["bui/common","bui/picker","bui/tree"],function(require){"use strict";var e=require("bui/common"),t=require("bui/picker").ListPicker,r=(require("bui/tree"),t.extend({setSelectedValue:function(r){r=r||"";var i=this,n=i.get("tree");if(i.get("isInit")||i._initControl(),"selected"===i.get("selectStatus"))r&&n.expandNode(r),t.prototype.setSelectedValue.call(i,r);else{n.clearAllChecked();var c=r.split(",");e.each(c,function(e){n.setChecked(e)})}},getSelectedValue:function(){var r=this,i=r.get("tree");if("selected"===r.get("selectStatus"))return t.prototype.getSelectedValue.call(r);var n=i.getCheckedNodes();return n=r._getFilterNodes(n),e.Array.map(n,function(e){return e.id}).join(",")},getSelectedText:function(){var r=this,i=r.get("tree");if("selected"===r.get("selectStatus"))return t.prototype.getSelectedText.call(r);var n=i.getCheckedNodes();return n=r._getFilterNodes(n),e.Array.map(n,function(e){return e.text}).join(",")},_getFilterNodes:function(t){var r=this,i=r.get("filter");return i&&(t=e.Array.filter(t,i)),t}},{ATTRS:{defaultChildClass:{value:"tree-list"},selectStatus:{value:"selected"},changeEvent:{getter:function(){return this.get("selectStatus")+"change"}},hideEvent:{getter:function(e){return"checked"===this.get("selectStatus")?null:e}},filter:{},tree:{getter:function(){return this.get("children")[0]}}}},{xclass:"tree-picker"}));return r});