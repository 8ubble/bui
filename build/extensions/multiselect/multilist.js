define("bui/extensions/multiselect/multilist",["bui/common","bui/list"],function(require){function t(t,i,n){e.isFunction(t.set)?t.set(i,n):t[i]=n}var e=require("bui/common"),i=e.Component,n=(require("bui/list"),e.prefix),r=n+"multilist-source",s=n+"multilist-target",l=n+"multilist-btn-right",o=n+"multilist-btn-left",u=i.Controller.extend({renderUI:function(){var t=this,e=t.get("source"),i=t.get("target");e=t._initControl(e,r),i=t._initControl(i,s),e.render(),i.render(),t.set("source",e),t.set("target",i)},_initControl:function(t,e){var i=this,n=i.get("el");return t.isController?(t.set("render",n.find("."+e)),t):(t.render=n.find("."+e),i._createControl(t))},_createControl:function(t){if(t.isController)return t;var e=t.multipleSelect||this.get("multipleSelect"),n=t.xclass||e?"listbox":"simple-list";return t.xclass=n,i.create(t,this)},bindUI:function(){var t=this,e=t.get("el"),i=t.get("source"),n=t.get("target"),r=e.find("."+l),s=e.find("."+o);r.on("click",function(){var e=i.getSelection();t.fire("selected",{items:e})!==!1&&(i.removeItems(e),n.addItems(e))}),s.on("click",function(){var e=n.getSelection();t.fire("unselected",{items:e})!==!1&&(n.removeItems(e),i.addItems(e))}),i.on("dblclick",function(e){var r=$(e.domTarget).closest("li"),s=i.getItemByElement(r);t.fire("selected",{items:[s]})!==!1&&(i.removeItem(s),n.addItem(s))}),n.on("dblclick",function(e){var r=$(e.domTarget).closest("li"),s=n.getItemByElement(r);t.fire("unselected",{items:[s]})!==!1&&(n.removeItem(s),i.addItem(s))})},_uiSetStore:function(t){var i=this,n=i.get("target"),r=n.get("idField");t.filter(function(t){var i=n.getItems(),s=!0;return e.each(i,function(e){return e[r]===t[r]?(s=!1,!1):void 0}),s})}},{ATTRS:{source:{value:{elCls:"bui-select-list"},shared:!1},target:{value:{elCls:"bui-select-list"},shared:!1},store:{setter:function(e){return t(this.get("source"),"store",e),e}},items:{setter:function(t){var i=new e.Data.Store({data:t});return this.set("store",i),t}},url:{setter:function(t){if(t){var i=new e.Data.Store({url:t,autoLoad:!0});return this.set("store",i),t}}},tpl:{value:'<div class="row"><div class="span5 '+r+'"></div><div class="span2 bui-multilist-action centered"><p><button  class="button button-small '+l+'" type="button">&gt;&gt;</button></p><p><button  class="button button-small '+o+'" type="button">&lt;&lt;</button></p></div><div class="span5 '+s+'"></div></div>'}}},{xclass:"multilist"});return u});