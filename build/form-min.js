define("bui/form",["jquery","bui/common","bui/form/tips","bui/form/fieldcontainer","bui/form/form","bui/form/row","bui/form/fieldgroup","bui/form/hform","bui/form/rules","bui/form/field","bui/overlay","bui/form/groupvalid","bui/form/fields/base","bui/form/fields/text","bui/form/fields/date","bui/form/fields/select","bui/form/fields/hidden","bui/form/fields/number","bui/form/fields/check","bui/form/fields/radio","bui/form/fields/checkbox","bui/form/fields/plain","bui/form/fields/list","bui/form/fields/textarea","bui/form/fields/uploader","bui/form/fields/checklist","bui/form/fields/radiolist","bui/form/valid","bui/form/remote","bui/form/rule","bui/data","bui/list","bui/form/group/base","bui/form/group/range","bui/form/group/check","bui/form/group/select"],function(e,i,t){var r=e("bui/common"),o=r.namespace("Form"),n=e("bui/form/tips");r.mix(o,{Tips:n,TipItem:n.Item,FieldContainer:e("bui/form/fieldcontainer"),Form:e("bui/form/form"),Row:e("bui/form/row"),Group:e("bui/form/fieldgroup"),HForm:e("bui/form/hform"),Rules:e("bui/form/rules"),Field:e("bui/form/field"),FieldGroup:e("bui/form/fieldgroup")}),t.exports=o}),define("bui/form/tips",["jquery","bui/common","bui/overlay"],function(e,i,t){var r=e("jquery"),o=e("bui/common"),n=o.prefix,u=e("bui/overlay").Overlay,l="data-tip",a=n+"form-tip-container",s=u.extend({initializer:function(){var e=this,i=e.get("render");if(!i){var t=r(e.get("trigger")).parent();e.set("render",t)}},renderUI:function(){var e=this;e.resetVisible()},resetVisible:function(){var e=this,i=r(e.get("trigger"));i.val()?e.set("visible",!1):(e.set("align",{node:r(e.get("trigger")),points:["cl","cl"]}),e.set("visible",!0))},bindUI:function(){var e=this,i=r(e.get("trigger"));e.get("el").on("click",function(){e.hide(),i.focus()}),i.on("click focus",function(){e.hide()}),i.on("blur",function(){e.resetVisible()})}},{ATTRS:{trigger:{},text:{},iconCls:{},tpl:{value:'<span class="{iconCls}"></span><span class="tip-text">{text}</span>'}}},{xclass:"form-tip"}),f=function(e){return this.constructor!==f?new f(e):(f.superclass.constructor.call(this,e),void this._init())};f.ATTRS={form:{},items:{valueFn:function(){return[]}}},o.extend(f,o.Base),o.augment(f,{_init:function(){var e=this,i=r(e.get("form"));i.length&&(o.each(r.makeArray(i[0].elements),function(i){var t=r(i).attr(l);t&&e._initFormElement(i,r.parseJSON(t))}),i.addClass(a))},_initFormElement:function(e,i){i&&(i.trigger=e);var t=this,r=t.get("items"),o=new s(i);r.push(o)},getItem:function(e){var i=this,t=i.get("items"),n=null;return o.each(t,function(i){return r(i.get("trigger")).attr("name")===e?(n=i,!1):void 0}),n},resetVisible:function(){var e=this,i=e.get("items");o.each(i,function(e){e.resetVisible()})},render:function(){var e=this,i=e.get("items");o.each(i,function(e){e.render()})},destroy:function(){var e=this,i=e.get(i);o.each(i,function(e){e.destroy()})}}),f.Item=s,t.exports=f}),define("bui/form/fieldcontainer",["jquery","bui/common","bui/form/field","bui/form/groupvalid","bui/form/fields/base","bui/form/fields/text","bui/form/fields/date","bui/form/fields/select","bui/form/fields/hidden","bui/form/fields/number","bui/form/fields/check","bui/form/fields/radio","bui/form/fields/checkbox","bui/form/fields/plain","bui/form/fields/list","bui/form/fields/textarea","bui/form/fields/uploader","bui/form/fields/checklist","bui/form/fields/radiolist","bui/form/tips","bui/form/valid","bui/form/remote","bui/overlay","bui/form/rules","bui/form/rule","bui/data","bui/list"],function(e,i,t){function r(e){return e.is(m)}function o(e,i){if(e!=i){if(r(e))return[e];var t=e.attr("class");if(t&&(-1!==t.indexOf(c)||-1!==t.indexOf(d)))return[e]}var l=[],a=e.children();return u.each(a,function(e){l=l.concat(o(n(e),i))}),l}var n=e("jquery"),u=e("bui/common"),l=e("bui/form/field"),a=e("bui/form/groupvalid"),s=u.prefix,f="form-field",d=s+f,c=s+"form-group",m="input,select,textarea",b=u.Component.View.extend([a.View]),v=u.Component.Controller.extend([a],{syncUI:function(){var e=this,i=e.getFields(),t=e.get("validators");u.each(i,function(e){var i=e.get("name");t[i]&&e.set("validator",t[i])}),u.each(t,function(i,t){if(0==t.indexOf("#")){var r=t.replace("#",""),o=e.getChild(r,!0);o&&o.set("validator",i)}})},getDecorateElments:function(){var e=this,i=e.get("el"),t=o(i,i);return t},findXClassByNode:function(e,i){return"checkbox"===e.attr("type")?f+"-checkbox":"radio"===e.attr("type")?f+"-radio":"number"===e.attr("type")?f+"-number":e.hasClass("calendar")?f+"-date":"SELECT"==e[0].tagName?f+"-select":r(e)?f:u.Component.Controller.prototype.findXClassByNode.call(this,e,i)},getRecord:function(){var e=this,i={},t=e.getFields();return u.each(t,function(t){var r=t.get("name"),o=e._getFieldValue(t);if(i[r]){if(u.isArray(i[r])&&null!=o)i[r].push(o);else if(null!=o){var n=[i[r]];n.push(o),i[r]=n}}else i[r]=o}),i},getFields:function(e){var i=this,t=[],r=i.get("children");return u.each(r,function(i){i instanceof l?e&&i.get("name")!=e||t.push(i):i.getFields&&(t=t.concat(i.getFields(e)))}),t},getField:function(e){var i=this,t=i.getFields(),r=null;return u.each(t,function(i){return i.get("name")===e?(r=i,!1):void 0}),r},getFieldAt:function(e){return this.getFields()[e]},setFieldValue:function(e,i){var t=this,r=t.getFields(e);u.each(r,function(e){t._setFieldValue(e,i)})},_setFieldValue:function(e,i){if(!e.get("disabled"))if(e instanceof l.Check){var t=e.get("value");i&&(t===i||u.isArray(i)&&u.Array.contains(t,i))?e.set("checked",!0):e.set("checked",!1)}else null==i&&(i=""),e.clearErrors(!0),e.set("value",i)},getFieldValue:function(e){var i=this,t=i.getFields(e),r=[];return u.each(t,function(e){var t=i._getFieldValue(e);t&&r.push(t)}),0===r.length?null:1===r.length?r[0]:r},_getFieldValue:function(e){return e instanceof l.Check&&!e.get("checked")?null:e.get("value")},clearFields:function(){this.clearErrors(!0),this.setRecord({})},setRecord:function(e){var i=this,t=i.getFields();u.each(t,function(t){var r=t.get("name");i._setFieldValue(t,e[r])})},updateRecord:function(e){var i=this,t=i.getFields();u.each(t,function(t){var r=t.get("name");e.hasOwnProperty(r)&&i._setFieldValue(t,e[r])})},focus:function(){var e=this,i=e.getFields(),t=i[0];t&&t.focus()},_uiSetDisabled:function(e){var i=this,t=i.get("children");u.each(t,function(i){i.set("disabled",e)})}},{ATTRS:{record:{setter:function(e){this.setRecord(e)},getter:function(){return this.getRecord()}},validators:{value:{}},defaultLoaderCfg:{value:{property:"children",dataType:"json"}},disabled:{sync:!1},isDecorateChild:{value:!0},xview:{value:b}}},{xclass:"form-field-container"});v.View=b,t.exports=v}),define("bui/form/form",["jquery","bui/common","bui/form/fieldcontainer","bui/form/field","bui/form/groupvalid","bui/form/fields/base","bui/form/fields/text","bui/form/fields/date","bui/form/fields/select","bui/form/fields/hidden","bui/form/fields/number","bui/form/fields/check","bui/form/fields/radio","bui/form/fields/checkbox","bui/form/fields/plain","bui/form/fields/list","bui/form/fields/textarea","bui/form/fields/uploader","bui/form/fields/checklist","bui/form/fields/radiolist","bui/form/tips","bui/form/valid","bui/form/remote","bui/overlay","bui/form/rules","bui/form/rule","bui/data","bui/list"],function(e,i,t){var r=e("jquery"),o=e("bui/common"),n=e("bui/form/fieldcontainer"),u=(o.Component,{NORMAL:"normal",AJAX:"ajax",IFRAME:"iframe"}),l=n.View.extend({_uiSetMethod:function(e){this.get("el").attr("method",e)},_uiSetAction:function(e){this.get("el").attr("action",e)}},{ATTRS:{method:{},action:{}}},{xclass:"form-view"}),a=n.extend({renderUI:function(){var e,i=this,t=i.get("buttonBar");r.isPlainObject(t)&&i.get("buttons")&&(e=o.merge(i.getDefaultButtonBarCfg(),t),i._initButtonBar(e)),i._initSubmitMask()},_initButtonBar:function(i){var t=this;e.async("bui/toolbar",function(e){buttonBar=new e.Bar(i),t.set("buttonBar",buttonBar)})},bindUI:function(){var e=this,i=e.get("el");i.on("submit",function(i){return e.valid(),e.isValid()&&e.onBeforeSubmit()!==!1?void(e.isValid()&&e.get("submitType")===u.AJAX&&(i.preventDefault(),e.ajaxSubmit())):(i.preventDefault(),void e.focusError())})},getDefaultButtonBarCfg:function(){var e=this,i=e.get("buttons");return{autoRender:!0,elCls:"toolbar",render:e.get("el"),items:i,defaultChildClass:"bar-item-button"}},focusError:function(){var e=this,i=e.getFields();o.each(i,function(e){if(e.get("visible")&&!e.get("disabled")&&!e.isValid()){try{e.focus()}catch(i){o.log(i)}return!1}})},submit:function(e){var i=this,t=i.get("submitType");if(i.valid(),i.isValid()){if(0==i.onBeforeSubmit())return;t===u.NORMAL?i.get("el")[0].submit():t===u.AJAX&&i.ajaxSubmit(e)}else i.focusError()},ajaxSubmit:function(e){var i,t=this,n=t.get("method"),u=t.get("action"),l=t.get("callback"),a=t.get("submitMask"),s=t.serializeToObject(),f=o.merge(!0,{url:u,type:n,dataType:"json",data:s},e);e&&e.success&&(i=e.success),f.success=function(e){a&&a.hide&&a.hide(),i&&i(e),l&&l.call(t,e)},a&&a.show&&a.show(),r.ajax(f)},_initSubmitMask:function(){var e=this,i=e.get("submitType"),t=e.get("submitMask");i===u.AJAX&&t&&o.use("bui/mask",function(i){var n=r.isPlainObject(t)?t:{};t=new i.LoadMask(o.mix({el:e.get("el")},n)),e.set("submitMask",t)})},serializeToObject:function(){return o.FormHelper.serializeToObject(this.get("el")[0])},toObject:function(){return this.serializeToObject()},onBeforeSubmit:function(){return this.fire("beforesubmit")},reset:function(){var e=this,i=e.get("initRecord");e.setRecord(i)},resetTips:function(){var e=this,i=e.getFields();o.each(i,function(e){e.resetTip()})},destructor:function(){var e=this,i=e.get("buttonBar"),t=e.get("submitMask");i&&i.destroy&&i.destroy(),t&&t.destroy&&t.destroy()},_uiSetInitRecord:function(e){this.setRecord(e)}},{ATTRS:{action:{view:!0,value:""},allowTextSelection:{value:!0},events:{value:{beforesubmit:!1}},method:{view:!0,value:"get"},defaultLoaderCfg:{value:{autoLoad:!0,property:"record",dataType:"json"}},submitMask:{value:{msg:"\u6b63\u5728\u63d0\u4ea4\u3002\u3002\u3002"}},submitType:{value:"normal"},focusError:{value:!0},callback:{},decorateCfgFields:{value:{method:!0,action:!0}},defaultChildClass:{value:"form-field"},elTagName:{value:"form"},buttons:{},buttonBar:{shared:!1,value:{}},childContainer:{value:".x-form-fields"},initRecord:{},showError:{value:!1},xview:{value:l},tpl:{value:'<div class="x-form-fields"></div>'}}},{xclass:"form"});a.View=l,t.exports=a}),define("bui/form/row",["jquery","bui/common","bui/form/fieldcontainer","bui/form/field","bui/form/groupvalid","bui/form/fields/base","bui/form/fields/text","bui/form/fields/date","bui/form/fields/select","bui/form/fields/hidden","bui/form/fields/number","bui/form/fields/check","bui/form/fields/radio","bui/form/fields/checkbox","bui/form/fields/plain","bui/form/fields/list","bui/form/fields/textarea","bui/form/fields/uploader","bui/form/fields/checklist","bui/form/fields/radiolist","bui/form/tips","bui/form/valid","bui/form/remote","bui/overlay","bui/form/rules","bui/form/rule","bui/data","bui/list"],function(e,i,t){var r=(e("bui/common"),e("bui/form/fieldcontainer")),o=r.extend({},{ATTRS:{elCls:{value:"row"},defaultChildCfg:{value:{tpl:' <label class="control-label">{label}</label>              <div class="controls">              </div>',childContainer:".controls",showOneError:!0,controlContainer:".controls",elCls:"control-group span8",errorTpl:'<span class="valid-text"><span class="estate error"><span class="x-icon x-icon-mini x-icon-error">!</span><em>{error}</em></span></span>'}},defaultChildClass:{value:"form-field-text"}}},{xclass:"form-row"});t.exports=o}),define("bui/form/fieldgroup",["jquery","bui/common","bui/form/group/base","bui/form/group/range","bui/form/group/check","bui/form/group/select","bui/form/fieldcontainer","bui/form/field","bui/form/groupvalid","bui/form/fields/base","bui/form/fields/text","bui/form/fields/date","bui/form/fields/select","bui/form/fields/hidden","bui/form/fields/number","bui/form/fields/check","bui/form/fields/radio","bui/form/fields/checkbox","bui/form/fields/plain","bui/form/fields/list","bui/form/fields/textarea","bui/form/fields/uploader","bui/form/fields/checklist","bui/form/fields/radiolist","bui/form/tips","bui/form/valid","bui/form/remote","bui/overlay","bui/form/rules","bui/form/rule","bui/data","bui/list"],function(e){var i=e("bui/common"),t=e("bui/form/group/base");return i.mix(t,{Range:e("bui/form/group/range"),Check:e("bui/form/group/check"),Select:e("bui/form/group/select")}),t}),define("bui/form/hform",["jquery","bui/common","bui/form/form","bui/form/fieldcontainer","bui/form/field","bui/form/groupvalid","bui/form/fields/base","bui/form/fields/text","bui/form/fields/date","bui/form/fields/select","bui/form/fields/hidden","bui/form/fields/number","bui/form/fields/check","bui/form/fields/radio","bui/form/fields/checkbox","bui/form/fields/plain","bui/form/fields/list","bui/form/fields/textarea","bui/form/fields/uploader","bui/form/fields/checklist","bui/form/fields/radiolist","bui/form/tips","bui/form/valid","bui/form/remote","bui/overlay","bui/form/rules","bui/form/rule","bui/data","bui/list"],function(e,i,t){var r=(e("jquery"),e("bui/common"),e("bui/form/form")),o=r.extend({getDefaultButtonBarCfg:function(){var e=this,i=e.get("buttons");return{autoRender:!0,elCls:"actions-bar toolbar row",tpl:'<div class="form-actions span21 offset3"></div>',childContainer:".form-actions",render:e.get("el"),items:i,defaultChildClass:"bar-item-button"}}},{ATTRS:{defaultChildClass:{value:"form-row"},errorTpl:{value:'<span class="valid-text"><span class="estate error"><span class="x-icon x-icon-mini x-icon-error">!</span><em>{error}</em></span></span>'},elCls:{value:"form-horizontal"}},PARSER:{}},{xclass:"form-horizontal"});t.exports=o}),define("bui/form/rules",["jquery","bui/form/rule","bui/common"],function(e,i,t){function r(e){return parseFloat(e)}function o(e){return BUI.Date.parse(e)}function n(e,i,t){var r=e&&e.equals!==!1;return r?i>=t:i>t}function u(e){return""==e||null==e}function l(e,i,t,r){for(var o=r.getFields(),l=!0,a=1;a<o.length;a++){var s,f,d=o[a],c=o[a-1];if(d&&c&&(s=d.get("value"),f=c.get("value"),!u(s)&&!u(f)&&!n(i,s,f))){l=!1;break}}return l?null:t}function a(e){var i=e.getFieldAt(0);return i?i.get("name"):""}function s(e,i){if(BUI.isArray(i)||(i=[i]),!e||!i.length)return!1;var t=e?BUI.isArray(e)?e.length:1:0;if(1==i.length){var r=i[0];if(!r)return!0;if(r>t)return!1}else{var o=i[0],n=i[1];if(o>t||t>n)return!1}return!0}{var f=e("jquery"),d=e("bui/form/rule"),c={},m={add:function(e){var i;return f.isPlainObject(e)?(i=e.name,c[i]=new d(e)):e.get&&(i=e.get("name"),c[i]=e),c[i]},remove:function(e){delete c[e]},get:function(e){return c[e]},valid:function(e,i,t,r,o){var n=m.get(e);return n?n.valid(i,t,r,o):null},isValid:function(e,i,t,r){return null==m.valid(e,i,t,r)}};m.add({name:"required",msg:"\u4e0d\u80fd\u4e3a\u7a7a\uff01",validator:function(e,i,t){return i!==!1&&/^\s*$/.test(e)?t:void 0}}),m.add({name:"equalTo",msg:"\u4e24\u6b21\u8f93\u5165\u4e0d\u4e00\u81f4\uff01",validator:function(e,i,t){var r=f(i);return r.length&&(i=r.val()),e===i?void 0:t}}),m.add({name:"min",msg:"\u8f93\u5165\u503c\u4e0d\u80fd\u5c0f\u4e8e{0}\uff01",validator:function(e,i,t){return BUI.isString(e)&&(e=e.replace(/\,/g,"")),""!==e&&r(e)<r(i)?t:void 0}}),m.add({name:"max",msg:"\u8f93\u5165\u503c\u4e0d\u80fd\u5927\u4e8e{0}\uff01",validator:function(e,i,t){return BUI.isString(e)&&(e=e.replace(/\,/g,"")),""!==e&&r(e)>r(i)?t:void 0}}),m.add({name:"length",msg:"\u8f93\u5165\u503c\u957f\u5ea6\u4e3a{0}\uff01",validator:function(e,i,t){return null!=e&&(e=f.trim(e.toString()),i!=e.length)?t:void 0}}),m.add({name:"minlength",msg:"\u8f93\u5165\u503c\u957f\u5ea6\u4e0d\u5c0f\u4e8e{0}\uff01",validator:function(e,i,t){if(null!=e){e=f.trim(e.toString());var r=e.length;if(i>r)return t}}}),m.add({name:"maxlength",msg:"\u8f93\u5165\u503c\u957f\u5ea6\u4e0d\u5927\u4e8e{0}\uff01",validator:function(e,i,t){if(e){e=f.trim(e.toString());var r=e.length;if(r>i)return t}}}),m.add({name:"regexp",msg:"\u8f93\u5165\u503c\u4e0d\u7b26\u5408{0}\uff01",validator:function(e,i,t){return i?i.test(e)?void 0:t:void 0}}),m.add({name:"email",msg:"\u4e0d\u662f\u6709\u6548\u7684\u90ae\u7bb1\u5730\u5740\uff01",validator:function(e,i,t){return e=f.trim(e),e?/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e)?void 0:t:void 0}}),m.add({name:"date",msg:"\u4e0d\u662f\u6709\u6548\u7684\u65e5\u671f\uff01",validator:function(e,i,t){return BUI.isNumber(e)||BUI.isDate(e)?void 0:(e=f.trim(e),e?BUI.Date.isDateString(e)?void 0:t:void 0)}}),m.add({name:"minDate",msg:"\u8f93\u5165\u65e5\u671f\u4e0d\u80fd\u5c0f\u4e8e{0}\uff01",validator:function(e,i,t){if(e){var r=o(e);if(r&&r<o(i))return t}}}),m.add({name:"maxDate",msg:"\u8f93\u5165\u65e5\u671f\u4e0d\u80fd\u5927\u4e8e{0}\uff01",validator:function(e,i,t){if(e){var r=o(e);if(r&&r>o(i))return t}}}),m.add({name:"mobile",msg:"\u4e0d\u662f\u6709\u6548\u7684\u624b\u673a\u53f7\u7801\uff01",validator:function(e,i,t){return e=f.trim(e),e?/^\d{11}$/.test(e)?void 0:t:void 0}}),m.add({name:"number",msg:"\u4e0d\u662f\u6709\u6548\u7684\u6570\u5b57\uff01",validator:function(e,i,t){return BUI.isNumber(e)?void 0:(e=e.replace(/\,/g,""),isNaN(e)?t:void 0)}}),m.add({name:"dateRange",msg:"\u7ed3\u675f\u65e5\u671f\u4e0d\u80fd\u5c0f\u4e8e\u8d77\u59cb\u65e5\u671f\uff01",validator:l}),m.add({name:"numberRange",msg:"\u7ed3\u675f\u6570\u5b57\u4e0d\u80fd\u5c0f\u4e8e\u5f00\u59cb\u6570\u5b57\uff01",validator:l}),m.add({name:"checkRange",msg:"\u5fc5\u987b\u9009\u4e2d{0}\u9879\uff01",validator:function(e,i,t,r){var o,n=a(r),u=i;return n&&u&&(o=e[n],!s(o,u))?t:null}})}t.exports=m}),define("bui/form/field",["jquery","bui/common","bui/form/fields/base","bui/form/fields/text","bui/form/fields/date","bui/form/fields/select","bui/form/fields/hidden","bui/form/fields/number","bui/form/fields/check","bui/form/fields/radio","bui/form/fields/checkbox","bui/form/fields/plain","bui/form/fields/list","bui/form/fields/textarea","bui/form/fields/uploader","bui/form/fields/checklist","bui/form/fields/radiolist","bui/form/tips","bui/form/valid","bui/form/remote","bui/overlay","bui/form/rules","bui/form/rule","bui/data","bui/list"],function(e,i,t){var r=e("bui/common"),o=e("bui/form/fields/base");r.mix(o,{Text:e("bui/form/fields/text"),Date:e("bui/form/fields/date"),Select:e("bui/form/fields/select"),Hidden:e("bui/form/fields/hidden"),Number:e("bui/form/fields/number"),Check:e("bui/form/fields/check"),Radio:e("bui/form/fields/radio"),Checkbox:e("bui/form/fields/checkbox"),Plain:e("bui/form/fields/plain"),List:e("bui/form/fields/list"),TextArea:e("bui/form/fields/textarea"),Uploader:e("bui/form/fields/uploader"),CheckList:e("bui/form/fields/checklist"),RadioList:e("bui/form/fields/radiolist")}),t.exports=o}),define("bui/form/groupvalid",["jquery","bui/form/valid","bui/common","bui/form/rules","bui/form/rule"],function(e,i,t){function r(){}function o(){}var n=e("jquery"),u="x-form-error",l=e("bui/form/valid");BUI.augment(r,l.View,{showError:function(e,i,t){var r=BUI.substitute(i,{error:e}),o=n(r);o.appendTo(t),o.addClass(u)},clearErrors:function(){var e=this,i=e.getErrorsContainer();i.children("."+u).remove()}}),o.ATTRS=ATTRS=BUI.merge(!0,l.ATTRS,{events:{value:{validchange:!0,change:!0}}}),BUI.augment(o,l,{__bindUI:function(){var e=this,i="validchange change";e.on(i,function(i){var t=i.target;if(t!=this&&e.get("showError")){var r=t.isValid();e._hasAllChildrenValid()&&(r=r&&e.isChildrenValid(),r&&(e.validControl(e.getRecord()),r=e.isSelfValid())),r?e.clearErrors():e.showErrors()}})},isValid:function(){if(this.get("disabled"))return!0;var e=this,i=e.isChildrenValid();return i&&e.isSelfValid()},valid:function(){var e=this,i=e.get("children");e.get("disabled")||BUI.each(i,function(e){e.get("disabled")||e.valid()})},_hasAllChildrenValid:function(){var e=this,i=e.get("children"),t=!0;return BUI.each(i,function(e){return e.get("disabled")||e.get("hasValid")!==!1?void 0:(t=!1,!1)}),t},isChildrenValid:function(){var e=this,i=e.get("children"),t=!0;return BUI.each(i,function(e){return e.get("disabled")||e.isValid()?void 0:(t=!1,!1)}),t},isSelfValid:function(){return!this.get("error")},validControl:function(e){var i=this,t=i.getValidError(e);i.set("error",t)},getErrors:function(){var e=this,i=e.get("children"),t=e.get("showChildError"),r=null,o=[];return t&&BUI.each(i,function(e){e.getErrors&&(o=o.concat(e.getErrors()))}),e._hasAllChildrenValid()&&e.isChildrenValid()&&(r=e.get("error"),r&&o.push(r)),o},_uiSetErrorTpl:function(e){var i=this,t=i.get("children");BUI.each(t,function(i){i.get("userConfig").errorTpl||i.set("errorTpl",e)})}}),o.View=r,t.exports=o}),define("bui/form/fields/base",["jquery","bui/common","bui/form/tips","bui/form/valid","bui/form/remote","bui/overlay","bui/form/rules","bui/form/rule"],function(e,i,t){var r=e("jquery"),o=e("bui/common"),n=o.Component,u=e("bui/form/tips").Item,l=e("bui/form/valid"),a=e("bui/form/remote"),s=o.prefix+"form-field-error",f="bui-form-tip-container",d=n.View.extend([a.View,l.View],{renderUI:function(){var e=this,i=e.get("control");if(i)e.set("controlContainer",i.parent());else{var t=e.get("controlTpl"),o=e.getControlContainer();if(t){var i=r(t).appendTo(o);e.set("control",i)}}},clearErrors:function(){var e=this,i=e.get("msgEl");i&&(i.remove(),e.set("msgEl",null)),e.get("el").removeClass(s)},showError:function(e,i){var t=this,n=t.get("control"),u=o.substitute(i,{error:e}),l=r(u);l.appendTo(n.parent()),t.set("msgEl",l),t.get("el").addClass(s)},getControlContainer:function(){var e=this,i=e.get("el"),t=e.get("controlContainer");return t&&o.isString(t)&&(t=i.find(t)),t&&t.length?t:i},getLoadingContainer:function(){return this.getControlContainer()},_uiSetName:function(e){var i=this;i.get("control").attr("name",e)}},{ATTRS:{error:{},controlContainer:{},msgEl:{},control:{}}}),c=n.Controller.extend([a,l],{isField:!0,initializer:function(){var e=this;e.on("afterRenderUI",function(){var i=e.get("tip");if(i){var t=e.getTipTigger();t&&t.parent().addClass(f),i.trigger=t,i.autoRender=!0,i=new u(i),e.set("tip",i)}})},bindUI:function(){var e=this,i=e.get("validEvent"),t=e.get("changeEvent"),r=e.get("firstValidEvent"),o=e.getInnerControl();o.is("select")&&(i="change"),o.on(i,function(){var i=e.getControlValue(o);e.validControl(i)}),r&&o.on(r,function(){if(!e.get("hasValid")){var i=e.getControlValue(o);e.validControl(i)}}),e.on(t,function(){e.onValid()}),e.on("remotecomplete",function(i){e._setError(i.error)})},onValid:function(){var e=this,i=e.getControlValue();i=e.parseValue(i),e.isCurrentValue(i)||(e.setInternal("value",i),e.onChange())},onChange:function(){this.fire("change")},isCurrentValue:function(e){return e==this.get("value")},_clearError:function(){this.set("error",null),this.get("view").clearErrors()},_setError:function(e){this.set("error",e),this.showErrors()},getControlValue:function(e){var i=this;return e=e||i.getInnerControl(),e.val()},getControlContainer:function(){return this.get("view").getControlContainer()},getRemoteParams:function(){var e=this,i={};return i[e.get("name")]=e.getControlValue(),i},setControlValue:function(e){var i=this,t=i.getInnerControl();t.val(e)},parseValue:function(e){return e},valid:function(){var e=this;e.validControl()},validControl:function(e){var i,t=this;return e=e||t.getControlValue(),preError=t.get("error"),i=t.getValidError(e),t.setInternal("hasValid",!0),i?(t._setError(i),t.fire("error",{msg:i,value:e}),preError!==i&&t.fire("validchange",{valid:!1})):(t._clearError(),t.fire("valid"),preError&&t.fire("validchange",{valid:!0})),!i},focus:function(){this.getInnerControl().focus()},change:function(){var e=this.getInnerControl();e.change()},blur:function(){this.getInnerControl().blur()},isValid:function(){var e=this;return e.get("hasValid")||e.validControl(),!e.get("error")},getError:function(){return this.get("error")},getErrors:function(){var e=this.getError();return e?[e]:[]},clearErrors:function(e){var i=this;i._clearError(),e&&i.getControlValue()!=i.get("value")&&i.setControlValue(i.get("value"))},getInnerControl:function(){return this.get("view").get("control")},getTipTigger:function(){return this.getInnerControl()},destructor:function(){var e=this,i=e.get("tip");i&&i.destroy&&i.destroy()},setInnerWidth:function(e){var i=this,t=i.getInnerControl(),n=t.siblings(),u=t.outerWidth()-t.width();o.each(n,function(e){u+=r(e).outerWidth()}),t.width(e-u)},_resetTip:function(){var e=this,i=e.get("tip");i&&i.resetVisible()},resetTip:function(){this._resetTip()},_uiSetValue:function(e){var i=this;i.setControlValue(e),i.get("rendered")&&(i.validControl(),i.onChange()),i._resetTip()},_uiSetDisabled:function(e){var i=this,t=i.getInnerControl(),r=i.get("children");t.attr("disabled",e),i.get("rendered")&&(e&&i.clearErrors(),e||i.valid()),o.each(r,function(i){i.set("disabled",e)})},_uiSetWidth:function(e){var i=this;null!=e&&i.get("forceFit")&&i.setInnerWidth(e)}},{ATTRS:{hasValid:{value:!1},forceFit:{value:!1},tip:{},changeEvent:{value:"valid"},firstValidEvent:{value:"blur"},validEvent:{value:"keyup change"},name:{view:!0},showError:{view:!0,value:!0},value:{view:!0},label:{},controlContainer:{view:!0},control:{view:!0},controlTpl:{view:!0,value:'<input type="text"/>'},events:{value:{error:!1,valid:!1,change:!0,validchange:!0}},tpl:{value:"<label>{label}</label>"},xview:{value:d}},PARSER:{control:function(e){var i=e.find("input,select,textarea");return i.length?i:e},disabled:function(e){return!!e.attr("disabled")},value:function(e){var i=this,t="select,input,textarea",r=i.get("value");return r||(e.is(t)?(r=e.val(),!r&&e.is("select")&&(r=e.attr("value"))):r=e.find(t).val()),r},name:function(e){var i=this,t="select,input,textarea",r=i.get("name");return r||(r=e.is(t)?e.attr("name"):e.find(t).attr("name")),r}}},{xclass:"form-field"});c.View=d,t.exports=c}),define("bui/form/fields/text",["bui/form/fields/base","jquery","bui/common","bui/form/tips","bui/form/valid","bui/form/remote","bui/overlay","bui/form/rules","bui/form/rule"],function(e,i,t){var r=e("bui/form/fields/base"),o=r.extend({},{xclass:"form-field-text"});t.exports=o}),define("bui/form/fields/date",["jquery","bui/common","bui/form/fields/base","bui/form/tips","bui/form/valid","bui/form/remote","bui/overlay","bui/form/rules","bui/form/rule"],function(e,i,t){var r=e("jquery"),o=e("bui/common"),n=e("bui/form/fields/base"),u=o.Date,l=n.extend({renderUI:function(){var e=this,i=e.get("datePicker");r.isPlainObject(i)&&e.initDatePicker(i),(i.get&&i.get("showTime")||i.showTime)&&e.getInnerControl().addClass("calendar-time")},initDatePicker:function(e){var i=this;seajs.use("bui-calendar",function(t){e.trigger=i.getInnerControl(),e.autoRender=!0,e=new t.DatePicker(e),i.set("datePicker",e),i.set("isCreatePicker",!0),i.get("children").push(e)})},setControlValue:function(e){var i=this,t=i.getInnerControl();o.isDate(e)&&(e=u.format(e,i._getFormatMask())),t.val(e)},_getFormatMask:function(){var e=this,i=e.get("datePicker");return i.showTime||i.get&&i.get("showTime")?"yyyy-mm-dd HH:MM:ss":"yyyy-mm-dd"},parseValue:function(e){return o.isNumber(e)?new Date(e):u.parse(e)},isCurrentValue:function(e){return u.isEquals(e,this.get("value"))},_uiSetMax:function(e){this.addRule("max",e);var i=this,t=i.get("datePicker");t&&(t.set?t.set("maxDate",e):t.maxDate=e)},_uiSetMin:function(e){this.addRule("min",e);var i=this,t=i.get("datePicker");t&&(t.set?t.set("minDate",e):t.minDate=e)}},{ATTRS:{controlTpl:{value:'<input type="text" class="calendar"/>'},defaultRules:{value:{date:!0}},max:{},min:{},value:{setter:function(e){return o.isNumber(e)?new Date(e):e}},datePicker:{shared:!1,value:{}},isCreatePicker:{value:!0}},PARSER:{datePicker:function(e){var i=this,t=i.get("datePicker")||{};return e.hasClass("calendar-time")&&o.mix(t,{showTime:!0}),t}}},{xclass:"form-field-date"});t.exports=l}),define("bui/form/fields/select",["jquery","bui/common","bui/form/fields/base","bui/form/tips","bui/form/valid","bui/form/remote","bui/overlay","bui/form/rules","bui/form/rule"],function(e,i,t){function r(e,i,t){e.children().remove();var r=t.get("emptyText");r&&t.get("showBlank")&&o("",r,e),u.each(i,function(i){o(i.value,i.text,e)})}function o(e,i,t){var r=new Option(i,e),o=t[0].options;o[o.length]=r}var n=e("jquery"),u=e("bui/common"),l=e("bui/form/fields/base"),a=l.extend({renderUI:function(){var e=this,i=e.getInnerControl(),t=e.get("select");e.get("srcNode")&&i.is("select")||n.isPlainObject(t)&&e._initSelect(t)},_initSelect:function(i){{var t=this;t.get("items")}e.async("bui/select",function(e){i.render=t.getControlContainer(),i.valueField=t.getInnerControl(),i.autoRender=!0,i=new e.Select(i),t.set("select",i),t.set("isCreate",!0),t.get("children").push(i),i.on("change",function(){var e=i.getSelectedValue();t.set("value",e)})})},setItems:function(e){var i=this,t=i.get("select");if(n.isPlainObject(e)){var o=[];u.each(e,function(e,i){o.push({value:i,text:e})}),e=o}var l=i.getInnerControl();l.is("select")&&(r(l,e,i),i.setControlValue(i.get("value")),i.getControlValue()||i.setInternal("value","")),t&&(t.set?t.set("items",e):t.items=e)},setControlValue:function(e){var i=this,t=i.get("select"),r=i.getInnerControl();r.val(e),t&&t.set&&t.getSelectedValue()!==e&&t.setSelectedValue(e)},getSelectedText:function(){var e=this,i=e.get("select"),t=e.getInnerControl();if(t.is("select")){var r=t[0],o=r.options[r.selectedIndex];return o?o.text:""}return i.getSelectedText()},getTipTigger:function(){var e=this,i=e.get("select");return i&&i.rendered?i.get("el").find("input"):e.get("el")},_uiSetItems:function(e){e&&this.setItems(e)},setInnerWidth:function(e){var i=this,t=i.getInnerControl(),r=i.get("select"),o=t.outerWidth()-t.width();t.width(e-o),r&&r.set&&r.set("width",e)}},{ATTRS:{items:{},controlTpl:{value:'<input type="hidden"/>'},showBlank:{value:!0},emptyText:{value:"\u8bf7\u9009\u62e9"},select:{shared:!1,value:{}}},PARSER:{emptyText:function(e){if(!this.get("showBlank"))return"";var i=e.find("option"),t=this.get("emptyText");return i.length&&(t=n(i[0]).text()),t}}},{xclass:"form-field-select"});t.exports=a}),define("bui/form/fields/hidden",["bui/form/fields/base","jquery","bui/common","bui/form/tips","bui/form/valid","bui/form/remote","bui/overlay","bui/form/rules","bui/form/rule"],function(e,i,t){var r=e("bui/form/fields/base"),o=r.extend({},{ATTRS:{controlTpl:{value:'<input type="hidden"/>'},tpl:{value:""}}},{xclass:"form-field-hidden"});t.exports=o}),define("bui/form/fields/number",["bui/form/fields/base","jquery","bui/common","bui/form/tips","bui/form/valid","bui/form/remote","bui/overlay","bui/form/rules","bui/form/rule"],function(e,i,t){var r=e("bui/form/fields/base"),o=r.extend({parseValue:function(e){if(""==e||null==e)return null;if(BUI.isNumber(e))return e;var i=this,t=i.get("allowDecimals");return e=e.replace(/\,/g,""),t?parseFloat(parseFloat(e).toFixed(i.get("decimalPrecision"))):parseInt(e,10)},_uiSetMax:function(e){this.addRule("max",e)},_uiSetMin:function(e){this.addRule("min",e)}},{ATTRS:{max:{},min:{},decorateCfgFields:{value:{min:!0,max:!0}},validEvent:{value:"keyup change"},defaultRules:{value:{number:!0}},allowDecimals:{value:!0},decimalPrecision:{value:2},step:{value:1}}},{xclass:"form-field-number"});t.exports=o}),define("bui/form/fields/check",["jquery","bui/form/fields/base","bui/common","bui/form/tips","bui/form/valid","bui/form/remote","bui/overlay","bui/form/rules","bui/form/rule"],function(e,i,t){var r=(e("jquery"),e("bui/form/fields/base")),o=r.extend({onValid:function(){var e=this,i=e._getControlChecked();e.setInternal("checked",i),e.fire("change"),e.fire(i?"checked":"unchecked")},_setControlChecked:function(e){var i=this,t=i.getInnerControl();t.attr("checked",!!e)},_getControlChecked:function(){var e=this,i=e.getInnerControl();return!!i.attr("checked")},_uiSetValue:function(e){this.setControlValue(e)},_uiSetWidth:function(){},_uiSetChecked:function(e){var i=this;i._setControlChecked(e),i.get("rendered")&&i.onValid()}},{ATTRS:{validEvent:{value:"click"},checked:{value:!1},events:{value:{checked:!1,unchecked:!1}}},PARSER:{checked:function(e){return!!e.attr("checked")
}}},{xclass:"form-check-field"});t.exports=o}),define("bui/form/fields/radio",["bui/form/fields/check","jquery","bui/form/fields/base","bui/common","bui/form/tips","bui/form/valid","bui/form/remote","bui/overlay","bui/form/rules","bui/form/rule"],function(e,i,t){var r=e("bui/form/fields/check"),o=r.extend({bindUI:function(){var e=this,i=e.get("parent"),t=e.get("name");i&&e.getInnerControl().on("click",function(){var r=i.getFields(t);BUI.each(r,function(i){i!=e&&i.set("checked",!1)})})}},{ATTRS:{controlTpl:{view:!0,value:'<input type="radio"/>'},controlContainer:{value:".radio"},tpl:{value:'<label><span class="radio"></span>{label}</label>'}}},{xclass:"form-field-radio"});t.exports=o}),define("bui/form/fields/checkbox",["bui/form/fields/check","jquery","bui/form/fields/base","bui/common","bui/form/tips","bui/form/valid","bui/form/remote","bui/overlay","bui/form/rules","bui/form/rule"],function(e,i,t){var r=e("bui/form/fields/check"),o=r.extend({},{ATTRS:{controlTpl:{view:!0,value:'<input type="checkbox"/>'},controlContainer:{value:".checkbox"},tpl:{value:'<label><span class="checkbox"></span>{label}</label>'}}},{xclass:"form-field-checkbox"});t.exports=o}),define("bui/form/fields/plain",["jquery","bui/form/fields/base","bui/common","bui/form/tips","bui/form/valid","bui/form/remote","bui/overlay","bui/form/rules","bui/form/rule"],function(e,i,t){var r=e("jquery"),o=e("bui/form/fields/base"),n=o.View.extend({_uiSetValue:function(e){var i,t=this,o=t.get("textEl"),n=t.getControlContainer(),u=t.get("renderer"),l=u?u(e):e,a=t.get("width"),s=0;o&&o.remove(),l=l||"&nbsp;",i=BUI.substitute(t.get("textTpl"),{text:l}),o=r(i).appendTo(n),s=o.outerWidth()-o.width(),o.width(a-s),t.set("textEl",o)}},{ATTRS:{textEl:{},value:{}}},{xclass:"form-field-plain-view"}),u=o.extend({},{ATTRS:{controlTpl:{value:'<input type="hidden"/>'},textTpl:{view:!0,value:'<span class="x-form-text">{text}</span>'},renderer:{view:!0,value:function(e){return e}},tpl:{value:""},xview:{value:n}}},{xclass:"form-field-plain"});t.exports=u}),define("bui/form/fields/list",["jquery","bui/common","bui/data","bui/list","bui/form/fields/base","bui/form/tips","bui/form/valid","bui/form/remote","bui/overlay","bui/form/rules","bui/form/rule"],function(e,i,t){function r(e){var i=e;return o.isPlainObject(e)&&(i=[],n.each(e,function(e,t){i.push({text:e,value:t})})),i}var o=e("jquery"),n=e("bui/common"),u=e("bui/list"),l=e("bui/form/fields/base"),u=l.extend({initializer:function(){var e=this;e._initList()},_getList:function(){var e=this,i=e.get("children");return i[0]},bindUI:function(){var e=this,i=e._getList();i&&i.on("selectedchange",function(){var t=e._getListValue(i);e.set("value",t)})},_getListValue:function(e){var i=this;return e=e||i._getList(),e.getSelectionValues().join(",")},setControlValue:function(e){var i=this,t=i.getInnerControl(),r=i._getList();t.val(e),i._getListValue(r)!==e&&r.getCount()&&(r.get("multipleSelect")&&r.clearSelection(),r.setSelectionByField(e.split(",")))},syncUI:function(){this.set("list",this._getList())},_initList:function(){var e=this,i=e.get("defaultListCfg"),t=e.get("children"),r=e.get("list")||{};t[0]||(o.isPlainObject(r)&&n.mix(r,i),t.push(r))},setItems:function(e){var i=this,t=i.get("value"),o=i._getList();o.set("items",r(e)),o.setSelectionByField(t.split(","))},_uiSetItems:function(e){e&&this.setItems(e)}},{ATTRS:{controlTpl:{value:'<input type="hidden"/>'},defaultListCfg:{value:{xclass:"simple-list"}},items:{setter:function(e){if(o.isPlainObject(e)){var i=[];n.each(e,function(e,t){i.push({value:t,text:e})}),e=i}return e}},list:{}},PARSER:{list:function(e){var i=e.find(".bui-simple-list");return i.length?{srcNode:i}:void 0}}},{xclass:"form-field-list"});t.exports=u}),define("bui/form/fields/textarea",["bui/form/fields/base","jquery","bui/common","bui/form/tips","bui/form/valid","bui/form/remote","bui/overlay","bui/form/rules","bui/form/rule"],function(e,i,t){var r=e("bui/form/fields/base"),o=r.extend({_uiSetRows:function(e){var i=this,t=i.getInnerControl();e&&t.attr("rows",e)},_uiSetCols:function(e){var i=this,t=i.getInnerControl();e&&t.attr("cols",e)}},{ATTRS:{controlTpl:{value:"<textarea></textarea>"},rows:{},cols:{},decorateCfgFields:{value:{rows:!0,cols:!0}}}},{xclass:"form-field-textarea"});t.exports=o}),define("bui/form/fields/uploader",["jquery","bui/common","bui/form/fields/base","bui/form/rules","bui/form/tips","bui/form/valid","bui/form/remote","bui/overlay","bui/form/rule"],function(e,i,t){var r=e("bui/common"),o=r.JSON,n=e("bui/form/fields/base"),u=e("bui/form/rules"),l=n.extend({renderUI:function(){var e=this,i=e.getInnerControl();e.get("srcNode")&&"file"===i.get(0).type||(e._initControlValue(),e._initUpload())},_initUpload:function(){var e=this,i=(e.get("children"),e.get("uploader")||{});r.use("bui/uploader",function(t){i.render=e.getControlContainer(),i.autoRender=!0,i=new t.Uploader(i),e.set("uploader",i),e.set("isCreate",!0),e.get("children").push(i),e._initQueue(i.get("queue")),i.on("success",function(){var i=e._getUploaderResult();e.setControlValue(i)}),i.get("queue").on("itemremoved",function(){var i=e._getUploaderResult();e.setControlValue(i)})})},_getUploaderResult:function(){var e=this,i=e.get("uploader"),t=i.get("queue"),o=t.getItems(),n=[];return r.each(o,function(e){e.result&&n.push(e.result)}),n},setControlValue:function(e){var i=this,t=i.getInnerControl();t.val(o.stringify(e))},_initControlValue:function(){var e,i=this,t=i.getControlValue();t&&(e=r.JSON.parse(t),i.set("value",e))},_initQueue:function(e){var i=this,t=i.get("value"),o=[];r.each(t,function(e){var i=r.cloneObject(e);i.success=!0,i.result=e,o.push(i)}),e&&e.setItems(o)}},{ATTRS:{controlTpl:{value:'<input type="hidden"/>'},uploader:{setter:function(e){var i=this.get("disabled");return e&&e.isController&&e.set("disabled",i),e}},disabled:{setter:function(e){var i=this,t=i.get("uploader");t&&t.isController&&t.set("disabled",e)}},value:{shared:!1,value:[]},defaultRules:function(){}}},{xclass:"form-field-uploader"});u.add({name:"uploader",msg:"\u4e0a\u4f20\u6587\u4ef6\u9009\u62e9\u6709\u8bef\uff01",validator:function(e,i,t,r){var o=r.get("uploader");return o&&!o.isValid()?t:void 0}}),t.exports=l}),define("bui/form/fields/checklist",["jquery","bui/common","bui/form/fields/list","bui/data","bui/list","bui/form/fields/base","bui/form/tips","bui/form/valid","bui/form/remote","bui/overlay","bui/form/rules","bui/form/rule"],function(e,i,t){"use strict";var r=(e("bui/common"),e("bui/form/fields/list")),o=r.extend({},{ATTRS:{defaultListCfg:{value:{itemTpl:'<li><span class="x-checkbox"></span>{text}</li>',multipleSelect:!0,allowTextSelection:!1}}}},{xclass:"form-field-checklist"});t.exports=o}),define("bui/form/fields/radiolist",["jquery","bui/common","bui/form/fields/list","bui/data","bui/list","bui/form/fields/base","bui/form/tips","bui/form/valid","bui/form/remote","bui/overlay","bui/form/rules","bui/form/rule"],function(e,i,t){"use strict";var r=(e("bui/common"),e("bui/form/fields/list")),o=r.extend({},{ATTRS:{defaultListCfg:{value:{itemTpl:'<li><span class="x-radio"></span>{text}</li>',allowTextSelection:!1}}}},{xclass:"form-field-radiolist"});t.exports=o}),define("bui/form/valid",["jquery","bui/common","bui/form/rules","bui/form/rule"],function(e,i,t){var r=e("bui/common"),o=e("bui/form/rules"),n=function(){};n.prototype={getErrorsContainer:function(){var e=this,i=e.get("errorContainer");return i?r.isString(i)?e.get("el").find(i):i:e.getContentElement()},showErrors:function(e){var i=this,t=i.getErrorsContainer(),o=i.get("errorTpl");return i.clearErrors(),i.get("showError")?i.get("showOneError")?void(e&&e.length&&i.showError(e[0],o,t)):void r.each(e,function(e){e&&i.showError(e,o,t)}):void 0},showError:function(){},clearErrors:function(){}};var u=function(){};u.ATTRS={defaultRules:{value:{}},defaultMessages:{value:{}},rules:{shared:!1,value:{}},messages:{shared:!1,value:{}},validator:{},errorContainer:{view:!0},errorTpl:{view:!0,value:'<span class="x-field-error"><span class="x-icon x-icon-mini x-icon-error">!</span><label class="x-field-error-text">{error}</label></span>'},showError:{view:!0,value:!0},showOneError:{},error:{},pauseValid:{value:!1}},u.prototype={__bindUI:function(){var e=this;e.on("afterDisabledChange",function(i){var t=i.newVal;t?e.clearErrors(!1,!1):e.valid()})},isValid:function(){},valid:function(){},validControl:function(){},validRules:function(e,i){if(!e)return null;if(this.get("pauseValid"))return null;var t=this,r=t._getValidMessages(),n=null;for(var u in e)if(e.hasOwnProperty(u)){var l=e[u];if(n=o.valid(u,i,l,r[u],t))break}return n},_getValidMessages:function(){var e=this,i=e.get("defaultMessages"),t=e.get("messages");return r.merge(i,t)},getValidError:function(e){var i=this,t=i.get("validator"),r=null;return r=i.validRules(i.get("defaultRules"),e)||i.validRules(i.get("rules"),e),r||this.get("pauseValid")||(i.parseValue&&(e=i.parseValue(e)),r=t?t.call(this,e):""),r},getErrors:function(){},showErrors:function(e){var i=this,e=e||i.getErrors();i.get("view").showErrors(e)},clearErrors:function(e,i){i=null==i?!0:i;var t=this,o=t.get("children");i&&r.each(o,function(t){t.clearErrors&&(t.field?t.clearErrors(e):t.clearErrors(e,i))}),t.set("error",null),t.get("view").clearErrors()},addRule:function(e,i,t){var r=this,o=r.get("rules"),n=r.get("messages");o[e]=i,t&&(n[e]=t)},addRules:function(e,i){var t=this;r.each(e,function(e,r){var o=i?i[r]:null;t.addRule(r,e,o)})},removeRule:function(e){var i=this,t=i.get("rules");delete t[e]},clearRules:function(){var e=this;e.set("rules",{})}},u.View=n,t.exports=u}),define("bui/form/remote",["jquery","bui/common"],function(e,i,t){var r=e("jquery"),o=e("bui/common"),n=function(){};n.ATTRS={isLoading:{},loadingEl:{}},n.prototype={getLoadingContainer:function(){},_setLoading:function(){var e=this,i=e.get("loadingEl"),t=e.get("loadingTpl");t&&!i&&(i=r(t).appendTo(e.getLoadingContainer()),e.setInternal("loadingEl",i))},_clearLoading:function(){var e=this,i=e.get("loadingEl");i&&(i.remove(),e.setInternal("loadingEl",null))},_uiSetIsLoading:function(e){var i=this;e?i._setLoading():i._clearLoading()}};var u=function(){};u.ATTRS={defaultRemote:{value:{method:"GET",cache:!0,callback:function(e){return e}}},remoteDaly:{value:500},cacheMap:{value:{}},loadingTpl:{view:!0,value:'<img src="http://img02.taobaocdn.com/tps/i2/T1NU8nXCVcXXaHNz_X-16-16.gif" alt="loading"/>'},isLoading:{view:!0,value:!1},remote:{setter:function(e){return o.isString(e)&&(e={url:e}),e}},remoteHandler:{},events:{value:{remotecomplete:!1,remotestart:!1}}},u.prototype={__bindUI:function(){var e=this;e.on("valid",function(){if(e.get("remote")&&e.isValid()&&!e.get("pauseValid")){var i=e.getControlValue(),t=e.getRemoteParams();e._startRemote(t,i)}}),e.on("error",function(){e.get("remote")&&e._cancelRemote()})},_startRemote:function(e,i){function t(){r._remoteValid(e,o,i),r.set("isLoading",!0)}var r=this,o=r.get("remoteHandler"),n=r.get("cacheMap"),u=r.get("remoteDaly");return o&&r._cancelRemote(o),null!=n[i]?void r._validResult(r._getCallback(),n[i]):(o=setTimeout(t,u),void r.setInternal("remoteHandler",o))},_validResult:function(e,i){var t=this,r=e(i);t.onRemoteComplete(r,i)},onRemoteComplete:function(e,i,t){var r=this;t==r.get("remoteHandler")&&(r.fire("remotecomplete",{error:e,data:i}),r.set("isLoading",!1),r.setInternal("remoteHandler",null))},_getOptions:function(e){var i=this,t=i.get("remote"),r=i.get("defaultRemote"),n=o.merge(r,t,{data:e});return n},_getCallback:function(){return this._getOptions().callback},_remoteValid:function(e,i,t){var o=this,n=o.get("cacheMap"),u=o._getOptions(e);u.success=function(e){var r=u.callback,l=r(e);n[t]=e,o.onRemoteComplete(l,e,i)},u.error=function(e,t,r){o.onRemoteComplete(r,null,i)},o.fire("remotestart",{data:e}),r.ajax(u)},getRemoteParams:function(){},clearCache:function(){this.set("cacheMap",{})},_cancelRemote:function(e){var i=this;e=e||i.get("remoteHandler"),e&&(clearTimeout(e),i.setInternal("remoteHandler",null)),i.set("isLoading",!1)}},u.View=n,t.exports=u}),define("bui/form/rule",["jquery","bui/common"],function(e,i,t){function r(e,i,t,r,o){l.isArray(t)&&l.isString(t[1])&&(t[1]&&(r=t[1]),t=t[0]);var u=e,a=u.get("validator"),s=n(e,t,r);return i=null==i?"":i,a.call(u,i,t,s,o)}function o(e){if(null==e)return{};if(u.isPlainObject(e))return e;var i=e,t={};if(l.isArray(e)){for(var r=0;r<i.length;r++)t[r]=i[r];return t}return{0:e}}function n(e,i,t){var r=o(i);return t=t||e.get("msg"),l.substitute(t,r)}var u=e("jquery"),l=e("bui/common"),a=function(e){a.superclass.constructor.call(this,e)};l.extend(a,l.Base),a.ATTRS={name:{},msg:{},validator:{value:function(){}}},l.augment(a,{valid:function(e,i,t,o){var n=this;return r(n,e,i,t,o)}}),t.exports=a}),define("bui/form/group/base",["jquery","bui/common","bui/form/fieldcontainer","bui/form/field","bui/form/groupvalid","bui/form/fields/base","bui/form/fields/text","bui/form/fields/date","bui/form/fields/select","bui/form/fields/hidden","bui/form/fields/number","bui/form/fields/check","bui/form/fields/radio","bui/form/fields/checkbox","bui/form/fields/plain","bui/form/fields/list","bui/form/fields/textarea","bui/form/fields/uploader","bui/form/fields/checklist","bui/form/fields/radiolist","bui/form/tips","bui/form/valid","bui/form/remote","bui/overlay","bui/form/rules","bui/form/rule","bui/data","bui/list"],function(e,i,t){var r=(e("bui/common"),e("bui/form/fieldcontainer")),o=r.extend({},{ATTRS:{label:{view:!0},defaultChildClass:{value:"form-field"}}},{xclass:"form-group"});t.exports=o}),define("bui/form/group/range",["bui/form/group/base","jquery","bui/common","bui/form/fieldcontainer","bui/form/field","bui/form/groupvalid","bui/form/fields/base","bui/form/fields/text","bui/form/fields/date","bui/form/fields/select","bui/form/fields/hidden","bui/form/fields/number","bui/form/fields/check","bui/form/fields/radio","bui/form/fields/checkbox","bui/form/fields/plain","bui/form/fields/list","bui/form/fields/textarea","bui/form/fields/uploader","bui/form/fields/checklist","bui/form/fields/radiolist","bui/form/tips","bui/form/valid","bui/form/remote","bui/overlay","bui/form/rules","bui/form/rule","bui/data","bui/list"],function(e,i,t){function r(e,i,t){var r=e.get("allowEqual");return r?i>=t:i>t}var o=e("bui/form/group/base"),n=o.extend({},{ATTRS:{rangeText:{value:"\u5f00\u59cb\u4e0d\u80fd\u5927\u4e8e\u7ed3\u675f\uff01"},allowEqual:{value:!0},validator:{value:function(){for(var e=this,i=e.getFields(),t=!0,o=1;o<i.length;o++){var n,u,l=i[o],a=i[o-1];if(l&&a&&(n=l.get("value"),u=a.get("value"),!r(e,n,u))){t=!1;break}}return t?null:e.get("rangeText")}}}},{xclass:"form-group-range"});t.exports=n}),define("bui/form/group/check",["bui/form/group/base","jquery","bui/common","bui/form/fieldcontainer","bui/form/field","bui/form/groupvalid","bui/form/fields/base","bui/form/fields/text","bui/form/fields/date","bui/form/fields/select","bui/form/fields/hidden","bui/form/fields/number","bui/form/fields/check","bui/form/fields/radio","bui/form/fields/checkbox","bui/form/fields/plain","bui/form/fields/list","bui/form/fields/textarea","bui/form/fields/uploader","bui/form/fields/checklist","bui/form/fields/radiolist","bui/form/tips","bui/form/valid","bui/form/remote","bui/overlay","bui/form/rules","bui/form/rule","bui/data","bui/list"],function(e,i,t){function r(e){var i=e.getFieldAt(0);return i?i.get("name"):""}var o=e("bui/form/group/base"),n=o.extend({bindUI:function(){var e=this;e.on("change",function(){var i=r(e),t=e.get("range"),o=e.getRecord(),n=o[i],u=t[1];n&&n.length>=u?e._setFieldsEnable(i,!1):e._setFieldsEnable(i,!0)})},_setFieldsEnable:function(e,i){var t=this,r=t.getFields(e);BUI.each(r,function(e){i?e.enable():e.get("checked")||e.disable()})},_uiSetRange:function(e){this.addRule("checkRange",e)}},{ATTRS:{range:{setter:function(e){return(BUI.isString(e)||BUI.isNumber(e))&&(e=[parseInt(e,10)]),e}}}},{xclass:"form-group-check"});t.exports=n}),define("bui/form/group/select",["bui/form/group/base","jquery","bui/common","bui/data","bui/form/fieldcontainer","bui/form/field","bui/form/groupvalid","bui/form/fields/base","bui/form/fields/text","bui/form/fields/date","bui/form/fields/select","bui/form/fields/hidden","bui/form/fields/number","bui/form/fields/check","bui/form/fields/radio","bui/form/fields/checkbox","bui/form/fields/plain","bui/form/fields/list","bui/form/fields/textarea","bui/form/fields/uploader","bui/form/fields/checklist","bui/form/fields/radiolist","bui/form/tips","bui/form/valid","bui/form/remote","bui/overlay","bui/form/rules","bui/form/rule","bui/list"],function(e,i,t){function r(e){var i=[];return BUI.each(e,function(e){i.push({text:e.text,value:e.id})}),i}var o=e("bui/form/group/base"),n=e("bui/data"),u=BUI.Component.UIBase.Bindable,l=o.extend([u],{initializer:function(){var e=this,i=e.get("url"),t=e.get("store")||e._getStore();t.isStore||(t.autoLoad=!0,i&&(t.url=i),t=new n.TreeStore(t)),e.set("store",t)},bindUI:function(){var e=this;e.on("change",function(i){var t=i.target;if(t!=e){var r=t,o=r.get("value"),n=e._getFieldIndex(r)+1;e._valueChange(o,n)}})},onLoad:function(e){var i=this,t=e?e.node:i.get("store").get("root");i._setFieldItems(t.level,t.children)},_getStore:function(){var e=this,i=e.get("type");return i&&a[i]?a[i]:{}},_valueChange:function(e,i){var t=this,r=t.get("store");if(e){var o=r.findNode(e);if(!o)return;r.isLoaded(o)?t._setFieldItems(i,o.children):r.loadNode(o)}else t._setFieldItems(i,[])},_setFieldItems:function(e,i){var t=this,o=t.getFieldAt(e),n=r(i);o&&(o.setItems(n),t._valueChange(o.get("value"),e+1))},_getFieldIndex:function(e){var i=this,t=i.getFields();return BUI.Array.indexOf(e,t)}},{ATTRS:{type:{},store:{}}},{xclass:"form-group-select"}),a={};l.addType=function(e,i){a[e]=i},l.addType("city",{proxy:{url:"http://lp.taobao.com/go/rgn/citydistrictdata.php",dataType:"jsonp"},map:{isleaf:"leaf",value:"text"}}),t.exports=l});