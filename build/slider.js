define("bui/slider",["bui/common","bui/slider/slider"],function(require){var e=require("bui/common"),t=e.namespace("Slider");return e.mix(t,{Slider:require("bui/slider/slider")}),t}),define("bui/slider/slider",["bui/common"],function(require){"use strict";function e(e,t){return e>t&&(e=t),0>e&&(e=0),e/t*100}var t=document,a=require("bui/common"),i="x-slider-handle",n="x-slider-vertical",l="x-slider-horizontal",r="x-slider-back",s=i+"-start",u=i+"-end",o=a.Component.View.extend({renderUI:function(){var e=this,t=e.get("isVertical");e.get("el").addClass(t?n:l)},setRange:function(e,t,a){function i(e){return e+"%"}e>t&&(e=t);var n=this,l=n.get("backEl"),r=n.get("isVertical"),s=n.get("handleEl"),u=s.length,o=t-e,d=a?n.get("duration"):null,c=r?"height":"width",f=r?"bottom":"left",g=a?"animate":"css",v={},h={};l&&(v[c]=o+"%",v[f]=e+"%",l[g](v,d)),1===u?(h[f]=i(t),s[g](h,d)):2===u&&(h[f]=i(e),s[0].style[f]!==h[f]&&$(s[0])[g](h,d),h[f]=i(t),s[1].style[f]!==h[f]&&$(s[1])[g](h,d))},_uiSetBackTpl:function(e){var t=this,a=t.get("el"),i=$(e).appendTo(a);i.addClass(r),t.setInternal("backEl",i)},_uiSetHandleTpl:function(e){var t,a=this,n=a.get("el"),l=a.get("range");l?(a._createHandleEl(e,s),a._createHandleEl(e,u)):a._createHandleEl(e),t=n.find("."+i),a.setInternal("handleEl",t)},_createHandleEl:function(e,t){var a=this,n=a.get("el"),l=$(e).appendTo(n);l.addClass(i),l.attr("tabindex","0"),t&&l.addClass(t)}},{ATTRS:{backEl:{},handleEl:{}}}),d=a.Component.Controller.extend({slideTo:function(e){this.set("value",e)},bindUI:function(){var e=this,t=e.get("el");t.find(".x-slider-handle").on("click",function(e){e.preventDefault()}),t.on("mousedown",function(a){var i=$(a.target),n=t.offset();i.hasClass("x-slider-handle")?(a.preventDefault(),e._handleDrag(a)):(n={left:a.pageX-n.left,top:a.pageY-n.top},e._slideByOffset(n,!0))})},_slideByOffset:function(e,t){var i=this,n=i.get("value"),l=i._formatValue(e);n===l||a.isArray(l)&&a.Array.equals(l,n)||(t?i.set("value",l):(i.setInternal("value",l),i._setValue(l,!1)))},_handleDrag:function(e){function a(e){var t=r.get("draging");if(t){e.preventDefault();var a=e.pageX,i=e.pageY,n={};n.left=t.elX+(a-t.startX),n.top=t.elY+(i-t.startY),r._slideByOffset(n,!1)}}function i(){$(t).on("mousemove",a),$(t).on("mouseup",l)}function n(){$(t).off("mousemove",a),$(t).off("mouseup",l)}function l(e){1==e.which&&(r.set("draging",!1),n())}var r=this,s=r.get("isVertical"),u=$(e.target),o=u.position();1==e.which&&(r.set("draging",{elX:o.left,elY:s?o.top+u.height():o.top,startX:e.pageX,startY:e.pageY}),i())},_getCalcValue:function(t){var a,i,n=this,l=n.get("el"),r=n.get("max"),s=n.get("min"),u=n.get("step"),o=n.get("isVertical"),d=o?l.height():l.width();if(a=o?e(l.height()-t.top,d):e(t.left,d),i=(r-s)*a/100+s,u){i=parseInt(i,10);var c=i%u;c&&(i+=u-c)}return i},_formatValue:function(e){var t=this,i=t.get("value"),n=t._getCalcValue(e);if(a.isNumber(i))return n;if(a.isArray(i)){var l=Math.abs(i[0]-n),r=Math.abs(i[1]-n);return r>l?[n,i[1]]:[i[0],n]}return i},_uiSetValue:function(e){this._setValue(e,!0)},_setValue:function(t,i){var n,l,r=this,s=r.get("min"),u=r.get("max"),o=u-s;s==u?(n=0,l=100):a.isNumber(t)?(n=0,l=e(t-s,o)):a.isArray(t)&&(n=e(t[0]-s,o),l=e(t[1]-s,o)),r._setRange(n,l,i),r.fire("change",{value:t})},_setRange:function(e,t,a){this.get("view").setRange(e,t,a)}},{ATTRS:{min:{value:0},duration:{view:!0,value:400},max:{value:100},value:{view:!0},step:{value:1},handleTpl:{view:!0,value:"<span></span>"},isVertical:{view:!0,value:!1},range:{view:!0,value:!1},backTpl:{view:!0,value:"<div></div>"},xview:{value:o}}},{xclass:"slider"});return d});