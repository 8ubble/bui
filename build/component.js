define("bui/component",["bui/component/manage","bui/component/uibase","bui/component/view","bui/component/controller"],function(require){function e(e,n){var i,o;return e&&(o=e.xclass)&&(n&&!e.prefixCls&&(e.prefixCls=n.get("prefixCls")),i=t.Manager.getConstructorByXClass(o),i||BUI.error("can not find class by xclass desc : "+o),e=new i(e)),e}var t={};return BUI.mix(t,{Manager:require("bui/component/manage"),UIBase:require("bui/component/uibase"),View:require("bui/component/view"),Controller:require("bui/component/controller")}),t.create=e,t}),define("bui/component/manage",function(){function e(e){for(var t,n=e.split(/\s+/),i=-1,r=null,a=0;a<n.length;a++){var s=o[n[a]];s&&(t=s.priority)>i&&(i=t,r=s.constructor)}return r}function t(e){for(var t in o){var n=o[t];if(n.constructor==e)return t}return 0}function n(e,t){BUI.isFunction(t)?o[e]={constructor:t,priority:0}:(t.priority=t.priority||0,o[e]=t)}function i(e){for(var t=$.trim(e).split(/\s+/),n=0;n<t.length;n++)t[n]&&(t[n]=this.get("prefixCls")+t[n]);return t.join(" ")}var o={},r={},a={__instances:r,addComponent:function(e,t){r[e]=t},removeComponent:function(e){delete r[e]},eachComponent:function(e){BUI.each(r,e)},getComponent:function(e){return r[e]},getCssClassWithPrefix:i,getXClassByConstructor:t,getConstructorByXClass:e,setConstructorByXClass:n};return a}),function(){var e="bui/component/uibase/";define("bui/component/uibase",[e+"base",e+"align",e+"autoshow",e+"autohide",e+"close",e+"collapsable",e+"drag",e+"keynav",e+"list",e+"listitem",e+"mask",e+"position",e+"selection",e+"stdmod",e+"decorate",e+"tpl",e+"childcfg",e+"bindable",e+"depends"],function(t){var n=t(e+"base");return BUI.mix(n,{Align:t(e+"align"),AutoShow:t(e+"autoshow"),AutoHide:t(e+"autohide"),Close:t(e+"close"),Collapsable:t(e+"collapsable"),Drag:t(e+"drag"),KeyNav:t(e+"keynav"),List:t(e+"list"),ListItem:t(e+"listitem"),Mask:t(e+"mask"),Position:t(e+"position"),Selection:t(e+"selection"),StdMod:t(e+"stdmod"),Decorate:t(e+"decorate"),Tpl:t(e+"tpl"),ChildCfg:t(e+"childcfg"),Bindable:t(e+"bindable"),Depends:t(e+"depends")}),BUI.mix(n,{CloseView:n.Close.View,CollapsableView:n.Collapsable.View,ChildList:n.List.ChildList,ListItemView:n.ListItem.View,MaskView:n.Mask.View,PositionView:n.Position.View,StdModView:n.StdMod.View,TplView:n.Tpl.View}),n})}(),define("bui/component/uibase/base",["bui/component/manage"],function(require){function e(e){t(e,"initializer","constructor")}function t(e,t,n){for(var i,o,r,a,s=e.constructor,l=[];s;){if(a=[],r=s.mixins)for(var u=0;u<r.length;u++)i=r[u],i&&("constructor"!=n&&(i=i.prototype.hasOwnProperty(n)?i.prototype[n]:null),i&&a.push(i));s.prototype.hasOwnProperty(t)&&(o=s.prototype[t])&&a.push(o),a.length&&l.push.apply(l,a.reverse()),s=s.superclass&&s.superclass.constructor}for(u=l.length-1;u>=0;u--)l[u]&&l[u].call(e)}function n(e){for(var t,n,i,o=e.constructor;o;){if(o.prototype.hasOwnProperty("destructor")&&o.prototype.destructor.apply(e),t=o.mixins)for(i=t.length-1;i>=0;i--)n=t[i]&&t[i].prototype.__destructor,n&&n.apply(e);o=o.superclass&&o.superclass.constructor}}function i(e){e&&BUI.each(e,function(t,n){BUI.isFunction(t)&&(e[n]=new t)})}function o(e,t,n){t&&BUI.each(t,function(t){t[n]&&t[n](e)})}function r(){}function a(e){var t,n,i=e.getAttrs();for(var o in i)if(i.hasOwnProperty(o)){var r=u+c(o);(n=e[r])&&i[o].sync!==!1&&void 0!==(t=e.get(o))&&n.call(e,t)}}function s(e){for(var t=[];e.base;)t.push(e),e=e.base;for(var n=t.length-1;n>=0;n--){var i=t[n];BUI.mix(i.prototype,i.px),BUI.mix(i,i.sx),i.base=null,i.px=null,i.sx=null}}var l=require("bui/component/manage"),u="_uiSet",c=BUI.ucfirst,d=$.noop,f=require("bui/common/base"),h=function(t){var n=this;f.apply(n,arguments),n.setInternal("userConfig",t),e(n,t);var r=n.get("plugins");i(r);var a=n.get("xclass");a&&(n.__xclass=a),o(n,r,"initializer"),t&&t.autoRender&&n.render()};return h.ATTRS={userConfig:{},autoRender:{value:!1},listeners:{value:{}},plugins:{},rendered:{value:!1},xclass:{valueFn:function(){return l.getXClassByConstructor(this.constructor)}}},BUI.extend(h,f),BUI.augment(h,{create:function(){var e=this;return e.get("created")||(e.fire("beforeCreateDom"),t(e,"createDom","__createDom"),e._set("created",!0),e.fire("afterCreateDom"),o(e,e.get("plugins"),"createDom")),e},render:function(){var e=this;if(!e.get("rendered")){var n=e.get("plugins");e.create(void 0),e.set("created",!0),e.fire("beforeRenderUI"),t(e,"renderUI","__renderUI"),e.fire("afterRenderUI"),o(e,n,"renderUI"),e.fire("beforeBindUI"),r(e),t(e,"bindUI","__bindUI"),e.set("binded",!0),e.fire("afterBindUI"),o(e,n,"bindUI"),e.fire("beforeSyncUI"),a(e),t(e,"syncUI","__syncUI"),e.fire("afterSyncUI"),o(e,n,"syncUI"),e._set("rendered",!0)}return e},createDom:d,renderUI:d,bindUI:d,syncUI:d,destroy:function(){var e=this;return e.destroyed?e:(e.fire("beforeDestroy"),o(e,e.get("plugins"),"destructor"),n(e),e.fire("afterDestroy"),e.off(),e.clearAttrVals(),e.destroyed=!0,e)}}),BUI.mix(h,{define:function(e,t,n,i){function o(){var e=this.constructor;e.base&&s(e),h.apply(this,arguments)}return $.isPlainObject(t)&&(i=n,n=t,t=[]),BUI.extend(o,e),o.base=e,o.px=n,o.sx=i,t.length&&(o.extensions=t),o},extend:function g(){var e,t=$.makeArray(arguments),n=t[t.length-1];if(t.unshift(this),n.xclass&&(t.pop(),t.push(n.xclass)),e=h.define.apply(h,t),n.xclass){var i=n.priority||(this.priority?this.priority+1:1);l.setConstructorByXClass(n.xclass,{constructor:e,priority:i}),e.__xclass=n.xclass,e.priority=i,e.toString=function(){return n.xclass}}return e.extend=g,e}}),h}),define("bui/component/uibase/align",["bui/common/ua"],function(require){function e(e){var t,n=e.ownerDocument,i=n.body,o=$(e).css("position"),r="fixed"==o||"absolute"==o;if(!r)return"html"==e.nodeName.toLowerCase()?null:e.parentNode;for(t=e.parentNode;t&&t!=i;t=t.parentNode)if(o=$(t).css("position"),"static"!=o)return t;return null}function t(t){var n,i,o,r,a={left:0,right:1/0,top:0,bottom:1/0},s=t.ownerDocument,l=s.body,u=s.documentElement;for(n=t;n=e(n);)if((!f.ie||0!=n.clientWidth)&&n!=l&&n!=u&&"visible"!=$(n).css("overflow")){var c=$(n).offset();c.left+=n.clientLeft,c.top+=n.clientTop,a.top=Math.max(a.top,c.top),a.right=Math.min(a.right,c.left+n.clientWidth),a.bottom=Math.min(a.bottom,c.top+n.clientHeight),a.left=Math.max(a.left,c.left)}return i=$(g).scrollLeft(),o=$(g).scrollTop(),a.left=Math.max(a.left,i),a.top=Math.max(a.top,o),r={width:BUI.viewportWidth(),height:BUI.viewportHeight()},a.right=Math.min(a.right,i+r.width),a.bottom=Math.min(a.bottom,o+r.height),a.top>=0&&a.left>=0&&a.bottom>a.top&&a.right>a.left?a:null}function n(e,t,n,i){var o,r,a,s;return o={left:e.left,top:e.top},a=c(t,n[0]),s=c(e,n[1]),r=[s.left-a.left,s.top-a.top],{left:o.left-r[0]+ +i[0],top:o.top-r[1]+ +i[1]}}function i(e,t,n){return e.left<n.left||e.left+t.width>n.right}function o(e,t,n){return e.top<n.top||e.top+t.height>n.bottom}function r(e,t,n,i){var o=BUI.cloneObject(e),r={width:t.width,height:t.height};return i.adjustX&&o.left<n.left&&(o.left=n.left),i.resizeWidth&&o.left>=n.left&&o.left+r.width>n.right&&(r.width-=o.left+r.width-n.right),i.adjustX&&o.left+r.width>n.right&&(o.left=Math.max(n.right-r.width,n.left)),i.adjustY&&o.top<n.top&&(o.top=n.top),i.resizeHeight&&o.top>=n.top&&o.top+r.height>n.bottom&&(r.height-=o.top+r.height-n.bottom),i.adjustY&&o.top+r.height>n.bottom&&(o.top=Math.max(n.bottom-r.height,n.top)),BUI.mix(o,r)}function a(e,t,n){var i=[];return $.each(e,function(e,o){i.push(o.replace(t,function(e){return n[e]}))}),i}function s(e,t){return e[t]=-e[t],e}function l(){}function u(e){var t,n,i;return e.length&&!$.isWindow(e[0])?(t=e.offset(),n=e.outerWidth(),i=e.outerHeight()):(t={left:BUI.scrollLeft(),top:BUI.scrollTop()},n=BUI.viewportWidth(),i=BUI.viewportHeight()),t.width=n,t.height=i,t}function c(e,t){var n,i,o=t.charAt(0),r=t.charAt(1),a=e.width,s=e.height;return n=e.left,i=e.top,"c"===o?i+=s/2:"b"===o&&(i+=s),"c"===r?n+=a/2:"r"===r&&(n+=a),{left:n,top:i}}function d(e){var t=e.attr("class"),n=new RegExp("s?"+h+"[a-z]{2}-[a-z]{2}","ig"),i=n.exec(t);i&&e.removeClass(i.join(" "))}var f=require("bui/common/ua"),h="x-align-",g=window;return l.__getOffsetParent=e,l.__getVisibleRectForElement=t,l.ATTRS={align:{shared:!1,value:{}}},l.prototype={_uiSetAlign:function(e){var t,n,i="";e&&e.points&&(this.align(e.node,e.points,e.offset,e.overflow),this.set("cachePosition",null),t=this.get("el"),d(t),n=e.points.join("-"),i=h+n,t.addClass(i))},__bindUI:function(){var e=this;e.on("show",function(){$(window).on("resize",BUI.wrapBehavior(e,"handleWindowResize"))}),e.on("hide",function(){$(window).off("resize",BUI.getWrapBehavior(e,"handleWindowResize"))})},handleWindowResize:function(){var e=this,t=e.get("align");e.set("align",t)},align:function(e,l,c,d){e=$(e||g),c=c&&[].concat(c)||[0,0],d=d||{};var f=this,h=f.get("el"),v=0,p=t(h[0]),m=u(h),b=u(e),C=n(m,b,l,c),I=BUI.merge(m,C);if(p&&(d.adjustX||d.adjustY)){i(C,m,p)&&(v=1,l=a(l,/[lr]/gi,{l:"r",r:"l"}),c=s(c,0)),o(C,m,p)&&(v=1,l=a(l,/[tb]/gi,{t:"b",b:"t"}),c=s(c,1)),v&&(C=n(m,b,l,c),BUI.mix(I,C));var y={};y.adjustX=d.adjustX&&i(C,m,p),y.adjustY=d.adjustY&&o(C,m,p),(y.adjustX||y.adjustY)&&(I=r(C,m,p,y))}return I.left!=m.left&&(f.setInternal("x",null),f.get("view").setInternal("x",null),f.set("x",I.left)),I.top!=m.top&&(f.setInternal("y",null),f.get("view").setInternal("y",null),f.set("y",I.top)),I.width!=m.width&&h.width(h.width()+I.width-m.width),I.height!=m.height&&h.height(h.height()+I.height-m.height),f},center:function(e){var t=this;return t.set("align",{node:e,points:["cc","cc"],offset:[0,0]}),t}},l}),define("bui/component/uibase/autoshow",function(){function e(){}return e.ATTRS={trigger:{},delegateTigger:{getter:function(){this.get("delegateTrigger")},setter:function(e){this.set("delegateTrigger",e)}},delegateTrigger:{value:!1},autoAlign:{value:!0},autoFocused:{value:!0},triggerActiveCls:{},curTrigger:{},triggerCallback:{},triggerEvent:{value:"click"},triggerHideEvent:{},events:{value:{triggerchange:!1}}},e.prototype={__createDom:function(){this._setTrigger()},__bindUI:function(){var e=this,t=e.get("triggerActiveCls");t&&e.on("hide",function(){var n=e.get("curTrigger");n&&n.removeClass(t)})},_setTrigger:function(){function e(e){if(!n.get("disabled")){var t=n.get("curTrigger"),i=$(l?e.currentTarget:this),o=n.get("align");t&&t[0]==i[0]||(t&&t.removeClass(a),n.set("curTrigger",i),n.fire("triggerchange",{prevTrigger:t,curTrigger:i})),i.addClass(a),n.get("autoAlign")&&(o.node=i),n.set("align",o),n.show(),r&&r(e)}}function t(e){var t=e.toElement||e.relatedTarget;t&&n.containsElement(t)||n.hide()}var n=this,i=n.get("triggerEvent"),o=n.get("triggerHideEvent"),r=n.get("triggerCallback"),a=n.get("triggerActiveCls")||"",s=n.get("trigger"),l=n.get("delegateTrigger"),u=$(s);i&&(l&&BUI.isString(s)?$(document).delegate(s,i,e):u.on(i,e)),o&&(l&&BUI.isString(s)?$(document).delegate(s,o,t):u.on(o,t))},__renderUI:function(){var e=this,t=e.get("align");t&&!t.node&&(t.node=e.get("render")||e.get("trigger"))}},e}),define("bui/component/uibase/autohide",function(){function e(e,t){var n=e.get("hideExceptNode");return n&&n.length?$.contains(n[0],t):!1}function t(){}var n=BUI.wrapBehavior,i=BUI.getWrapBehavior;return t.ATTRS={autoHideType:{value:"click"},autoHide:{value:!1},hideExceptNode:{},events:{value:{autohide:!1}}},t.prototype={__bindUI:function(){var e=this;e.on("afterVisibleChange",function(t){var n=t.newVal;e.get("autoHide")&&(n?e._bindHideEvent():e._clearHideEvent())})},handleMoveOuter:function(t){var n=this,i=t.toElement||t.relatedTarget;n.containsElement(i)||e(n,i)||n.fire("autohide")!==!1&&n.hide()},handleDocumentClick:function(t){var n=this,i=t.target;n.containsElement(i)||e(n,i)||n.fire("autohide")!==!1&&n.hide()},_bindHideEvent:function(){var e=this,t=e.get("curTrigger"),i=e.get("autoHideType");"click"===i?$(document).on("mousedown",n(e,"handleDocumentClick")):(e.get("el").on("mouseleave",n(e,"handleMoveOuter")),t&&$(t).on("mouseleave",n(e,"handleMoveOuter")))},_clearHideEvent:function(){var e=this,t=e.get("curTrigger"),n=e.get("autoHideType");"click"===n?$(document).off("mousedown",i(e,"handleDocumentClick")):(e.get("el").off("mouseleave",i(e,"handleMoveOuter")),t&&$(t).off("mouseleave",i(e,"handleMoveOuter")))}},t}),define("bui/component/uibase/close",function(){function e(e){return $(e.get("closeTpl"))}function t(){}function n(){}var i=BUI.prefix+"ext-";t.ATTRS={closeTpl:{value:'<a tabindex="0" href=\'javascript:void("\u5173\u95ed")\' role="button" class="'+i+'close"><span class="'+i+'close-x">\u5173\u95ed</span></a>'},closeable:{value:!0},closeBtn:{}},t.prototype={_uiSetCloseable:function(t){var n=this,i=n.get("closeBtn");t?(i||n.setInternal("closeBtn",i=e(n)),i.appendTo(n.get("el"),void 0)):i&&i.remove()}};var o="hide";n.ATTRS={closeTpl:{view:!0},closeable:{view:1},closeBtn:{view:1},closeAction:{value:o}};var r={hide:o,destroy:"destroy",remove:"remove"};return n.prototype={_uiSetCloseable:function(e){var t=this;e&&!t.__bindCloseEvent&&(t.__bindCloseEvent=1,t.get("closeBtn").on("click",function(e){t.fire("closeclick",{domTarget:e.target})!==!1&&t.close(),e.preventDefault()}))},__destructor:function(){var e=this.get("closeBtn");e&&e.detach()},close:function(){var e=this,t=r[e.get("closeAction")||o];e.fire("closing",{action:t})!==!1&&(e.fire("beforeclosed",{action:t}),"remove"==t?e[t](!0):e[t](),e.fire("closed",{action:t}))}},n.View=t,n}),define("bui/component/uibase/drag",function(){function e(){var e=$(i).css("opacity",0).prependTo("body");return e}var t=BUI.guid("drag"),n=function(){};n.ATTRS={dragNode:{},draging:{setter:function(e){return e===!0?{}:void 0},value:null},constraint:{},dragBackEl:{getter:function(){return $("#"+t)}}};var i='<div id="'+t+'" style="background-color: red; position: fixed; left: 0px; width: 100%; height: 100%; top: 0px; cursor: move; z-index: 999999; display: none; "></div>';return n.prototype={__bindUI:function(){function e(e){var t=o.get("draging");t&&(e.preventDefault(),o._dragMoveTo(e.pageX,e.pageY,t,r))}function t(e){if(1==e.which){o.set("draging",!1);var t=o.get("dragBackEl");t&&t.hide(),i()}}function n(){$(document).on("mousemove",e),$(document).on("mouseup",t)}function i(){$(document).off("mousemove",e),$(document).off("mouseup",t)}var o=this,r=o.get("constraint"),a=o.get("dragNode");a&&a.on("mousedown",function(e){1==e.which&&(e.preventDefault(),o.set("draging",{elX:o.get("x"),elY:o.get("y"),startX:e.pageX,startY:e.pageY}),n())})},_dragMoveTo:function(t,n,i,o){var r=this,a=r.get("dragBackEl"),i=i||r.get("draging"),s=i.startX-t,l=i.startY-n;a.length||(a=e()),a.css({cursor:"move",display:"block"}),r.set("xy",[r._getConstrainX(i.elX-s,o),r._getConstrainY(i.elY-l,o)])},_getConstrainX:function(e,t){var n=this,i=n.get("el").outerWidth(),o=e+i,r=n.get("x");if(t){var a=t.offset();return a.left>=e?a.left:a.left+t.width()<o?a.left+t.width()-i:e}return BUI.isInHorizontalView(e)&&BUI.isInHorizontalView(o)?e:r},_getConstrainY:function(e,t){var n=this,i=n.get("el").outerHeight(),o=e+i,r=n.get("y");if(t){var a=t.offset();return a.top>e?a.top:a.top+t.height()<o?a.top+t.height()-i:e}return BUI.isInVerticalView(e)&&BUI.isInVerticalView(o)?e:r}},n}),define("bui/component/uibase/keynav",["bui/common/keycode"],function(require){var e=require("bui/common/keycode"),t=BUI.wrapBehavior,n=BUI.getWrapBehavior,i=function(){};return i.ATTRS={allowKeyNav:{value:!0},navEvent:{value:"keydown"},ignoreInputFields:{value:!0}},i.prototype={__bindUI:function(){},_uiSetAllowKeyNav:function(e){var i=this,o=i.get("navEvent"),r=i.get("el");e?r.on(o,t(i,"_handleKeyDown")):r.off(o,n(i,"_handleKeyDown"))},_handleKeyDown:function(t){var n=this,i=n.get("ignoreInputFields"),o=t.which;if(!i||!$(t.target).is("input,select,textarea"))switch(o){case e.UP:t.preventDefault(),n.handleNavUp(t);break;case e.DOWN:t.preventDefault(),n.handleNavDown(t);break;case e.RIGHT:t.preventDefault(),n.handleNavRight(t);break;case e.LEFT:t.preventDefault(),n.handleNavLeft(t);break;case e.ENTER:n.handleNavEnter(t);break;case e.ESC:n.handleNavEsc(t);break;case e.TAB:n.handleNavTab(t)}},handleNavUp:function(){},handleNavDown:function(){},handleNavLeft:function(){},handleNavRight:function(){},handleNavEnter:function(){},handleNavEsc:function(){},handleNavTab:function(){}},i}),define("bui/component/uibase/mask",function(require){function e(e){return e.get("prefixCls")+"ext-mask"}function t(){return l?BUI.docWidth()+"px":"100%"}function n(){return l?BUI.docHeight()+"px":"100%"}function i(e){var i=$('<div  style="width:'+t()+";left:0;top:0;height:"+n()+";position:"+(l?"absolute":"fixed")+';" class="'+e+'">'+(l?'<iframe style="position:absolute;left:0;top:0;background:white;width: expression(this.parentNode.offsetWidth);height: expression(this.parentNode.offsetHeight);filter:alpha(opacity=0);z-index:-1;"></iframe>':"")+"</div>").prependTo("body");return i.on("mousedown",function(e){e.preventDefault()}),i}function o(){}function r(){}var a=require("bui/common/ua"),s={},l=6==a.ie;return o.ATTRS={maskShared:{value:!0}},o.prototype={_maskExtShow:function(){var t,n=this,o=e(n),r=s[o],a=n.get("maskShared"),l=n.get("maskNode");l||(a?r?l=r.node:(l=i(o),r=s[o]={num:0,node:l}):l=i(o),n.setInternal("maskNode",l)),(t=n.get("zIndex"))&&l.css("z-index",t-1),a&&r.num++,a&&1!=r.num||l.show(),$("body").addClass("x-masked-relative")},_maskExtHide:function(){var t=this,n=e(t),i=s[n],o=t.get("maskShared"),r=t.get("maskNode");o&&i?(i.num=Math.max(i.num-1,0),0==i.num&&r.hide()):r&&r.hide(),$("body").removeClass("x-masked-relative")},__destructor:function(){var e=this,t=e.get("maskShared"),n=e.get("maskNode");e.get("maskNode")&&(t?e.get("visible")&&e._maskExtHide():n.remove())}},r.ATTRS={mask:{value:!1},maskNode:{view:1},maskShared:{view:1}},r.prototype={__bindUI:function(){{var e=this,t=e.get("view");t._maskExtShow,t._maskExtHide}e.get("mask")&&(e.on("show",function(){t._maskExtShow()}),e.on("hide",function(){t._maskExtHide()}))}},r=r,r.View=o,r}),define("bui/component/uibase/position",function(){function e(){}function t(){}return e.ATTRS={x:{valueFn:function(){var e=this;return e.get("el")&&e.get("el").offset().left}},y:{valueFn:function(){var e=this;return e.get("el")&&e.get("el").offset().top}},zIndex:{},visibleMode:{value:"visibility"}},e.prototype={__createDom:function(){this.get("el").addClass(BUI.prefix+"ext-position")},_uiSetZIndex:function(e){this.get("el").css("z-index",e)},_uiSetX:function(e){null!=e&&this.get("el").offset({left:e})},_uiSetY:function(e){null!=e&&this.get("el").offset({top:e})},_uiSetLeft:function(e){null!=e&&this.get("el").css({left:e})},_uiSetTop:function(e){null!=e&&this.get("el").css({top:e})}},t.ATTRS={x:{view:1},y:{view:1},left:{view:1},top:{view:1},xy:{setter:function(e){var t=this,n=$.makeArray(e);return n.length&&(n[0]&&t.set("x",n[0]),n[1]&&t.set("y",n[1])),e},getter:function(){return[this.get("x"),this.get("y")]}},zIndex:{view:1},visible:{view:!0,value:!0}},t.prototype={move:function(e,t){var n=this;return BUI.isArray(e)&&(t=e[1],e=e[0]),n.set("xy",[e,t]),n},_uiSetX:function(e){if(null!=e){var t=this,n=t.get("el");t.setInternal("left",n.position().left),-999!=e&&this.set("cachePosition",null)}},_uiSetY:function(e){if(null!=e){var t=this,n=t.get("el");t.setInternal("top",n.position().top),-999!=e&&this.set("cachePosition",null)}},_uiSetLeft:function(e){var t=this,n=t.get("el");null!=e&&t.setInternal("x",n.offset().left)},_uiSetTop:function(e){var t=this,n=t.get("el");null!=e&&t.setInternal("y",n.offset().top)}},t.View=e,t}),define("bui/component/uibase/listitem",function(){function e(){}function t(){}return e.ATTRS={selected:{}},e.prototype={_uiSetSelected:function(e){var t=this,n=t.getStatusCls("selected"),i=t.get("el");e?i.addClass(n):i.removeClass(n)}},t.ATTRS={selectable:{value:!0},selected:{view:!0,sync:!1,value:!1}},t.prototype={},t.View=e,t}),define("bui/component/uibase/stdmod",function(){function e(){}function t(e,t){var n=e.get("contentEl"),i=e.get(t);i||(i=$('<div class="'+o+t+'"  ></div>'),i.appendTo(n),e.setInternal(t,i))}function n(e,t,n){t=e.get(t),BUI.isString(n)?t.html(n):t.html("").append(n)}function i(){}var o=BUI.prefix+"stdmod-";return e.ATTRS={header:{},body:{},footer:{},bodyStyle:{},footerStyle:{},headerStyle:{},headerContent:{},bodyContent:{},footerContent:{}},e.PARSER={header:function(e){return e.one("."+o+"header")},body:function(e){return e.one("."+o+"body")},footer:function(e){return e.one("."+o+"footer")}},e.prototype={__renderUI:function(){t(this,"header"),t(this,"body"),t(this,"footer")},_uiSetBodyStyle:function(e){this.get("body").css(e)},_uiSetHeaderStyle:function(e){this.get("header").css(e)},_uiSetFooterStyle:function(e){this.get("footer").css(e)},_uiSetBodyContent:function(e){n(this,"body",e)},_uiSetHeaderContent:function(e){n(this,"header",e)},_uiSetFooterContent:function(e){n(this,"footer",e)}},i.ATTRS={header:{view:1},body:{view:1},footer:{view:1},bodyStyle:{view:1},footerStyle:{view:1},headerStyle:{view:1},headerContent:{view:1},bodyContent:{view:1},footerContent:{view:1}},i.View=e,i}),define("bui/component/uibase/decorate",["bui/common/array","bui/common/json","bui/component/manage"],function(require){function e(e,t){if(t[e])return!0;var n=new RegExp("^"+d);return e!==f&&n.test(e)?!0:!1}function t(e){for(var t=[],n=e.constructor;n;)t.push(n),n=n.superclass&&n.superclass.constructor;return t}function n(e){return e.toLowerCase().replace(v,function(e,t){return(t+"").toUpperCase()})}function i(e){if(e=$.trim(e),"false"===e.toLowerCase())e=!1;else if("true"===e.toLowerCase())e=!0;else if(p.test(e))e=u.looseParse(e);else if(/\d/.test(e)&&/[^a-z]/i.test(e)){var t=parseFloat(e);t+""===e&&(e=t)}return e}function o(e,t){var n=e.userConfig||{};for(var i in t)i in n||e.setInternal(i,t[i])}function r(e,t){var n,i,o=this,r=o.userConfig||{};for(n in t)n in r||(i=t[n],BUI.isFunction(i)?o.setInternal(n,i.call(o,e)):"string"==typeof i?o.setInternal(n,e.find(i)):BUI.isArray(i)&&i[0]&&o.setInternal(n,e.find(i[0])))}function a(e,n){var i,o,a,s=e.constructor;for(a=t(e),i=a.length-1;i>=0;i--)s=a[i],(o=s[h])&&r.call(e,n,o)}function s(e){var t,n,i=e,r=i.get("srcNode");r&&(r=$(r),i.setInternal("el",r),i.setInternal("srcNode",r),t=i.get("userConfig"),n=i.getDecorateConfig(r),o(e,n),i.get("isDecorateChild")&&i.decorateInternal&&i.decorateInternal(r),a(e,r))}function l(){s(this)}var u=(require("bui/common/array"),require("bui/common/json")),c=BUI.prefix,d="data-",f=d+"cfg",h="PARSER",g=require("bui/component/manage"),v=/-([a-z])/g,p=/^[\{\[]/;return l.ATTRS={srcNode:{view:!0},isDecorateChild:{value:!1},decorateCfgFields:{value:{id:!0,name:!0,value:!0,title:!0}}},l.prototype={getDecorateConfig:function(t){if(!t.length)return null;var o=this,r=t[0],a=r.attributes,s=o.get("decorateCfgFields"),l={},u=o._getStautsCfg(t);return BUI.each(a,function(t){var o=t.nodeName;try{if(o===f){var r=i(t.nodeValue);BUI.mix(l,r)}else if(e(o,s)){var a=t.nodeValue;-1!==o.indexOf(d)&&(o=o.replace(d,""),o=n(o),a=i(a)),l[o]&&BUI.isObject(a)?BUI.mix(l[o],a):l[o]=a}}catch(u){BUI.log("parse field error,the attribute is:"+o)}}),BUI.mix(l,u)},_getStautsCfg:function(e){var t=this,n={},i=t.get("statusCls");return BUI.each(i,function(t,i){e.hasClass(t)&&(n[i]=!0)}),n},getDecorateElments:function(){var e=this,t=e.get("el"),n=e.get("childContainer");return n?t.find(n).children():t.children()},decorateInternal:function(e){var t=this;t.decorateChildren(e)},findXClassByNode:function(e,t){var n=this,i=e.attr("class")||"",o=n.get("defaultChildClass");i=i.replace(new RegExp("\\b"+c,"ig"),"");var r=g.getConstructorByXClass(i)||g.getConstructorByXClass(o);return r||t||(BUI.log(e),BUI.error("can not find ui "+i+" from this markup")),g.getXClassByConstructor(r)},decorateChildrenInternal:function(e,t){var n=this,i=n.get("children");i.push({xclass:e,srcNode:t})},decorateChildren:function(){var e=this,t=e.getDecorateElments();BUI.each(t,function(t){var n=e.findXClassByNode($(t));e.decorateChildrenInternal(n,$(t))})}},l}),define("bui/component/uibase/tpl",function(){function e(){}function t(){}return e.ATTRS={tpl:{},tplEl:{}},e.prototype={__renderUI:function(){var e,t=this,n=t.get("childContainer");n&&(e=t.get("el").find(n),e.length&&t.set("contentEl",e))},getTpl:function(e){var t=this,n=t.get("tpl"),i=t.get("tplRender");return e=e||t.getAttrVals(),i?i(e):n?BUI.substitute(n,e):""},setTplContent:function(e){var t=this,n=t.get("el"),i=t.get("content"),o=(t.get("tplEl"),t.getTpl(e));!i&&o&&(n.empty(),n.html(o))}},t.ATTRS={tpl:{view:!0,sync:!1},tplRender:{view:!0,value:null},childContainer:{view:!0}},t.prototype={__renderUI:function(){this.get("srcNode")||this.setTplContent()},updateContent:function(){this.setTplContent()},setTplContent:function(){var e=this,t=e.getAttrVals();e.get("view").setTplContent(t)},_uiSetTpl:function(){this.setTplContent()}},t.View=e,t}),define("bui/component/uibase/collapsable",function(){var e=function(){};e.ATTRS={collapsed:{}},e.prototype={_uiSetCollapsed:function(e){var t=this,n=t.getStatusCls("collapsed"),i=t.get("el");e?i.addClass(n):i.removeClass(n)}};var t=function(){};return t.ATTRS={collapsable:{value:!1},collapsed:{view:!0,value:!1},events:{value:{expanded:!0,collapsed:!0}}},t.prototype={_uiSetCollapsed:function(e){var t=this;t.fire(e?"collapsed":"expanded")}},t.View=e,t}),define("bui/component/uibase/selection",function(){var e=function(){};return e.ATTRS={selectedEvent:{value:"click"},events:{value:{selectedchange:!1,beforeselectedchange:!1,itemselected:!1,itemunselected:!1}},idField:{value:"id"},multipleSelect:{value:!1}},e.prototype={clearSelection:function(){var e=this,t=e.getSelection();BUI.each(t,function(t){e.clearSelected(t)})},getSelection:function(){},getSelected:function(){return this.getSelection()[0]},getSelectedValue:function(){var e=this,t=e.get("idField"),n=e.getSelected();return e.getValueByField(n,t)},getSelectionValues:function(){var e=this,t=e.get("idField"),n=e.getSelection();return $.map(n,function(n){return e.getValueByField(n,t)})},getSelectionText:function(){var e=this,t=e.getSelection();return $.map(t,function(t){return e.getItemText(t)})},clearSelected:function(e){var t=this;e=e||t.getSelected(),e&&t.setItemSelected(e,!1)},getSelectedText:function(){var e=this,t=e.getSelected();return e.getItemText(t)},setSelection:function(e){var t=this;e=BUI.isArray(e)?e:[e],BUI.each(e,function(e){t.setSelected(e)})},setSelected:function(e){var t=this,n=t.get("multipleSelect");if(t.isItemSelectable(e)){if(!n){var i=t.getSelected();e!=i&&t.clearSelected(i)}t.setItemSelected(e,!0)}},isItemSelected:function(){},isItemSelectable:function(){return!0},setItemSelected:function(e,t){var n,i=this;e&&(n=i.isItemSelected(e),n==t)||i.fire("beforeselectedchange",{item:e,selected:t})!==!1&&i.setItemSelectedStatus(e,t)},setItemSelectedStatus:function(){},setAllSelection:function(){},setSelectedByField:function(e,t){t||(t=e,e=this.get("idField"));var n=this,i=n.findItemByField(e,t);n.setSelected(i)},setSelectionByField:function(e,t){t||(t=e,e=this.get("idField"));var n=this;BUI.each(t,function(t){n.setSelectedByField(e,t)})},afterSelected:function(e,t,n){var i=this;t?(i.fire("itemselected",{item:e,domTarget:n}),i.fire("selectedchange",{item:e,domTarget:n,selected:t})):(i.fire("itemunselected",{item:e,domTarget:n}),i.get("multipleSelect")&&i.fire("selectedchange",{item:e,domTarget:n,selected:t}))}},e}),define("bui/component/uibase/list",["bui/component/uibase/selection"],function(require){function e(e,n){var i=n.isController?n.getAttrVals():n,o=e.get("itemTpl"),r=e.get("itemStatusCls"),a=e.get("itemTplRender");if(o&&!i.tpl&&t(n,"tpl",o),a&&!i.tplRender&&t(n,"tplRender",a),r){var s=i.statusCls||n.isController?n.get("statusCls"):{};BUI.each(r,function(e,t){e&&!s[t]&&(s[t]=e)}),t(n,"statusCls",s)}}function t(e,t,n){e.isController?e.set(t,n):e[t]=n}var n=require("bui/component/uibase/selection"),i=function(){};i.ATTRS={items:{shared:!1,view:!0},idField:{value:"id"},itemTpl:{view:!0},itemTplRender:{view:!0},itemStatusCls:{view:!0,value:{}},events:{value:{itemclick:!0}}},i.prototype={getItemCount:function(){return this.getItems().length},getValueByField:function(){},getItems:function(){},getFirstItem:function(){return this.getItemAt(0)},getLastItem:function(){return this.getItemAt(this.getItemCount()-1)},getItemAt:function(e){return this.getItems()[e]||null},getItem:function(e){var t=this.get("idField");return this.findItemByField(t,e)},indexOfItem:function(e){return BUI.Array.indexOf(e,this.getItems())},addItems:function(e){var t=this;BUI.each(e,function(e){t.addItem(e)})},addItemsAt:function(e,t){var n=this;BUI.each(e,function(e,i){n.addItemAt(e,t+i)})},updateItem:function(){},addItem:function(e){return this.addItemAt(e,this.getItemCount())},addItemAt:function(){},findItemByField:function(){},getItemText:function(){},clearItems:function(){var e=this,t=e.getItems();t.splice(0),e.clearControl()},removeItem:function(){},removeItems:function(e){var t=this;BUI.each(e,function(e){t.removeItem(e)})},removeItemAt:function(e){this.removeItem(this.getItemAt(e))},clearControl:function(){}};var o=function(){this.__init()};return o.ATTRS=BUI.merge(!0,i.ATTRS,n.ATTRS,{items:{sync:!1},autoInitItems:{value:!0},isDecorateChild:{value:!0},defaultLoaderCfg:{value:{property:"children",dataType:"json"}}}),BUI.augment(o,i,n,{__init:function(){var e=this,t=e.get("items");t&&e.get("autoInitItems")&&e.addItems(t),e.on("beforeRenderUI",function(){e._beforeRenderUI()})},_uiSetItems:function(e){var t=this;t.clearControl(),t.addItems(e)},_beforeRenderUI:function(){{var t=this,n=t.get("children");t.get("items")}BUI.each(n,function(n){e(t,n)})},__bindUI:function(){var t=this,n=t.get("selectedEvent");t.on(n,function(e){var n=e.target;n.get("selectable")&&(n.get("selected")?t.get("multipleSelect")&&t.clearSelected(n):t.setSelected(n))}),t.on("click",function(e){e.target!==t&&t.fire("itemclick",{item:e.target,domTarget:e.domTarget,domEvent:e})}),t.on("beforeAddChild",function(n){e(t,n.child)}),t.on("beforeRemoveChild",function(e){var n=e.child,i=n.get("selected");i&&(t.get("multipleSelect")?t.clearSelected(n):t.setSelected(null)),n.set("selected",!1)})},clearControl:function(){this.removeChildren(!0)},getItems:function(){return this.get("children")},updateItem:function(e){var t=this,n=t.get("idField"),i=t.findItemByField(n,e[n]);return i&&i.setTplContent(),i},removeItem:function(e){var t=this,n=t.get("idField");e instanceof BUI.Component.Controller||(e=t.findItemByField(n,e[n])),this.removeChild(e,!0)},addItemAt:function(e,t){return this.addChild(e,t)},findItemByField:function(e,t,n){n=n||this;var i=this,o=n.get("children"),r=null;return $(o).each(function(n,o){return o.get(e)==t?r=o:o.get("children").length&&(r=i.findItemByField(e,t,o)),r?!1:void 0}),r},getItemText:function(e){return e.get("el").text()},getValueByField:function(e,t){return e&&e.get(t)},setItemSelectedStatus:function(e,t){var n=this,i=null;e&&(e.set("selected",t),i=e.get("el")),n.afterSelected(e,t,i)},isItemSelected:function(e){return e?e.get("selected"):!1},setAllSelection:function(){var e=this,t=e.getItems();e.setSelection(t)},getSelection:function(){var e=this,t=e.getItems(),n=[];return BUI.each(t,function(t){e.isItemSelected(t)&&n.push(t)}),n}}),i.ChildList=o,i}),define("bui/component/uibase/childcfg",function(){var e=function(){this._init()};return e.ATTRS={defaultChildCfg:{}},e.prototype={_init:function(){var e=this,t=e.get("defaultChildCfg");t&&e.on("beforeAddChild",function(e){var n=e.child;$.isPlainObject(n)&&BUI.each(t,function(e,t){null==n[t]&&(n[t]=e)})})}},e}),define("bui/component/uibase/depends",["bui/component/manage"],function(require){function e(e){var t=r.exec(e),n=t[1],o=t[2],a=i(n);return{source:a,eventType:o}}function t(t,n,i){var o,r=e(n),a=r.source,s=r.eventType;return a&&i&&s&&(BUI.isFunction(i)?o=i:BUI.isArray(i)&&(o=function(){BUI.each(i,function(e){t[e]&&t[e]()})})),o?(r.callbak=o,a.on(s,o),r):null}function n(e){var t=e.source,n=e.eventType,i=e.callbak;t.off(n,i)}function i(e){var t=a.getComponent(e);return t||(t=$("#"+e),t.length||(t=null)),t}function o(){}var r=/^#(.*):(.*)$/,a=require("bui/component/manage");return o.ATTRS={depends:{},dependencesMap:{shared:!1,value:{}}},o.prototype={__syncUI:function(){this.initDependences()
},initDependences:function(){var e=this,t=e.get("depends");BUI.each(t,function(t,n){e.addDependence(n,t)})},addDependence:function(e,n){var i,o=this,r=o.get("dependencesMap");o.removeDependence(e),i=t(o,e,n),i&&(r[e]=i)},removeDependence:function(e){var t=this,i=t.get("dependencesMap"),o=i[e];o&&(n(o),delete i[e])},clearDependences:function(){var e=this,t=e.get("dependencesMap");BUI.each(t,function(e){n(e)}),e.set("dependencesMap",{})},__destructor:function(){this.clearDependences()}},o}),define("bui/component/uibase/bindable",function(){function e(){}return e.ATTRS={store:{},loadMask:{value:!1}},BUI.augment(e,{__bindUI:function(){var e=this,t=e.get("store"),n=e.get("loadMask");t&&(t.on("beforeload",function(t){e.onBeforeLoad(t),n&&n.show&&n.show()}),t.on("load",function(t){e.onLoad(t),n&&n.hide&&n.hide()}),t.on("exception",function(t){e.onException(t),n&&n.hide&&n.hide()}),t.on("add",function(t){e.onAdd(t)}),t.on("remove",function(t){e.onRemove(t)}),t.on("update",function(t){e.onUpdate(t)}),t.on("localsort",function(t){e.onLocalSort(t)}),t.on("filtered",function(t){e.onFiltered(t)}))},__syncUI:function(){var e=this,t=e.get("store");t&&t.hasData()&&e.onLoad()},onBeforeLoad:function(){},onLoad:function(){},onException:function(){},onAdd:function(){},onRemove:function(){},onUpdate:function(){},onLocalSort:function(){},onFiltered:function(){}}),e}),define("bui/component/view",["bui/component/manage","bui/component/uibase"],function(require){var e=require("bui/component/manage"),t=require("bui/component/uibase"),n=document,i=t.extend([t.TplView],{getComponentCssClassWithState:function(e){var t=this,n=t.get("ksComponentCss");return e=e||"",t.getCssClassWithPrefix(n.split(/\s+/).join(e+" ")+e)},getCssClassWithPrefix:e.getCssClassWithPrefix,getKeyEventTarget:function(){return this.get("el")},getContentElement:function(){return this.get("contentEl")||this.get("el")},getStatusCls:function(e){var t=this,n=t.get("statusCls"),i=n[e];return i||(i=t.getComponentCssClassWithState("-"+e)),i},renderUI:function(){var e=this;if(!e.get("srcNode")){var t=e.get("render"),i=e.get("el"),o=e.get("elBefore");o?i.insertBefore(o,void 0):t?i.appendTo(t,void 0):i.appendTo(n.body,void 0)}},createDom:function(){var e=this,t=e.get("contentEl"),n=e.get("el");e.get("srcNode")||(n=$("<"+e.get("elTagName")+">"),t&&n.append(t),e.setInternal("el",n)),n.addClass(e.getComponentCssClassWithState()),t||e.setInternal("contentEl",n)},_uiSetHighlighted:function(e){var t=this,n=t.getStatusCls("hover"),i=t.get("el");i[e?"addClass":"removeClass"](n)},_uiSetDisabled:function(e){var t=this,n=t.getStatusCls("disabled"),i=t.get("el");i[e?"addClass":"removeClass"](n).attr("aria-disabled",e),e&&t.get("highlighted")&&t.set("highlighted",!1),t.get("focusable")&&t.getKeyEventTarget().attr("tabIndex",e?-1:0)},_uiSetActive:function(e){var t=this,n=t.getStatusCls("active");t.get("el")[e?"addClass":"removeClass"](n).attr("aria-pressed",!!e)},_uiSetFocused:function(e){var t=this,n=t.get("el"),i=t.getStatusCls("focused");n[e?"addClass":"removeClass"](i)},_uiSetElAttrs:function(e){this.get("el").attr(e)},_uiSetElCls:function(e){this.get("el").addClass(e)},_uiSetElStyle:function(e){this.get("el").css(e)},_uiSetRole:function(e){e&&this.get("el").attr("role",e)},_uiSetWidth:function(e){this.get("el").width(e)},_uiSetHeight:function(e){var t=this;t.get("el").height(e)},_uiSetContent:function(e){var t,n=this;n.get("srcNode")&&!n.get("rendered")||(t=n.get("contentEl"),"string"==typeof e?t.html(e):e&&t.empty().append(e))},_uiSetVisible:function(e){var t=this,n=t.get("el"),i=t.get("visibleMode");"visibility"===i?n.css("visibility",e?"visible":"hidden"):n.css("display",e?"":"none")},set:function(e,t){var n,o,r,a=this,s=a.__attrs[e];if(!s||!a.get("binded"))return i.superclass.set.call(this,e,t),a;var l=i.superclass.get.call(this,e);return $.isPlainObject(t)||BUI.isArray(t)||l!==t?(i.superclass.set.call(this,e,t),t=a.__attrVals[e],n={attrName:e,prevVal:l,newVal:t},o=BUI.ucfirst(e),r="_uiSet"+o,a[r]&&a[r](t,n),a):a},destructor:function(){var e=this.get("el");e&&e.remove()}},{xclass:"view",priority:0});return i.ATTRS={el:{setter:function(e){return $(e)}},elCls:{},elStyle:{},role:{},width:{},height:{},statusCls:{value:{}},elTagName:{value:"div"},elAttrs:{},content:{},elBefore:{},render:{},visible:{value:!0},visibleMode:{value:"display"},cachePosition:{},contentEl:{valueFn:function(){return this.get("el")}},prefixCls:{value:BUI.prefix},focusable:{value:!0},focused:{},active:{},disabled:{},highlighted:{}},i}),define("bui/component/loader",["bui/common/util"],function(require){"use strict";var e=require("bui/common/util"),t=require("bui/common/base"),n=function(e){n.superclass.constructor.call(this,e),this._init()};return n.ATTRS={url:{},target:{},hasLoad:{value:!1},autoLoad:{},lazyLoad:{},property:{},renderer:{value:function(e){return e}},loadMask:{value:!1},dataType:{value:"text"},ajaxOptions:{value:{type:"get",cache:!1}},params:{},appendParams:{},lastParams:{shared:!1,value:{}},callback:{},failure:{}},e.extend(n,t),e.augment(n,{isLoader:!0,_init:function(){var e=this,t=e.get("autoLoad"),n=e.get("params");e._initMask(),t?e.load(n):(e._initParams(),e._initLazyLoad())},_initLazyLoad:function(){var e=this,t=e.get("target"),n=e.get("lazyLoad");t&&n&&n.event&&t.on(n.event,function(){(!e.get("hasLoad")||n.repeat)&&e.load()})},_initMask:function(){var t=this,n=t.get("target"),i=t.get("loadMask");n&&i&&e.use("bui/mask",function(o){var r=$.isPlainObject(i)?i:{};i=new o.LoadMask(e.mix({el:n.get("el")},r)),t.set("loadMask",i)})},_initParams:function(){var t=this,n=t.get("lastParams"),i=t.get("params");e.mix(n,i)},load:function(t){var n=this,i=n.get("url"),o=n.get("ajaxOptions"),r=n.get("lastParams"),a=n.get("appendParams");t=t||r,t=e.merge(a,t),n.set("lastParams",t),i&&(n.onBeforeLoad(),n.set("hasLoad",!0),$.ajax(e.mix({dataType:n.get("dataType"),data:t,url:i,success:function(e){n.onload(e,t)},error:function(e,i,o){n.onException({jqXHR:e,textStatus:i,errorThrown:o},t)}},o)))},onBeforeLoad:function(){var e=this,t=e.get("loadMask");t&&t.show&&t.show()},onload:function(t,n){var i=this,o=i.get("loadMask"),r=i.get("property"),a=i.get("callback"),s=i.get("renderer"),l=i.get("target");e.isString(t)&&l.set(r,""),l.set(r,s.call(i,t)),o&&o.hide&&o.hide(),a&&a.call(this,t,n)},onException:function(e,t){var n=this,i=n.get("failure");i&&i.call(this,e,t)}}),n}),define("bui/component/controller",["bui/component/uibase","bui/component/manage","bui/component/view","bui/component/loader"],function(require){"use strict";function e(e,t,n){e.create();var i=e.getContentElement(),o=e.get("defaultChildClass");return t.xclass||t instanceof c||(t.xclass=t.xtype?o+"-"+t.xtype:o),t=BUI.Component.create(t,e),t.setInternal("parent",e),t.set("render",i),t.set("elBefore",n),t.create(void 0),t}function t(e){var t,i,o,r,a={},s=e.get("xview");t=e.getAttrs();for(o in t)t.hasOwnProperty(o)&&(i=t[o],i.view&&void 0!==(r=e.get(o))&&(a[o]=r));return delete a.autoRender,a.ksComponentCss=n(e),new s(a)}function n(e){for(var t,n=e.constructor,i=[];n&&n!==c;)t=r.getXClassByConstructor(n),t&&i.push(t),n=n.superclass&&n.superclass.constructor;return i.join(" ")}function i(e,t){var n=e.relatedTarget;return n&&(n===t[0]||$.contains(t,n))}var o=require("bui/component/uibase"),r=require("bui/component/manage"),a=require("bui/component/view"),s=require("bui/component/loader"),l=BUI.wrapBehavior,u=BUI.getWrapBehavior,c=o.extend([o.Decorate,o.Tpl,o.ChildCfg,o.KeyNav,o.Depends],{isController:!0,getCssClassWithPrefix:r.getCssClassWithPrefix,initializer:function(){var e=this;e.get("id")||e.set("id",e.getNextUniqueId()),r.addComponent(e.get("id"),e);var n=t(e);e.setInternal("view",n),e.__view=n},getNextUniqueId:function(){var e=this,t=r.getXClassByConstructor(e.constructor);return BUI.guid(t)},createDom:function(){var e=this,t=e.get("view");t.create(void 0)},renderUI:function(){var e=this,t=e.get("loader");e.get("view").render(),e._initChildren(),t&&e.setInternal("loader",t)},_initChildren:function(e){var t,e,n,i=this;for(e=e||i.get("children").concat(),i.get("children").length=0,t=0;t<e.length;t++)n=i.addChild(e[t]),n.render()},bindUI:function(){var e=this,t=e.get("events");this.on("afterVisibleChange",function(e){this.fire(e.newVal?"show":"hide")}),BUI.each(t,function(t,n){e.publish(n,{bubbles:t})})},containsElement:function(e){var t=this,n=t.get("el"),i=t.get("children"),o=!1;return t.get("rendered")?($.contains(n[0],e)||n[0]===e?o=!0:BUI.each(i,function(t){return t.containsElement(e)?(o=!0,!1):void 0}),o):!1},isChildrenElement:function(e){var t=this,n=t.get("children"),i=!1;return BUI.each(n,function(t){return t.containsElement(e)?(i=!0,!1):void 0}),i},show:function(){var e=this;return e.render(),e.set("visible",!0),e},hide:function(){var e=this;return e.set("visible",!1),e},toggle:function(){return this.set("visible",!this.get("visible")),this},_uiSetFocusable:function(e){var t,n=this,i=n.getKeyEventTarget();e?i.attr("tabIndex",0).attr("hideFocus",!0).on("focus",l(n,"handleFocus")).on("blur",l(n,"handleBlur")).on("keydown",l(n,"handleKeydown")).on("keyup",l(n,"handleKeyUp")):(i.removeAttr("tabIndex"),(t=u(n,"handleFocus"))&&i.off("focus",t),(t=u(n,"handleBlur"))&&i.off("blur",t),(t=u(n,"handleKeydown"))&&i.off("keydown",t),(t=u(n,"handleKeyUp"))&&i.off("keyup",t))},_uiSetHandleMouseEvents:function(e){var t,n=this,i=n.get("el");e?i.on("mouseenter",l(n,"handleMouseEnter")).on("mouseleave",l(n,"handleMouseLeave")).on("contextmenu",l(n,"handleContextMenu")).on("mousedown",l(n,"handleMouseDown")).on("mouseup",l(n,"handleMouseUp")).on("dblclick",l(n,"handleDblClick")):(t=u(n,"handleMouseEnter")&&i.off("mouseenter",t),t=u(n,"handleMouseLeave")&&i.off("mouseleave",t),t=u(n,"handleContextMenu")&&i.off("contextmenu",t),t=u(n,"handleMouseDown")&&i.off("mousedown",t),t=u(n,"handleMouseUp")&&i.off("mouseup",t),t=u(n,"handleDblClick")&&i.off("dblclick",t))},_uiSetFocused:function(e){e&&this.getKeyEventTarget()[0].focus()},_uiSetVisible:function(e){var t=this,n=(t.get("el"),t.get("visibleMode"));if("visibility"===n){if(e){var i=t.get("cachePosition");i&&t.set("xy",i)}if(!e){var i=[t.get("x"),t.get("y")];t.set("cachePosition",i),t.set("xy",[-999,-999])}}},_uiSetChildren:function(e){var t=this,n=BUI.cloneObject(e);t._initChildren(n)},enable:function(){return this.set("disabled",!1),this},disable:function(){return this.set("disabled",!0),this},focus:function(){this.get("focusable")&&this.set("focused",!0)},getContentElement:function(){return this.get("view").getContentElement()},getKeyEventTarget:function(){return this.get("view").getKeyEventTarget()},addChild:function(t,n){var i,o=this,r=o.get("children");return void 0===n&&(n=r.length),o.fire("beforeAddChild",{child:t,index:n}),i=r[n]&&r[n].get("el")||null,t=e(o,t,i),r.splice(n,0,t),o.get("rendered")&&t.render(),o.fire("afterAddChild",{child:t,index:n}),t},remove:function(e){var t=this,n=t.get("parent");return n?n.removeChild(t,e):e&&t.destroy(),t},removeChild:function(e,t){var n=this,i=n.get("children"),o=BUI.Array.indexOf(e,i);if(-1!==o)return n.fire("beforeRemoveChild",{child:e,destroy:t}),-1!==o&&i.splice(o,1),t&&e.destroy&&e.destroy(),n.fire("afterRemoveChild",{child:e,destroy:t}),e},removeChildren:function(e){var t,n=this,i=[].concat(n.get("children"));for(t=0;t<i.length;t++)n.removeChild(i[t],e)},getChildAt:function(e){var t=this.get("children");return t[e]||null},getChild:function(e,t){return this.getChildBy(function(t){return t.get("id")===e},t)},getChildBy:function(e,t){return this.getChildrenBy(e,t)[0]||null},getAppendHeight:function(){var e=this.get("el");return e.outerHeight()-e.height()},getAppendWidth:function(){var e=this.get("el");return e.outerWidth()-e.width()},getChildrenBy:function(e,t){var n=this,i=[];return e?(n.eachChild(function(n){e(n)?i.push(n):t&&(i=i.concat(n.getChildrenBy(e,t)))}),i):i},eachChild:function(e){BUI.each(this.get("children"),e)},handleDblClick:function(e){this.performActionInternal(e),this.isChildrenElement(e.target)||this.fire("dblclick",{domTarget:e.target,domEvent:e})},handleMouseOver:function(e){var t=this,n=t.get("el");i(e,n)||t.handleMouseEnter(e)},handleMouseOut:function(e){var t=this,n=t.get("el");i(e,n)||t.handleMouseLeave(e)},handleMouseEnter:function(e){var t=this;this.set("highlighted",!!e),t.fire("mouseenter",{domTarget:e.target,domEvent:e})},handleMouseLeave:function(e){var t=this;t.set("active",!1),t.set("highlighted",!e),t.fire("mouseleave",{domTarget:e.target,domEvent:e})},handleMouseDown:function(e){var t,n,i=this,o=($(e.target),1===e.which);o&&(n=i.getKeyEventTarget(),i.get("activeable")&&i.set("active",!0),i.get("focusable")&&i.setInternal("focused",!0),i.get("allowTextSelection")||(t=e.target.nodeName,t=t&&t.toLowerCase(),"input"!==t&&"textarea"!==t&&e.preventDefault()),i.isChildrenElement(e.target)||i.fire("mousedown",{domTarget:e.target,domEvent:e}))},handleMouseUp:function(e){var t=this,n=t.isChildrenElement(e.target);t.get("active")&&1===e.which&&(t.performActionInternal(e),t.set("active",!1),n||t.fire("click",{domTarget:e.target,domEvent:e})),n||t.fire("mouseup",{domTarget:e.target,domEvent:e})},handleContextMenu:function(){},handleFocus:function(e){this.set("focused",!!e),this.fire("focus",{domEvent:e,domTarget:e.target})},handleBlur:function(e){this.set("focused",!e),this.fire("blur",{domEvent:e,domTarget:e.target})},handleKeyEventInternal:function(e){var t=this,n=t.isChildrenElement(e.target);return 13===e.which?(n||t.fire("click",{domTarget:e.target,domEvent:e}),this.performActionInternal(e)):void(n||t.fire("keydown",{domTarget:e.target,domEvent:e}))},handleKeydown:function(e){var t=this;return t.handleKeyEventInternal(e)?(e.halt(),!0):void 0},handleKeyUp:function(e){var t=this;t.isChildrenElement(e.target)||t.fire("keyup",{domTarget:e.target,domEvent:e})},performActionInternal:function(){},destructor:function(){var e,t,n=this,i=n.get("children");for(e=n.get("id"),t=0;t<i.length;t++)i[t].destroy&&i[t].destroy();n.get("view").destroy(),r.removeComponent(e)},set:function(e,t,n){var i,o,r,a=this,s=a.__view,l=a.__attrs[e];if(BUI.isObject(e)&&(n=t,BUI.each(e,function(e,t){a.set(t,e,n)})),!s||!l||n&&n.silent)return c.superclass.set.call(this,e,t,n),a;var u=c.superclass.get.call(this,e);return $.isPlainObject(t)||BUI.isArray(t)||u!==t?(i=BUI.ucfirst(e),r="_uiSet"+i,a.fire("before"+i+"Change",{attrName:e,prevVal:u,newVal:t}),a.setInternal(e,t),t=a.__attrVals[e],s&&l.view&&s.set(e,t),o={attrName:e,prevVal:u,newVal:t},a.fire("after"+i+"Change",o),a.get("binded")&&a[r]&&a[r](t,o),a):a},get:function(e){var t=this,n=t.__view,i=t.__attrs[e],o=c.superclass.get.call(this,e);return void 0!==o?o:n&&i&&i.view?n.get(e):o}},{ATTRS:{content:{view:1},elTagName:{view:!0,value:"div"},defaultChildClass:{},xtype:{},id:{view:!0},width:{view:1},height:{view:1},elCls:{view:1},elStyle:{view:1},elAttrs:{view:1},elBefore:{view:1},el:{view:1},events:{value:{click:!0,dblclick:!0,mouseenter:!0,mouseleave:!0,keydown:!0,keyup:!0,focus:!1,blur:!1,mousedown:!0,mouseup:!0,show:!1,hide:!1}},render:{view:1},role:{view:1},statusCls:{view:!0,value:{}},visibleMode:{view:1,value:"display"},visible:{value:!0,view:1},handleMouseEvents:{value:!0},focusable:{value:!1,view:1},defaultLoaderCfg:{value:{property:"content",autoLoad:!0}},loader:{getter:function(e){var t,n=this;return e&&!e.isLoader&&(e.target=n,t=n.get("defaultLoaderCfg"),e=new s(BUI.merge(t,e)),n.setInternal("loader",e)),e}},allowTextSelection:{value:!0},activeable:{value:!0},focused:{view:1},active:{view:1},highlighted:{view:1},children:{sync:!1,shared:!1,value:[]},prefixCls:{value:BUI.prefix,view:1},parent:{setter:function(e){this.addTarget(e)}},disabled:{view:1,value:!1},xview:{value:a}},PARSER:{visible:function(e){var t=this,n=e.css("display"),i=e.css("visibility"),o=t.get("visibleMode");return"none"==n&&"display"==o||"hidden"==i&&"visibility"==o?!1:!0}}},{xclass:"controller",priority:0});return c});